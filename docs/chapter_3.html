<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Chapter 3. Strings – The Little Book of Algorithms</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./chapter_2.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-1fe81d0376b2c50856e68e651e390326.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-27c261d06b905028a18691de25d09dde.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./chapter_3.html"><span class="chapter-title">Chapter 3. Strings</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">The Little Book of Algorithms</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Roadmap</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_1.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Chapter 1. Numbers</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_2.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Chapter 2. Arrays</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter_3.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">Chapter 3. Strings</span></a>
  </div>
</li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#representation" id="toc-representation" class="nav-link active" data-scroll-target="#representation">3.1 Representation</a>
  <ul class="collapse">
  <li><a href="#l0-necklace-of-characters" id="toc-l0-necklace-of-characters" class="nav-link" data-scroll-target="#l0-necklace-of-characters">3.1 L0 — Necklace of Characters</a></li>
  <li><a href="#l1-encodings-efficiency" id="toc-l1-encodings-efficiency" class="nav-link" data-scroll-target="#l1-encodings-efficiency">3.1 L1 — Encodings &amp; Efficiency</a></li>
  <li><a href="#l2-internals-systems" id="toc-l2-internals-systems" class="nav-link" data-scroll-target="#l2-internals-systems">3.1 L2 — Internals &amp; Systems</a></li>
  </ul></li>
  <li><a href="#operations" id="toc-operations" class="nav-link" data-scroll-target="#operations">3.2 Operations</a>
  <ul class="collapse">
  <li><a href="#l0-everyday-string-manipulations" id="toc-l0-everyday-string-manipulations" class="nav-link" data-scroll-target="#l0-everyday-string-manipulations">3.2 L0 — Everyday String Manipulations</a></li>
  <li><a href="#l1-patterns-practical-tricks" id="toc-l1-patterns-practical-tricks" class="nav-link" data-scroll-target="#l1-patterns-practical-tricks">3.2 L1 — Patterns &amp; Practical Tricks</a></li>
  <li><a href="#l2-algorithms-systems" id="toc-l2-algorithms-systems" class="nav-link" data-scroll-target="#l2-algorithms-systems">3.2 L2 — Algorithms &amp; Systems</a></li>
  </ul></li>
  <li><a href="#comparison" id="toc-comparison" class="nav-link" data-scroll-target="#comparison">3.3 Comparison</a>
  <ul class="collapse">
  <li><a href="#l0-equality-ordering" id="toc-l0-equality-ordering" class="nav-link" data-scroll-target="#l0-equality-ordering">3.3 L0 — Equality &amp; Ordering</a></li>
  <li><a href="#l1-collation-locales" id="toc-l1-collation-locales" class="nav-link" data-scroll-target="#l1-collation-locales">3.3 L1 — Collation &amp; Locales</a></li>
  <li><a href="#l2-deep-comparisons" id="toc-l2-deep-comparisons" class="nav-link" data-scroll-target="#l2-deep-comparisons">3.3 L2 — Deep Comparisons</a></li>
  </ul></li>
  <li><a href="#patterns" id="toc-patterns" class="nav-link" data-scroll-target="#patterns">3.4 Patterns</a>
  <ul class="collapse">
  <li><a href="#l0-simple-search" id="toc-l0-simple-search" class="nav-link" data-scroll-target="#l0-simple-search">3.4 L0 — Simple Search</a></li>
  <li><a href="#l1-regular-expressions-in-practice" id="toc-l1-regular-expressions-in-practice" class="nav-link" data-scroll-target="#l1-regular-expressions-in-practice">3.4 L1 — Regular Expressions in Practice</a></li>
  <li><a href="#l2-engines-optimizations" id="toc-l2-engines-optimizations" class="nav-link" data-scroll-target="#l2-engines-optimizations">3.4 L2 — Engines &amp; Optimizations</a></li>
  </ul></li>
  <li><a href="#applications" id="toc-applications" class="nav-link" data-scroll-target="#applications">3.5 Applications</a>
  <ul class="collapse">
  <li><a href="#l0-everyday-uses" id="toc-l0-everyday-uses" class="nav-link" data-scroll-target="#l0-everyday-uses">3.5 L0 — Everyday Uses</a></li>
  <li><a href="#l1-engineering-contexts" id="toc-l1-engineering-contexts" class="nav-link" data-scroll-target="#l1-engineering-contexts">3.5 L1 — Engineering Contexts</a></li>
  <li><a href="#l2-large-scale-systems" id="toc-l2-large-scale-systems" class="nav-link" data-scroll-target="#l2-large-scale-systems">3.5 L2 — Large-Scale Systems</a></li>
  </ul></li>
  <li><a href="#deep-dive-15" id="toc-deep-dive-15" class="nav-link" data-scroll-target="#deep-dive-15">Deep Dive</a>
  <ul class="collapse">
  <li><a href="#representation-1" id="toc-representation-1" class="nav-link" data-scroll-target="#representation-1">3.1 Representation</a></li>
  <li><a href="#operations-1" id="toc-operations-1" class="nav-link" data-scroll-target="#operations-1">3.2 Operations</a></li>
  <li><a href="#comparison-1" id="toc-comparison-1" class="nav-link" data-scroll-target="#comparison-1">3.3 Comparison</a></li>
  <li><a href="#patterns-1" id="toc-patterns-1" class="nav-link" data-scroll-target="#patterns-1">3.4 Patterns</a></li>
  <li><a href="#applications-1" id="toc-applications-1" class="nav-link" data-scroll-target="#applications-1">3.5 Applications</a></li>
  </ul></li>
  <li><a href="#lab" id="toc-lab" class="nav-link" data-scroll-target="#lab">LAB</a>
  <ul class="collapse">
  <li><a href="#representation-2" id="toc-representation-2" class="nav-link" data-scroll-target="#representation-2">3.1 Representation</a></li>
  <li><a href="#operations-2" id="toc-operations-2" class="nav-link" data-scroll-target="#operations-2">3.2 Operations</a></li>
  <li><a href="#comparison-2" id="toc-comparison-2" class="nav-link" data-scroll-target="#comparison-2">3.3 Comparison</a></li>
  <li><a href="#patterns-2" id="toc-patterns-2" class="nav-link" data-scroll-target="#patterns-2">3.4 Patterns</a></li>
  <li><a href="#applications-2" id="toc-applications-2" class="nav-link" data-scroll-target="#applications-2">3.5 Applications</a></li>
  </ul></li>
  <li><a href="#lab-1-string-encodings-in-practice" id="toc-lab-1-string-encodings-in-practice" class="nav-link" data-scroll-target="#lab-1-string-encodings-in-practice">LAB 1: String Encodings in Practice</a>
  <ul class="collapse">
  <li><a href="#goal" id="toc-goal" class="nav-link" data-scroll-target="#goal">Goal</a></li>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a></li>
  <li><a href="#step-by-step" id="toc-step-by-step" class="nav-link" data-scroll-target="#step-by-step">Step-by-Step</a></li>
  <li><a href="#example-python" id="toc-example-python" class="nav-link" data-scroll-target="#example-python">Example (Python)</a></li>
  <li><a href="#expected-results" id="toc-expected-results" class="nav-link" data-scroll-target="#expected-results">Expected Results</a></li>
  <li><a href="#why-it-matters-15" id="toc-why-it-matters-15" class="nav-link" data-scroll-target="#why-it-matters-15">Why it matters</a></li>
  <li><a href="#exercises-14" id="toc-exercises-14" class="nav-link" data-scroll-target="#exercises-14">Exercises</a></li>
  </ul></li>
  <li><a href="#lab-2-string-interning-and-memory-efficiency" id="toc-lab-2-string-interning-and-memory-efficiency" class="nav-link" data-scroll-target="#lab-2-string-interning-and-memory-efficiency">LAB 2: String Interning and Memory Efficiency</a>
  <ul class="collapse">
  <li><a href="#goal-1" id="toc-goal-1" class="nav-link" data-scroll-target="#goal-1">Goal</a></li>
  <li><a href="#setup-1" id="toc-setup-1" class="nav-link" data-scroll-target="#setup-1">Setup</a></li>
  <li><a href="#step-by-step-1" id="toc-step-by-step-1" class="nav-link" data-scroll-target="#step-by-step-1">Step-by-Step</a></li>
  <li><a href="#example-python-1" id="toc-example-python-1" class="nav-link" data-scroll-target="#example-python-1">Example (Python)</a></li>
  <li><a href="#expected-results-1" id="toc-expected-results-1" class="nav-link" data-scroll-target="#expected-results-1">Expected Results</a></li>
  <li><a href="#why-it-matters-16" id="toc-why-it-matters-16" class="nav-link" data-scroll-target="#why-it-matters-16">Why it matters</a></li>
  <li><a href="#exercises-15" id="toc-exercises-15" class="nav-link" data-scroll-target="#exercises-15">Exercises</a></li>
  </ul></li>
  <li><a href="#lab-3-kernel-level-string-operations" id="toc-lab-3-kernel-level-string-operations" class="nav-link" data-scroll-target="#lab-3-kernel-level-string-operations">LAB 3: Kernel-Level String Operations</a>
  <ul class="collapse">
  <li><a href="#goal-2" id="toc-goal-2" class="nav-link" data-scroll-target="#goal-2">Goal</a></li>
  <li><a href="#setup-2" id="toc-setup-2" class="nav-link" data-scroll-target="#setup-2">Setup</a></li>
  <li><a href="#step-by-step-2" id="toc-step-by-step-2" class="nav-link" data-scroll-target="#step-by-step-2">Step-by-Step</a></li>
  <li><a href="#example-c" id="toc-example-c" class="nav-link" data-scroll-target="#example-c">Example (C)</a></li>
  <li><a href="#expected-results-2" id="toc-expected-results-2" class="nav-link" data-scroll-target="#expected-results-2">Expected Results</a></li>
  <li><a href="#why-it-matters-17" id="toc-why-it-matters-17" class="nav-link" data-scroll-target="#why-it-matters-17">Why it matters</a></li>
  <li><a href="#exercises-16" id="toc-exercises-16" class="nav-link" data-scroll-target="#exercises-16">Exercises</a></li>
  </ul></li>
  <li><a href="#lab-4-concatenation-cost-benchmark" id="toc-lab-4-concatenation-cost-benchmark" class="nav-link" data-scroll-target="#lab-4-concatenation-cost-benchmark">LAB 4: Concatenation Cost Benchmark</a>
  <ul class="collapse">
  <li><a href="#goal-3" id="toc-goal-3" class="nav-link" data-scroll-target="#goal-3">Goal</a></li>
  <li><a href="#setup-3" id="toc-setup-3" class="nav-link" data-scroll-target="#setup-3">Setup</a></li>
  <li><a href="#step-by-step-3" id="toc-step-by-step-3" class="nav-link" data-scroll-target="#step-by-step-3">Step-by-Step</a></li>
  <li><a href="#example-python-2" id="toc-example-python-2" class="nav-link" data-scroll-target="#example-python-2">Example (Python)</a></li>
  <li><a href="#expected-results-3" id="toc-expected-results-3" class="nav-link" data-scroll-target="#expected-results-3">Expected Results</a></li>
  <li><a href="#why-it-matters-18" id="toc-why-it-matters-18" class="nav-link" data-scroll-target="#why-it-matters-18">Why it matters</a></li>
  <li><a href="#exercises-17" id="toc-exercises-17" class="nav-link" data-scroll-target="#exercises-17">Exercises</a></li>
  </ul></li>
  <li><a href="#lab-5-regex-basics-explorer" id="toc-lab-5-regex-basics-explorer" class="nav-link" data-scroll-target="#lab-5-regex-basics-explorer">LAB 5: Regex Basics Explorer</a>
  <ul class="collapse">
  <li><a href="#goal-4" id="toc-goal-4" class="nav-link" data-scroll-target="#goal-4">Goal</a></li>
  <li><a href="#setup-4" id="toc-setup-4" class="nav-link" data-scroll-target="#setup-4">Setup</a></li>
  <li><a href="#step-by-step-4" id="toc-step-by-step-4" class="nav-link" data-scroll-target="#step-by-step-4">Step-by-Step</a></li>
  <li><a href="#example-python-3" id="toc-example-python-3" class="nav-link" data-scroll-target="#example-python-3">Example (Python)</a></li>
  <li><a href="#expected-results-4" id="toc-expected-results-4" class="nav-link" data-scroll-target="#expected-results-4">Expected Results</a></li>
  <li><a href="#why-it-matters-19" id="toc-why-it-matters-19" class="nav-link" data-scroll-target="#why-it-matters-19">Why it matters</a></li>
  <li><a href="#exercises-18" id="toc-exercises-18" class="nav-link" data-scroll-target="#exercises-18">Exercises</a></li>
  </ul></li>
  <li><a href="#lab-6-csv-parsing-pitfalls" id="toc-lab-6-csv-parsing-pitfalls" class="nav-link" data-scroll-target="#lab-6-csv-parsing-pitfalls">LAB 6: CSV Parsing Pitfalls</a>
  <ul class="collapse">
  <li><a href="#goal-5" id="toc-goal-5" class="nav-link" data-scroll-target="#goal-5">Goal</a></li>
  <li><a href="#setup-5" id="toc-setup-5" class="nav-link" data-scroll-target="#setup-5">Setup</a></li>
  <li><a href="#step-by-step-5" id="toc-step-by-step-5" class="nav-link" data-scroll-target="#step-by-step-5">Step-by-Step</a></li>
  <li><a href="#example-python-4" id="toc-example-python-4" class="nav-link" data-scroll-target="#example-python-4">Example (Python)</a></li>
  <li><a href="#expected-results-5" id="toc-expected-results-5" class="nav-link" data-scroll-target="#expected-results-5">Expected Results</a></li>
  <li><a href="#why-it-matters-20" id="toc-why-it-matters-20" class="nav-link" data-scroll-target="#why-it-matters-20">Why it matters</a></li>
  <li><a href="#exercises-19" id="toc-exercises-19" class="nav-link" data-scroll-target="#exercises-19">Exercises</a></li>
  </ul></li>
  <li><a href="#lab-7-locale-aware-sorting" id="toc-lab-7-locale-aware-sorting" class="nav-link" data-scroll-target="#lab-7-locale-aware-sorting">LAB 7: Locale-Aware Sorting</a>
  <ul class="collapse">
  <li><a href="#goal-6" id="toc-goal-6" class="nav-link" data-scroll-target="#goal-6">Goal</a></li>
  <li><a href="#setup-6" id="toc-setup-6" class="nav-link" data-scroll-target="#setup-6">Setup</a></li>
  <li><a href="#step-by-step-6" id="toc-step-by-step-6" class="nav-link" data-scroll-target="#step-by-step-6">Step-by-Step</a></li>
  <li><a href="#example-python-5" id="toc-example-python-5" class="nav-link" data-scroll-target="#example-python-5">Example (Python)</a></li>
  <li><a href="#expected-results-6" id="toc-expected-results-6" class="nav-link" data-scroll-target="#expected-results-6">Expected Results</a></li>
  <li><a href="#why-it-matters-21" id="toc-why-it-matters-21" class="nav-link" data-scroll-target="#why-it-matters-21">Why it matters</a></li>
  <li><a href="#exercises-20" id="toc-exercises-20" class="nav-link" data-scroll-target="#exercises-20">Exercises</a></li>
  </ul></li>
  <li><a href="#lab-8-unicode-normalization-demo" id="toc-lab-8-unicode-normalization-demo" class="nav-link" data-scroll-target="#lab-8-unicode-normalization-demo">LAB 8: Unicode Normalization Demo</a>
  <ul class="collapse">
  <li><a href="#goal-7" id="toc-goal-7" class="nav-link" data-scroll-target="#goal-7">Goal</a></li>
  <li><a href="#setup-7" id="toc-setup-7" class="nav-link" data-scroll-target="#setup-7">Setup</a></li>
  <li><a href="#step-by-step-7" id="toc-step-by-step-7" class="nav-link" data-scroll-target="#step-by-step-7">Step-by-Step</a></li>
  <li><a href="#example-python-6" id="toc-example-python-6" class="nav-link" data-scroll-target="#example-python-6">Example (Python)</a></li>
  <li><a href="#expected-results-7" id="toc-expected-results-7" class="nav-link" data-scroll-target="#expected-results-7">Expected Results</a></li>
  <li><a href="#why-it-matters-22" id="toc-why-it-matters-22" class="nav-link" data-scroll-target="#why-it-matters-22">Why it matters</a></li>
  <li><a href="#exercises-21" id="toc-exercises-21" class="nav-link" data-scroll-target="#exercises-21">Exercises</a></li>
  </ul></li>
  <li><a href="#lab-9-confusable-characters-security-check" id="toc-lab-9-confusable-characters-security-check" class="nav-link" data-scroll-target="#lab-9-confusable-characters-security-check">LAB 9: Confusable Characters Security Check</a>
  <ul class="collapse">
  <li><a href="#goal-8" id="toc-goal-8" class="nav-link" data-scroll-target="#goal-8">Goal</a></li>
  <li><a href="#setup-8" id="toc-setup-8" class="nav-link" data-scroll-target="#setup-8">Setup</a></li>
  <li><a href="#step-by-step-8" id="toc-step-by-step-8" class="nav-link" data-scroll-target="#step-by-step-8">Step-by-Step</a></li>
  <li><a href="#example-python-7" id="toc-example-python-7" class="nav-link" data-scroll-target="#example-python-7">Example (Python)</a></li>
  <li><a href="#expected-results-8" id="toc-expected-results-8" class="nav-link" data-scroll-target="#expected-results-8">Expected Results</a></li>
  <li><a href="#why-it-matters-23" id="toc-why-it-matters-23" class="nav-link" data-scroll-target="#why-it-matters-23">Why it matters</a></li>
  <li><a href="#exercises-22" id="toc-exercises-22" class="nav-link" data-scroll-target="#exercises-22">Exercises</a></li>
  </ul></li>
  <li><a href="#lab-10-substring-search-algorithms" id="toc-lab-10-substring-search-algorithms" class="nav-link" data-scroll-target="#lab-10-substring-search-algorithms">LAB 10: Substring Search Algorithms</a>
  <ul class="collapse">
  <li><a href="#goal-9" id="toc-goal-9" class="nav-link" data-scroll-target="#goal-9">Goal</a></li>
  <li><a href="#setup-9" id="toc-setup-9" class="nav-link" data-scroll-target="#setup-9">Setup</a></li>
  <li><a href="#step-by-step-9" id="toc-step-by-step-9" class="nav-link" data-scroll-target="#step-by-step-9">Step-by-Step</a></li>
  <li><a href="#example-python-8" id="toc-example-python-8" class="nav-link" data-scroll-target="#example-python-8">Example (Python)</a></li>
  <li><a href="#expected-results-9" id="toc-expected-results-9" class="nav-link" data-scroll-target="#expected-results-9">Expected Results</a></li>
  <li><a href="#why-it-matters-24" id="toc-why-it-matters-24" class="nav-link" data-scroll-target="#why-it-matters-24">Why it matters</a></li>
  <li><a href="#exercises-23" id="toc-exercises-23" class="nav-link" data-scroll-target="#exercises-23">Exercises</a></li>
  </ul></li>
  <li><a href="#lab-11-regex-engine-catastrophe-redos" id="toc-lab-11-regex-engine-catastrophe-redos" class="nav-link" data-scroll-target="#lab-11-regex-engine-catastrophe-redos">LAB 11: Regex Engine Catastrophe (ReDoS)</a>
  <ul class="collapse">
  <li><a href="#goal-10" id="toc-goal-10" class="nav-link" data-scroll-target="#goal-10">Goal</a></li>
  <li><a href="#setup-10" id="toc-setup-10" class="nav-link" data-scroll-target="#setup-10">Setup</a></li>
  <li><a href="#step-by-step-10" id="toc-step-by-step-10" class="nav-link" data-scroll-target="#step-by-step-10">Step-by-Step</a></li>
  <li><a href="#example-python-9" id="toc-example-python-9" class="nav-link" data-scroll-target="#example-python-9">Example (Python)</a></li>
  <li><a href="#expected-results-10" id="toc-expected-results-10" class="nav-link" data-scroll-target="#expected-results-10">Expected Results</a></li>
  <li><a href="#why-it-matters-25" id="toc-why-it-matters-25" class="nav-link" data-scroll-target="#why-it-matters-25">Why it matters</a></li>
  <li><a href="#exercises-24" id="toc-exercises-24" class="nav-link" data-scroll-target="#exercises-24">Exercises</a></li>
  </ul></li>
  <li><a href="#lab-12-greedy-vs-lazy-matching" id="toc-lab-12-greedy-vs-lazy-matching" class="nav-link" data-scroll-target="#lab-12-greedy-vs-lazy-matching">LAB 12: Greedy vs Lazy Matching</a>
  <ul class="collapse">
  <li><a href="#goal-11" id="toc-goal-11" class="nav-link" data-scroll-target="#goal-11">Goal</a></li>
  <li><a href="#setup-11" id="toc-setup-11" class="nav-link" data-scroll-target="#setup-11">Setup</a></li>
  <li><a href="#step-by-step-11" id="toc-step-by-step-11" class="nav-link" data-scroll-target="#step-by-step-11">Step-by-Step</a></li>
  <li><a href="#example-python-10" id="toc-example-python-10" class="nav-link" data-scroll-target="#example-python-10">Example (Python)</a></li>
  <li><a href="#expected-results-11" id="toc-expected-results-11" class="nav-link" data-scroll-target="#expected-results-11">Expected Results</a></li>
  <li><a href="#why-it-matters-26" id="toc-why-it-matters-26" class="nav-link" data-scroll-target="#why-it-matters-26">Why it matters</a></li>
  <li><a href="#exercises-25" id="toc-exercises-25" class="nav-link" data-scroll-target="#exercises-25">Exercises</a></li>
  </ul></li>
  <li><a href="#lab-13-build-a-mini-inverted-index" id="toc-lab-13-build-a-mini-inverted-index" class="nav-link" data-scroll-target="#lab-13-build-a-mini-inverted-index">LAB 13: Build a Mini Inverted Index</a>
  <ul class="collapse">
  <li><a href="#goal-12" id="toc-goal-12" class="nav-link" data-scroll-target="#goal-12">Goal</a></li>
  <li><a href="#setup-12" id="toc-setup-12" class="nav-link" data-scroll-target="#setup-12">Setup</a></li>
  <li><a href="#step-by-step-12" id="toc-step-by-step-12" class="nav-link" data-scroll-target="#step-by-step-12">Step-by-Step</a></li>
  <li><a href="#example-python-11" id="toc-example-python-11" class="nav-link" data-scroll-target="#example-python-11">Example (Python)</a></li>
  <li><a href="#expected-results-12" id="toc-expected-results-12" class="nav-link" data-scroll-target="#expected-results-12">Expected Results</a></li>
  <li><a href="#why-it-matters-27" id="toc-why-it-matters-27" class="nav-link" data-scroll-target="#why-it-matters-27">Why it matters</a></li>
  <li><a href="#exercises-26" id="toc-exercises-26" class="nav-link" data-scroll-target="#exercises-26">Exercises</a></li>
  </ul></li>
  <li><a href="#lab-14-compression-of-repetitive-strings" id="toc-lab-14-compression-of-repetitive-strings" class="nav-link" data-scroll-target="#lab-14-compression-of-repetitive-strings">LAB 14: Compression of Repetitive Strings</a>
  <ul class="collapse">
  <li><a href="#goal-13" id="toc-goal-13" class="nav-link" data-scroll-target="#goal-13">Goal</a></li>
  <li><a href="#setup-13" id="toc-setup-13" class="nav-link" data-scroll-target="#setup-13">Setup</a></li>
  <li><a href="#step-by-step-13" id="toc-step-by-step-13" class="nav-link" data-scroll-target="#step-by-step-13">Step-by-Step</a></li>
  <li><a href="#example-python-12" id="toc-example-python-12" class="nav-link" data-scroll-target="#example-python-12">Example (Python)</a></li>
  <li><a href="#expected-results-13" id="toc-expected-results-13" class="nav-link" data-scroll-target="#expected-results-13">Expected Results</a></li>
  <li><a href="#why-it-matters-28" id="toc-why-it-matters-28" class="nav-link" data-scroll-target="#why-it-matters-28">Why it matters</a></li>
  <li><a href="#exercises-27" id="toc-exercises-27" class="nav-link" data-scroll-target="#exercises-27">Exercises</a></li>
  </ul></li>
  <li><a href="#lab-15-injection-attack-simulation" id="toc-lab-15-injection-attack-simulation" class="nav-link" data-scroll-target="#lab-15-injection-attack-simulation">LAB 15: Injection Attack Simulation</a>
  <ul class="collapse">
  <li><a href="#goal-14" id="toc-goal-14" class="nav-link" data-scroll-target="#goal-14">Goal</a></li>
  <li><a href="#setup-14" id="toc-setup-14" class="nav-link" data-scroll-target="#setup-14">Setup</a></li>
  <li><a href="#step-by-step-14" id="toc-step-by-step-14" class="nav-link" data-scroll-target="#step-by-step-14">Step-by-Step</a></li>
  <li><a href="#example-python-13" id="toc-example-python-13" class="nav-link" data-scroll-target="#example-python-13">Example (Python)</a></li>
  <li><a href="#expected-results-14" id="toc-expected-results-14" class="nav-link" data-scroll-target="#expected-results-14">Expected Results</a></li>
  <li><a href="#why-it-matters-29" id="toc-why-it-matters-29" class="nav-link" data-scroll-target="#why-it-matters-29">Why it matters</a></li>
  <li><a href="#exercises-28" id="toc-exercises-28" class="nav-link" data-scroll-target="#exercises-28">Exercises</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-title">Chapter 3. Strings</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="representation" class="level2">
<h2 class="anchored" data-anchor-id="representation">3.1 Representation</h2>
<section id="l0-necklace-of-characters" class="level3">
<h3 class="anchored" data-anchor-id="l0-necklace-of-characters">3.1 L0 — Necklace of Characters</h3>
<p>A string is a sequence of characters. Each character can be a letter, number, symbol, or even whitespace. Strings are used to represent text, from simple names and messages to entire documents. In programming, a string is usually enclosed in quotes to tell the computer where it begins and ends. Strings are fundamental because almost every program interacts with text: input from users, output on screens, or data stored in files.</p>
<section id="deep-dive" class="level4">
<h4 class="anchored" data-anchor-id="deep-dive">Deep Dive</h4>
<p>Strings look simple but have a few important properties that beginners must understand.</p>
<!-- Immutability -->
<p>In many languages such as Python, strings cannot be changed after creation. If a program “changes” a string, what really happens is the creation of a new one. This is why appending repeatedly can be costly.</p>
<!-- Indexing and Slicing -->
<p>Each character in a string has a position, starting at 0. Accessing is direct: <code>word[0]</code> gives the first character. Slicing extracts portions: <code>word[1:4]</code> creates a substring.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>String</th>
<th>Index Positions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>"HELLO"</code></td>
<td>H=0, E=1, L=2, L=3, O=4</td>
</tr>
</tbody>
</table>
<p>Negative indices count backward: <code>word[-1]</code> gives the last character.</p>
<!-- 3. Concatenation and Repetition -->
<p>Strings can be combined or repeated. Concatenation uses the <code>+</code> operator; repetition uses <code>*</code>. Example: <code>"Hi" + "!"</code> → <code>"Hi!"</code>, <code>"Na" * 4</code> → <code>"NaNaNaNa"</code>.</p>
<!-- String Literals and Escapes -->
<p>Quotes (<code>'</code> or <code>"</code>) mark strings. Escape characters handle special cases: <code>"\n"</code> is newline, <code>"\t"</code> is tab. Triple quotes allow multi-line text.</p>
<!-- Unicode and ASCII (Intuitive View) -->
<p>Computers store strings as numbers. ASCII is a small table of 128 characters (A–Z, digits, symbols). Unicode is a universal table covering all writing systems. Modern programs use Unicode (usually UTF-8 encoding), allowing text like <code>"こんにちは"</code> or <code>"😊"</code>.</p>
</section>
<section id="worked-example-python" class="level4">
<h4 class="anchored" data-anchor-id="worked-example-python">Worked Example (Python)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Defining different kinds of strings</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>s1 <span class="op">=</span> <span class="st">"Hello"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>s2 <span class="op">=</span> <span class="st">'World'</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>s3 <span class="op">=</span> <span class="st">"""This is </span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="st">a multi-line string."""</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Indexing</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(s1[<span class="dv">0</span>])      <span class="co"># H</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(s1[<span class="op">-</span><span class="dv">1</span>])     <span class="co"># o</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Slicing</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(s1[<span class="dv">1</span>:<span class="dv">4</span>])    <span class="co"># ell</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Concatenation and repetition</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>greeting <span class="op">=</span> s1 <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> s2</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(greeting)   <span class="co"># Hello World</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>laugh <span class="op">=</span> <span class="st">"Ha"</span> <span class="op">*</span> <span class="dv">3</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(laugh)      <span class="co"># HaHaHa</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Escapes</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>quote <span class="op">=</span> <span class="st">"She said: </span><span class="ch">\"</span><span class="st">Yes!</span><span class="ch">\"</span><span class="st">"</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(quote)      <span class="co"># She said: "Yes!"</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Unicode characters</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>emoji <span class="op">=</span> <span class="st">"Smile 😊"</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(emoji)      <span class="co"># Smile 😊</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="why-it-matters" class="level4">
<h4 class="anchored" data-anchor-id="why-it-matters">Why it matters</h4>
<p>Strings are everywhere. They store names, labels, and text messages. They carry commands and configurations in programs. They are the backbone of web pages, logs, and data files. Understanding immutability avoids performance mistakes. Knowing slicing and concatenation makes manipulation easier. Being aware of Unicode prevents bugs in multilingual applications. Strings look simple but are a core abstraction every developer must master.</p>
</section>
<section id="exercises" class="level4">
<h4 class="anchored" data-anchor-id="exercises">Exercises</h4>
<ol type="1">
<li>Take the word <code>"COMPUTER"</code> and print the first, middle, and last character.</li>
<li>Slice the string <code>"PROGRAMMING"</code> to extract <code>"GRAM"</code>.</li>
<li>Concatenate <code>"DATA"</code> and <code>"BASE"</code> into one string without using <code>+</code>.</li>
<li>Repeat the string <code>"Na"</code> four times, then add <code>" Batman!"</code> at the end.</li>
<li>Create a multi-line string containing your name, age, and favorite color.</li>
<li>Find the difference between <code>word[0]</code> and <code>word[-1]</code> in <code>"PYTHON"</code>.</li>
<li>Write a string that contains both single and double quotes.</li>
<li>Show that <code>"abc" * 0</code> results in an empty string.</li>
<li>Print the Unicode string for <code>"😊"</code> alongside a normal word.</li>
<li>Explain in one sentence why immutability matters when working with strings.</li>
</ol>
</section>
</section>
<section id="l1-encodings-efficiency" class="level3">
<h3 class="anchored" data-anchor-id="l1-encodings-efficiency">3.1 L1 — Encodings &amp; Efficiency</h3>
<p>Strings in modern programming languages are more than just “text.” They are data structures designed with specific trade-offs in memory layout, immutability, and performance. At this level, understanding how strings behave internally allows programmers to write faster, safer, and more maintainable code.</p>
<section id="overviewdefinition" class="level4">
<h4 class="anchored" data-anchor-id="overviewdefinition">Overview/Definition</h4>
<p>A string is immutable in many languages, meaning once created, it cannot be changed. This design improves safety and makes strings easier to reason about, but it also affects performance. Operations like concatenation, slicing, and encoding conversions create new strings under the hood. Intermediate programmers must understand how these costs accumulate, when interning optimizes memory usage, and how encodings like UTF-8 and UTF-16 impact representation.</p>
</section>
<section id="deep-dive-1" class="level4">
<h4 class="anchored" data-anchor-id="deep-dive-1">Deep Dive</h4>
<!-- Immutability in Depth -->
<p>Strings cannot be modified in place in Python, Java, or Go. If <code>"hello"</code> is changed to <code>"hallo"</code>, the original object remains untouched, and a new one is created. This has two main consequences:</p>
<ul>
<li>Safe sharing across code without fear of accidental modification.</li>
<li>Extra memory and CPU costs when building new strings repeatedly.</li>
</ul>
<!-- String Interning -->
<p>Languages often reuse identical string values. For example, Python keeps a single <code>"foo"</code> literal in memory if used multiple times. This is called <em>interning</em>.</p>
<ul>
<li>Automatic interning happens for identifiers and some literals.</li>
<li>Manual interning (<code>sys.intern()</code>) can reduce memory in applications with repeated keys (like symbol tables or parsers).</li>
</ul>
<!-- Memory Layout and Encodings -->
<p>Strings store characters differently across languages:</p>
<ul>
<li><p>UTF-8: Variable-width, 1–4 bytes per character. Compact for ASCII-heavy text.</p></li>
<li><p>UTF-16: Mostly 2 bytes per character, but uses surrogate pairs for others.</p></li>
<li><p>UTF-32: Fixed 4 bytes per character, simple but wasteful.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Encoding</th>
<th>Example Text <code>"A😊"</code></th>
<th>Storage Size</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ASCII</td>
<td>not representable</td>
<td>—</td>
</tr>
<tr class="even">
<td>UTF-8</td>
<td><code>0x41 0xF0 0x9F 0x98 0x8A</code></td>
<td>5 bytes</td>
</tr>
<tr class="odd">
<td>UTF-16</td>
<td><code>0x0041 0xD83D 0xDE0A</code></td>
<td>6 bytes</td>
</tr>
<tr class="even">
<td>UTF-32</td>
<td><code>0x00000041 0x0001F60A</code></td>
<td>8 bytes</td>
</tr>
</tbody>
</table>
<p>This matters because operations like slicing or indexing depend on how characters are encoded.</p></li>
</ul>
<p>Concatenation Costs</p>
<ul>
<li>In Python, <code>a + b</code> builds a new string by copying both inputs.</li>
<li>Repeated concatenation inside loops leads to quadratic performance.</li>
<li>Solution: accumulate pieces in a list and join once.</li>
</ul>
<p>Example of inefficient vs efficient approach:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inefficient</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> <span class="st">""</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1000</span>):</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    result <span class="op">+=</span> <span class="bu">str</span>(i)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Efficient</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>parts <span class="op">=</span> []</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1000</span>):</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    parts.append(<span class="bu">str</span>(i))</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> <span class="st">""</span>.join(parts)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Slicing and Substrings</p>
<ul>
<li>In Python, <code>s[2:5]</code> creates a new string, copying data.</li>
<li>In Java before version 7u6, substrings shared the same underlying array (risking memory leaks if a small substring referenced a huge array). After 7u6, substring copies data to avoid this issue.</li>
<li>In C++, <code>std::string_view</code> allows non-owning references to substrings without copying.</li>
</ul>
<p>Encoding and Decoding</p>
<ul>
<li>Strings are abstract characters; at some point, they must become bytes.</li>
<li><code>.encode()</code> turns a Python <code>str</code> into bytes using a given encoding.</li>
<li><code>.decode()</code> reverses the process.</li>
<li>Pitfalls: decoding with the wrong encoding leads to errors or corrupted text.</li>
</ul>
<p>Performance Pitfalls in Practice</p>
<ul>
<li>Parsing logs or JSON with millions of lines can cause memory spikes if string copies accumulate.</li>
<li>Unicode introduces complexity: slicing <code>"😊"</code> may split it in half if treated as bytes instead of characters.</li>
<li>Benchmarking is essential when dealing with high-throughput text pipelines.</li>
</ul>
<p>Cross-Language Comparisons</p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 29%">
<col style="width: 63%">
</colgroup>
<thead>
<tr class="header">
<th>Language</th>
<th>Representation</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Python</td>
<td>Unicode (PEP 393 flexible storage)</td>
<td>Optimized for compactness.</td>
</tr>
<tr class="even">
<td>Java</td>
<td>UTF-16, immutable <code>String</code></td>
<td>Uses <code>StringBuilder</code> for mutable ops.</td>
</tr>
<tr class="odd">
<td>C++</td>
<td><code>std::string</code>, <code>string_view</code></td>
<td>SSO (small string optimization) avoids heap allocation for short strings.</td>
</tr>
<tr class="even">
<td>Go</td>
<td>UTF-8 encoded immutable slices</td>
<td><code>string</code> is a read-only <code>[]byte</code>.</td>
</tr>
</tbody>
</table>
</section>
<section id="worked-example-python-1" class="level4">
<h4 class="anchored" data-anchor-id="worked-example-python-1">Worked Example (Python)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Interning demonstration</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="st">"hello"</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> <span class="st">"hello"</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a <span class="kw">is</span> b)  <span class="co"># True, both refer to the same interned literal</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Manual interning</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> sys.<span class="bu">intern</span>(<span class="st">"repeated_key"</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> sys.<span class="bu">intern</span>(<span class="st">"repeated_key"</span>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x <span class="kw">is</span> y)  <span class="co"># True</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Encoding and decoding</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="st">"Café"</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>encoded <span class="op">=</span> text.encode(<span class="st">"utf-8"</span>)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(encoded)  <span class="co"># b'Caf\xc3\xa9'</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>decoded <span class="op">=</span> encoded.decode(<span class="st">"utf-8"</span>)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(decoded)  <span class="co"># Café</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Concatenation efficiency</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>words <span class="op">=</span> [<span class="st">"alpha"</span>, <span class="st">"beta"</span>, <span class="st">"gamma"</span>]</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>joined <span class="op">=</span> <span class="st">"-"</span>.join(words)</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(joined)  <span class="co"># alpha-beta-gamma</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="why-it-matters-1" class="level4">
<h4 class="anchored" data-anchor-id="why-it-matters-1">Why it matters</h4>
<p>Intermediate-level understanding of string representation prevents subtle but costly mistakes. Knowing that strings are immutable avoids slow concatenation loops. Interning saves memory in large-scale text-heavy systems. Choosing the right encoding prevents bugs when handling international text. Understanding substring behavior helps avoid hidden memory leaks. These details directly impact performance, correctness, and reliability in production systems.</p>
</section>
<section id="exercises-1" class="level4">
<h4 class="anchored" data-anchor-id="exercises-1">Exercises</h4>
<ol type="1">
<li>Write code that shows the difference in performance between concatenating strings in a loop and using <code>join</code>.</li>
<li>Demonstrate string interning: show two identical literals referencing the same object.</li>
<li>Encode and decode a string containing accented characters using UTF-8.</li>
<li>Take a long string and slice it into two halves; explain why slicing creates a new object in Python.</li>
<li>Compare memory usage between UTF-8 and UTF-16 for a text that contains only ASCII characters.</li>
<li>Investigate what happens when decoding a UTF-8 byte sequence with ASCII encoding.</li>
<li>Show why <code>"😊"[0]</code> in Python gives a character but in UTF-8 byte arrays it spans multiple bytes.</li>
<li>Explain the difference between Java <code>String</code> and <code>StringBuilder</code> in terms of mutability.</li>
<li>Write code that demonstrates the effect of <code>sys.intern()</code> on repeated keys.</li>
<li>Research and explain how <code>std::string_view</code> in C++ avoids copies.</li>
</ol>
</section>
</section>
<section id="l2-internals-systems" class="level3">
<h3 class="anchored" data-anchor-id="l2-internals-systems">3.1 L2 — Internals &amp; Systems</h3>
<p>Strings are central to modern software, but their internal design depends heavily on language, runtime, and operating system. At this level, understanding low-level representation, OS interaction, and hardware acceleration becomes critical.</p>
<p>Strings are immutable in most high-level languages, but under the hood they are arrays of bytes or characters managed by the runtime. Different languages make different trade-offs: memory layout, encoding choice, and substring handling. The operating system provides system calls for moving string data between memory and devices. Hardware accelerates common operations like copying and comparison. Production libraries extend functionality for correctness and speed.</p>
<section id="deep-dive-2" class="level4">
<h4 class="anchored" data-anchor-id="deep-dive-2">Deep Dive</h4>
<section id="low-level-representations" class="level5">
<h5 class="anchored" data-anchor-id="low-level-representations">Low-Level Representations</h5>
<p>C strings are arrays of <code>char</code> terminated by <code>'\0'</code>. A missing terminator causes buffer overflows. C++ <code>std::string</code> stores length and data, with small string optimization (SSO) to keep short strings inline. Python uses PEP 393: compact Unicode with 1, 2, or 4 bytes per character depending on the highest code point. Java <code>String</code> is UTF-16, compressed if all characters fit in Latin-1. Go strings are immutable slices of bytes; Rust distinguishes <code>String</code> (owned) and <code>&amp;str</code> (borrowed).</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Language</th>
<th>Representation</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>C</td>
<td><code>char *</code> + <code>'\0'</code></td>
<td>Simple but unsafe.</td>
</tr>
<tr class="even">
<td>C++</td>
<td><code>std::string</code>, SSO</td>
<td>Short strings inline.</td>
</tr>
<tr class="odd">
<td>Python</td>
<td>Flexible Unicode</td>
<td>Adapts width per string.</td>
</tr>
<tr class="even">
<td>Java</td>
<td>UTF-16, compressed</td>
<td>Immutable.</td>
</tr>
<tr class="odd">
<td>Go</td>
<td>UTF-8, slice view</td>
<td>Immutable.</td>
</tr>
<tr class="even">
<td>Rust</td>
<td><code>String</code> / <code>&amp;str</code></td>
<td>UTF-8 guaranteed.</td>
</tr>
</tbody>
</table>
</section>
<section id="os-level-considerations" class="level5">
<h5 class="anchored" data-anchor-id="os-level-considerations">OS-Level Considerations</h5>
<p>Strings occupy stack or heap memory. Large strings cause fragmentation. Garbage-collected languages like Java and Python reclaim unused strings automatically. System calls (<code>read</code>, <code>write</code>) exchange raw bytes with the OS. In C, forgetting <code>'\0'</code> causes overruns. At boundaries (sockets, files), encoding mismatches are a common source of bugs.</p>
</section>
<section id="hardware-level-considerations" class="level5">
<h5 class="anchored" data-anchor-id="hardware-level-considerations">Hardware-Level Considerations</h5>
<p>Performance depends on cache alignment. A string aligned to cache lines is scanned faster. Libraries like <code>glibc</code> use SIMD instructions for <code>memcpy</code>, <code>memcmp</code>, and <code>strlen</code>, processing multiple bytes per CPU instruction. Large-scale search and comparison rely on vectorized instructions. Misaligned memory leads to extra CPU cycles.</p>
</section>
<section id="advanced-encoding-issues" class="level5">
<h5 class="anchored" data-anchor-id="advanced-encoding-issues">Advanced Encoding Issues</h5>
<p>Unicode normalization ensures two strings that look identical are stored in the same form. NFC and NFD differ in how accents are represented. UTF-16 surrogate pairs represent code points beyond <code>0xFFFF</code>. Grapheme clusters (like “👨‍👩‍👧‍👦”) span multiple code points but behave as one character for users. Security issues arise: Unicode confusables trick users (<code>а</code> in Cyrillic vs <code>a</code> in Latin), and null characters may bypass string checks in C.</p>
</section>
<section id="production-libraries-techniques" class="level5">
<h5 class="anchored" data-anchor-id="production-libraries-techniques">Production Libraries &amp; Techniques</h5>
<p>ICU provides collation, normalization, and locale-sensitive operations. RE2 avoids regex backtracking vulnerabilities. Hyperscan accelerates string matching using SIMD. String views or slices in C++ and Rust enable zero-copy substrings.</p>
</section>
<section id="performance-engineering" class="level5">
<h5 class="anchored" data-anchor-id="performance-engineering">Performance Engineering</h5>
<p>Concatenation cost is linear in total length. Substrings may leak memory if they reference a large parent buffer (Java pre-7u6). Copy semantics avoid leaks but cost memory. Benchmarking is necessary to choose the right trade-off. Immutability simplifies reasoning but requires builders (<code>StringBuilder</code>, <code>bytes.Buffer</code>) for efficiency.</p>
</section>
</section>
<section id="worked-example-python-2" class="level4">
<h4 class="anchored" data-anchor-id="worked-example-python-2">Worked Example (Python)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> unicodedata</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Representation ---</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>ascii_text <span class="op">=</span> <span class="st">"Hello"</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>unicode_text <span class="op">=</span> <span class="st">"こんにちは😊"</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"ASCII:"</span>, <span class="bu">len</span>(ascii_text), <span class="st">"chars,"</span>, <span class="bu">len</span>(ascii_text.encode(<span class="st">"utf-8"</span>)), <span class="st">"bytes"</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Unicode:"</span>, <span class="bu">len</span>(unicode_text), <span class="st">"chars,"</span>, <span class="bu">len</span>(unicode_text.encode(<span class="st">"utf-8"</span>)), <span class="st">"bytes"</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Encoding/Decoding ---</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> <span class="st">"Café"</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>utf8_bytes <span class="op">=</span> data.encode(<span class="st">"utf-8"</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"UTF-8 bytes:"</span>, utf8_bytes)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Decoded back:"</span>, utf8_bytes.decode(<span class="st">"utf-8"</span>))</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Interning ---</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="st">"hello"</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> <span class="st">"hello"</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"a is b:"</span>, a <span class="kw">is</span> b)</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> sys.<span class="bu">intern</span>(<span class="st">"repeated_key"</span>)</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> sys.<span class="bu">intern</span>(<span class="st">"repeated_key"</span>)</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"x is y:"</span>, x <span class="kw">is</span> y)</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Concatenation benchmark ---</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">20000</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> time.time()</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">""</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    s <span class="op">+=</span> <span class="st">"x"</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Naive concat time:"</span>, <span class="bu">round</span>(time.time() <span class="op">-</span> start, <span class="dv">4</span>), <span class="st">"s"</span>)</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> time.time()</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>parts <span class="op">=</span> [<span class="st">"x"</span> <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(N)]</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">""</span>.join(parts)</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Join concat time:"</span>, <span class="bu">round</span>(time.time() <span class="op">-</span> start, <span class="dv">4</span>), <span class="st">"s"</span>)</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Unicode normalization ---</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>s1 <span class="op">=</span> <span class="st">"café"</span>          <span class="co"># composed</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>s2 <span class="op">=</span> <span class="st">"cafe</span><span class="ch">\u0301</span><span class="st">"</span>    <span class="co"># decomposed</span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Raw equal:"</span>, s1 <span class="op">==</span> s2)</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"NFC equal:"</span>, unicodedata.normalize(<span class="st">"NFC"</span>, s1) <span class="op">==</span> unicodedata.normalize(<span class="st">"NFC"</span>, s2))</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Surrogate pairs &amp; grapheme clusters ---</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>smile <span class="op">=</span> <span class="st">"😊"</span></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"UTF-16 units:"</span>, <span class="bu">len</span>(smile.encode(<span class="st">"utf-16"</span>)) <span class="op">//</span> <span class="dv">2</span>)</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>family <span class="op">=</span> <span class="st">"👨‍👩‍👧‍👦"</span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Family code points:"</span>, <span class="bu">len</span>(family), <span class="st">"rendered:"</span>, family)</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Unicode confusables ---</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>latin_a <span class="op">=</span> <span class="st">"a"</span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>cyrillic_a <span class="op">=</span> <span class="st">"а"</span>  <span class="co"># visually similar</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Latin a == Cyrillic a:"</span>, latin_a <span class="op">==</span> cyrillic_a)</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Latin ord:"</span>, <span class="bu">ord</span>(latin_a), <span class="st">"Cyrillic ord:"</span>, <span class="bu">ord</span>(cyrillic_a))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="why-it-matters-2" class="level4">
<h4 class="anchored" data-anchor-id="why-it-matters-2">Why it matters</h4>
<p>Knowing internals prevents bugs and security issues. Buffer overflows from missing terminators break systems. Misunderstood Unicode can cause errors in databases or user interfaces. Cache alignment and SIMD accelerate processing of huge text datasets. Normalization avoids mismatched text values. Confusables create attack vectors. Production systems depend on engineers understanding these low-level details.</p>
</section>
<section id="exercises-2" class="level4">
<h4 class="anchored" data-anchor-id="exercises-2">Exercises</h4>
<ol type="1">
<li>Explain why a string with a missing terminator can cause reading beyond its memory.</li>
<li>Compare how many bytes the string <code>"Hello"</code> uses in UTF-8, UTF-16, and UTF-32.</li>
<li>Show two visually identical strings that are not equal because of different Unicode code points.</li>
<li>Demonstrate normalization making two unequal strings equal.</li>
<li>Measure and compare performance between naive concatenation and buffered concatenation.</li>
<li>Explain how surrogate pairs represent characters beyond <code>0xFFFF</code>.</li>
<li>Construct a grapheme cluster (like a family emoji) and count its code points versus user-perceived characters.</li>
<li>Show how substring references can create memory leaks if the original large string is kept alive.</li>
<li>Investigate how cache alignment could affect the speed of scanning a very large string.</li>
<li>Design a test case that reveals a security risk using Unicode confusables.</li>
</ol>
</section>
</section>
</section>
<section id="operations" class="level2">
<h2 class="anchored" data-anchor-id="operations">3.2 Operations</h2>
<section id="l0-everyday-string-manipulations" class="level3">
<h3 class="anchored" data-anchor-id="l0-everyday-string-manipulations">3.2 L0 — Everyday String Manipulations</h3>
<p>Strings are not only stored but also actively used and modified. Beginners often start with everyday tasks: changing text to uppercase, trimming spaces, searching for words, and building sentences. These operations are simple yet powerful, and they form the foundation of text processing in any program.</p>
<p>String operations are ways to manipulate or examine text. They include changing case, removing whitespace, searching for substrings, splitting sentences into words, joining words into sentences, and formatting messages. These actions are essential for handling user input, displaying results, and working with text files.</p>
<section id="deep-dive-3" class="level4">
<h4 class="anchored" data-anchor-id="deep-dive-3">Deep Dive</h4>
<section id="case-conversion" class="level5">
<h5 class="anchored" data-anchor-id="case-conversion">Case Conversion</h5>
<p>Text often needs to be converted. Uppercase makes words stand out (<code>"hello" → "HELLO"</code>). Lowercase is useful for comparisons (<code>"Yes"</code> vs <code>"yes"</code>). Case conversion helps normalize text before processing.</p>
</section>
<section id="trimming-whitespace" class="level5">
<h5 class="anchored" data-anchor-id="trimming-whitespace">Trimming Whitespace</h5>
<p>Whitespace before or after text causes bugs when comparing values. <code>" hello "</code> is not the same as <code>"hello"</code>. Trimming removes unwanted spaces, tabs, or newlines.</p>
</section>
<section id="replacing-substrings" class="level5">
<h5 class="anchored" data-anchor-id="replacing-substrings">Replacing Substrings</h5>
<p>Sometimes one part of text must change. <code>"cat".replace("c", "h")</code> becomes <code>"hat"</code>. Replacing works for single characters or words.</p>
</section>
<section id="searching-in-strings" class="level5">
<h5 class="anchored" data-anchor-id="searching-in-strings">Searching in Strings</h5>
<p>Finding a substring answers whether <code>"dog"</code> appears inside <code>"hotdog"</code>. Many languages return the index where the substring begins. If not found, they return a special value (like <code>-1</code> or <code>None</code>).</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Example</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Contains</td>
<td><code>"hello" in "say hello"</code></td>
<td>True</td>
</tr>
<tr class="even">
<td>Index</td>
<td><code>"abc".find("b")</code></td>
<td>1</td>
</tr>
<tr class="odd">
<td>Not found</td>
<td><code>"abc".find("z")</code></td>
<td>-1 (or equivalent)</td>
</tr>
</tbody>
</table>
</section>
<section id="splitting-and-joining" class="level5">
<h5 class="anchored" data-anchor-id="splitting-and-joining">Splitting and Joining</h5>
<p>Splitting breaks text into parts: <code>"one two three"</code> → <code>["one", "two", "three"]</code>. Joining does the reverse: <code>["a","b","c"]</code> → <code>"a-b-c"</code>. They are inverse operations.</p>
</section>
<section id="formatting" class="level5">
<h5 class="anchored" data-anchor-id="formatting">Formatting</h5>
<p>Combining variables with text creates messages. <code>"Hello " + name</code> works, but formatting systems are clearer: <code>"Hello, {name}!"</code>. Formatting ensures readable and consistent text output.</p>
</section>
</section>
<section id="worked-example-python-3" class="level4">
<h4 class="anchored" data-anchor-id="worked-example-python-3">Worked Example (Python)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Case conversion</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>word <span class="op">=</span> <span class="st">"Hello"</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(word.upper())   <span class="co"># HELLO</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(word.lower())   <span class="co"># hello</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Trimming whitespace</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="st">"   data  "</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Before:"</span>, <span class="bu">repr</span>(text))</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"After:"</span>, <span class="bu">repr</span>(text.strip()))</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Replacing substrings</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>animal <span class="op">=</span> <span class="st">"cat"</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(animal.replace(<span class="st">"c"</span>, <span class="st">"h"</span>))  <span class="co"># hat</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Searching</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>sentence <span class="op">=</span> <span class="st">"the quick brown fox"</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"fox"</span> <span class="kw">in</span> sentence)        <span class="co"># True</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sentence.find(<span class="st">"quick"</span>))   <span class="co"># 4</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sentence.find(<span class="st">"dog"</span>))     <span class="co"># -1</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Splitting and joining</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>line <span class="op">=</span> <span class="st">"one two three"</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>parts <span class="op">=</span> line.split(<span class="st">" "</span>)</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parts)  <span class="co"># ['one', 'two', 'three']</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>joined <span class="op">=</span> <span class="st">"-"</span>.join(parts)</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(joined)  <span class="co"># one-two-three</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Formatting</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>name <span class="op">=</span> <span class="st">"Alice"</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>age <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"My name is </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">, I am </span><span class="sc">{</span>age<span class="sc">}</span><span class="ss"> years old."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="why-it-matters-3" class="level4">
<h4 class="anchored" data-anchor-id="why-it-matters-3">Why it matters</h4>
<p>Text is everywhere: names, messages, configuration files, logs. Programs must read, search, and reshape strings constantly. Converting case enables reliable comparisons. Trimming prevents subtle errors with extra spaces. Splitting and joining support structured data handling. Formatting improves readability for users. These basic operations turn raw text into structured, usable information.</p>
</section>
<section id="exercises-3" class="level4">
<h4 class="anchored" data-anchor-id="exercises-3">Exercises</h4>
<ol type="1">
<li>Convert the string <code>"python"</code> to uppercase and lowercase.</li>
<li>Remove extra spaces from <code>"   hello world   "</code>.</li>
<li>Replace <code>"dog"</code> with <code>"cat"</code> in the sentence <code>"the dog barked"</code>.</li>
<li>Check if <code>"apple"</code> is inside <code>"pineapple"</code>.</li>
<li>Find the position of <code>"moon"</code> in <code>"the moon rises"</code>.</li>
<li>Split <code>"red,green,blue"</code> into parts and then join them back with <code>"|"</code>.</li>
<li>Count how many times the word <code>"the"</code> appears in <code>"the cat and the dog"</code>.</li>
<li>Format a string that says <code>"My favorite number is X"</code>, where <code>X</code> is any integer.</li>
<li>Combine a list of words into a sentence with spaces in between.</li>
<li>Explain in one sentence why trimming whitespace is important when processing user input.</li>
</ol>
<p>Do you want me to continue with 3.2 L1 in the same structured style, adding intermediate concepts like regex basics and efficient searching?</p>
</section>
</section>
<section id="l1-patterns-practical-tricks" class="level3">
<h3 class="anchored" data-anchor-id="l1-patterns-practical-tricks">3.2 L1 — Patterns &amp; Practical Tricks</h3>
<p>Strings are not only for simple manipulations. In real programs, text must be searched, parsed, and transformed efficiently. At this level, the focus shifts from basic usage to techniques that handle larger inputs, avoid performance traps, and apply structured text processing.</p>
<p>Intermediate string operations expand beyond uppercase, trimming, and splitting. They involve efficient searching, counting, and pattern matching. Regular expressions become a tool for flexible matching. Developers also need to parse structured data such as CSV and JSON, where correctness and performance both matter.</p>
<section id="deep-dive-4" class="level4">
<h4 class="anchored" data-anchor-id="deep-dive-4">Deep Dive</h4>
<section id="efficient-searching" class="level5">
<h5 class="anchored" data-anchor-id="efficient-searching">Efficient Searching</h5>
<p>Most languages provide methods like <code>find</code>, <code>index</code>, <code>startswith</code>, and <code>endswith</code>. These run in linear time but are implemented with optimizations in native code. Checking prefixes and suffixes avoids scanning the entire string.</p>
</section>
<section id="counting-and-replacing" class="level5">
<h5 class="anchored" data-anchor-id="counting-and-replacing">Counting and Replacing</h5>
<p>Counting how many times a substring occurs is essential for statistics or validation. Replacing substrings can transform logs or templates. Efficiency matters: repeated replacements in large text can be costly.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Example Input</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Startswith</td>
<td><code>"hello".startswith("he")</code></td>
<td>True</td>
</tr>
<tr class="even">
<td>Endswith</td>
<td><code>"world".endswith("ld")</code></td>
<td>True</td>
</tr>
<tr class="odd">
<td>Count substring</td>
<td><code>"banana".count("na")</code></td>
<td>2</td>
</tr>
<tr class="even">
<td>Replace</td>
<td><code>"2025-09".replace("-", "/")</code></td>
<td><code>"2025/09"</code></td>
</tr>
</tbody>
</table>
</section>
<section id="regular-expressions-regex" class="level5">
<h5 class="anchored" data-anchor-id="regular-expressions-regex">Regular Expressions (Regex)</h5>
<p>Regex allows powerful pattern matching with symbols:</p>
<ul>
<li><code>.</code> matches any character.</li>
<li><code>*</code> means repeat zero or more times.</li>
<li><code>+</code> means one or more times.</li>
<li><code>[abc]</code> matches any of the listed characters.</li>
</ul>
<p>Example:</p>
<ul>
<li>Pattern <code>[0-9]+</code> matches any sequence of digits.</li>
<li>Pattern <code>\w+@\w+\.\w+</code> matches simple email addresses.</li>
</ul>
<p>Regex engines vary: some use backtracking (flexible but can be slow), others use DFA/NFA (linear-time but less expressive).</p>
</section>
<section id="parsing-structured-text" class="level5">
<h5 class="anchored" data-anchor-id="parsing-structured-text">Parsing Structured Text</h5>
<p>Many formats (CSV, JSON, logs) are line-based text. Splitting on commas or spaces is not enough for robust parsing, but for simple cases splitting and trimming work. Intermediate developers should know the limitations of naive parsing and when to use libraries.</p>
</section>
<section id="performance-pitfalls" class="level5">
<h5 class="anchored" data-anchor-id="performance-pitfalls">Performance Pitfalls</h5>
<p>Naive string concatenation inside loops can be quadratic in cost. Multiple find/replace calls on large inputs can also degrade performance. The best practice is to buffer results or use streaming parsers.</p>
</section>
</section>
<section id="worked-example-python-4" class="level4">
<h4 class="anchored" data-anchor-id="worked-example-python-4">Worked Example (Python)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="st">"user: alice, email: alice@example.com; user: bob, email: bob@example.org"</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Efficient searching</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(text.startswith(<span class="st">"user"</span>))      <span class="co"># True</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(text.endswith(<span class="st">"org"</span>))         <span class="co"># True</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(text.find(<span class="st">"bob"</span>))             <span class="co"># position of 'bob'</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Counting and replacing</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>fruit <span class="op">=</span> <span class="st">"banana"</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fruit.count(<span class="st">"na"</span>))            <span class="co"># 2</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fruit.replace(<span class="st">"na"</span>, <span class="st">"NA"</span>))    <span class="co"># baNANA</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Regex: find all email addresses</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>emails <span class="op">=</span> re.findall(<span class="vs">r"</span><span class="dv">\w</span><span class="op">+</span><span class="vs">@</span><span class="dv">\w</span><span class="op">+</span><span class="ch">\.</span><span class="dv">\w</span><span class="op">+</span><span class="vs">"</span>, text)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(emails)  <span class="co"># ['alice@example.com', 'bob@example.org']</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Regex: extract all numbers from a string</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> <span class="st">"Order 123, item 456, total 789"</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> re.findall(<span class="vs">r"</span><span class="pp">[0-9]</span><span class="op">+</span><span class="vs">"</span>, data)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(numbers)  <span class="co"># ['123', '456', '789']</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Parsing structured text (simple CSV line)</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>line <span class="op">=</span> <span class="st">"apple, banana, cherry"</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>parts <span class="op">=</span> [p.strip() <span class="cf">for</span> p <span class="kw">in</span> line.split(<span class="st">","</span>)]</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parts)  <span class="co"># ['apple', 'banana', 'cherry']</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Performance demo: avoid naive concatenation</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">10000</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Slow</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">""</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    s <span class="op">+=</span> <span class="st">"x"</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Naive length:"</span>, <span class="bu">len</span>(s))</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Fast</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">""</span>.join([<span class="st">"x"</span> <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(N)])</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Join length:"</span>, <span class="bu">len</span>(s))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="why-it-matters-4" class="level4">
<h4 class="anchored" data-anchor-id="why-it-matters-4">Why it matters</h4>
<p>Intermediate operations turn raw text into structured data. Searching and counting enable validation and analysis. Regex provides flexible pattern extraction, but misuse can harm performance. Parsing prepares text for further computation. Avoiding pitfalls like naive concatenation ensures scalable code. These techniques are essential for handling logs, configurations, user inputs, and datasets in real-world applications.</p>
</section>
<section id="exercises-easy-hard" class="level4">
<h4 class="anchored" data-anchor-id="exercises-easy-hard">Exercises (Easy → Hard)</h4>
<ol type="1">
<li>Check if the string <code>"algorithm"</code> starts with <code>"algo"</code> and ends with <code>"rithm"</code>.</li>
<li>Count how many times <code>"the"</code> appears in <code>"the cat and the dog and the theater"</code>.</li>
<li>Replace every <code>"-"</code> in <code>"2025-09-10"</code> with <code>"/"</code>.</li>
<li>Extract all numbers from the text <code>"room 101, floor 5, building 42"</code>.</li>
<li>Write a regex to match any word that starts with <code>"a"</code> and ends with <code>"e"</code>.</li>
<li>Parse <code>"red, green, blue , yellow"</code> into a clean list of color names without spaces.</li>
<li>Demonstrate why repeated concatenation in a loop is slower than using a buffer or join.</li>
<li>Write a regex to match simple phone numbers like <code>"123-456-7890"</code>.</li>
<li>Explain why splitting CSV by commas fails if values contain quotes (e.g., <code>"apple, "banana,grape", cherry"</code>).</li>
<li>Design a regex that extracts domain names from email addresses.</li>
</ol>
</section>
</section>
<section id="l2-algorithms-systems" class="level3">
<h3 class="anchored" data-anchor-id="l2-algorithms-systems">3.2 L2 — Algorithms &amp; Systems</h3>
<p>Advanced string operations rely on specialized algorithms and system support. Searching and matching must be efficient on gigabytes of text. Regex engines balance flexibility with safety. Compilers tokenize source code into symbols using string scanning. And at the system boundary, encoding and locale awareness become critical for correct communication.</p>
<section id="deep-dive-5" class="level4">
<h4 class="anchored" data-anchor-id="deep-dive-5">Deep Dive</h4>
<section id="string-search-algorithms" class="level5">
<h5 class="anchored" data-anchor-id="string-search-algorithms">String Search Algorithms</h5>
<p>The naive search scans one character at a time, which is simple but inefficient for large text.</p>
<ul>
<li>Knuth–Morris–Pratt (KMP) preprocesses the pattern to avoid redundant comparisons.</li>
<li>Boyer–Moore skips ahead using knowledge of mismatched characters, performing sublinear searches in practice.</li>
<li>These algorithms form the backbone of text editors, search utilities, and compilers.</li>
</ul>
</section>
<section id="regex-engine-internals" class="level5">
<h5 class="anchored" data-anchor-id="regex-engine-internals">Regex Engine Internals</h5>
<p>Regex engines are either backtracking-based (Perl, Python) or automata-based (RE2, Rust).</p>
<ul>
<li>Backtracking engines support rich features but risk exponential slowdowns.</li>
<li>DFA/NFA-based engines guarantee linear-time execution but restrict advanced patterns.</li>
<li>JIT compilation of regex (like in Java or .NET) generates machine code for speed.</li>
</ul>
</section>
<section id="tokenization-and-lexical-analysis" class="level5">
<h5 class="anchored" data-anchor-id="tokenization-and-lexical-analysis">Tokenization and Lexical Analysis</h5>
<p>Compilers and interpreters must scan source code into tokens. This uses deterministic finite automata (DFAs) built from regex-like rules. For example, recognizing identifiers, keywords, and numbers all rely on string scanning.</p>
</section>
<section id="unicode-aware-searching" class="level5">
<h5 class="anchored" data-anchor-id="unicode-aware-searching">Unicode-Aware Searching</h5>
<p>Searching in Unicode text requires more than simple byte comparison. Case folding (making case-insensitive comparisons) differs by locale. Grapheme clusters must be considered as user-visible units, not code points.</p>
</section>
<section id="system-boundaries" class="level5">
<h5 class="anchored" data-anchor-id="system-boundaries">System Boundaries</h5>
<p>Strings cross boundaries when written to files, sockets, or system calls. Encodings must match between sender and receiver. Misalignment causes corrupted output or runtime errors. Databases and network APIs rely on normalized, correctly encoded strings.</p>
</section>
<section id="performance-considerations" class="level5">
<h5 class="anchored" data-anchor-id="performance-considerations">Performance Considerations</h5>
<p>Substring extraction may copy data (safe but costly) or reference parent buffers (fast but risky). SIMD instructions accelerate scanning large strings in modern CPUs. Benchmarks show naive operations become bottlenecks at scale, requiring optimized algorithms.</p>
</section>
</section>
<section id="worked-example-python-5" class="level4">
<h4 class="anchored" data-anchor-id="worked-example-python-5">Worked Example (Python)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Naive search ---</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> naive_search(text, pattern):</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(text) <span class="op">-</span> <span class="bu">len</span>(pattern) <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> text[i:i<span class="op">+</span><span class="bu">len</span>(pattern)] <span class="op">==</span> pattern:</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># --- KMP search ---</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> kmp_table(pattern):</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    table <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> <span class="bu">len</span>(pattern)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    j <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(pattern)):</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&gt;</span> <span class="dv">0</span> <span class="kw">and</span> pattern[i] <span class="op">!=</span> pattern[j]:</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>            j <span class="op">=</span> table[j<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> pattern[i] <span class="op">==</span> pattern[j]:</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>            j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>            table[i] <span class="op">=</span> j</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> table</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> kmp_search(text, pattern):</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    table <span class="op">=</span> kmp_table(pattern)</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    j <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(text)):</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&gt;</span> <span class="dv">0</span> <span class="kw">and</span> text[i] <span class="op">!=</span> pattern[j]:</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>            j <span class="op">=</span> table[j<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> text[i] <span class="op">==</span> pattern[j]:</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>            j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> j <span class="op">==</span> <span class="bu">len</span>(pattern):</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i <span class="op">-</span> j <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Performance test ---</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="st">"a"</span> <span class="op">*</span> <span class="dv">100000</span> <span class="op">+</span> <span class="st">"b"</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>pattern <span class="op">=</span> <span class="st">"a"</span> <span class="op">*</span> <span class="dv">1000</span> <span class="op">+</span> <span class="st">"b"</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> time.time()</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Naive:"</span>, naive_search(text, pattern))</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Naive time:"</span>, <span class="bu">round</span>(time.time() <span class="op">-</span> start, <span class="dv">4</span>), <span class="st">"s"</span>)</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> time.time()</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"KMP:"</span>, kmp_search(text, pattern))</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"KMP time:"</span>, <span class="bu">round</span>(time.time() <span class="op">-</span> start, <span class="dv">4</span>), <span class="st">"s"</span>)</span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Regex engines ---</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> <span class="st">"user: alice@example.com id: 42"</span></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>emails <span class="op">=</span> re.findall(<span class="vs">r"</span><span class="dv">\w</span><span class="op">+</span><span class="vs">@</span><span class="dv">\w</span><span class="op">+</span><span class="ch">\.</span><span class="dv">\w</span><span class="op">+</span><span class="vs">"</span>, data)</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Regex found:"</span>, emails)</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Unicode case folding ---</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>s1 <span class="op">=</span> <span class="st">"Straße"</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>s2 <span class="op">=</span> <span class="st">"STRASSE"</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Casefold equal:"</span>, s1.casefold() <span class="op">==</span> s2.casefold())</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Grapheme cluster awareness ---</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>family <span class="op">=</span> <span class="st">"👨‍👩‍👧‍👦"</span></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Code points:"</span>, <span class="bu">len</span>(family))     <span class="co"># length in code points</span></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Rendered:"</span>, family)             <span class="co"># perceived as one emoji</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="why-it-matters-5" class="level4">
<h4 class="anchored" data-anchor-id="why-it-matters-5">Why it matters</h4>
<p>At scale, naive methods fail. Efficient algorithms like KMP and Boyer–Moore make search practical in editors, search engines, and compilers. Regex engines must be chosen carefully: flexible backtracking engines can crash under malicious input, while DFA-based engines provide safety. Unicode awareness ensures correctness in multilingual systems. At system boundaries, encoding mismatches corrupt data. Performance engineering determines whether systems handle megabytes or terabytes of text reliably.</p>
</section>
<section id="exercises-4" class="level4">
<h4 class="anchored" data-anchor-id="exercises-4">Exercises</h4>
<ol type="1">
<li>Describe how the naive substring search works and why it can be inefficient.</li>
<li>Compare the number of steps needed to search <code>"aaaaab"</code> in <code>"a"*1000 + "b"</code> using naive vs KMP.</li>
<li>Explain the key idea behind Boyer–Moore that makes it faster than naive search.</li>
<li>Show why some regex patterns can lead to exponential backtracking.</li>
<li>Write a regex that matches valid identifiers (letters, digits, underscores, not starting with a digit).</li>
<li>Explain how compilers use finite automata to tokenize code.</li>
<li>Compare string equality with and without Unicode case folding (<code>"Straße"</code> vs <code>"STRASSE"</code>).</li>
<li>Show how a grapheme cluster (like family emoji) differs from code point count.</li>
<li>Explain why substring references in some languages (e.g., Java before 7u6) could cause memory leaks.</li>
<li>Design a benchmark plan to measure the impact of SIMD acceleration on string scanning.</li>
</ol>
</section>
</section>
</section>
<section id="comparison" class="level2">
<h2 class="anchored" data-anchor-id="comparison">3.3 Comparison</h2>
<section id="l0-equality-ordering" class="level3">
<h3 class="anchored" data-anchor-id="l0-equality-ordering">3.3 L0 — Equality &amp; Ordering</h3>
<p>Comparing strings is one of the simplest but most important operations in programming. Equality checks determine if two pieces of text are the same, while ordering lets us sort words alphabetically. These operations are intuitive but have precise rules that beginners must understand.</p>
<section id="overviewdefinition-1" class="level4">
<h4 class="anchored" data-anchor-id="overviewdefinition-1">Overview/Definition</h4>
<p>Two strings are equal if they contain exactly the same sequence of characters in the same order. Ordering compares strings lexicographically, meaning character by character from left to right, similar to how words are sorted in a dictionary. These rules allow programs to check conditions, filter text, and sort lists.</p>
</section>
<section id="deep-dive-6" class="level4">
<h4 class="anchored" data-anchor-id="deep-dive-6">Deep Dive</h4>
<section id="equality" class="level5">
<h5 class="anchored" data-anchor-id="equality">Equality</h5>
<p>Equality is strict: <code>"cat"</code> equals <code>"cat"</code> but not <code>"Cat"</code>. Whitespace matters too, so <code>"hello "</code> is not the same as <code>"hello"</code>. Computers check equality by comparing each character in order until a difference is found or both end.</p>
</section>
<section id="inequality" class="level5">
<h5 class="anchored" data-anchor-id="inequality">Inequality</h5>
<p>If two strings differ in length or characters, they are not equal. The result is simply <code>true</code> or <code>false</code>.</p>
<p>Lexicographic Ordering Ordering compares based on the numerical values of characters. <code>"apple"</code> comes before <code>"banana"</code> because <code>'a'</code> is less than <code>'b'</code>. If the first characters are equal, the comparison moves to the next.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Comparison</th>
<th>Example</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Equal</td>
<td><code>"cat" == "cat"</code></td>
<td>True</td>
</tr>
<tr class="even">
<td>Case-sensitive</td>
<td><code>"cat" == "Cat"</code></td>
<td>False</td>
</tr>
<tr class="odd">
<td>Shorter vs longer</td>
<td><code>"car" &lt; "cart"</code></td>
<td>True</td>
</tr>
<tr class="even">
<td>Alphabetical</td>
<td><code>"apple" &lt; "banana"</code></td>
<td>True</td>
</tr>
</tbody>
</table>
</section>
<section id="sorting" class="level5">
<h5 class="anchored" data-anchor-id="sorting">Sorting</h5>
<p>Sorting a list of strings uses lexicographic rules. The result is the same as dictionary order in English when restricted to simple lowercase letters.</p>
</section>
</section>
<section id="worked-example-python-6" class="level4">
<h4 class="anchored" data-anchor-id="worked-example-python-6">Worked Example (Python)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Equality</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"cat"</span> <span class="op">==</span> <span class="st">"cat"</span>)     <span class="co"># True</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"cat"</span> <span class="op">==</span> <span class="st">"Cat"</span>)     <span class="co"># False</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"hello "</span> <span class="op">==</span> <span class="st">"hello"</span>)<span class="co"># False</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Inequality</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"dog"</span> <span class="op">!=</span> <span class="st">"cat"</span>)     <span class="co"># True</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Lexicographic ordering</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"apple"</span> <span class="op">&lt;</span> <span class="st">"banana"</span>) <span class="co"># True</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"zebra"</span> <span class="op">&gt;</span> <span class="st">"yak"</span>)    <span class="co"># True</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"car"</span> <span class="op">&lt;</span> <span class="st">"cart"</span>)     <span class="co"># True</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Sorting a list</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>words <span class="op">=</span> [<span class="st">"banana"</span>, <span class="st">"apple"</span>, <span class="st">"cherry"</span>]</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">sorted</span>(words))      <span class="co"># ['apple', 'banana', 'cherry']</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="why-it-matters-6" class="level4">
<h4 class="anchored" data-anchor-id="why-it-matters-6">Why it matters</h4>
<p>Equality and ordering are the foundation of text handling. Programs must compare passwords, search for keywords, or sort lists of names. Without correct comparison, search engines would mis-rank results and databases would fail to find matches. Even small differences like uppercase vs lowercase or extra spaces can change outcomes. Understanding these rules prevents errors in everyday programming.</p>
</section>
<section id="exercises-5" class="level4">
<h4 class="anchored" data-anchor-id="exercises-5">Exercises</h4>
<ol type="1">
<li>Check if <code>"dog"</code> equals <code>"Dog"</code>.</li>
<li>Compare <code>"sun"</code> and <code>"moon"</code> and decide which comes first alphabetically.</li>
<li>Show why <code>"car"</code> is less than <code>"cart"</code>.</li>
<li>Sort the list <code>["pear", "apple", "orange"]</code> in dictionary order.</li>
<li>Explain why <code>"hello "</code> and <code>"hello"</code> are not equal.</li>
<li>Compare <code>"Zoo"</code> and <code>"apple"</code> and explain why uppercase letters can affect order.</li>
<li>Demonstrate that two strings must have the same length and characters to be equal.</li>
<li>Given a list of names, describe how to remove duplicates using string equality.</li>
<li>Explain what happens if two strings are equal up to the length of the shorter one (e.g., <code>"abc"</code> vs <code>"abcd"</code>).</li>
<li>Design a procedure to sort a list of mixed short and long strings alphabetically.</li>
</ol>
</section>
</section>
<section id="l1-collation-locales" class="level3">
<h3 class="anchored" data-anchor-id="l1-collation-locales">3.3 L1 — Collation &amp; Locales</h3>
<p>Comparing strings gets more complicated once you move beyond simple equality and dictionary order. Real-world applications must deal with case sensitivity, cultural rules, and mixed content like numbers and letters. At this level, programmers learn practical techniques for handling comparisons in everyday systems.</p>
<p>Collation is the set of rules that define how strings are compared and sorted. While lexicographic order works for plain ASCII, different languages and contexts require more sophisticated rules. For example, <code>"ä"</code> may be treated as equal to <code>"a"</code> in one locale but as a separate letter in another. Intermediate-level comparison also introduces the idea of ignoring case and whitespace when appropriate.</p>
<section id="deep-dive-7" class="level4">
<h4 class="anchored" data-anchor-id="deep-dive-7">Deep Dive</h4>
<section id="case-sensitivity" class="level5">
<h5 class="anchored" data-anchor-id="case-sensitivity">Case Sensitivity</h5>
<p>By default, string comparison is case-sensitive: <code>"cat"</code> ≠ <code>"Cat"</code>. Case-insensitive comparison requires converting both sides to the same case or using a locale-aware function.</p>
</section>
<section id="locales-and-cultural-rules" class="level5">
<h5 class="anchored" data-anchor-id="locales-and-cultural-rules">Locales and Cultural Rules</h5>
<p>Different languages define alphabetical order differently.</p>
<ul>
<li>In German, <code>"ä"</code> often sorts like <code>"ae"</code>.</li>
<li>In Swedish, <code>"ä"</code> is a separate letter after <code>"z"</code>.</li>
<li>In English, <code>"apple" &lt; "Banana"</code> because uppercase and lowercase letters use different numeric codes, but in many systems, case-insensitive comparison is preferred.</li>
</ul>
</section>
<section id="numbers-in-strings" class="level5">
<h5 class="anchored" data-anchor-id="numbers-in-strings">Numbers in Strings</h5>
<p>Lexicographic order can be confusing with numbers. <code>"file10"</code> comes before <code>"file2"</code> because <code>"1"</code> sorts before <code>"2"</code>. Natural sorting treats numbers as whole values so <code>"file2" &lt; "file10"</code>.</p>
</section>
<section id="databases-and-collation" class="level5">
<h5 class="anchored" data-anchor-id="databases-and-collation">Databases and Collation</h5>
<p>Databases define collations to decide how text is compared and sorted. A collation can be case-sensitive (<code>CS</code>) or case-insensitive (<code>CI</code>). It can also be accent-sensitive (<code>AS</code>) or accent-insensitive (<code>AI</code>). This ensures consistent results across queries.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Comparison Type</th>
<th>Example</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Case-sensitive</td>
<td><code>"cat" == "Cat"</code></td>
<td>False</td>
</tr>
<tr class="even">
<td>Case-insensitive</td>
<td><code>"cat" ~ "Cat"</code></td>
<td>True</td>
</tr>
<tr class="odd">
<td>Locale (German)</td>
<td><code>"äpfel" vs "apfel"</code></td>
<td>Equal or ordered together</td>
</tr>
<tr class="even">
<td>Natural sorting</td>
<td><code>"file2" &lt; "file10"</code></td>
<td>True</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="worked-example-python-7" class="level4">
<h4 class="anchored" data-anchor-id="worked-example-python-7">Worked Example (Python)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> locale</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Case-sensitive vs case-insensitive</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"cat"</span> <span class="op">==</span> <span class="st">"Cat"</span>)            <span class="co"># False</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"cat"</span>.lower() <span class="op">==</span> <span class="st">"Cat"</span>.lower())  <span class="co"># True</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Locale-aware comparison</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>locale.setlocale(locale.LC_COLLATE, <span class="st">"de_DE.UTF-8"</span>)  <span class="co"># German</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(locale.strcoll(<span class="st">"äpfel"</span>, <span class="st">"apfel"</span>))  <span class="co"># May treat ä ~ ae</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>locale.setlocale(locale.LC_COLLATE, <span class="st">"sv_SE.UTF-8"</span>)  <span class="co"># Swedish</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(locale.strcoll(<span class="st">"ä"</span>, <span class="st">"z"</span>))  <span class="co"># ä sorted after z</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Natural sorting with numbers</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>files <span class="op">=</span> [<span class="st">"file2"</span>, <span class="st">"file10"</span>, <span class="st">"file1"</span>]</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">sorted</span>(files))   <span class="co"># Lexicographic: ['file1', 'file10', 'file2']</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>files.sort(key<span class="op">=</span><span class="kw">lambda</span> x: [<span class="bu">int</span>(n) <span class="cf">if</span> n.isdigit() <span class="cf">else</span> n <span class="cf">for</span> n <span class="kw">in</span> re.split(<span class="vs">r'</span><span class="kw">(</span><span class="dv">\d</span><span class="op">+</span><span class="kw">)</span><span class="vs">'</span>, x)])</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(files)           <span class="co"># Natural sort: ['file1', 'file2', 'file10']</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="why-it-matters-7" class="level4">
<h4 class="anchored" data-anchor-id="why-it-matters-7">Why it matters</h4>
<p>Collation and locale rules affect almost every application that processes human text. Sorting names in a contact list, comparing file names, or filtering database queries all rely on comparison rules. Incorrect handling leads to confusing results for users, especially in multilingual contexts. Natural sorting improves readability when working with numbered data. Database collations ensure consistency in queries and reports.</p>
</section>
<section id="exercises-6" class="level4">
<h4 class="anchored" data-anchor-id="exercises-6">Exercises</h4>
<ol type="1">
<li>Compare <code>"cat"</code> and <code>"Cat"</code> both case-sensitive and case-insensitive.</li>
<li>Explain why <code>"file10"</code> comes before <code>"file2"</code> in lexicographic order.</li>
<li>Show how converting both strings to lowercase helps with case-insensitive comparison.</li>
<li>Describe how <code>"ä"</code> is treated differently in German vs Swedish ordering.</li>
<li>Given a list of filenames (<code>file1</code>, <code>file2</code>, <code>file10</code>), sort them in natural order.</li>
<li>Explain how a database collation can make <code>"résumé"</code> equal to <code>"resume"</code>.</li>
<li>Show how case-insensitive and accent-insensitive comparisons change the equality of <code>"café"</code> and <code>"CAFE"</code>.</li>
<li>Create a rule set for sorting words that mix numbers and letters, like <code>"a2"</code>, <code>"a10"</code>, <code>"a3"</code>.</li>
<li>Demonstrate how incorrect collation could mis-sort a list of international names.</li>
<li>Design an algorithm for locale-aware string comparison that handles both case and accent differences.</li>
</ol>
</section>
</section>
<section id="l2-deep-comparisons" class="level3">
<h3 class="anchored" data-anchor-id="l2-deep-comparisons">3.3 L2 — Deep Comparisons</h3>
<p>At the advanced level, comparing strings requires knowledge of Unicode, normalization, system-level optimizations, and specialized libraries. Equality and ordering are no longer trivial: they must handle multiple scripts, cultural rules, and performance constraints at scale.</p>
<p>Deep comparison of strings involves more than checking characters one by one. Unicode introduces multiple ways to represent the same text. Collation rules vary across locales. Large-scale systems need efficient comparison functions that work correctly with international text while remaining fast enough for billions of operations.</p>
<section id="deep-dive-8" class="level4">
<h4 class="anchored" data-anchor-id="deep-dive-8">Deep Dive</h4>
<section id="unicode-normalization" class="level5">
<h5 class="anchored" data-anchor-id="unicode-normalization">Unicode Normalization</h5>
<p>The same character can be represented in different ways. For example, <code>"é"</code> can be stored as a single code point (<code>U+00E9</code>) or as <code>'e'</code> plus a combining accent (<code>U+0065 U+0301</code>). Normalization ensures consistent representation. NFC (composed) and NFD (decomposed) are the most common forms.</p>
</section>
<section id="case-folding" class="level5">
<h5 class="anchored" data-anchor-id="case-folding">Case Folding</h5>
<p>Case-insensitive comparisons must use case folding, which is more complex than simply converting to lowercase. For instance, the German <code>"ß"</code> becomes <code>"ss"</code> when folded.</p>
</section>
<section id="collation-with-icu" class="level5">
<h5 class="anchored" data-anchor-id="collation-with-icu">Collation with ICU</h5>
<p>The International Components for Unicode (ICU) library provides robust comparison and sorting. It supports locale-sensitive rules, accent sensitivity, and custom collation. For example, <code>"résumé"</code> may equal <code>"resume"</code> in accent-insensitive mode.</p>
</section>
<section id="system-level-implementations" class="level5">
<h5 class="anchored" data-anchor-id="system-level-implementations">System-Level Implementations</h5>
<p>At low levels, comparison often reduces to optimized memory functions. Functions like <code>memcmp</code> compare bytes quickly, using CPU instructions that process multiple bytes at once. Short-circuit evaluation stops at the first mismatch. Cache alignment improves throughput when scanning long strings.</p>
</section>
<section id="security-concerns" class="level5">
<h5 class="anchored" data-anchor-id="security-concerns">Security Concerns</h5>
<p>Unicode confusables (characters that look alike, such as Latin <code>"a"</code> and Cyrillic <code>"а"</code>) can fool comparison routines if normalization is not enforced. Attackers exploit this in phishing and injection attacks.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 31%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th>Challenge</th>
<th>Example</th>
<th>Solution</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Multiple representations</td>
<td><code>"é"</code> vs <code>"e\u0301"</code></td>
<td>Normalize (NFC/NFD)</td>
</tr>
<tr class="even">
<td>Case folding</td>
<td><code>"Straße"</code> vs <code>"STRASSE"</code></td>
<td>Unicode-aware case folding</td>
</tr>
<tr class="odd">
<td>Collation differences</td>
<td><code>"ä"</code> in German vs Swedish</td>
<td>ICU locale rules</td>
</tr>
<tr class="even">
<td>Confusables</td>
<td><code>"a"</code> vs <code>"а"</code></td>
<td>Security checks, mapping</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="worked-example-python-8" class="level4">
<h4 class="anchored" data-anchor-id="worked-example-python-8">Worked Example (Python)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> unicodedata</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> locale</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Unicode normalization</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>s1 <span class="op">=</span> <span class="st">"café"</span>          <span class="co"># composed</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>s2 <span class="op">=</span> <span class="st">"cafe</span><span class="ch">\u0301</span><span class="st">"</span>    <span class="co"># decomposed</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Raw equal:"</span>, s1 <span class="op">==</span> s2)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"NFC equal:"</span>, unicodedata.normalize(<span class="st">"NFC"</span>, s1) <span class="op">==</span> unicodedata.normalize(<span class="st">"NFC"</span>, s2))</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"NFD equal:"</span>, unicodedata.normalize(<span class="st">"NFD"</span>, s1) <span class="op">==</span> unicodedata.normalize(<span class="st">"NFD"</span>, s2))</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Case folding</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"ß"</span>.casefold() <span class="op">==</span> <span class="st">"ss"</span>)   <span class="co"># True</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Locale-sensitive ordering</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>locale.setlocale(locale.LC_COLLATE, <span class="st">"fr_FR.UTF-8"</span>)  <span class="co"># French</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>words <span class="op">=</span> [<span class="st">"école"</span>, <span class="st">"eclair"</span>, <span class="st">"étude"</span>]</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">sorted</span>(words, key<span class="op">=</span>locale.strxfrm))  <span class="co"># Locale-aware sort</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Confusables</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>latin_a <span class="op">=</span> <span class="st">"a"</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>cyrillic_a <span class="op">=</span> <span class="st">"а"</span>  <span class="co"># visually similar</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Equal?"</span>, latin_a <span class="op">==</span> cyrillic_a)</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Latin:"</span>, <span class="bu">ord</span>(latin_a), <span class="st">"Cyrillic:"</span>, <span class="bu">ord</span>(cyrillic_a))</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="co"># System-level demonstration (byte comparison)</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>b1 <span class="op">=</span> <span class="st">b"apple"</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>b2 <span class="op">=</span> <span class="st">b"apricot"</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"memcmp style:"</span>, (b1 <span class="op">&gt;</span> b2) <span class="op">-</span> (b1 <span class="op">&lt;</span> b2))  <span class="co"># -1, 0, or 1</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="why-it-matters-8" class="level4">
<h4 class="anchored" data-anchor-id="why-it-matters-8">Why it matters</h4>
<p>Deep string comparison underpins databases, search engines, and operating systems. Normalization ensures data consistency across storage and transfer. Case folding avoids incorrect matches in multilingual systems. ICU collation makes applications usable across cultures. Optimized byte comparisons keep performance acceptable at scale. Security requires detecting confusables to prevent spoofing. Without these techniques, global systems would be unreliable and vulnerable.</p>
</section>
<section id="exercises-7" class="level4">
<h4 class="anchored" data-anchor-id="exercises-7">Exercises</h4>
<ol type="1">
<li>Give an example where two visually identical strings are unequal because of different Unicode encodings.</li>
<li>Normalize two strings with accents and show they become equal.</li>
<li>Explain why <code>"ß"</code> must be compared to <code>"ss"</code> in case-insensitive matching.</li>
<li>Sort the words <code>"école"</code>, <code>"eclair"</code>, <code>"étude"</code> using French collation rules.</li>
<li>Show why <code>"a"</code> (Latin) and <code>"а"</code> (Cyrillic) are dangerous in string comparison.</li>
<li>Describe how <code>memcmp</code> works at the system level to compare two byte sequences.</li>
<li>Explain how cache alignment improves performance when comparing long strings.</li>
<li>Demonstrate the difference between accent-sensitive and accent-insensitive comparison with <code>"café"</code> vs <code>"cafe"</code>.</li>
<li>Propose a method to detect and mitigate Unicode confusables in user input.</li>
<li>Design a benchmark to compare normalized vs non-normalized string comparison in a large dataset.</li>
</ol>
</section>
</section>
</section>
<section id="patterns" class="level2">
<h2 class="anchored" data-anchor-id="patterns">3.4 Patterns</h2>
<section id="l0-simple-search" class="level3">
<h3 class="anchored" data-anchor-id="l0-simple-search">3.4 L0 — Simple Search</h3>
<p>Strings are often used to find and replace text. Beginners need to understand how to look for substrings, replace parts of text, and use simple wildcards. These operations are the first step toward more advanced pattern matching.</p>
<section id="overviewdefinition-2" class="level4">
<h4 class="anchored" data-anchor-id="overviewdefinition-2">Overview/Definition</h4>
<p>A search operation checks if a smaller string exists inside a larger one. If found, it returns the position or a confirmation. Replace operations swap one substring for another. Wildcards act as placeholders, matching characters in flexible ways. These basics allow programs to search, clean, and transform text.</p>
</section>
<section id="deep-dive-9" class="level4">
<h4 class="anchored" data-anchor-id="deep-dive-9">Deep Dive</h4>
<section id="finding-substrings" class="level5">
<h5 class="anchored" data-anchor-id="finding-substrings">Finding Substrings</h5>
<p>The simplest search asks: does <code>"dog"</code> appear inside <code>"hotdog"</code>? Most systems return the starting index of the match. If not found, a special value is returned.</p>
</section>
<section id="replacing-text" class="level5">
<h5 class="anchored" data-anchor-id="replacing-text">Replacing Text</h5>
<p>Replacement takes an old value and swaps it with a new one. <code>"the sky is blue"</code> with <code>"blue" → "red"</code> becomes <code>"the sky is red"</code>. Replacement is useful for cleaning or formatting text.</p>
</section>
<section id="wildcards-intuitive-view" class="level5">
<h5 class="anchored" data-anchor-id="wildcards-intuitive-view">Wildcards (Intuitive View)</h5>
<p>Wildcards are simple symbols that represent “any character.” A <code>*</code> can mean “any sequence,” and a <code>?</code> can mean “one character.” Example: pattern <code>"ca*"</code> matches <code>"cat"</code>, <code>"car"</code>, and <code>"castle"</code>. Wildcards are simpler than full regular expressions but build the same intuition.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Example Input</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Contains</td>
<td><code>"cat"</code> in <code>"concatenate"</code></td>
<td>True</td>
</tr>
<tr class="even">
<td>Find index</td>
<td><code>"hello".find("lo")</code></td>
<td>3</td>
</tr>
<tr class="odd">
<td>Replace</td>
<td><code>"2025-09-10".replace("-", "/")</code></td>
<td><code>"2025/09/10"</code></td>
</tr>
<tr class="even">
<td>Wildcard</td>
<td>Pattern <code>"ca*"</code> vs <code>"castle"</code></td>
<td>Match</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="worked-example-python-9" class="level4">
<h4 class="anchored" data-anchor-id="worked-example-python-9">Worked Example (Python)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Searching substrings</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>sentence <span class="op">=</span> <span class="st">"the quick brown fox"</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"quick"</span> <span class="kw">in</span> sentence)       <span class="co"># True</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sentence.find(<span class="st">"fox"</span>))      <span class="co"># 16</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sentence.find(<span class="st">"dog"</span>))      <span class="co"># -1 (not found)</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Replacing text</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>date <span class="op">=</span> <span class="st">"2025-09-10"</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(date.replace(<span class="st">"-"</span>, <span class="st">"/"</span>))    <span class="co"># 2025/09/10</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple wildcard matching (manual example)</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> matches(pattern, text):</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> pattern <span class="op">==</span> <span class="st">"*"</span>:  <span class="co"># match everything</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">True</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> pattern.endswith(<span class="st">"*"</span>):</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> text.startswith(pattern[:<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> pattern.startswith(<span class="st">"*"</span>):</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> text.endswith(pattern[<span class="dv">1</span>:])</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pattern <span class="op">==</span> text</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(matches(<span class="st">"ca*"</span>, <span class="st">"cat"</span>))      <span class="co"># True</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(matches(<span class="st">"ca*"</span>, <span class="st">"castle"</span>))   <span class="co"># True</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(matches(<span class="st">"*ing"</span>, <span class="st">"running"</span>)) <span class="co"># True</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(matches(<span class="st">"*at"</span>, <span class="st">"cat"</span>))      <span class="co"># True</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="why-it-matters-9" class="level4">
<h4 class="anchored" data-anchor-id="why-it-matters-9">Why it matters</h4>
<p>Searching and replacing text is one of the most common tasks in programming. From finding a word in a document, to cleaning up user input, to formatting data for storage, these operations are essential. Wildcards introduce the idea of flexible matching, which prepares learners for regular expressions and more advanced pattern recognition.</p>
</section>
<section id="exercises-8" class="level4">
<h4 class="anchored" data-anchor-id="exercises-8">Exercises</h4>
<ol type="1">
<li>Check if the word <code>"sun"</code> appears in the sentence <code>"the sun sets"</code>.</li>
<li>Find the position of <code>"moon"</code> in <code>"the moon rises"</code>.</li>
<li>Replace <code>"morning"</code> with <code>"evening"</code> in <code>"good morning"</code>.</li>
<li>Show that searching for <code>"dog"</code> in <code>"hotdog"</code> succeeds.</li>
<li>Replace all dashes in <code>"2025-09-10"</code> with slashes.</li>
<li>Write a rule with <code>*</code> that matches both <code>"cat"</code> and <code>"castle"</code>.</li>
<li>Create a wildcard pattern that matches any word ending in <code>"ing"</code>.</li>
<li>Explain why a failed search must return a special value (not just <code>0</code>).</li>
<li>Demonstrate how searching for <code>"a"</code> in <code>"banana"</code> should return multiple matches.</li>
<li>Describe how wildcards can be extended into full regular expressions.</li>
</ol>
</section>
</section>
<section id="l1-regular-expressions-in-practice" class="level3">
<h3 class="anchored" data-anchor-id="l1-regular-expressions-in-practice">3.4 L1 — Regular Expressions in Practice</h3>
<p>At the intermediate level, string pattern matching expands from simple wildcards to regular expressions (regex). Regex provides a concise and powerful way to describe patterns in text. It is widely used in programming for searching, extracting, and validating structured data.</p>
<p>A regular expression is a sequence of symbols that defines a search pattern. Unlike simple wildcards, regex can express detailed rules such as “find all numbers,” “match words ending in <code>ing</code>,” or “validate an email address.” Regex is supported in almost every major programming language.</p>
<section id="deep-dive-10" class="level4">
<h4 class="anchored" data-anchor-id="deep-dive-10">Deep Dive</h4>
<section id="core-symbols" class="level5">
<h5 class="anchored" data-anchor-id="core-symbols">Core Symbols</h5>
<ul>
<li><code>.</code> matches any single character.</li>
<li><code>*</code> means zero or more repetitions.</li>
<li><code>+</code> means one or more repetitions.</li>
<li><code>?</code> means zero or one occurrence.</li>
<li><code>[abc]</code> matches one character from the set <code>a</code>, <code>b</code>, or <code>c</code>.</li>
<li><code>[0-9]</code> matches any digit.</li>
<li><code>^</code> matches the beginning of a string; <code>$</code> matches the end.</li>
</ul>
</section>
<section id="examples-of-patterns" class="level5">
<h5 class="anchored" data-anchor-id="examples-of-patterns">Examples of Patterns</h5>
<ul>
<li><code>[0-9]+</code> matches sequences of digits like <code>"123"</code>.</li>
<li><code>\w+</code> matches words made of letters, digits, and underscores.</li>
<li><code>\w+@\w+\.\w+</code> matches simple email addresses.</li>
<li><code>^Hello</code> matches any string starting with <code>"Hello"</code>.</li>
</ul>
</section>
<section id="greedy-vs-lazy-matching" class="level5">
<h5 class="anchored" data-anchor-id="greedy-vs-lazy-matching">Greedy vs Lazy Matching</h5>
<p>Regex quantifiers (<code>*</code>, <code>+</code>) are greedy by default: they try to match as much as possible. Adding <code>?</code> makes them lazy, matching the smallest possible part.</p>
<ul>
<li>Greedy: pattern <code>".*"</code> on <code>"abc"</code> → <code>"abc"</code>.</li>
<li>Lazy: pattern <code>".*?"</code> on <code>"abc"</code> → <code>"a"</code>.</li>
</ul>
</section>
<section id="practical-uses" class="level5">
<h5 class="anchored" data-anchor-id="practical-uses">Practical Uses</h5>
<p>Regex is used for:</p>
<ul>
<li>Extracting structured data from logs.</li>
<li>Validating input like emails or phone numbers.</li>
<li>Searching and replacing complex text patterns.</li>
<li>Parsing configuration files or text protocols.</li>
</ul>
</section>
</section>
<section id="worked-example-python-10" class="level4">
<h4 class="anchored" data-anchor-id="worked-example-python-10">Worked Example (Python)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="st">"Order 123, item 456, email: alice@example.com"</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Match digits</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> re.findall(<span class="vs">r"</span><span class="pp">[0-9]</span><span class="op">+</span><span class="vs">"</span>, text)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Numbers:"</span>, numbers)  <span class="co"># ['123', '456']</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Match words</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>words <span class="op">=</span> re.findall(<span class="vs">r"</span><span class="dv">\w</span><span class="op">+</span><span class="vs">"</span>, text)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Words:"</span>, words)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Match email addresses</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>emails <span class="op">=</span> re.findall(<span class="vs">r"</span><span class="dv">\w</span><span class="op">+</span><span class="vs">@</span><span class="dv">\w</span><span class="op">+</span><span class="ch">\.</span><span class="dv">\w</span><span class="op">+</span><span class="vs">"</span>, text)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Emails:"</span>, emails)</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Anchors</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">bool</span>(re.match(<span class="vs">r"</span><span class="dv">^</span><span class="vs">Order"</span>, text)))   <span class="co"># True (starts with Order)</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">bool</span>(re.search(<span class="vs">r"com</span><span class="dv">$</span><span class="vs">"</span>, text)))   <span class="co"># True (ends with com)</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Greedy vs lazy</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>sample <span class="op">=</span> <span class="st">"&lt;tag&gt;content&lt;/tag&gt;&lt;tag&gt;other&lt;/tag&gt;"</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>greedy <span class="op">=</span> re.findall(<span class="vs">r"&lt;tag&gt;</span><span class="dv">.</span><span class="op">*</span><span class="vs">&lt;/tag&gt;"</span>, sample)</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>lazy   <span class="op">=</span> re.findall(<span class="vs">r"&lt;tag&gt;</span><span class="dv">.</span><span class="op">*?</span><span class="vs">&lt;/tag&gt;"</span>, sample)</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Greedy:"</span>, greedy)  <span class="co"># ['&lt;tag&gt;content&lt;/tag&gt;&lt;tag&gt;other&lt;/tag&gt;']</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Lazy:"</span>, lazy)      <span class="co"># ['&lt;tag&gt;content&lt;/tag&gt;', '&lt;tag&gt;other&lt;/tag&gt;']</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="why-it-matters-10" class="level4">
<h4 class="anchored" data-anchor-id="why-it-matters-10">Why it matters</h4>
<p>Regex provides a compact language for describing patterns in text. Without it, tasks like extracting emails, validating formats, or parsing logs would require many lines of manual code. Regex is also standardized across languages, so learning it once provides a universal tool. However, careless use can create unreadable code or performance problems, so disciplined practice is essential.</p>
</section>
<section id="exercises-9" class="level4">
<h4 class="anchored" data-anchor-id="exercises-9">Exercises</h4>
<ol type="1">
<li>Write a regex that matches any sequence of digits.</li>
<li>Match all words in <code>"The quick brown fox"</code>.</li>
<li>Find all substrings that start with <code>"a"</code> and end with <code>"e"</code>.</li>
<li>Match an email address of the form <code>"name@domain.com"</code>.</li>
<li>Match any string that begins with <code>"http://"</code> or <code>"https://"</code>.</li>
<li>Extract all numbers from <code>"Invoice: #123, #456, #789"</code>.</li>
<li>Demonstrate the difference between greedy and lazy matching with <code>"&lt;tag&gt;text&lt;/tag&gt;&lt;tag&gt;more&lt;/tag&gt;"</code>.</li>
<li>Write a regex to validate phone numbers like <code>"123-456-7890"</code>.</li>
<li>Explain why using regex to parse complex formats (like HTML) can be unreliable.</li>
<li>Create a regex that matches words containing exactly three vowels.</li>
</ol>
</section>
</section>
<section id="l2-engines-optimizations" class="level3">
<h3 class="anchored" data-anchor-id="l2-engines-optimizations">3.4 L2 — Engines &amp; Optimizations</h3>
<p>Regular expressions are powerful, but at scale their performance and safety depend on the design of the engine. Advanced systems need regex engines that are predictable, fast, and safe against denial-of-service attacks. At this level, the focus is on internals, optimizations, and production libraries.</p>
<p>Regex engines are implementations of pattern matching. Some use backtracking, exploring many paths but risking exponential slowdowns. Others use deterministic finite automata (DFA) or non-deterministic automata (NFA), which guarantee linear runtime but reduce flexibility. Modern libraries combine these with JIT compilation or SIMD acceleration for speed. Production systems must choose the right engine for correctness and reliability.</p>
<section id="deep-dive-11" class="level4">
<h4 class="anchored" data-anchor-id="deep-dive-11">Deep Dive</h4>
<section id="engine-architectures" class="level5">
<h5 class="anchored" data-anchor-id="engine-architectures">Engine Architectures</h5>
<p>Backtracking engines (Perl, Python, PCRE) allow advanced features like backreferences but may run in exponential time on crafted inputs. DFA/NFA engines (RE2, Rust, grep) convert patterns to automata that run in linear time. JIT-based engines (Java, .NET) compile regex into machine code for faster execution.</p>
</section>
<section id="greedy-vs-lazy-at-engine-level" class="level5">
<h5 class="anchored" data-anchor-id="greedy-vs-lazy-at-engine-level">Greedy vs Lazy at Engine Level</h5>
<p>Quantifiers like <code>*</code> and <code>+</code> are greedy by default. Engines track multiple possibilities with stacks or state machines. Lazy quantifiers stop early, but the engine still evaluates alternatives internally.</p>
</section>
<section id="performance-optimizations" class="level5">
<h5 class="anchored" data-anchor-id="performance-optimizations">Performance Optimizations</h5>
<p>Compiled regex patterns are faster than compiling on every use. Anchors (<code>^</code>, <code>$</code>) and character classes (<code>[0-9]</code>) reduce search space. Avoiding pathological expressions like <code>(a+)+</code> prevents catastrophic backtracking. SIMD instructions scan text in chunks, speeding up low-level matching.</p>
</section>
<section id="advanced-libraries" class="level5">
<h5 class="anchored" data-anchor-id="advanced-libraries">Advanced Libraries</h5>
<ul>
<li>RE2 (Google): guarantees linear runtime, disallows constructs that cause exponential behavior.</li>
<li>Hyperscan (Intel): supports multi-pattern regex with SIMD acceleration, used in intrusion detection.</li>
<li>ICU: supports Unicode-aware regex and locale-sensitive operations.</li>
</ul>
</section>
<section id="system-level-integration" class="level5">
<h5 class="anchored" data-anchor-id="system-level-integration">System-Level Integration</h5>
<p>Regex engines are embedded in compilers, text editors, search tools, and security systems. Multi-pattern matching is essential for scanning logs, detecting spam, and monitoring network traffic.</p>
</section>
<section id="security-concerns-1" class="level5">
<h5 class="anchored" data-anchor-id="security-concerns-1">Security Concerns</h5>
<p>Poorly written regex can create ReDoS (Regex Denial of Service). Attackers send inputs that trigger exponential backtracking, freezing systems. For example, pattern <code>(a+)+b</code> against <code>"aaaaaaa…"</code> takes excessive time. Safe libraries (RE2, Hyperscan) prevent this by design.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 14%">
<col style="width: 42%">
<col style="width: 42%">
</colgroup>
<thead>
<tr class="header">
<th>Engine Type</th>
<th>Strengths</th>
<th>Weaknesses</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Backtracking</td>
<td>Full regex features, flexible</td>
<td>Risk of exponential runtime (ReDoS)</td>
</tr>
<tr class="even">
<td>DFA/NFA</td>
<td>Linear runtime, predictable</td>
<td>No backreferences, fewer features</td>
</tr>
<tr class="odd">
<td>JIT Hybrid</td>
<td>Very fast, compiled to machine code</td>
<td>Still vulnerable to bad patterns</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="worked-example-python-11" class="level4">
<h4 class="anchored" data-anchor-id="worked-example-python-11">Worked Example (Python)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re, time</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Backtracking danger: catastrophic regex</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>pattern <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r"</span><span class="kw">(</span><span class="vs">a</span><span class="op">+</span><span class="kw">)</span><span class="op">+</span><span class="vs">b"</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="st">"a"</span> <span class="op">*</span> <span class="dv">25</span> <span class="op">+</span> <span class="st">"b"</span>   <span class="co"># works</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Match:"</span>, <span class="bu">bool</span>(pattern.match(text)))</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Problematic input: missing final 'b'</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>text_bad <span class="op">=</span> <span class="st">"a"</span> <span class="op">*</span> <span class="dv">25</span>     <span class="co"># exponential backtracking</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> time.time()</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Bad match:"</span>, <span class="bu">bool</span>(pattern.match(text_bad)))</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Time:"</span>, <span class="bu">round</span>(time.time() <span class="op">-</span> start, <span class="dv">4</span>), <span class="st">"seconds"</span>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Greedy vs lazy</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"&lt;tag&gt;first&lt;/tag&gt;&lt;tag&gt;second&lt;/tag&gt;"</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>greedy <span class="op">=</span> re.findall(<span class="vs">r"&lt;tag&gt;</span><span class="dv">.</span><span class="op">*</span><span class="vs">&lt;/tag&gt;"</span>, html)</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>lazy   <span class="op">=</span> re.findall(<span class="vs">r"&lt;tag&gt;</span><span class="dv">.</span><span class="op">*?</span><span class="vs">&lt;/tag&gt;"</span>, html)</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Greedy:"</span>, greedy)</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Lazy:"</span>, lazy)</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Precompiled pattern efficiency</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>words <span class="op">=</span> <span class="st">"error warning info debug error warning"</span>.split()</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r"error</span><span class="cf">|</span><span class="vs">warning"</span>)</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>matches <span class="op">=</span> [w <span class="cf">for</span> w <span class="kw">in</span> words <span class="cf">if</span> p.match(w)]</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Matches:"</span>, matches)</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Unicode-aware regex</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="st">"café resume résumé"</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>utf8_words <span class="op">=</span> re.findall(<span class="vs">r"</span><span class="dv">\w</span><span class="op">+</span><span class="vs">"</span>, text)</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"UTF-8 words:"</span>, utf8_words)</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulated natural sorting with regex</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>files <span class="op">=</span> [<span class="st">"file1"</span>, <span class="st">"file10"</span>, <span class="st">"file2"</span>]</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>splitter <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r'</span><span class="kw">(</span><span class="dv">\d</span><span class="op">+</span><span class="kw">)</span><span class="vs">'</span>)</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>files.sort(key<span class="op">=</span><span class="kw">lambda</span> x: [<span class="bu">int</span>(n) <span class="cf">if</span> n.isdigit() <span class="cf">else</span> n <span class="cf">for</span> n <span class="kw">in</span> splitter.split(x)])</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Natural sort:"</span>, files)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="why-it-matters-11" class="level4">
<h4 class="anchored" data-anchor-id="why-it-matters-11">Why it matters</h4>
<p>Regex is a double-edged sword. It compresses complex logic into concise expressions, but the wrong engine or pattern can cripple systems. Backtracking engines offer flexibility but can be exploited. DFA-based engines guarantee performance but restrict features. Production libraries like RE2 and Hyperscan provide safe, optimized solutions for real workloads. Security, speed, and predictability all depend on understanding regex internals.</p>
</section>
<section id="exercises-10" class="level4">
<h4 class="anchored" data-anchor-id="exercises-10">Exercises</h4>
<ol type="1">
<li>Explain the difference between greedy and lazy matching.</li>
<li>Show why <code>(a+)+b</code> can cause problems on inputs like <code>"aaaaaa"</code>.</li>
<li>Compare backtracking and DFA approaches to regex.</li>
<li>Write a regex to match numbers at the start of a string (<code>^123</code>).</li>
<li>Explain why precompiling a regex can improve performance.</li>
<li>Describe how RE2 avoids catastrophic backtracking.</li>
<li>Show why regex should not be used for parsing HTML.</li>
<li>Design a regex for matching IPv4 addresses and explain performance concerns.</li>
<li>Compare the runtime of regex matching with and without SIMD acceleration in theory.</li>
<li>Propose a strategy to defend against Regex Denial of Service in a production system.</li>
</ol>
</section>
</section>
</section>
<section id="applications" class="level2">
<h2 class="anchored" data-anchor-id="applications">3.5 Applications</h2>
<section id="l0-everyday-uses" class="level3">
<h3 class="anchored" data-anchor-id="l0-everyday-uses">3.5 L0 — Everyday Uses</h3>
<p>Strings are used in almost every program. Beginners usually encounter them when printing messages, saving text to files, or checking simple inputs. These small applications show how strings connect code to real-world tasks.</p>
<p>Everyday string applications include formatting output, working with text files, validating simple input, and combining small pieces of data into readable results. These tasks look simple but form the foundation of real-world software, from command-line tools to web apps.</p>
<section id="deep-dive-12" class="level4">
<h4 class="anchored" data-anchor-id="deep-dive-12">Deep Dive</h4>
<section id="text-formatting" class="level5">
<h5 class="anchored" data-anchor-id="text-formatting">Text Formatting</h5>
<p>Programs must often display results with both words and numbers. Concatenation creates readable sentences: <code>"Hello, " + name</code>. Many languages also support templates: <code>"Hello, {name}"</code>.</p>
</section>
<section id="file-reading-basics" class="level5">
<h5 class="anchored" data-anchor-id="file-reading-basics">File Reading Basics</h5>
<p>A file is just text stored on disk. Reading one line returns a string. Splitting turns the line into words. Writing strings saves output. Example: reading <code>"Alice 25"</code> and splitting it into a name and an age.</p>
</section>
<section id="input-validation-simple" class="level5">
<h5 class="anchored" data-anchor-id="input-validation-simple">Input Validation (Simple)</h5>
<p>Not all inputs are valid. Checking that a string is not empty prevents errors. Minimum length ensures requirements are met (like passwords). Character checks confirm only letters or digits are entered.</p>
</section>
<section id="basic-data-handling" class="level5">
<h5 class="anchored" data-anchor-id="basic-data-handling">Basic Data Handling</h5>
<p>Strings often need simple processing: counting characters, trimming spaces, or extracting parts. <code>"John Doe"</code> can be split into <code>"John"</code> and <code>"Doe"</code>. Small pieces of text are often joined into a readable result.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Everyday Task</th>
<th>Example Input</th>
<th>Example Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Greeting</td>
<td><code>"Alice"</code></td>
<td><code>"Hello, Alice!"</code></td>
</tr>
<tr class="even">
<td>Trim spaces</td>
<td><code>" hello "</code></td>
<td><code>"hello"</code></td>
</tr>
<tr class="odd">
<td>Count characters</td>
<td><code>"banana"</code></td>
<td><code>6</code></td>
</tr>
<tr class="even">
<td>Save and load message</td>
<td><code>"Note: call Bob"</code></td>
<td>Written and reloaded</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="worked-example-python-12" class="level4">
<h4 class="anchored" data-anchor-id="worked-example-python-12">Worked Example (Python)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Formatting text</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>name <span class="op">=</span> <span class="st">"Alice"</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>age <span class="op">=</span> <span class="dv">25</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Hello, </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">! You are </span><span class="sc">{</span>age<span class="sc">}</span><span class="ss"> years old."</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># File basics (write then read)</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"note.txt"</span>, <span class="st">"w"</span>) <span class="im">as</span> f:</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    f.write(<span class="st">"Remember to buy milk"</span>)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"note.txt"</span>, <span class="st">"r"</span>) <span class="im">as</span> f:</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    content <span class="op">=</span> f.read()</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"File content:"</span>, content)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Input validation</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>user_input <span class="op">=</span> <span class="st">"   hello123   "</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>cleaned <span class="op">=</span> user_input.strip()</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> cleaned <span class="kw">and</span> cleaned.isalnum():</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Valid input:"</span>, cleaned)</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Invalid input"</span>)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Data handling</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>full_name <span class="op">=</span> <span class="st">"John Doe"</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>first, last <span class="op">=</span> full_name.split()</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"First name:"</span>, first)</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Last name:"</span>, last)</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Joining pieces</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>words <span class="op">=</span> [<span class="st">"data"</span>, <span class="st">"structures"</span>, <span class="st">"are"</span>, <span class="st">"fun"</span>]</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>sentence <span class="op">=</span> <span class="st">" "</span>.join(words)</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sentence)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="why-it-matters-12" class="level4">
<h4 class="anchored" data-anchor-id="why-it-matters-12">Why it matters</h4>
<p>Everyday string handling bridges user interaction and program logic. Without formatting, programs would only output raw numbers. Without validation, programs would accept broken or unsafe input. Without file reading and writing, no program could save notes or logs. These basics show how strings connect software to people and data.</p>
</section>
<section id="exercises-11" class="level4">
<h4 class="anchored" data-anchor-id="exercises-11">Exercises</h4>
<ol type="1">
<li>Print <code>"Hello, NAME!"</code> using a variable for the name.</li>
<li>Count the number of characters in <code>"banana"</code>.</li>
<li>Save the string <code>"study algorithms"</code> to a file, then read it back.</li>
<li>Remove extra spaces from <code>"   world   "</code> and print the cleaned string.</li>
<li>Check if <code>"abc123"</code> contains only letters and digits.</li>
<li>Split <code>"Alice Johnson"</code> into first and last names.</li>
<li>Join <code>["red", "green", "blue"]</code> into <code>"red,green,blue"</code>.</li>
<li>Create a greeting that includes both a name and an age.</li>
<li>Validate that a password is at least 8 characters long.</li>
<li>Write a program that asks for a note, saves it to a file, and then reloads and prints it.</li>
</ol>
</section>
</section>
<section id="l1-engineering-contexts" class="level3">
<h3 class="anchored" data-anchor-id="l1-engineering-contexts">3.5 L1 — Engineering Contexts</h3>
<p>As programs grow, string handling shifts from small tasks to structured data and system integration. Strings become the glue for configurations, logs, and filtering. These applications demand clarity, consistency, and efficiency.</p>
<section id="overviewdefinition-3" class="level4">
<h4 class="anchored" data-anchor-id="overviewdefinition-3">Overview/Definition</h4>
<p>Strings in engineering contexts are used to represent structured formats, record system activity, and enable searching and filtering. They provide a common medium for both humans and machines, balancing readability with machine-parsable structure.</p>
</section>
<section id="deep-dive-13" class="level4">
<h4 class="anchored" data-anchor-id="deep-dive-13">Deep Dive</h4>
<section id="configuration-formats" class="level5">
<h5 class="anchored" data-anchor-id="configuration-formats">Configuration Formats</h5>
<p>Configuration files define how systems run. Common formats like JSON, YAML, or INI are all string-based. Parsing these strings gives structured values. For example, <code>"timeout": 30</code> in JSON is a string representation of a setting, later converted into a number.</p>
</section>
<section id="logs-and-monitoring" class="level5">
<h5 class="anchored" data-anchor-id="logs-and-monitoring">Logs and Monitoring</h5>
<p>Systems record events as text logs. A log line might be <code>"2025-09-10 12:00:01 ERROR Connection failed"</code>. These strings are later parsed for monitoring and debugging. Consistency in string format is critical.</p>
</section>
<section id="searching-and-filtering" class="level5">
<h5 class="anchored" data-anchor-id="searching-and-filtering">Searching and Filtering</h5>
<p>Large systems must sift through text quickly. Searching log files for <code>"ERROR"</code> highlights problems. Filtering configuration values based on keywords is another common task. Case-insensitive matching or regex-based extraction makes this robust.</p>
</section>
<section id="data-exchange" class="level5">
<h5 class="anchored" data-anchor-id="data-exchange">Data Exchange</h5>
<p>APIs and network protocols often transmit structured text. JSON payloads are strings at the boundary between systems. Converting between string representation and structured data is a common responsibility of engineering code.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 16%">
<col style="width: 44%">
<col style="width: 38%">
</colgroup>
<thead>
<tr class="header">
<th>Context</th>
<th>Example String</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Configuration</td>
<td><code>{"host":"localhost","port":8080}</code></td>
<td>System settings</td>
</tr>
<tr class="even">
<td>Log line</td>
<td><code>2025-09-10 ERROR Disk full</code></td>
<td>Monitoring &amp; debugging</td>
</tr>
<tr class="odd">
<td>Search/filter</td>
<td>Find <code>"ERROR"</code> in a log file</td>
<td>Identify issues</td>
</tr>
<tr class="even">
<td>API payload</td>
<td><code>{"user":"alice","id":42}</code></td>
<td>Data exchange between services</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="worked-example-python-13" class="level4">
<h4 class="anchored" data-anchor-id="worked-example-python-13">Worked Example (Python)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Configuration parsing (JSON as string)</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>config_str <span class="op">=</span> <span class="st">'{"host":"localhost","port":8080}'</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>config <span class="op">=</span> json.loads(config_str)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Host:"</span>, config[<span class="st">"host"</span>], <span class="st">"Port:"</span>, config[<span class="st">"port"</span>])</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Logging and filtering</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>logs <span class="op">=</span> [</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2025-09-10 12:00:01 INFO  Server started"</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2025-09-10 12:01:22 ERROR Connection failed"</span>,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2025-09-10 12:02:45 WARN  Disk almost full"</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>errors <span class="op">=</span> [line <span class="cf">for</span> line <span class="kw">in</span> logs <span class="cf">if</span> <span class="st">"ERROR"</span> <span class="kw">in</span> line]</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Error logs:"</span>, errors)</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Case-insensitive search</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>query <span class="op">=</span> <span class="st">"warn"</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>matches <span class="op">=</span> [line <span class="cf">for</span> line <span class="kw">in</span> logs <span class="cf">if</span> query.lower() <span class="kw">in</span> line.lower()]</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Warnings:"</span>, matches)</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Extracting structured data from logs with regex</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>pattern <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r"</span><span class="kw">(</span><span class="dv">\d</span><span class="op">{4}</span><span class="vs">-</span><span class="dv">\d</span><span class="op">{2}</span><span class="vs">-</span><span class="dv">\d</span><span class="op">{2}</span><span class="kw">)</span><span class="dv">\s</span><span class="op">+</span><span class="dv">\S</span><span class="op">+</span><span class="dv">\s</span><span class="op">+</span><span class="kw">(</span><span class="vs">ERROR</span><span class="cf">|</span><span class="vs">WARN</span><span class="cf">|</span><span class="vs">INFO</span><span class="kw">)</span><span class="vs">"</span>)</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> log <span class="kw">in</span> logs:</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    match <span class="op">=</span> pattern.search(log)</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> match:</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>        date, level <span class="op">=</span> match.groups()</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Date: </span><span class="sc">{</span>date<span class="sc">}</span><span class="ss">, Level: </span><span class="sc">{</span>level<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="why-it-matters-13" class="level4">
<h4 class="anchored" data-anchor-id="why-it-matters-13">Why it matters</h4>
<p>Strings in configurations allow flexible system tuning without recompiling. Logs provide the primary record of system behavior and failures. Searching and filtering turn raw logs into actionable insights. APIs and protocols rely on structured strings to communicate. Mastery of these applications makes code more reliable and systems more transparent.</p>
</section>
<section id="exercises-12" class="level4">
<h4 class="anchored" data-anchor-id="exercises-12">Exercises</h4>
<ol type="1">
<li>Parse a JSON string that contains a username and print the value.</li>
<li>Find all log lines that contain <code>"ERROR"</code>.</li>
<li>Perform a case-insensitive search for <code>"warn"</code> in a list of log lines.</li>
<li>Extract the date from a log entry of the form <code>"YYYY-MM-DD ..."</code>.</li>
<li>Parse a configuration string to extract host and port values.</li>
<li>Write a filter that selects only <code>"INFO"</code> level log lines.</li>
<li>Convert a dictionary of settings into a JSON string.</li>
<li>Explain why consistent formatting in logs is important for monitoring systems.</li>
<li>Create a regex that extracts both the date and log level from a log entry.</li>
<li>Design a simple log query: given a list of log strings and a keyword, return all lines that match the keyword.</li>
</ol>
</section>
</section>
<section id="l2-large-scale-systems" class="level3">
<h3 class="anchored" data-anchor-id="l2-large-scale-systems">3.5 L2 — Large-Scale Systems</h3>
<p>When systems handle massive amounts of text, strings are no longer just for messages, logs, or configs. They become the raw material of search engines, data compression, natural language processing, and security enforcement. At this scale, efficiency, correctness, and safety are critical.</p>
<p>Strings in large-scale systems must be stored compactly, searched efficiently, processed for meaning, and sanitized for safety. Specialized algorithms and libraries turn raw text into structured, searchable, and secure data.</p>
<section id="deep-dive-14" class="level4">
<h4 class="anchored" data-anchor-id="deep-dive-14">Deep Dive</h4>
<section id="search-engines" class="level5">
<h5 class="anchored" data-anchor-id="search-engines">Search Engines</h5>
<p>Full-text search systems use inverted indexes: instead of storing text linearly, they map each word to the documents it appears in. Searching <code>"cat"</code> means looking up <code>"cat"</code> in the index rather than scanning every file. Ranking algorithms (like TF-IDF or BM25) then score relevance.</p>
</section>
<section id="data-compression" class="level5">
<h5 class="anchored" data-anchor-id="data-compression">Data Compression</h5>
<p>Strings consume storage. Compression algorithms like Huffman coding, gzip, or dictionary-based schemes reduce size. For example, <code>"banana banana banana"</code> can be compressed by storing <code>"banana"</code> once and pointing to it three times. Compression reduces storage costs and speeds up network transfer.</p>
</section>
<section id="natural-language-processing-nlp" class="level5">
<h5 class="anchored" data-anchor-id="natural-language-processing-nlp">Natural Language Processing (NLP)</h5>
<p>Raw strings must be tokenized (split into words), normalized (case folding, stemming), and sometimes embedded into vectors. <code>"running"</code> → <code>"run"</code>. Preprocessing ensures machine learning models treat text consistently.</p>
</section>
<section id="security" class="level5">
<h5 class="anchored" data-anchor-id="security">Security</h5>
<p>Strings are also attack vectors. SQL injection, XSS, and command injection happen when untrusted strings are executed as code. Escaping or sanitizing input prevents this. Unicode tricks (confusables, hidden nulls) are used in phishing and bypass attacks. Secure systems enforce normalization and validation before processing.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 17%">
<col style="width: 49%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Domain</th>
<th>String Role</th>
<th>Techniques</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Search engine</td>
<td>Find text in billions of docs</td>
<td>Inverted index, ranking</td>
</tr>
<tr class="even">
<td>Compression</td>
<td>Reduce text storage and transfer cost</td>
<td>Huffman, gzip, dictionary</td>
</tr>
<tr class="odd">
<td>NLP</td>
<td>Prepare text for analysis</td>
<td>Tokenization, stemming</td>
</tr>
<tr class="even">
<td>Security</td>
<td>Prevent malicious string usage</td>
<td>Escaping, validation</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="worked-example-python-14" class="level4">
<h4 class="anchored" data-anchor-id="worked-example-python-14">Worked Example (Python)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> zlib</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> defaultdict</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Search Engine Simulation ---</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>documents <span class="op">=</span> {</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span>: <span class="st">"the quick brown fox"</span>,</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span>: <span class="st">"the lazy dog"</span>,</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>: <span class="st">"the fox jumped over the dog"</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Build inverted index</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>index <span class="op">=</span> defaultdict(<span class="bu">list</span>)</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> doc_id, text <span class="kw">in</span> documents.items():</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> word <span class="kw">in</span> text.split():</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>        index[word].append(doc_id)</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Index for 'fox':"</span>, index[<span class="st">"fox"</span>])  <span class="co"># [1, 3]</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Compression Example ---</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="st">"banana banana banana"</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>compressed <span class="op">=</span> zlib.compress(text.encode(<span class="st">"utf-8"</span>))</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>decompressed <span class="op">=</span> zlib.decompress(compressed).decode(<span class="st">"utf-8"</span>)</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Original:"</span>, <span class="bu">len</span>(text), <span class="st">"bytes"</span>)</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Compressed:"</span>, <span class="bu">len</span>(compressed), <span class="st">"bytes"</span>)</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Decompressed:"</span>, decompressed)</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="co"># --- NLP Tokenization &amp; Normalization ---</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>raw <span class="op">=</span> <span class="st">"Running runs runner"</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>tokens <span class="op">=</span> raw.lower().split()</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>stems <span class="op">=</span> [re.sub(<span class="vs">r"</span><span class="kw">(</span><span class="vs">ing</span><span class="cf">|</span><span class="vs">s</span><span class="cf">|</span><span class="vs">er</span><span class="kw">)</span><span class="dv">$</span><span class="vs">"</span>, <span class="st">""</span>, t) <span class="cf">for</span> t <span class="kw">in</span> tokens]  <span class="co"># naive stemming</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Tokens:"</span>, tokens)</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Stems:"</span>, stems)</span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Security Example ---</span></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>unsafe_input <span class="op">=</span> <span class="st">"'; DROP TABLE users; --"</span></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>safe_query <span class="op">=</span> <span class="st">"SELECT * FROM accounts WHERE name = ?"</span></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Unsafe input:"</span>, unsafe_input)</span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Safe query template:"</span>, safe_query)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="why-it-matters-14" class="level4">
<h4 class="anchored" data-anchor-id="why-it-matters-14">Why it matters</h4>
<p>Large-scale string handling powers web search, messaging apps, compression in files and networks, and text-based AI systems. Without inverted indexes, search engines would be unusably slow. Without compression, storage and bandwidth would be wasteful. Without normalization, machine learning models would misinterpret text. Without security checks, attackers could exploit untrusted strings to damage systems. Strings at scale are the backbone of modern computing.</p>
</section>
<section id="exercises-13" class="level4">
<h4 class="anchored" data-anchor-id="exercises-13">Exercises</h4>
<ol type="1">
<li>Explain how an inverted index speeds up searching compared to scanning all documents.</li>
<li>Show how compression reduces storage for repetitive strings like <code>"abc abc abc"</code>.</li>
<li>Tokenize <code>"Cats are running"</code> into lowercase words.</li>
<li>Normalize <code>"Running"</code> into its root form <code>"run"</code>.</li>
<li>Describe why <code>"café"</code> and <code>"cafe"</code> should be normalized before search.</li>
<li>Give an example of SQL injection using a string input.</li>
<li>Explain how escaping special characters prevents injection attacks.</li>
<li>Compare the storage savings between raw and compressed text for a long repeated string.</li>
<li>Propose how to detect Unicode confusables in user names.</li>
<li>Design a small experiment to measure search speed with and without an inverted index.</li>
</ol>
</section>
</section>
</section>
<section id="deep-dive-15" class="level2">
<h2 class="anchored" data-anchor-id="deep-dive-15">Deep Dive</h2>
<section id="representation-1" class="level3">
<h3 class="anchored" data-anchor-id="representation-1">3.1 Representation</h3>
<ul>
<li><p>L0:</p>
<ul>
<li>Immutability in everyday languages (intuitive).</li>
<li>Indexing and slicing basics.</li>
<li>Concatenation and repetition.</li>
<li>ASCII vs Unicode (conceptual).</li>
</ul></li>
<li><p>L1:</p>
<ul>
<li>Immutability and its performance costs.</li>
<li>String interning and memory reuse.</li>
<li>Encoding differences: UTF-8, UTF-16, UTF-32.</li>
<li>Slicing behavior across languages (Python vs Java vs C++).</li>
<li>Efficient concatenation (<code>join</code>, builders, buffers).</li>
</ul></li>
<li><p>L2:</p>
<ul>
<li>Language-specific internals: C <code>char*</code>, C++ <code>std::string</code> + SSO, Python PEP 393, Java <code>String</code>, Go slices, Rust <code>String</code>/<code>&amp;str</code>.</li>
<li>OS-level considerations: heap vs stack, fragmentation, system call boundaries.</li>
<li>Hardware-level: cache alignment, SIMD optimization in libc.</li>
<li>Unicode normalization (NFC, NFD, case folding).</li>
<li>Security issues: confusables, null injection.</li>
<li>ICU, RE2, Hyperscan as production-grade libraries.</li>
</ul></li>
</ul>
</section>
<section id="operations-1" class="level3">
<h3 class="anchored" data-anchor-id="operations-1">3.2 Operations</h3>
<ul>
<li><p>L0:</p>
<ul>
<li>Case conversion (upper, lower).</li>
<li>Trimming whitespace.</li>
<li>Basic search (<code>find</code>, <code>in</code>).</li>
<li>Splitting and joining.</li>
<li>Simple string formatting.</li>
</ul></li>
<li><p>L1:</p>
<ul>
<li>Efficient searching (<code>startswith</code>, <code>endswith</code>).</li>
<li>Counting substrings and replacing.</li>
<li>Regular expression basics (<code>.</code>, <code>*</code>, <code>+</code>, <code>[]</code>).</li>
<li>Parsing structured text (CSV, JSON).</li>
<li>Performance pitfalls (naive concatenation, multiple scans).</li>
</ul></li>
<li><p>L2:</p>
<ul>
<li>String search algorithms: Naive, KMP, Boyer–Moore.</li>
<li>Regex engine internals (backtracking vs DFA/NFA).</li>
<li>Tokenization in compilers (lexical analysis with automata).</li>
<li>Unicode-aware searching and case folding.</li>
<li>System boundary handling (sockets, files, encodings).</li>
<li>SIMD-accelerated substring search.</li>
</ul></li>
</ul>
</section>
<section id="comparison-1" class="level3">
<h3 class="anchored" data-anchor-id="comparison-1">3.3 Comparison</h3>
<ul>
<li><p>L0:</p>
<ul>
<li>Equality checks (case-sensitive, whitespace).</li>
<li>Lexicographic ordering.</li>
<li>Sorting by dictionary order.</li>
</ul></li>
<li><p>L1:</p>
<ul>
<li>Case-insensitive comparisons.</li>
<li>Locale-aware collation (German vs Swedish).</li>
<li>Natural sorting with numbers (<code>file2</code> &lt; <code>file10</code>).</li>
<li>Database collations (CI/CS, AI/AS).</li>
</ul></li>
<li><p>L2:</p>
<ul>
<li>Unicode normalization for equality.</li>
<li>Case folding vs lowercase.</li>
<li>ICU collation internals.</li>
<li>System-level optimizations (memcmp, short-circuit).</li>
<li>Cache-aware comparison for large text.</li>
<li>Detecting and handling Unicode confusables.</li>
</ul></li>
</ul>
</section>
<section id="patterns-1" class="level3">
<h3 class="anchored" data-anchor-id="patterns-1">3.4 Patterns</h3>
<ul>
<li><p>L0:</p>
<ul>
<li>Simple substring search.</li>
<li>Replace operations.</li>
<li>Wildcards (<code>*</code>, <code>?</code>) as intuitive pattern matching.</li>
</ul></li>
<li><p>L1:</p>
<ul>
<li>Regex syntax: quantifiers, anchors, character classes.</li>
<li>Greedy vs lazy matching.</li>
<li>Regex for input validation (emails, phones).</li>
<li>Extracting structured data from logs.</li>
</ul></li>
<li><p>L2:</p>
<ul>
<li>Regex engine architectures: backtracking, DFA/NFA, hybrid JIT.</li>
<li>Performance optimizations (precompiled regex, anchors, SIMD).</li>
<li>Production libraries: RE2, Hyperscan, ICU.</li>
<li>System integration: compilers, search tools, IDS.</li>
<li>Security: catastrophic backtracking, ReDoS.</li>
</ul></li>
</ul>
</section>
<section id="applications-1" class="level3">
<h3 class="anchored" data-anchor-id="applications-1">3.5 Applications</h3>
<ul>
<li><p>L0:</p>
<ul>
<li>Simple greetings and message formatting.</li>
<li>Reading and writing small text files.</li>
<li>Input validation (non-empty, length, alphanumeric).</li>
<li>Joining/extracting small strings.</li>
</ul></li>
<li><p>L1:</p>
<ul>
<li>Configurations (INI, JSON, YAML).</li>
<li>Logs and monitoring pipelines.</li>
<li>Searching and filtering text data.</li>
<li>APIs and network payloads as strings.</li>
</ul></li>
<li><p>L2:</p>
<ul>
<li>Search engines with inverted indexes.</li>
<li>Text compression (Huffman, gzip, dictionary).</li>
<li>Natural language preprocessing (tokenization, stemming).</li>
<li>Security concerns: injections, normalization, Unicode attacks.</li>
<li>High-scale performance engineering for string-heavy systems.</li>
</ul></li>
</ul>
</section>
</section>
<section id="lab" class="level2">
<h2 class="anchored" data-anchor-id="lab">LAB</h2>
<section id="representation-2" class="level3">
<h3 class="anchored" data-anchor-id="representation-2">3.1 Representation</h3>
<ul>
<li><p>LAB 1: String Encodings in Practice</p>
<ul>
<li>Represent the same text (<code>"A😊"</code>) in UTF-8, UTF-16, and UTF-32.</li>
<li>Measure memory size in each encoding.</li>
<li>Show how slicing works differently in each.</li>
</ul></li>
<li><p>LAB 2: String Interning and Memory Efficiency</p>
<ul>
<li>Create repeated strings with and without interning.</li>
<li>Measure memory usage.</li>
<li>Discuss practical use cases (symbol tables, compilers).</li>
</ul></li>
<li><p>LAB 3: Kernel-Level String Operations</p>
<ul>
<li>Explore C <code>char*</code> strings with <code>strlen</code> and buffer overflows.</li>
<li>Compare to higher-level language safety (Python, Java).</li>
</ul></li>
</ul>
</section>
<section id="operations-2" class="level3">
<h3 class="anchored" data-anchor-id="operations-2">3.2 Operations</h3>
<ul>
<li><p>LAB 4: Concatenation Cost Benchmark</p>
<ul>
<li>Compare loop concatenation (<code>+</code>) vs buffered approaches (<code>join</code>, builders).</li>
<li>Measure time for small, medium, and large inputs.</li>
</ul></li>
<li><p>LAB 5: Regex Basics Explorer</p>
<ul>
<li>Implement small regex patterns (<code>[0-9]+</code>, <code>\w+</code>) across different languages.</li>
<li>Show differences in syntax and output.</li>
</ul></li>
<li><p>LAB 6: CSV Parsing Pitfalls</p>
<ul>
<li>Try splitting <code>"apple,"banana,grape",cherry"</code> naively.</li>
<li>Show incorrect results.</li>
<li>Contrast with proper CSV parsers.</li>
</ul></li>
</ul>
</section>
<section id="comparison-2" class="level3">
<h3 class="anchored" data-anchor-id="comparison-2">3.3 Comparison</h3>
<ul>
<li><p>LAB 7: Locale-Aware Sorting</p>
<ul>
<li>Sort a list with <code>"ä"</code>, <code>"z"</code>, <code>"apple"</code>.</li>
<li>Show German vs Swedish locale differences.</li>
</ul></li>
<li><p>LAB 8: Unicode Normalization Demo</p>
<ul>
<li>Compare <code>"café"</code> vs <code>"cafe\u0301"</code>.</li>
<li>Show why normalization (NFC, NFD) matters for equality.</li>
</ul></li>
<li><p>LAB 9: Confusable Characters Security Check</p>
<ul>
<li>Compare Latin <code>"a"</code> vs Cyrillic <code>"а"</code>.</li>
<li>Build a detector for confusable Unicode characters.</li>
</ul></li>
</ul>
</section>
<section id="patterns-2" class="level3">
<h3 class="anchored" data-anchor-id="patterns-2">3.4 Patterns</h3>
<ul>
<li><p>LAB 10: Substring Search Algorithms</p>
<ul>
<li>Implement Naive, KMP, and Boyer–Moore search.</li>
<li>Benchmark them on long repetitive text.</li>
</ul></li>
<li><p>LAB 11: Regex Engine Catastrophe</p>
<ul>
<li>Use <code>(a+)+b</code> on long input without a <code>b</code>.</li>
<li>Measure how exponential backtracking freezes the engine.</li>
<li>Contrast with RE2 (linear-time safe).</li>
</ul></li>
<li><p>LAB 12: Greedy vs Lazy Matching</p>
<ul>
<li>Run regex <code>"&lt;tag&gt;.*&lt;/tag&gt;"</code> vs <code>"&lt;tag&gt;.*?&lt;/tag&gt;"</code> on HTML-like text.</li>
<li>Show difference between greedy and lazy quantifiers.</li>
</ul></li>
</ul>
</section>
<section id="applications-2" class="level3">
<h3 class="anchored" data-anchor-id="applications-2">3.5 Applications</h3>
<ul>
<li><p>LAB 13: Build a Mini Inverted Index</p>
<ul>
<li>Take a small set of documents.</li>
<li>Build an index mapping words to documents.</li>
<li>Query the index for <code>"fox"</code>, <code>"dog"</code>, etc.</li>
</ul></li>
<li><p>LAB 14: Compression of Repetitive Strings</p>
<ul>
<li>Implement a simple dictionary compressor.</li>
<li>Compare original vs compressed sizes for <code>"banana banana banana"</code>.</li>
</ul></li>
<li><p>LAB 15: Injection Attack Simulation</p>
<ul>
<li>Build a simple query string with unsanitized input.</li>
<li>Show how malicious input (<code>"'; DROP TABLE users; --"</code>) alters behavior.</li>
<li>Fix it with escaping or parameter binding.</li>
</ul></li>
</ul>
</section>
</section>
<section id="lab-1-string-encodings-in-practice" class="level2">
<h2 class="anchored" data-anchor-id="lab-1-string-encodings-in-practice">LAB 1: String Encodings in Practice</h2>
<section id="goal" class="level3">
<h3 class="anchored" data-anchor-id="goal">Goal</h3>
<p>Understand how different encodings (UTF-8, UTF-16, UTF-32) represent the same text. Learn how memory size changes depending on encoding, and why this matters for storage and transmission.</p>
</section>
<section id="setup" class="level3">
<h3 class="anchored" data-anchor-id="setup">Setup</h3>
<p>You can use any language that provides access to string encodings (Python, Go, C, Java). Python is a good choice because its <code>encode()</code> method supports multiple encodings.</p>
<p>Text sample:</p>
<pre><code>"A😊"</code></pre>
<p>This combines a simple ASCII character (<code>A</code>) with a multi-byte emoji (<code>😊</code>).</p>
</section>
<section id="step-by-step" class="level3">
<h3 class="anchored" data-anchor-id="step-by-step">Step-by-Step</h3>
<ol type="1">
<li><p>Represent the string in memory</p>
<ul>
<li>Create the string <code>"A😊"</code>.</li>
<li>Print its length in characters.</li>
<li>Print its length in bytes when encoded in UTF-8, UTF-16, and UTF-32.</li>
</ul></li>
<li><p>Inspect the raw byte sequences</p>
<ul>
<li>Encode the string in each format.</li>
<li>Print the resulting byte arrays.</li>
<li>Write them in hexadecimal for clarity.</li>
</ul></li>
<li><p>Compare differences</p>
<ul>
<li>Notice that UTF-8 is variable-length (1 byte for <code>A</code>, 4 bytes for <code>😊</code>).</li>
<li>UTF-16 uses 2 bytes for <code>A</code>, 4 bytes for <code>😊</code> (surrogate pair).</li>
<li>UTF-32 uses 4 bytes for both.</li>
</ul></li>
<li><p>Reflect on trade-offs</p>
<ul>
<li>UTF-8 is compact for ASCII-heavy text (English).</li>
<li>UTF-16 is a balance for languages with many non-ASCII characters.</li>
<li>UTF-32 is simple but wastes space.</li>
</ul></li>
</ol>
</section>
<section id="example-python" class="level3">
<h3 class="anchored" data-anchor-id="example-python">Example (Python)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="st">"A😊"</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Characters:"</span>, <span class="bu">len</span>(text))</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># UTF-8</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>utf8_bytes <span class="op">=</span> text.encode(<span class="st">"utf-8"</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"UTF-8 length:"</span>, <span class="bu">len</span>(utf8_bytes), <span class="st">"bytes"</span>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"UTF-8 bytes:"</span>, utf8_bytes.<span class="bu">hex</span>())</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co"># UTF-16</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>utf16_bytes <span class="op">=</span> text.encode(<span class="st">"utf-16"</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"UTF-16 length:"</span>, <span class="bu">len</span>(utf16_bytes), <span class="st">"bytes"</span>)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"UTF-16 bytes:"</span>, utf16_bytes.<span class="bu">hex</span>())</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co"># UTF-32</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>utf32_bytes <span class="op">=</span> text.encode(<span class="st">"utf-32"</span>)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"UTF-32 length:"</span>, <span class="bu">len</span>(utf32_bytes), <span class="st">"bytes"</span>)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"UTF-32 bytes:"</span>, utf32_bytes.<span class="bu">hex</span>())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Expected output (approximate, may differ by platform endianness):</p>
<pre><code>Characters: 2
UTF-8 length: 5 bytes
UTF-8 bytes: 41f09f988a
UTF-16 length: 6 bytes
UTF-16 bytes: fffe41003dd89a
UTF-32 length: 8 bytes
UTF-32 bytes: fffe0000410001f60a</code></pre>
</section>
<section id="expected-results" class="level3">
<h3 class="anchored" data-anchor-id="expected-results">Expected Results</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Encoding</th>
<th>Bytes for <code>"A"</code></th>
<th>Bytes for <code>"😊"</code></th>
<th>Total Bytes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>UTF-8</td>
<td>1</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td>UTF-16</td>
<td>2</td>
<td>4 (surrogate)</td>
<td>6</td>
</tr>
<tr class="odd">
<td>UTF-32</td>
<td>4</td>
<td>4</td>
<td>8</td>
</tr>
</tbody>
</table>
</section>
<section id="why-it-matters-15" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-15">Why it matters</h3>
<ul>
<li>Encoding affects storage cost and speed.</li>
<li>A file with millions of ASCII characters will be 2× bigger in UTF-16 than UTF-8.</li>
<li>Emojis or non-Latin scripts can make UTF-8 larger than UTF-16.</li>
<li>Choosing the wrong encoding can waste storage, slow down transmission, or even corrupt data if misinterpreted.</li>
</ul>
</section>
<section id="exercises-14" class="level3">
<h3 class="anchored" data-anchor-id="exercises-14">Exercises</h3>
<ol type="1">
<li>Encode the string <code>"Hello"</code> in UTF-8, UTF-16, UTF-32. Compare sizes.</li>
<li>Repeat with <code>"こんにちは"</code> (Japanese). Which encoding is most efficient?</li>
<li>Inspect the raw bytes of <code>"💡"</code> and explain why it requires surrogate pairs in UTF-16.</li>
<li>Write a program that takes any string and reports its size in multiple encodings.</li>
<li>Explain why UTF-32 is rarely used for storage despite its simplicity.</li>
</ol>
</section>
</section>
<section id="lab-2-string-interning-and-memory-efficiency" class="level2">
<h2 class="anchored" data-anchor-id="lab-2-string-interning-and-memory-efficiency">LAB 2: String Interning and Memory Efficiency</h2>
<section id="goal-1" class="level3">
<h3 class="anchored" data-anchor-id="goal-1">Goal</h3>
<p>Understand how string interning reduces memory usage by reusing identical string objects. Learn when interning happens automatically, when it must be explicit, and why it matters in systems with many repeated strings.</p>
</section>
<section id="setup-1" class="level3">
<h3 class="anchored" data-anchor-id="setup-1">Setup</h3>
<p>Use a language that supports string interning (Python, Java, C#, Go with symbol tables, etc.). We’ll use Python because it demonstrates both automatic interning (for short literals) and manual interning (<code>sys.intern()</code>).</p>
<p>Test dataset: a large list of repeated keys (e.g., <code>"user123"</code>, <code>"error"</code>, <code>"warning"</code>).</p>
</section>
<section id="step-by-step-1" class="level3">
<h3 class="anchored" data-anchor-id="step-by-step-1">Step-by-Step</h3>
<ol type="1">
<li><p>Automatic Interning of Literals</p>
<ul>
<li>Define two identical string literals.</li>
<li>Compare them with <code>==</code> (value equality) and <code>is</code> (identity).</li>
<li>Observe that they may point to the same object in memory.</li>
</ul></li>
<li><p>Non-Interned Strings</p>
<ul>
<li>Build identical strings at runtime (e.g., <code>"ab" + "cd"</code>).</li>
<li>Check identity with <code>is</code>.</li>
<li>They may not be the same object, even if values match.</li>
</ul></li>
<li><p>Explicit Interning</p>
<ul>
<li>Use <code>sys.intern()</code> on repeated dynamic strings.</li>
<li>Compare memory addresses before and after.</li>
</ul></li>
<li><p>Memory Benchmark</p>
<ul>
<li>Create a list of repeated values (e.g., 100k <code>"error"</code> strings).</li>
<li>Measure memory usage with and without interning.</li>
</ul></li>
<li><p>Discussion</p>
<ul>
<li>Interning saves memory by keeping one copy of repeated values.</li>
<li>It speeds up dictionary lookups (symbols, keywords, tokens).</li>
<li>But it increases memory if used on unique or rarely repeated strings.</li>
</ul></li>
</ol>
</section>
<section id="example-python-1" class="level3">
<h3 class="anchored" data-anchor-id="example-python-1">Example (Python)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Automatic interning</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="st">"hello"</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> <span class="st">"hello"</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"a == b:"</span>, a <span class="op">==</span> b)   <span class="co"># True (values equal)</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"a is b:"</span>, a <span class="kw">is</span> b)   <span class="co"># True (same object due to interning)</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Non-interned strings</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="st">""</span>.join([<span class="st">"he"</span>, <span class="st">"llo"</span>])</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="st">""</span>.join([<span class="st">"he"</span>, <span class="st">"llo"</span>])</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"x == y:"</span>, x <span class="op">==</span> y)   <span class="co"># True (values equal)</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"x is y:"</span>, x <span class="kw">is</span> y)   <span class="co"># False (different objects)</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Manual interning</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>x_interned <span class="op">=</span> sys.<span class="bu">intern</span>(x)</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>y_interned <span class="op">=</span> sys.<span class="bu">intern</span>(y)</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"x_interned is y_interned:"</span>, x_interned <span class="kw">is</span> y_interned)  <span class="co"># True</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Memory efficiency demo</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>words <span class="op">=</span> [<span class="st">"error"</span>] <span class="op">*</span> <span class="dv">100000</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>unique_words <span class="op">=</span> [sys.<span class="bu">intern</span>(<span class="st">"error"</span>) <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100000</span>)]</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Normal list length:"</span>, <span class="bu">len</span>(words))</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Interned list length:"</span>, <span class="bu">len</span>(unique_words))</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Normal memory ids (first 3):"</span>, [<span class="bu">id</span>(w) <span class="cf">for</span> w <span class="kw">in</span> words[:<span class="dv">3</span>]])</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Interned memory ids (first 3):"</span>, [<span class="bu">id</span>(w) <span class="cf">for</span> w <span class="kw">in</span> unique_words[:<span class="dv">3</span>]])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="expected-results-1" class="level3">
<h3 class="anchored" data-anchor-id="expected-results-1">Expected Results</h3>
<ul>
<li>String literals often share the same memory address.</li>
<li>Dynamically built identical strings are separate objects unless interned.</li>
<li>Interned strings reuse the same memory, reducing duplication.</li>
</ul>
<table class="caption-top table">
<colgroup>
<col style="width: 32%">
<col style="width: 21%">
<col style="width: 45%">
</colgroup>
<thead>
<tr class="header">
<th>Case</th>
<th>Identity (<code>is</code>)</th>
<th>Memory effect</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>"hello"</code> vs <code>"hello"</code></td>
<td>True</td>
<td>Interned automatically.</td>
</tr>
<tr class="even">
<td><code>"".join(["he","llo"])</code></td>
<td>False</td>
<td>Different objects in memory.</td>
</tr>
<tr class="odd">
<td><code>sys.intern()</code> applied</td>
<td>True</td>
<td>Both point to one shared object.</td>
</tr>
</tbody>
</table>
</section>
<section id="why-it-matters-16" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-16">Why it matters</h3>
<ul>
<li>Compilers and interpreters use interning for keywords, identifiers, and symbols.</li>
<li>Databases and search engines save memory when handling millions of repeated strings.</li>
<li>Performance improves because identity comparison (<code>is</code>) is faster than value comparison.</li>
<li>Overuse of interning on unique strings wastes memory and CPU cycles.</li>
</ul>
</section>
<section id="exercises-15" class="level3">
<h3 class="anchored" data-anchor-id="exercises-15">Exercises</h3>
<ol type="1">
<li>Create two identical literals and prove they point to the same memory location.</li>
<li>Build two identical strings dynamically and show they are different objects.</li>
<li>Apply interning to the dynamic strings and prove they now share memory.</li>
<li>Create 10,000 repeated <code>"apple"</code> strings with and without interning. Compare identity checks.</li>
<li>Explain why interning improves dictionary lookups.</li>
<li>Show an example where interning increases memory use (hint: many unique strings).</li>
<li>Compare interned vs non-interned strings in terms of lookup speed in a dictionary of 100k keys.</li>
<li>Describe how interning is used in language runtimes (e.g., symbol tables in compilers).</li>
<li>Propose a scenario in large-scale systems (like log processing) where interning saves significant memory.</li>
<li>Explain why interning must be combined with garbage collection to avoid memory leaks.</li>
</ol>
</section>
</section>
<section id="lab-3-kernel-level-string-operations" class="level2">
<h2 class="anchored" data-anchor-id="lab-3-kernel-level-string-operations">LAB 3: Kernel-Level String Operations</h2>
<section id="goal-2" class="level3">
<h3 class="anchored" data-anchor-id="goal-2">Goal</h3>
<p>Explore how strings are represented at the C level using <code>char*</code>. Learn how null terminators (<code>'\0'</code>) define string boundaries, how buffer overflows occur, and why higher-level languages add safety.</p>
</section>
<section id="setup-2" class="level3">
<h3 class="anchored" data-anchor-id="setup-2">Setup</h3>
<p>This lab uses C (or C-like pseudocode). It can be run with <code>gcc</code> or <code>clang</code>. We’ll demonstrate:</p>
<ol type="1">
<li>How C stores strings in memory.</li>
<li>What happens when the null terminator is missing.</li>
<li>Why functions like <code>strcpy</code> can cause buffer overflows.</li>
</ol>
</section>
<section id="step-by-step-2" class="level3">
<h3 class="anchored" data-anchor-id="step-by-step-2">Step-by-Step</h3>
<ol type="1">
<li><p>String Representation in C</p>
<ul>
<li>Create a C string with <code>char s[] = "hello";</code>.</li>
<li>Print its characters in a loop.</li>
<li>Show that memory includes <code>'\0'</code> at the end.</li>
</ul></li>
<li><p>Effect of Null Terminator</p>
<ul>
<li>Create a buffer without <code>'\0'</code>.</li>
<li>Pass it to <code>printf("%s")</code>.</li>
<li>Observe how the function reads past the intended end, printing garbage or crashing.</li>
</ul></li>
<li><p>Buffer Overflow Risk</p>
<ul>
<li>Create a small buffer (e.g., 5 bytes).</li>
<li>Copy a larger string into it with <code>strcpy</code>.</li>
<li>Show that memory beyond the buffer is overwritten.</li>
</ul></li>
<li><p>Safer Alternatives</p>
<ul>
<li>Replace <code>strcpy</code> with <code>strncpy</code> or <code>snprintf</code>.</li>
<li>Show how they limit copies and prevent overflows.</li>
</ul></li>
</ol>
</section>
<section id="example-c" class="level3">
<h3 class="anchored" data-anchor-id="example-c">Example (C)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">// 1. String representation</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> s<span class="op">[]</span> <span class="op">=</span> <span class="st">"hello"</span><span class="op">;</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"String: </span><span class="sc">%s\n</span><span class="st">"</span><span class="op">,</span> s<span class="op">);</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="kw">sizeof</span><span class="op">(</span>s<span class="op">);</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"Byte </span><span class="sc">%d</span><span class="st">: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> i<span class="op">,</span> s<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">// 2. Missing null terminator</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> bad<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="ch">'h'</span><span class="op">,</span><span class="ch">'e'</span><span class="op">,</span><span class="ch">'l'</span><span class="op">,</span><span class="ch">'l'</span><span class="op">,</span><span class="ch">'o'</span><span class="op">};</span> <span class="co">// no '\0'</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Bad string (no null): </span><span class="sc">%s\n</span><span class="st">"</span><span class="op">,</span> bad<span class="op">);</span> <span class="co">// prints garbage</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">// 3. Buffer overflow</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> small<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>small<span class="op">,</span> <span class="st">"overflow!"</span><span class="op">);</span> <span class="co">// too long, unsafe</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Overflowed string: </span><span class="sc">%s\n</span><span class="st">"</span><span class="op">,</span> small<span class="op">);</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">// 4. Safe alternative</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> safe<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>    strncpy<span class="op">(</span>safe<span class="op">,</span> <span class="st">"safe"</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>safe<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    safe<span class="op">[</span><span class="kw">sizeof</span><span class="op">(</span>safe<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="ch">'</span><span class="sc">\0</span><span class="ch">'</span><span class="op">;</span> <span class="co">// ensure null terminator</span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Safe string: </span><span class="sc">%s\n</span><span class="st">"</span><span class="op">,</span> safe<span class="op">);</span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="expected-results-2" class="level3">
<h3 class="anchored" data-anchor-id="expected-results-2">Expected Results</h3>
<ol type="1">
<li>The string <code>"hello"</code> occupies 6 bytes: 5 characters + 1 null terminator.</li>
<li>Without <code>'\0'</code>, <code>printf</code> continues reading memory until it finds a random null.</li>
<li><code>strcpy</code> into a small buffer overwrites adjacent memory, causing corruption or crashes.</li>
<li><code>strncpy</code> keeps the buffer safe by limiting copied characters.</li>
</ol>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Case</th>
<th>Behavior</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>With <code>'\0'</code></td>
<td>Prints correctly.</td>
</tr>
<tr class="even">
<td>Without <code>'\0'</code></td>
<td>Prints garbage or crashes.</td>
</tr>
<tr class="odd">
<td>Overflow with <code>strcpy</code></td>
<td>Memory corruption.</td>
</tr>
<tr class="even">
<td>Safe with <code>strncpy</code></td>
<td>Correct, bounded copy.</td>
</tr>
</tbody>
</table>
</section>
<section id="why-it-matters-17" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-17">Why it matters</h3>
<ul>
<li>C-level strings are unsafe by default. The programmer must manage termination and bounds.</li>
<li>Buffer overflows are a leading cause of security vulnerabilities.</li>
<li>Kernel code, device drivers, and embedded systems often rely on raw C strings.</li>
<li>Higher-level languages (Python, Java, Go, Rust) wrap strings in safe abstractions, preventing these bugs.</li>
</ul>
</section>
<section id="exercises-16" class="level3">
<h3 class="anchored" data-anchor-id="exercises-16">Exercises</h3>
<ol type="1">
<li>Create a C string and print its bytes, showing the null terminator.</li>
<li>Remove the null terminator from a string and observe the output.</li>
<li>Copy <code>"abcdefgh"</code> into a buffer of size 5 and note the result.</li>
<li>Rewrite the unsafe copy using <code>strncpy</code> or <code>snprintf</code>.</li>
<li>Explain why <code>strncpy</code> may leave out the null terminator if not handled carefully.</li>
<li>Investigate what happens if you forget to set <code>safe[sizeof(safe)-1] = '\0'</code>.</li>
<li>Compare memory usage of <code>"hello"</code> vs <code>"hello world"</code>.</li>
<li>Explain why C strings make functions like <code>strlen</code> O(n) instead of O(1).</li>
<li>Show how buffer overflows can alter unrelated variables in memory.</li>
<li>Discuss how Rust or Go prevents these issues by design.</li>
</ol>
</section>
</section>
<section id="lab-4-concatenation-cost-benchmark" class="level2">
<h2 class="anchored" data-anchor-id="lab-4-concatenation-cost-benchmark">LAB 4: Concatenation Cost Benchmark</h2>
<section id="goal-3" class="level3">
<h3 class="anchored" data-anchor-id="goal-3">Goal</h3>
<p>Measure the cost of string concatenation when building large strings. Understand why naive approaches (<code>+</code> in loops) are inefficient, and how buffered approaches (<code>join</code>, builders, buffers) improve performance.</p>
</section>
<section id="setup-3" class="level3">
<h3 class="anchored" data-anchor-id="setup-3">Setup</h3>
<p>This lab can be done in Python, Java, Go, or C++. Each has different idioms:</p>
<ul>
<li>Python → <code>+</code> vs <code>"".join(list)</code></li>
<li>Java → <code>+</code> vs <code>StringBuilder</code></li>
<li>Go → <code>+=</code> vs <code>strings.Builder</code></li>
<li>C++ → <code>+</code> vs <code>std::ostringstream</code></li>
</ul>
<p>We’ll use Python as the demonstration language.</p>
</section>
<section id="step-by-step-3" class="level3">
<h3 class="anchored" data-anchor-id="step-by-step-3">Step-by-Step</h3>
<ol type="1">
<li><p>Naive Concatenation in Loop</p>
<ul>
<li>Start with an empty string.</li>
<li>Append characters one by one with <code>+</code>.</li>
<li>Measure execution time.</li>
</ul></li>
<li><p>Buffered Concatenation with List + Join</p>
<ul>
<li>Store characters in a list.</li>
<li>Use <code>"".join(list)</code> to build the final string once.</li>
<li>Measure execution time.</li>
</ul></li>
<li><p>Compare Results</p>
<ul>
<li>Show how loop concatenation scales poorly (O(n²)).</li>
<li>Show how buffered concatenation scales linearly (O(n)).</li>
</ul></li>
<li><p>Experiment with Sizes</p>
<ul>
<li>Run benchmarks for N = 10³, 10⁴, 10⁵ characters.</li>
<li>Record execution times.</li>
</ul></li>
<li><p>Discussion</p>
<ul>
<li>Naive concatenation reallocates and copies strings repeatedly.</li>
<li>Buffered methods allocate memory once and fill it efficiently.</li>
<li>Similar patterns exist across languages.</li>
</ul></li>
</ol>
</section>
<section id="example-python-2" class="level3">
<h3 class="anchored" data-anchor-id="example-python-2">Example (Python)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> naive_concat(n):</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> <span class="st">""</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>        s <span class="op">+=</span> <span class="st">"x"</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> s</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> join_concat(n):</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    parts <span class="op">=</span> []</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>        parts.append(<span class="st">"x"</span>)</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">""</span>.join(parts)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> N <span class="kw">in</span> [<span class="dv">1000</span>, <span class="dv">10000</span>, <span class="dv">50000</span>]:</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> time.time()</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    naive_concat(N)</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Naive concat N=</span><span class="sc">{</span>N<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span><span class="bu">round</span>(time.time() <span class="op">-</span> start, <span class="dv">4</span>)<span class="sc">}</span><span class="ss">s"</span>)</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> time.time()</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>    join_concat(N)</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Join concat N=</span><span class="sc">{</span>N<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span><span class="bu">round</span>(time.time() <span class="op">-</span> start, <span class="dv">4</span>)<span class="sc">}</span><span class="ss">s"</span>)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"---"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="expected-results-3" class="level3">
<h3 class="anchored" data-anchor-id="expected-results-3">Expected Results</h3>
<ul>
<li>For small N (1000), both methods are similar.</li>
<li>For larger N (50k+), naive concatenation slows dramatically.</li>
</ul>
<table class="caption-top table">
<thead>
<tr class="header">
<th>N</th>
<th>Naive <code>+</code> (s)</th>
<th>Join (s)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1,000</td>
<td>~0.002</td>
<td>~0.001</td>
</tr>
<tr class="even">
<td>10,000</td>
<td>~0.15</td>
<td>~0.01</td>
</tr>
<tr class="odd">
<td>50,000</td>
<td>~3.0+</td>
<td>~0.05</td>
</tr>
</tbody>
</table>
</section>
<section id="why-it-matters-18" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-18">Why it matters</h3>
<ul>
<li>Text-heavy applications (logs, report generation, data pipelines) must build large strings efficiently.</li>
<li>Using the wrong method can multiply runtime by 100× or more.</li>
<li>High-level languages hide memory allocation, but understanding efficiency prevents hidden bottlenecks.</li>
<li>Systems languages (C++, Rust, Go) provide explicit builders to avoid repeated allocations.</li>
</ul>
</section>
<section id="exercises-17" class="level3">
<h3 class="anchored" data-anchor-id="exercises-17">Exercises</h3>
<ol type="1">
<li>Benchmark string concatenation with <code>+</code> for N = 1000, 10,000, and 100,000.</li>
<li>Benchmark buffered concatenation (<code>join</code>, <code>StringBuilder</code>, or equivalent).</li>
<li>Plot execution time against N for both methods.</li>
<li>Explain why naive concatenation is O(n²).</li>
<li>Demonstrate that small strings (N &lt; 100) show no noticeable difference.</li>
<li>Compare Python <code>join</code> with Go <code>strings.Builder</code>.</li>
<li>Create a function that takes a list of words and joins them with spaces efficiently.</li>
<li>Show how repeated concatenation can impact log processing in a simulated workload.</li>
<li>Extend the benchmark to include Unicode characters like <code>"😊"</code>.</li>
<li>Propose an optimization strategy for building multi-megabyte strings in a web server.</li>
</ol>
</section>
</section>
<section id="lab-5-regex-basics-explorer" class="level2">
<h2 class="anchored" data-anchor-id="lab-5-regex-basics-explorer">LAB 5: Regex Basics Explorer</h2>
<section id="goal-4" class="level3">
<h3 class="anchored" data-anchor-id="goal-4">Goal</h3>
<p>Learn how regular expressions (regex) describe text patterns. Practice matching digits, words, and simple patterns across strings. Compare regex behavior across different languages, noting syntax similarities and differences.</p>
</section>
<section id="setup-4" class="level3">
<h3 class="anchored" data-anchor-id="setup-4">Setup</h3>
<p>Regex exists in almost every modern language.</p>
<ul>
<li>Python → <code>re</code> module</li>
<li>Java → <code>Pattern</code> / <code>Matcher</code></li>
<li>Go → <code>regexp</code> package</li>
<li>C++ → <code>&lt;regex&gt;</code></li>
<li>JavaScript → <code>/pattern/</code> literals</li>
</ul>
<p>We’ll demonstrate in Python for clarity, but the concepts transfer directly.</p>
</section>
<section id="step-by-step-4" class="level3">
<h3 class="anchored" data-anchor-id="step-by-step-4">Step-by-Step</h3>
<ol type="1">
<li><p>Basic Digit Matching</p>
<ul>
<li>Use <code>[0-9]+</code> to match sequences of digits.</li>
<li>Extract numbers from a sentence.</li>
</ul></li>
<li><p>Word Matching</p>
<ul>
<li>Use <code>\w+</code> to capture words (letters, digits, underscores).</li>
<li>Show how it splits a sentence into tokens.</li>
</ul></li>
<li><p>Anchors</p>
<ul>
<li>Use <code>^pattern</code> to match the start of a string.</li>
<li>Use <code>pattern$</code> to match the end.</li>
</ul></li>
<li><p>Character Classes</p>
<ul>
<li><code>[aeiou]</code> matches vowels.</li>
<li><code>[A-Z]</code> matches uppercase letters.</li>
</ul></li>
<li><p>Practical Example: Email</p>
<ul>
<li>Use <code>\w+@\w+\.\w+</code> to match simple emails.</li>
<li>Note limitations (not RFC-complete, but useful).</li>
</ul></li>
</ol>
</section>
<section id="example-python-3" class="level3">
<h3 class="anchored" data-anchor-id="example-python-3">Example (Python)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="st">"User Alice has email alice@example.com and id 12345."</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Digits</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>digits <span class="op">=</span> re.findall(<span class="vs">r"</span><span class="pp">[0-9]</span><span class="op">+</span><span class="vs">"</span>, text)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Digits:"</span>, digits)  <span class="co"># ['12345']</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Words</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>words <span class="op">=</span> re.findall(<span class="vs">r"</span><span class="dv">\w</span><span class="op">+</span><span class="vs">"</span>, text)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Words:"</span>, words)   <span class="co"># ['User', 'Alice', 'has', ...]</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Anchors</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">bool</span>(re.match(<span class="vs">r"User"</span>, text)))   <span class="co"># True (starts with "User")</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">bool</span>(re.search(<span class="vs">r"12345</span><span class="dv">$</span><span class="vs">"</span>, text))) <span class="co"># True (ends with "12345.")</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Character classes</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>vowels <span class="op">=</span> re.findall(<span class="vs">r"</span><span class="pp">[aeiou]</span><span class="vs">"</span>, text)</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Vowels:"</span>, vowels)</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Email pattern</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>emails <span class="op">=</span> re.findall(<span class="vs">r"</span><span class="dv">\w</span><span class="op">+</span><span class="vs">@</span><span class="dv">\w</span><span class="op">+</span><span class="ch">\.</span><span class="dv">\w</span><span class="op">+</span><span class="vs">"</span>, text)</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Emails:"</span>, emails)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="expected-results-4" class="level3">
<h3 class="anchored" data-anchor-id="expected-results-4">Expected Results</h3>
<ul>
<li><code>[0-9]+</code> extracts <code>"12345"</code>.</li>
<li><code>\w+</code> splits the sentence into words.</li>
<li><code>^User</code> matches the beginning.</li>
<li><code>[aeiou]</code> finds vowels.</li>
<li><code>\w+@\w+\.\w+</code> extracts <code>"alice@example.com"</code>.</li>
</ul>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Pattern</th>
<th>Meaning</th>
<th>Example Match</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>[0-9]+</code></td>
<td>One or more digits</td>
<td><code>"12345"</code></td>
</tr>
<tr class="even">
<td><code>\w+</code></td>
<td>Word characters</td>
<td><code>"Alice"</code></td>
</tr>
<tr class="odd">
<td><code>^User</code></td>
<td>Must start with <code>"User"</code></td>
<td><code>"User Alice..."</code></td>
</tr>
<tr class="even">
<td><code>[aeiou]</code></td>
<td>Any single vowel</td>
<td><code>"a", "e", "i"</code></td>
</tr>
<tr class="odd">
<td><code>\w+@\w+\.\w+</code></td>
<td>Simple email pattern</td>
<td><code>"alice@example.com"</code></td>
</tr>
</tbody>
</table>
</section>
<section id="why-it-matters-19" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-19">Why it matters</h3>
<p>Regex is a universal tool for working with text: extracting data, validating input, or parsing logs. It is concise and expressive, replacing dozens of manual string operations. Learning the basics of regex builds the foundation for advanced pattern matching and text processing in any language.</p>
</section>
<section id="exercises-18" class="level3">
<h3 class="anchored" data-anchor-id="exercises-18">Exercises</h3>
<ol type="1">
<li>Write a regex to match all digits in <code>"room 101 floor 5"</code>.</li>
<li>Extract all words from <code>"The quick brown fox"</code>.</li>
<li>Match any string starting with <code>"Hello"</code>.</li>
<li>Match all vowels in <code>"banana"</code>.</li>
<li>Extract all email addresses from <code>"bob@mail.com, alice@test.org"</code>.</li>
<li>Write a regex that matches only uppercase words.</li>
<li>Find all three-letter words in <code>"the cat sat on the mat"</code>.</li>
<li>Show how <code>^</code> and <code>$</code> can be used to validate a string that must start and end with digits.</li>
<li>Explain why <code>\w+@\w+\.\w+</code> is not sufficient for real email validation.</li>
<li>Write a regex that finds all words ending in <code>"ing"</code> from a sentence.</li>
</ol>
</section>
</section>
<section id="lab-6-csv-parsing-pitfalls" class="level2">
<h2 class="anchored" data-anchor-id="lab-6-csv-parsing-pitfalls">LAB 6: CSV Parsing Pitfalls</h2>
<section id="goal-5" class="level3">
<h3 class="anchored" data-anchor-id="goal-5">Goal</h3>
<p>Show why naive string splitting fails on CSV data. Demonstrate common pitfalls like quoted fields and embedded commas. Learn why dedicated CSV parsers are needed for reliability.</p>
</section>
<section id="setup-5" class="level3">
<h3 class="anchored" data-anchor-id="setup-5">Setup</h3>
<p>CSV (Comma-Separated Values) looks simple but has rules:</p>
<ul>
<li>Fields can be quoted with <code>"</code></li>
<li>Quoted fields can contain commas</li>
<li>Quotes inside fields are escaped as <code>""</code></li>
</ul>
<p>We’ll use Python, since it has both naive string methods and a built-in <code>csv</code> module.</p>
</section>
<section id="step-by-step-5" class="level3">
<h3 class="anchored" data-anchor-id="step-by-step-5">Step-by-Step</h3>
<ol type="1">
<li><p>Naive Split Works Sometimes</p>
<ul>
<li>Take <code>"apple,banana,cherry"</code>.</li>
<li>Split by <code>,</code>.</li>
<li>Works fine.</li>
</ul></li>
<li><p>Problem: Quoted Fields</p>
<ul>
<li>Take <code>"apple,"banana,grape",cherry"</code>.</li>
<li>Split by <code>,</code>.</li>
<li>See how <code>"banana,grape"</code> is broken incorrectly.</li>
</ul></li>
<li><p>Problem: Escaped Quotes</p>
<ul>
<li>Take <code>"apple,"he said ""hi""",cherry"</code>.</li>
<li>Naive split breaks the field and does not handle quotes.</li>
</ul></li>
<li><p>Correct Parsing with CSV Module</p>
<ul>
<li>Use <code>csv.reader</code> to handle quotes and escapes.</li>
<li>Show correct results.</li>
</ul></li>
<li><p>Discussion</p>
<ul>
<li>Naive string splitting fails whenever quotes or embedded commas exist.</li>
<li>Correct parsers follow RFC 4180 rules.</li>
<li>Production code must use libraries, not ad hoc splitting.</li>
</ul></li>
</ol>
</section>
<section id="example-python-4" class="level3">
<h3 class="anchored" data-anchor-id="example-python-4">Example (Python)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Naive split (works)</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>line1 <span class="op">=</span> <span class="st">"apple,banana,cherry"</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Naive split:"</span>, line1.split(<span class="st">","</span>))  <span class="co"># ['apple', 'banana', 'cherry']</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Quoted fields with commas</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>line2 <span class="op">=</span> <span class="st">'apple,"banana,grape",cherry'</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Naive split:"</span>, line2.split(<span class="st">","</span>))  <span class="co"># ['apple', '"banana', 'grape"', 'cherry']</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Quoted fields with escaped quotes</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>line3 <span class="op">=</span> <span class="st">'apple,"he said ""hi""",cherry'</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Naive split:"</span>, line3.split(<span class="st">","</span>))  <span class="co"># ['apple', '"he said ""hi"""', 'cherry']</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Correct parsing</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> [line1, line2, line3]:</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>    parsed <span class="op">=</span> <span class="bu">next</span>(csv.reader([line]))</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"CSV parser:"</span>, parsed)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="expected-results-5" class="level3">
<h3 class="anchored" data-anchor-id="expected-results-5">Expected Results</h3>
<ul>
<li>Naive split fails on quoted fields.</li>
<li>CSV parser handles commas and quotes correctly.</li>
</ul>
<table class="caption-top table">
<colgroup>
<col style="width: 29%">
<col style="width: 37%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Input String</th>
<th>Naive Split</th>
<th>CSV Parser</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>apple,banana,cherry</code></td>
<td><code>['apple','banana','cherry']</code></td>
<td><code>['apple','banana','cherry']</code></td>
</tr>
<tr class="even">
<td><code>apple,"banana,grape",cherry</code></td>
<td><code>['apple','"banana','grape"','cherry']</code></td>
<td><code>['apple','banana,grape','cherry']</code></td>
</tr>
<tr class="odd">
<td><code>apple,"he said ""hi""",cherry</code></td>
<td><code>['apple','"he said ""hi"""','cherry']</code></td>
<td><code>['apple','he said "hi"','cherry']</code></td>
</tr>
</tbody>
</table>
</section>
<section id="why-it-matters-20" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-20">Why it matters</h3>
<p>CSV looks simple but is deceptively tricky. Many production bugs come from naive parsing that breaks when encountering quotes or embedded commas. Using proper libraries ensures reliability across systems. Understanding these pitfalls prevents data corruption in analytics, ETL pipelines, and configuration parsing.</p>
</section>
<section id="exercises-19" class="level3">
<h3 class="anchored" data-anchor-id="exercises-19">Exercises</h3>
<ol type="1">
<li>Write code that naively splits <code>"a,b,c"</code> and verify the output.</li>
<li>Split <code>"a,"b,c",d"</code> naively and explain what goes wrong.</li>
<li>Parse the same line using a CSV library and compare results.</li>
<li>Show how <code>"a,"he said ""ok""",c"</code> is incorrectly parsed by naive splitting.</li>
<li>Write a regex that attempts to parse CSV and explain its limits.</li>
<li>Compare parsing speed of naive split vs <code>csv.reader</code>.</li>
<li>Explain why using regex for full CSV parsing is impractical.</li>
<li>Show how a CSV parser handles an empty field (<code>"a,,c"</code>).</li>
<li>Create a CSV with newline characters inside quotes and parse it correctly.</li>
<li>Describe why standards like RFC 4180 exist for CSV and what problems they solve.</li>
</ol>
</section>
</section>
<section id="lab-7-locale-aware-sorting" class="level2">
<h2 class="anchored" data-anchor-id="lab-7-locale-aware-sorting">LAB 7: Locale-Aware Sorting</h2>
<section id="goal-6" class="level3">
<h3 class="anchored" data-anchor-id="goal-6">Goal</h3>
<p>Understand how different locales affect string sorting. See why <code>"ä"</code> sorts differently in German vs Swedish, and how case sensitivity influences order. Learn why collation rules matter in real-world systems like databases and search engines.</p>
</section>
<section id="setup-6" class="level3">
<h3 class="anchored" data-anchor-id="setup-6">Setup</h3>
<p>Use a language that supports locale-aware collation:</p>
<ul>
<li>Python → <code>locale</code> module</li>
<li>Java → <code>Collator</code></li>
<li>C++ → <code>&lt;locale&gt;</code> with <code>collate</code></li>
<li>Databases → <code>COLLATE</code> clauses</li>
</ul>
<p>We’ll demonstrate with Python.</p>
</section>
<section id="step-by-step-6" class="level3">
<h3 class="anchored" data-anchor-id="step-by-step-6">Step-by-Step</h3>
<ol type="1">
<li><p>Default Sorting (ASCII/Unicode order)</p>
<ul>
<li>Sort a list of words: <code>["apple", "Banana", "äpfel", "zebra"]</code>.</li>
<li>Observe that uppercase letters and special characters do not sort as expected for dictionary order.</li>
</ul></li>
<li><p>German Collation</p>
<ul>
<li>Use <code>"de_DE.UTF-8"</code> locale.</li>
<li>In German, <code>"ä"</code> is often treated like <code>"ae"</code>.</li>
<li>Sort the same list and observe differences.</li>
</ul></li>
<li><p>Swedish Collation</p>
<ul>
<li>Use <code>"sv_SE.UTF-8"</code> locale.</li>
<li>In Swedish, <code>"ä"</code> is a separate letter that comes after <code>"z"</code>.</li>
<li>Compare results with German sorting.</li>
</ul></li>
<li><p>Case Sensitivity</p>
<ul>
<li>Compare <code>"apple"</code> vs <code>"Apple"</code>.</li>
<li>Show how some locales ignore case, others do not.</li>
</ul></li>
<li><p>Discussion</p>
<ul>
<li>Locale defines sorting rules for a culture or language.</li>
<li>Incorrect collation leads to confusing search results or misordered lists.</li>
<li>Databases use collations to enforce consistency.</li>
</ul></li>
</ol>
</section>
<section id="example-python-5" class="level3">
<h3 class="anchored" data-anchor-id="example-python-5">Example (Python)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> locale</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>words <span class="op">=</span> [<span class="st">"apple"</span>, <span class="st">"Banana"</span>, <span class="st">"äpfel"</span>, <span class="st">"zebra"</span>]</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Default sorting</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Default:"</span>, <span class="bu">sorted</span>(words))</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. German collation</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>locale.setlocale(locale.LC_COLLATE, <span class="st">"de_DE.UTF-8"</span>)</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"German:"</span>, <span class="bu">sorted</span>(words, key<span class="op">=</span>locale.strxfrm))</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Swedish collation</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>locale.setlocale(locale.LC_COLLATE, <span class="st">"sv_SE.UTF-8"</span>)</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Swedish:"</span>, <span class="bu">sorted</span>(words, key<span class="op">=</span>locale.strxfrm))</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Case-insensitive comparison (normalize before sort)</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>case_insensitive <span class="op">=</span> <span class="bu">sorted</span>(words, key<span class="op">=</span><span class="kw">lambda</span> w: w.lower())</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Case-insensitive:"</span>, case_insensitive)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="expected-results-6" class="level3">
<h3 class="anchored" data-anchor-id="expected-results-6">Expected Results</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Locale</th>
<th>Sorted Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Default (Unicode)</td>
<td><code>['Banana', 'apple', 'zebra', 'äpfel']</code></td>
</tr>
<tr class="even">
<td>German (de_DE)</td>
<td><code>['apple', 'äpfel', 'Banana', 'zebra']</code></td>
</tr>
<tr class="odd">
<td>Swedish (sv_SE)</td>
<td><code>['apple', 'Banana', 'zebra', 'äpfel']</code></td>
</tr>
<tr class="even">
<td>Case-insensitive</td>
<td><code>['apple', 'äpfel', 'Banana', 'zebra']</code></td>
</tr>
</tbody>
</table>
</section>
<section id="why-it-matters-21" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-21">Why it matters</h3>
<ul>
<li>Multilingual systems must handle cultural sorting correctly.</li>
<li><code>"ä"</code> is <code>"ae"</code> in German, but a distinct letter after <code>"z"</code> in Swedish.</li>
<li>Case sensitivity can confuse users if <code>"Apple"</code> and <code>"apple"</code> appear far apart.</li>
<li>Databases and search engines must define collation rules to ensure consistency.</li>
</ul>
</section>
<section id="exercises-20" class="level3">
<h3 class="anchored" data-anchor-id="exercises-20">Exercises</h3>
<ol type="1">
<li>Sort <code>["Zoo", "apple", "Äpfel"]</code> in default order.</li>
<li>Sort the same list in German locale.</li>
<li>Sort the same list in Swedish locale.</li>
<li>Explain why results differ between German and Swedish.</li>
<li>Write code that performs case-insensitive sorting.</li>
<li>Compare how <code>"Résumé"</code> and <code>"resume"</code> sort under accent-sensitive vs accent-insensitive collation.</li>
<li>Demonstrate natural sorting for file names: <code>["file1", "file10", "file2"]</code>.</li>
<li>Explain how incorrect collation could break alphabetical order in a contact list.</li>
<li>Research and list collations available in your system/database.</li>
<li>Propose a default collation strategy for a global web application.</li>
</ol>
</section>
</section>
<section id="lab-8-unicode-normalization-demo" class="level2">
<h2 class="anchored" data-anchor-id="lab-8-unicode-normalization-demo">LAB 8: Unicode Normalization Demo</h2>
<section id="goal-7" class="level3">
<h3 class="anchored" data-anchor-id="goal-7">Goal</h3>
<p>Show how visually identical strings can have different underlying Unicode encodings. Learn to use normalization (NFC, NFD) to make comparisons reliable across systems.</p>
</section>
<section id="setup-7" class="level3">
<h3 class="anchored" data-anchor-id="setup-7">Setup</h3>
<p>Unicode allows multiple representations of the same text:</p>
<ul>
<li>Precomposed characters (<code>é</code> as U+00E9)</li>
<li>Decomposed sequences (<code>e</code> + U+0301 combining accent)</li>
</ul>
<p>We’ll use Python’s <code>unicodedata</code> module to demonstrate.</p>
</section>
<section id="step-by-step-7" class="level3">
<h3 class="anchored" data-anchor-id="step-by-step-7">Step-by-Step</h3>
<ol type="1">
<li><p>Create Equivalent Strings</p>
<ul>
<li>Define <code>s1 = "café"</code> (precomposed).</li>
<li>Define <code>s2 = "cafe\u0301"</code> (decomposed).</li>
<li>Print both — they look the same.</li>
</ul></li>
<li><p>Compare Without Normalization</p>
<ul>
<li>Check <code>s1 == s2</code>.</li>
<li>Result is <code>False</code>, even though they appear identical.</li>
</ul></li>
<li><p>Normalize Strings</p>
<ul>
<li>Apply NFC (Normalization Form Composed).</li>
<li>Apply NFD (Normalization Form Decomposed).</li>
<li>Compare results again.</li>
</ul></li>
<li><p>Check Lengths and Code Points</p>
<ul>
<li>Compare lengths of <code>s1</code> and <code>s2</code>.</li>
<li>Print their Unicode code points.</li>
<li>Show how precomposed has 1 code point for <code>é</code>, decomposed has 2.</li>
</ul></li>
<li><p>Discussion</p>
<ul>
<li>Normalization ensures consistent storage and comparison.</li>
<li>Databases and search engines often normalize text before indexing.</li>
<li>Without it, identical-looking words may be treated as different.</li>
</ul></li>
</ol>
</section>
<section id="example-python-6" class="level3">
<h3 class="anchored" data-anchor-id="example-python-6">Example (Python)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> unicodedata</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Create equivalent strings</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>s1 <span class="op">=</span> <span class="st">"café"</span>           <span class="co"># precomposed</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>s2 <span class="op">=</span> <span class="st">"cafe</span><span class="ch">\u0301</span><span class="st">"</span>     <span class="co"># decomposed</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"s1:"</span>, s1)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"s2:"</span>, s2)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Equal raw?:"</span>, s1 <span class="op">==</span> s2)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Normalize</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>nfc1 <span class="op">=</span> unicodedata.normalize(<span class="st">"NFC"</span>, s1)</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>nfc2 <span class="op">=</span> unicodedata.normalize(<span class="st">"NFC"</span>, s2)</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Equal NFC?:"</span>, nfc1 <span class="op">==</span> nfc2)</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>nfd1 <span class="op">=</span> unicodedata.normalize(<span class="st">"NFD"</span>, s1)</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>nfd2 <span class="op">=</span> unicodedata.normalize(<span class="st">"NFD"</span>, s2)</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Equal NFD?:"</span>, nfd1 <span class="op">==</span> nfd2)</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Inspect lengths and code points</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Length s1:"</span>, <span class="bu">len</span>(s1))</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Length s2:"</span>, <span class="bu">len</span>(s2))</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Code points s1:"</span>, [<span class="bu">hex</span>(<span class="bu">ord</span>(c)) <span class="cf">for</span> c <span class="kw">in</span> s1])</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Code points s2:"</span>, [<span class="bu">hex</span>(<span class="bu">ord</span>(c)) <span class="cf">for</span> c <span class="kw">in</span> s2])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="expected-results-7" class="level3">
<h3 class="anchored" data-anchor-id="expected-results-7">Expected Results</h3>
<ul>
<li><p><code>s1 == s2</code> → False (different underlying encoding).</p></li>
<li><p>After normalization (NFC or NFD), they compare equal.</p></li>
<li><p>Lengths differ (<code>len(s1) == 4</code>, <code>len(s2) == 5</code>).</p></li>
<li><p>Code points differ:</p>
<ul>
<li><code>s1</code>: <code>[0x63, 0x61, 0x66, 0xe9]</code></li>
<li><code>s2</code>: <code>[0x63, 0x61, 0x66, 0x65, 0x301]</code></li>
</ul></li>
</ul>
<table class="caption-top table">
<colgroup>
<col style="width: 10%">
<col style="width: 20%">
<col style="width: 25%">
<col style="width: 10%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>String</th>
<th>Visible Form</th>
<th>Encoding Style</th>
<th>Length</th>
<th>Code Points</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>s1</td>
<td>café</td>
<td>Precomposed NFC</td>
<td>4</td>
<td>c a f é (U+00E9)</td>
</tr>
<tr class="even">
<td>s2</td>
<td>café</td>
<td>Decomposed NFD</td>
<td>5</td>
<td>c a f e + ´ (U+0301)</td>
</tr>
</tbody>
</table>
</section>
<section id="why-it-matters-22" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-22">Why it matters</h3>
<ul>
<li>Identical-looking text can fail equality checks if not normalized.</li>
<li>File systems, databases, and APIs may use different normalization forms.</li>
<li>Search engines normalize text to avoid duplicate results.</li>
<li>Security-sensitive systems must normalize input to avoid spoofing or bypass attacks.</li>
</ul>
</section>
<section id="exercises-21" class="level3">
<h3 class="anchored" data-anchor-id="exercises-21">Exercises</h3>
<ol type="1">
<li>Compare <code>"résumé"</code> written with precomposed vs decomposed accents.</li>
<li>Show how string lengths differ between NFC and NFD forms.</li>
<li>Write code to normalize a list of user inputs before storing them in a database.</li>
<li>Explain why <code>"é"</code> (U+00E9) is not equal to <code>"e" + U+0301</code>.</li>
<li>Demonstrate normalization on Japanese text (hiragana + diacritics).</li>
<li>Show how failing to normalize could cause duplicate entries in a dictionary.</li>
<li>Investigate what normalization form macOS uses by default for filenames.</li>
<li>Explain why normalization is critical in international domain names.</li>
<li>Create a function that reports whether two strings are canonically equivalent.</li>
<li>Design a normalization step for a search engine pipeline.</li>
</ol>
</section>
</section>
<section id="lab-9-confusable-characters-security-check" class="level2">
<h2 class="anchored" data-anchor-id="lab-9-confusable-characters-security-check">LAB 9: Confusable Characters Security Check</h2>
<section id="goal-8" class="level3">
<h3 class="anchored" data-anchor-id="goal-8">Goal</h3>
<p>Demonstrate how visually identical characters can come from different scripts (Latin, Cyrillic, Greek). Show how this can fool string comparisons, and implement a basic detector for such confusables.</p>
</section>
<section id="setup-8" class="level3">
<h3 class="anchored" data-anchor-id="setup-8">Setup</h3>
<p>Attackers exploit Unicode confusables (e.g., Latin <code>"a"</code> vs Cyrillic <code>"а"</code>) to trick users or bypass validation. This is called a homoglyph attack. Examples:</p>
<ul>
<li><code>"paypal.com"</code> vs <code>"раураl.com"</code> (Cyrillic <code>р</code> and <code>а</code>).</li>
<li><code>"admin"</code> vs <code>"аdmin"</code> (Cyrillic <code>а</code>).</li>
</ul>
<p>We’ll use Python for demonstration (<code>unicodedata</code> module).</p>
</section>
<section id="step-by-step-8" class="level3">
<h3 class="anchored" data-anchor-id="step-by-step-8">Step-by-Step</h3>
<ol type="1">
<li><p>Create Confusable Strings</p>
<ul>
<li>Define <code>latin_a = "a"</code> and <code>cyrillic_a = "а"</code> (U+0430).</li>
<li>Print them side by side.</li>
<li>Compare with <code>==</code> to show they are different.</li>
</ul></li>
<li><p>Inspect Code Points</p>
<ul>
<li>Use <code>ord()</code> to print Unicode code points.</li>
<li>Show the numeric difference despite identical appearance.</li>
</ul></li>
<li><p>Confusable Detection</p>
<ul>
<li>Write a function that checks if characters belong to different Unicode blocks.</li>
<li>Flag potential confusables.</li>
</ul></li>
<li><p>Practical Example: Fake Domain</p>
<ul>
<li>Construct <code>"раураl.com"</code> (Cyrillic letters).</li>
<li>Compare it to <code>"paypal.com"</code>.</li>
<li>Show why naive string equality misses the difference.</li>
</ul></li>
<li><p>Discussion</p>
<ul>
<li><p>Homoglyph attacks target login systems, domains, and usernames.</p></li>
<li><p>Defenses:</p>
<ul>
<li>Normalize + restrict allowed scripts.</li>
<li>Use libraries like <a href="https://www.unicode.org/Public/security/latest/confusables.txt">Unicode confusables.txt</a>.</li>
<li>Visual warnings in browsers.</li>
</ul></li>
</ul></li>
</ol>
</section>
<section id="example-python-7" class="level3">
<h3 class="anchored" data-anchor-id="example-python-7">Example (Python)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> unicodedata</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Confusable characters</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>latin_a <span class="op">=</span> <span class="st">"a"</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>cyrillic_a <span class="op">=</span> <span class="st">"а"</span>  <span class="co"># U+0430</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Latin a:"</span>, latin_a, <span class="st">"Cyrillic a:"</span>, cyrillic_a)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Equal?:"</span>, latin_a <span class="op">==</span> cyrillic_a)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Inspect code points</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Latin a code point:"</span>, <span class="bu">hex</span>(<span class="bu">ord</span>(latin_a)))</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Cyrillic a code point:"</span>, <span class="bu">hex</span>(<span class="bu">ord</span>(cyrillic_a)))</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Simple detector</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> detect_confusables(text):</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>    scripts <span class="op">=</span> {}</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> ch <span class="kw">in</span> text:</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>        name <span class="op">=</span> unicodedata.name(ch, <span class="st">""</span>)</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">"CYRILLIC"</span> <span class="kw">in</span> name:</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>            scripts[ch] <span class="op">=</span> <span class="st">"Cyrillic"</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> <span class="st">"LATIN"</span> <span class="kw">in</span> name:</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>            scripts[ch] <span class="op">=</span> <span class="st">"Latin"</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> <span class="st">"GREEK"</span> <span class="kw">in</span> name:</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>            scripts[ch] <span class="op">=</span> <span class="st">"Greek"</span></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> scripts</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Detection:"</span>, detect_confusables(<span class="st">"раураl"</span>))</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Fake domain example</span></span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>real <span class="op">=</span> <span class="st">"paypal.com"</span></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>fake <span class="op">=</span> <span class="st">"раураl.com"</span>  <span class="co"># with Cyrillic 'р' and 'а'</span></span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Real domain:"</span>, real)</span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Fake domain:"</span>, fake)</span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Equal?:"</span>, real <span class="op">==</span> fake)</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Fake detection:"</span>, detect_confusables(fake))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="expected-results-8" class="level3">
<h3 class="anchored" data-anchor-id="expected-results-8">Expected Results</h3>
<ul>
<li><p><code>"a"</code> vs <code>"а"</code> look the same but are unequal.</p></li>
<li><p>Code points differ:</p>
<ul>
<li>Latin <code>a</code> → <code>U+0061</code></li>
<li>Cyrillic <code>а</code> → <code>U+0430</code></li>
</ul></li>
<li><p>Detection function flags script differences.</p></li>
<li><p><code>"paypal.com"</code> ≠ <code>"раураl.com"</code>, but naive eyes might miss it.</p></li>
</ul>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Character</th>
<th>Visual</th>
<th>Unicode</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>a</code></td>
<td>a</td>
<td>U+0061</td>
<td>Latin</td>
</tr>
<tr class="even">
<td><code>а</code></td>
<td>a</td>
<td>U+0430</td>
<td>Cyrillic</td>
</tr>
</tbody>
</table>
</section>
<section id="why-it-matters-23" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-23">Why it matters</h3>
<ul>
<li>Security systems that ignore Unicode tricks are vulnerable to phishing and spoofing.</li>
<li>Fake domains, usernames, or commands can bypass filters.</li>
<li>Normalization does not fix confusables — script restriction or mapping is required.</li>
<li>Modern browsers warn users about domains mixing scripts.</li>
</ul>
</section>
<section id="exercises-22" class="level3">
<h3 class="anchored" data-anchor-id="exercises-22">Exercises</h3>
<ol type="1">
<li>Compare <code>"pаypal"</code> (with Cyrillic <code>а</code>) to <code>"paypal"</code>.</li>
<li>Print Unicode code points of <code>"o"</code> vs Cyrillic <code>"о"</code>.</li>
<li>Extend the <code>detect_confusables</code> function to flag Greek letters too.</li>
<li>Create a fake username using mixed Latin and Cyrillic.</li>
<li>Show why normalization (NFC/NFD) does not fix confusables.</li>
<li>Research Unicode <code>confusables.txt</code> and find at least 5 common homoglyphs.</li>
<li>Propose a rule to allow only one script (Latin or Cyrillic) per string.</li>
<li>Write a program to detect mixed-script domains.</li>
<li>Explain how browsers handle homoglyph domains.</li>
<li>Design a security policy for usernames to prevent confusable attacks.</li>
</ol>
</section>
</section>
<section id="lab-10-substring-search-algorithms" class="level2">
<h2 class="anchored" data-anchor-id="lab-10-substring-search-algorithms">LAB 10: Substring Search Algorithms</h2>
<section id="goal-9" class="level3">
<h3 class="anchored" data-anchor-id="goal-9">Goal</h3>
<p>Compare different substring search algorithms — Naive, Knuth–Morris–Pratt (KMP), and Boyer–Moore (BM). Learn how they work, when they perform well, and measure their efficiency on long texts.</p>
</section>
<section id="setup-9" class="level3">
<h3 class="anchored" data-anchor-id="setup-9">Setup</h3>
<p>Substring search asks: <em>Does pattern <code>P</code> occur in text <code>T</code>?</em></p>
<ul>
<li>Naive algorithm: check every position → O(n·m).</li>
<li>KMP: preprocess pattern to skip comparisons → O(n + m).</li>
<li>Boyer–Moore: skip ahead using heuristics → sublinear in practice.</li>
</ul>
<p>We’ll implement these in Python for clarity.</p>
</section>
<section id="step-by-step-9" class="level3">
<h3 class="anchored" data-anchor-id="step-by-step-9">Step-by-Step</h3>
<ol type="1">
<li><p>Naive Algorithm</p>
<ul>
<li>For each position in text, compare pattern character by character.</li>
<li>Slow on long inputs with repeated matches.</li>
</ul></li>
<li><p>KMP Algorithm</p>
<ul>
<li>Build a failure function (longest prefix-suffix table).</li>
<li>Skip ahead when mismatch occurs.</li>
<li>Guarantees linear time.</li>
</ul></li>
<li><p>Boyer–Moore Algorithm (Bad Character Rule)</p>
<ul>
<li>Start matching from the end of the pattern.</li>
<li>On mismatch, shift based on last occurrence of character.</li>
<li>Very fast in practice, especially for large alphabets.</li>
</ul></li>
<li><p>Benchmark on Large Input</p>
<ul>
<li>Generate a text of size ~100,000 characters.</li>
<li>Search for a small pattern.</li>
<li>Measure runtimes.</li>
</ul></li>
<li><p>Discussion</p>
<ul>
<li>Naive is simple but inefficient.</li>
<li>KMP is optimal for worst case.</li>
<li>Boyer–Moore is fastest in practice for natural language.</li>
</ul></li>
</ol>
</section>
<section id="example-python-8" class="level3">
<h3 class="anchored" data-anchor-id="example-python-8">Example (Python)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Naive</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> naive_search(text, pattern):</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    n, m <span class="op">=</span> <span class="bu">len</span>(text), <span class="bu">len</span>(pattern)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n <span class="op">-</span> m <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> text[i:i<span class="op">+</span>m] <span class="op">==</span> pattern:</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. KMP</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> kmp_table(pattern):</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    m <span class="op">=</span> <span class="bu">len</span>(pattern)</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>    table <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> m</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    j <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, m):</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&gt;</span> <span class="dv">0</span> <span class="kw">and</span> pattern[i] <span class="op">!=</span> pattern[j]:</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>            j <span class="op">=</span> table[j <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> pattern[i] <span class="op">==</span> pattern[j]:</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>            j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>            table[i] <span class="op">=</span> j</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> table</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> kmp_search(text, pattern):</span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>    n, m <span class="op">=</span> <span class="bu">len</span>(text), <span class="bu">len</span>(pattern)</span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>    table <span class="op">=</span> kmp_table(pattern)</span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>    j <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&gt;</span> <span class="dv">0</span> <span class="kw">and</span> text[i] <span class="op">!=</span> pattern[j]:</span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>            j <span class="op">=</span> table[j <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> text[i] <span class="op">==</span> pattern[j]:</span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a>            j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> j <span class="op">==</span> m:</span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> i <span class="op">-</span> m <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Boyer–Moore (bad character heuristic)</span></span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bm_table(pattern):</span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a>    table <span class="op">=</span> {}</span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, c <span class="kw">in</span> <span class="bu">enumerate</span>(pattern):</span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a>        table[c] <span class="op">=</span> i</span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> table</span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bm_search(text, pattern):</span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a>    n, m <span class="op">=</span> <span class="bu">len</span>(text), <span class="bu">len</span>(pattern)</span>
<span id="cb28-46"><a href="#cb28-46" aria-hidden="true" tabindex="-1"></a>    table <span class="op">=</span> bm_table(pattern)</span>
<span id="cb28-47"><a href="#cb28-47" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb28-48"><a href="#cb28-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;=</span> n <span class="op">-</span> m:</span>
<span id="cb28-49"><a href="#cb28-49" aria-hidden="true" tabindex="-1"></a>        j <span class="op">=</span> m <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb28-50"><a href="#cb28-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&gt;=</span> <span class="dv">0</span> <span class="kw">and</span> text[i <span class="op">+</span> j] <span class="op">==</span> pattern[j]:</span>
<span id="cb28-51"><a href="#cb28-51" aria-hidden="true" tabindex="-1"></a>            j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb28-52"><a href="#cb28-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> j <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb28-53"><a href="#cb28-53" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i</span>
<span id="cb28-54"><a href="#cb28-54" aria-hidden="true" tabindex="-1"></a>        shift <span class="op">=</span> <span class="bu">max</span>(<span class="dv">1</span>, j <span class="op">-</span> table.get(text[i <span class="op">+</span> j], <span class="op">-</span><span class="dv">1</span>))</span>
<span id="cb28-55"><a href="#cb28-55" aria-hidden="true" tabindex="-1"></a>        i <span class="op">+=</span> shift</span>
<span id="cb28-56"><a href="#cb28-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb28-57"><a href="#cb28-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-58"><a href="#cb28-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Benchmark</span></span>
<span id="cb28-59"><a href="#cb28-59" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="st">"a"</span> <span class="op">*</span> <span class="dv">100000</span> <span class="op">+</span> <span class="st">"b"</span></span>
<span id="cb28-60"><a href="#cb28-60" aria-hidden="true" tabindex="-1"></a>pattern <span class="op">=</span> <span class="st">"a"</span> <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="st">"b"</span></span>
<span id="cb28-61"><a href="#cb28-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-62"><a href="#cb28-62" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> name, func <span class="kw">in</span> [(<span class="st">"Naive"</span>, naive_search), (<span class="st">"KMP"</span>, kmp_search), (<span class="st">"Boyer–Moore"</span>, bm_search)]:</span>
<span id="cb28-63"><a href="#cb28-63" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> time.time()</span>
<span id="cb28-64"><a href="#cb28-64" aria-hidden="true" tabindex="-1"></a>    pos <span class="op">=</span> func(text, pattern)</span>
<span id="cb28-65"><a href="#cb28-65" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>name<span class="sc">}</span><span class="ss"> found at </span><span class="sc">{</span>pos<span class="sc">}</span><span class="ss">, time </span><span class="sc">{</span><span class="bu">round</span>(time.time()<span class="op">-</span>start,<span class="dv">4</span>)<span class="sc">}</span><span class="ss">s"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="expected-results-9" class="level3">
<h3 class="anchored" data-anchor-id="expected-results-9">Expected Results</h3>
<ul>
<li>Naive: Slow for large repetitive text.</li>
<li>KMP: Linear time, handles worst case well.</li>
<li>Boyer–Moore: Fastest for natural text (skips ahead aggressively).</li>
</ul>
<table class="caption-top table">
<colgroup>
<col style="width: 14%">
<col style="width: 20%">
<col style="width: 18%">
<col style="width: 45%">
</colgroup>
<thead>
<tr class="header">
<th>Algorithm</th>
<th>Worst Case Time</th>
<th>Best Case Time</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Naive</td>
<td>O(n·m)</td>
<td>O(n)</td>
<td>Simple, bad for long patterns</td>
</tr>
<tr class="even">
<td>KMP</td>
<td>O(n + m)</td>
<td>O(n + m)</td>
<td>Guaranteed linear time</td>
</tr>
<tr class="odd">
<td>Boyer–Moore</td>
<td>O(n·m) worst</td>
<td>Sublinear avg</td>
<td>Very fast in practice on real text</td>
</tr>
</tbody>
</table>
</section>
<section id="why-it-matters-24" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-24">Why it matters</h3>
<ul>
<li>Search engines, text editors, and databases rely on efficient substring search.</li>
<li>Naive methods break down at scale.</li>
<li>KMP shows theory guiding better algorithms.</li>
<li>Boyer–Moore demonstrates practical engineering that beats naive even further.</li>
</ul>
</section>
<section id="exercises-23" class="level3">
<h3 class="anchored" data-anchor-id="exercises-23">Exercises</h3>
<ol type="1">
<li>Implement naive substring search in any language.</li>
<li>Search for <code>"abc"</code> in <code>"aaaabc"</code> and explain why naive repeats work.</li>
<li>Build the prefix table for <code>"ababaca"</code> in KMP.</li>
<li>Explain how KMP avoids re-checking characters.</li>
<li>Implement Boyer–Moore with the bad character rule.</li>
<li>Show why Boyer–Moore jumps ahead more than one character on mismatches.</li>
<li>Benchmark naive vs KMP vs BM on 1MB text.</li>
<li>Compare results for random text vs repetitive text.</li>
<li>Explain why Boyer–Moore worst-case is still O(n·m).</li>
<li>Propose a hybrid search strategy for DNA sequences (small alphabet, long text).</li>
</ol>
</section>
</section>
<section id="lab-11-regex-engine-catastrophe-redos" class="level2">
<h2 class="anchored" data-anchor-id="lab-11-regex-engine-catastrophe-redos">LAB 11: Regex Engine Catastrophe (ReDoS)</h2>
<section id="goal-10" class="level3">
<h3 class="anchored" data-anchor-id="goal-10">Goal</h3>
<p>See how certain regex patterns cause catastrophic backtracking and turn tiny inputs into huge runtimes (Regex Denial of Service—ReDoS). Learn safe alternatives and mitigation strategies.</p>
</section>
<section id="setup-10" class="level3">
<h3 class="anchored" data-anchor-id="setup-10">Setup</h3>
<p>Any language with a backtracking engine will reproduce the issue (Python/PCRE/Perl/JavaScript). An automata-based engine (e.g., RE2, Rust’s default) won’t exhibit catastrophic behavior for the same patterns.</p>
<p>Test patterns that are notorious:</p>
<ul>
<li>Nested, overlapping quantifiers: <code>(a+)+b</code></li>
<li>Ambiguous alternation with stars: <code>(a|aa)+b</code></li>
<li>Catastrophic HTMLish: <code>(&lt;.+&gt;)+</code></li>
</ul>
</section>
<section id="step-by-step-10" class="level3">
<h3 class="anchored" data-anchor-id="step-by-step-10">Step-by-Step</h3>
<ol type="1">
<li><p>Reproduce a Fast Match</p>
<ul>
<li>Pattern: <code>(a+)+b</code></li>
<li>Input: <code>"a"*25 + "b"</code></li>
<li>Expect: quick success (engine finds the trailing <code>b</code>).</li>
</ul></li>
<li><p>Trigger Catastrophe</p>
<ul>
<li>Same pattern: <code>(a+)+b</code></li>
<li>Input: <code>"a"*25</code> (no <code>b</code>)</li>
<li>Expect: very slow—engine explores exponential backtracking paths.</li>
</ul></li>
<li><p>Measure Impact</p>
<ul>
<li>Time both inputs.</li>
<li>Increase input length stepwise (e.g., 15, 20, 25, 30 <code>a</code>s).</li>
<li>Observe runtime explosion for the no-<code>b</code> case.</li>
</ul></li>
<li><p>Try Another Problematic Pattern</p>
<ul>
<li>Pattern: <code>(a|aa)+b</code></li>
<li>Inputs: <code>"a"*N+"b"</code> (fast) and <code>"a"*N</code> (slow).</li>
<li>Note that overlapping alternatives also trigger exponential blowups.</li>
</ul></li>
<li><p>Mitigate</p>
<ul>
<li><p>Refactor to unambiguous patterns:</p>
<ul>
<li>Replace <code>(a+)+b</code> with <code>a+ b</code>-style constructions that avoid nested quantifiers, or use possessive/atomic quantifiers if supported (e.g., <code>a++b</code>, <code>(?&gt;a+)b</code>).</li>
</ul></li>
<li><p>Constrain with anchors and character classes to reduce search space.</p></li>
<li><p>Precompile and timeout: set execution time limits (if supported).</p></li>
<li><p>Use safe engines (RE2/Hyperscan) for untrusted input.</p></li>
</ul></li>
</ol>
</section>
<section id="example-python-9" class="level3">
<h3 class="anchored" data-anchor-id="example-python-9">Example (Python)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re, time</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> timed_match(pattern, text, flags<span class="op">=</span><span class="dv">0</span>):</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> time.time()</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    ok <span class="op">=</span> <span class="bu">bool</span>(re.match(pattern, text, flags))</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    dur <span class="op">=</span> time.time() <span class="op">-</span> start</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ok, dur</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Fast match: pattern matches because of trailing 'b'</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>pat <span class="op">=</span> <span class="vs">r"</span><span class="kw">(</span><span class="vs">a</span><span class="op">+</span><span class="kw">)</span><span class="op">+</span><span class="vs">b"</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>fast_text <span class="op">=</span> <span class="st">"a"</span> <span class="op">*</span> <span class="dv">25</span> <span class="op">+</span> <span class="st">"b"</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>ok, dur <span class="op">=</span> timed_match(pat, fast_text)</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"FAST   -&gt; match:"</span>, ok, <span class="st">"time:"</span>, <span class="bu">round</span>(dur, <span class="dv">4</span>), <span class="st">"s"</span>)</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Catastrophic: same pattern, missing the final 'b'</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>slow_text <span class="op">=</span> <span class="st">"a"</span> <span class="op">*</span> <span class="dv">25</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>ok, dur <span class="op">=</span> timed_match(pat, slow_text)</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"SLOW   -&gt; match:"</span>, ok, <span class="st">"time:"</span>, <span class="bu">round</span>(dur, <span class="dv">4</span>), <span class="st">"s"</span>)</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Scale up to see blowup</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n <span class="kw">in</span> [<span class="dv">20</span>, <span class="dv">22</span>, <span class="dv">24</span>, <span class="dv">26</span>, <span class="dv">28</span>]:</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>    txt <span class="op">=</span> <span class="st">"a"</span> <span class="op">*</span> n</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>    ok, dur <span class="op">=</span> timed_match(pat, txt)</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"N=</span><span class="sc">{</span>n<span class="sc">:&lt;2}</span><span class="ss"> -&gt; match:</span><span class="sc">{</span>ok<span class="sc">}</span><span class="ss"> time:</span><span class="sc">{</span><span class="bu">round</span>(dur, <span class="dv">4</span>)<span class="sc">}</span><span class="ss"> s"</span>)</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Another problematic pattern</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>pat2 <span class="op">=</span> <span class="vs">r"</span><span class="kw">(</span><span class="vs">a</span><span class="cf">|</span><span class="vs">aa</span><span class="kw">)</span><span class="op">+</span><span class="vs">b"</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>ok, dur <span class="op">=</span> timed_match(pat2, <span class="st">"a"</span> <span class="op">*</span> <span class="dv">25</span> <span class="op">+</span> <span class="st">"b"</span>)</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"ALT OK -&gt; match:"</span>, ok, <span class="st">"time:"</span>, <span class="bu">round</span>(dur, <span class="dv">4</span>), <span class="st">"s"</span>)</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>ok, dur <span class="op">=</span> timed_match(pat2, <span class="st">"a"</span> <span class="op">*</span> <span class="dv">25</span>)</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"ALT SLOW-&gt; match:"</span>, ok, <span class="st">"time:"</span>, <span class="bu">round</span>(dur, <span class="dv">4</span>), <span class="st">"s"</span>)</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Safer alternative using atomic/possessive (if your engine supports it)</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Python's 're' does not support atomic groups/possessive quantifiers.</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Pseudocode examples for other engines:</span></span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a><span class="co">#   - PCRE/Java: r"(?&gt;a+)b" or r"a++b"</span></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a><span class="co"># For Python, restructure logic instead of relying on engine features.</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="expected-results-10" class="level3">
<h3 class="anchored" data-anchor-id="expected-results-10">Expected Results</h3>
<ul>
<li>With trailing <code>b</code>, matches are fast.</li>
<li>Without <code>b</code>, runtime grows rapidly as <code>N</code> increases.</li>
<li>Overlapping alternations show the same pattern of slowdown.</li>
<li>Atomic/possessive quantifiers (in engines that support them) remove backtracking and restore predictable performance.</li>
</ul>
<table class="caption-top table">
<colgroup>
<col style="width: 12%">
<col style="width: 14%">
<col style="width: 21%">
<col style="width: 32%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th>Pattern</th>
<th>Input</th>
<th>Engine Type</th>
<th>Behavior</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>(a+)+b</code></td>
<td><code>a…ab</code></td>
<td>Backtracking</td>
<td>Fast</td>
<td></td>
</tr>
<tr class="even">
<td><code>(a+)+b</code></td>
<td><code>a…a</code></td>
<td>Backtracking</td>
<td>Catastrophic (very slow)</td>
<td></td>
</tr>
<tr class="odd">
<td>`(a</td>
<td>aa)+b`</td>
<td><code>a…ab</code></td>
<td>Backtracking</td>
<td>Fast</td>
</tr>
<tr class="even">
<td>`(a</td>
<td>aa)+b`</td>
<td><code>a…a</code></td>
<td>Backtracking</td>
<td>Catastrophic</td>
</tr>
<tr class="odd">
<td><code>(?&gt;a+)b</code></td>
<td><code>a…a?</code></td>
<td>Atomic (PCRE/Java)</td>
<td>Predictable, no catastrophe</td>
<td></td>
</tr>
<tr class="even">
<td><code>a++b</code></td>
<td><code>a…a?</code></td>
<td>Possessive</td>
<td>Predictable</td>
<td></td>
</tr>
<tr class="odd">
<td>RE2 version</td>
<td>any of above</td>
<td>DFA/NFA (safe)</td>
<td>Linear-time, no catastrophe</td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="why-it-matters-25" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-25">Why it matters</h3>
<ul>
<li>Untrusted input + fragile regex = DoS vector.</li>
<li>Web apps, API gateways, and log pipelines often apply regex to attacker-controlled text.</li>
<li>The fix is architectural (pick safe engines) and design-oriented (write non-ambiguous patterns, set timeouts).</li>
</ul>
</section>
<section id="exercises-24" class="level3">
<h3 class="anchored" data-anchor-id="exercises-24">Exercises</h3>
<ol type="1">
<li>Explain why <code>(a+)+b</code> is dangerous on inputs composed only of <code>a</code>s.</li>
<li>Show a timing table for <code>(a+)+b</code> against <code>a^N</code> for N = 10, 15, 20, 25.</li>
<li>Construct another catastrophic pattern using overlapping alternation (e.g., <code>(ab|a)*b</code>).</li>
<li>Rewrite <code>(a|aa)+b</code> into a pattern that avoids ambiguity while matching the same language.</li>
<li>Describe how atomic groups or possessive quantifiers prevent backtracking.</li>
<li>Propose engine-agnostic mitigations: anchoring, limiting input length, pre-validation.</li>
<li>Design a test harness that detects suspicious regex (runtime or backtracking depth spikes).</li>
<li>Compare behavior of the same pattern in a backtracking engine vs a linear-time engine (e.g., RE2).</li>
<li>For a production route-matching regex, list safeguards to prevent ReDoS in a web server.</li>
<li>Outline a policy for your organization: when to allow backreferences/lookbehinds; when to mandate RE2-class engines.</li>
</ol>
</section>
</section>
<section id="lab-12-greedy-vs-lazy-matching" class="level2">
<h2 class="anchored" data-anchor-id="lab-12-greedy-vs-lazy-matching">LAB 12: Greedy vs Lazy Matching</h2>
<section id="goal-11" class="level3">
<h3 class="anchored" data-anchor-id="goal-11">Goal</h3>
<p>See how regex quantifiers (<code>*</code>, <code>+</code>, <code>?</code>) behave in greedy mode (match as much as possible) versus lazy mode (match as little as possible). Learn when greedy matching leads to over-capture and how lazy mode fixes it.</p>
</section>
<section id="setup-11" class="level3">
<h3 class="anchored" data-anchor-id="setup-11">Setup</h3>
<p>Regex engines default to greedy quantifiers:</p>
<ul>
<li><code>.*</code> matches the longest possible string.</li>
<li>Adding <code>?</code> makes them lazy: <code>.*?</code> matches the shortest possible string.</li>
</ul>
<p>We’ll use Python’s <code>re</code> module.</p>
</section>
<section id="step-by-step-11" class="level3">
<h3 class="anchored" data-anchor-id="step-by-step-11">Step-by-Step</h3>
<ol type="1">
<li><p>Simple Greedy Match</p>
<ul>
<li>Pattern: <code>&lt;tag&gt;.*&lt;/tag&gt;</code></li>
<li>Input: <code>"&lt;tag&gt;one&lt;/tag&gt;&lt;tag&gt;two&lt;/tag&gt;"</code></li>
<li>Greedy captures from the first <code>&lt;tag&gt;</code> to the last <code>&lt;/tag&gt;</code>, swallowing too much.</li>
</ul></li>
<li><p>Switch to Lazy</p>
<ul>
<li>Pattern: <code>&lt;tag&gt;.*?&lt;/tag&gt;</code></li>
<li>Same input.</li>
<li>Lazy captures each <code>&lt;tag&gt;…&lt;/tag&gt;</code> pair separately, as expected.</li>
</ul></li>
<li><p>Experiment with Plus Quantifier</p>
<ul>
<li>Compare <code>&lt;tag&gt;.+&lt;/tag&gt;</code> vs <code>&lt;tag&gt;.+?&lt;/tag&gt;</code>.</li>
<li><code>+</code> requires at least one character, <code>*</code> allows zero.</li>
</ul></li>
<li><p>Realistic Example: HTML-ish Parsing</p>
<ul>
<li>Input: <code>"&lt;b&gt;bold&lt;/b&gt;&lt;i&gt;italic&lt;/i&gt;"</code>.</li>
<li>Greedy regex: <code>&lt;.*&gt;</code> → captures everything between first <code>&lt;</code> and last <code>&gt;</code>.</li>
<li>Lazy regex: <code>&lt;.*?&gt;</code> → captures <code>&lt;b&gt;</code>, <code>&lt;/b&gt;</code>, <code>&lt;i&gt;</code>, <code>&lt;/i&gt;</code> separately.</li>
</ul></li>
<li><p>Discussion</p>
<ul>
<li>Greedy matching is fine when only one block exists.</li>
<li>Lazy matching is safer for repeated structures.</li>
<li>Regex is not a full parser; overuse leads to fragile code.</li>
</ul></li>
</ol>
</section>
<section id="example-python-10" class="level3">
<h3 class="anchored" data-anchor-id="example-python-10">Example (Python)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="st">"&lt;tag&gt;one&lt;/tag&gt;&lt;tag&gt;two&lt;/tag&gt;"</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Greedy match</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>greedy <span class="op">=</span> re.findall(<span class="vs">r"&lt;tag&gt;</span><span class="dv">.</span><span class="op">*</span><span class="vs">&lt;/tag&gt;"</span>, text)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Greedy:"</span>, greedy)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Lazy match</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>lazy <span class="op">=</span> re.findall(<span class="vs">r"&lt;tag&gt;</span><span class="dv">.</span><span class="op">*?</span><span class="vs">&lt;/tag&gt;"</span>, text)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Lazy:"</span>, lazy)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Greedy vs lazy with plus quantifier</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>sample <span class="op">=</span> <span class="st">"&lt;tag&gt;a&lt;/tag&gt;&lt;tag&gt;b&lt;/tag&gt;"</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Greedy +:"</span>, re.findall(<span class="vs">r"&lt;tag&gt;</span><span class="dv">.</span><span class="op">+</span><span class="vs">&lt;/tag&gt;"</span>, sample))</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Lazy +?:"</span>, re.findall(<span class="vs">r"&lt;tag&gt;</span><span class="dv">.</span><span class="op">+?</span><span class="vs">&lt;/tag&gt;"</span>, sample))</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. HTML-ish example</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"&lt;b&gt;bold&lt;/b&gt;&lt;i&gt;italic&lt;/i&gt;"</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Greedy HTML:"</span>, re.findall(<span class="vs">r"&lt;</span><span class="dv">.</span><span class="op">*</span><span class="vs">&gt;"</span>, html))</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Lazy HTML:"</span>, re.findall(<span class="vs">r"&lt;</span><span class="dv">.</span><span class="op">*?</span><span class="vs">&gt;"</span>, html))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="expected-results-11" class="level3">
<h3 class="anchored" data-anchor-id="expected-results-11">Expected Results</h3>
<ul>
<li>Greedy consumes everything between first and last match.</li>
<li>Lazy matches each block separately.</li>
</ul>
<table class="caption-top table">
<colgroup>
<col style="width: 19%">
<col style="width: 35%">
<col style="width: 45%">
</colgroup>
<thead>
<tr class="header">
<th>Pattern</th>
<th>Input</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;tag&gt;.*&lt;/tag&gt;</code></td>
<td><code>&lt;tag&gt;one&lt;/tag&gt;&lt;tag&gt;two&lt;/tag&gt;</code></td>
<td><code>['&lt;tag&gt;one&lt;/tag&gt;&lt;tag&gt;two&lt;/tag&gt;']</code></td>
</tr>
<tr class="even">
<td><code>&lt;tag&gt;.*?&lt;/tag&gt;</code></td>
<td><code>&lt;tag&gt;one&lt;/tag&gt;&lt;tag&gt;two&lt;/tag&gt;</code></td>
<td><code>['&lt;tag&gt;one&lt;/tag&gt;', '&lt;tag&gt;two&lt;/tag&gt;']</code></td>
</tr>
<tr class="odd">
<td><code>&lt;.*&gt;</code> (greedy)</td>
<td><code>&lt;b&gt;bold&lt;/b&gt;&lt;i&gt;italic&lt;/i&gt;</code></td>
<td><code>['&lt;b&gt;bold&lt;/b&gt;&lt;i&gt;italic&lt;/i&gt;']</code></td>
</tr>
<tr class="even">
<td><code>&lt;.*?&gt;</code> (lazy)</td>
<td><code>&lt;b&gt;bold&lt;/b&gt;&lt;i&gt;italic&lt;/i&gt;</code></td>
<td><code>['&lt;b&gt;', '&lt;/b&gt;', '&lt;i&gt;', '&lt;/i&gt;']</code></td>
</tr>
</tbody>
</table>
</section>
<section id="why-it-matters-26" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-26">Why it matters</h3>
<ul>
<li>Greedy vs lazy matching changes how much text is captured.</li>
<li>Incorrect choice can swallow entire documents or miss intended matches.</li>
<li>Useful in log parsing, HTML scraping, and template matching.</li>
<li>Shows why regex is powerful but also error-prone when used without care.</li>
</ul>
</section>
<section id="exercises-25" class="level3">
<h3 class="anchored" data-anchor-id="exercises-25">Exercises</h3>
<ol type="1">
<li>Write a regex to capture <code>&lt;tag&gt;…&lt;/tag&gt;</code> in <code>"&lt;tag&gt;a&lt;/tag&gt;&lt;tag&gt;b&lt;/tag&gt;"</code>. Compare greedy vs lazy.</li>
<li>Show why <code>&lt;.*&gt;</code> over-captures in <code>"&lt;p&gt;hi&lt;/p&gt;&lt;p&gt;bye&lt;/p&gt;"</code>.</li>
<li>Modify <code>&lt;.*&gt;</code> into <code>&lt;.*?&gt;</code> and explain the difference.</li>
<li>Use <code>.+?</code> to capture non-empty blocks. Show how it differs from <code>.*?</code>.</li>
<li>Write a regex that extracts <code>&lt;b&gt;…&lt;/b&gt;</code> text only.</li>
<li>Compare results of <code>&lt;div&gt;.*&lt;/div&gt;</code> on a file with nested <code>&lt;div&gt;</code> tags.</li>
<li>Explain why lazy quantifiers may still produce unexpected results in deeply nested structures.</li>
<li>Benchmark <code>.*</code> vs <code>.*?</code> on a 1MB HTML file.</li>
<li>Show how greedy vs lazy affects performance (number of backtracking steps).</li>
<li>Explain why full HTML parsing should not rely solely on regex.</li>
</ol>
</section>
</section>
<section id="lab-13-build-a-mini-inverted-index" class="level2">
<h2 class="anchored" data-anchor-id="lab-13-build-a-mini-inverted-index">LAB 13: Build a Mini Inverted Index</h2>
<section id="goal-12" class="level3">
<h3 class="anchored" data-anchor-id="goal-12">Goal</h3>
<p>Implement a simplified inverted index, the core data structure behind search engines. Learn how to map words to the documents they appear in, then use the index to answer queries quickly.</p>
</section>
<section id="setup-12" class="level3">
<h3 class="anchored" data-anchor-id="setup-12">Setup</h3>
<p>An inverted index stores entries like:</p>
<pre><code>"dog" → [doc1, doc3]  
"cat" → [doc2]  </code></pre>
<p>Instead of scanning every document, you look up the word in the index. We’ll implement this in Python, but the idea applies to any language or system.</p>
</section>
<section id="step-by-step-12" class="level3">
<h3 class="anchored" data-anchor-id="step-by-step-12">Step-by-Step</h3>
<ol type="1">
<li><p>Prepare Documents</p>
<ul>
<li><p>Create a small collection of texts, each with an ID.</p></li>
<li><p>Example:</p>
<ul>
<li><code>1: "the quick brown fox"</code></li>
<li><code>2: "the lazy dog"</code></li>
<li><code>3: "the fox jumped over the dog"</code></li>
</ul></li>
</ul></li>
<li><p>Tokenize Documents</p>
<ul>
<li>Split text into lowercase words.</li>
<li>Remove punctuation (simplified tokenizer).</li>
</ul></li>
<li><p>Build Inverted Index</p>
<ul>
<li>For each word, append the document ID to its list.</li>
<li>Use a dictionary (map) of word → set of doc IDs.</li>
</ul></li>
<li><p>Query the Index</p>
<ul>
<li>Look up a word and return all documents containing it.</li>
<li>Extend to multi-word queries by intersecting sets.</li>
</ul></li>
<li><p>Discussion</p>
<ul>
<li>Inverted index allows fast search compared to scanning.</li>
<li>Real search engines add ranking (TF-IDF, BM25), phrase search, and indexing optimizations.</li>
</ul></li>
</ol>
</section>
<section id="example-python-11" class="level3">
<h3 class="anchored" data-anchor-id="example-python-11">Example (Python)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> defaultdict</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Documents</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>docs <span class="op">=</span> {</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span>: <span class="st">"the quick brown fox"</span>,</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span>: <span class="st">"the lazy dog"</span>,</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>: <span class="st">"the fox jumped over the dog"</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Tokenize</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> tokenize(text):</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> re.findall(<span class="vs">r"</span><span class="dv">\w</span><span class="op">+</span><span class="vs">"</span>, text.lower())</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Build inverted index</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>index <span class="op">=</span> defaultdict(<span class="bu">set</span>)</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> doc_id, text <span class="kw">in</span> docs.items():</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> word <span class="kw">in</span> tokenize(text):</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>        index[word].add(doc_id)</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Query</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> search(word):</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> index.get(word.lower(), <span class="bu">set</span>())</span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> search_multi(words):</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>    sets <span class="op">=</span> [search(w) <span class="cf">for</span> w <span class="kw">in</span> words]</span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">set</span>.intersection(<span class="op">*</span>sets) <span class="cf">if</span> sets <span class="cf">else</span> <span class="bu">set</span>()</span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Example queries</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Index for 'fox':"</span>, index[<span class="st">"fox"</span>])</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Search 'dog':"</span>, search(<span class="st">"dog"</span>))</span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Search 'fox AND dog':"</span>, search_multi([<span class="st">"fox"</span>, <span class="st">"dog"</span>]))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="expected-results-12" class="level3">
<h3 class="anchored" data-anchor-id="expected-results-12">Expected Results</h3>
<ul>
<li>Index for <code>"fox"</code> → <code>{1, 3}</code></li>
<li>Search <code>"dog"</code> → <code>{2, 3}</code></li>
<li>Search <code>"fox AND dog"</code> → <code>{3}</code></li>
</ul>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Word</th>
<th>Document IDs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>the</td>
<td>{1, 2, 3}</td>
</tr>
<tr class="even">
<td>quick</td>
<td>{1}</td>
</tr>
<tr class="odd">
<td>brown</td>
<td>{1}</td>
</tr>
<tr class="even">
<td>fox</td>
<td>{1, 3}</td>
</tr>
<tr class="odd">
<td>lazy</td>
<td>{2}</td>
</tr>
<tr class="even">
<td>dog</td>
<td>{2, 3}</td>
</tr>
<tr class="odd">
<td>jumped</td>
<td>{3}</td>
</tr>
<tr class="even">
<td>over</td>
<td>{3}</td>
</tr>
</tbody>
</table>
</section>
<section id="why-it-matters-27" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-27">Why it matters</h3>
<ul>
<li>This is the foundation of Google, Lucene, Elasticsearch and every major search system.</li>
<li>Inverted indexes make keyword search efficient.</li>
<li>They scale from a few documents to billions.</li>
<li>Concepts here connect to IR (Information Retrieval) theory.</li>
</ul>
</section>
<section id="exercises-26" class="level3">
<h3 class="anchored" data-anchor-id="exercises-26">Exercises</h3>
<ol type="1">
<li>Build an inverted index for 5 custom sentences.</li>
<li>Search for a single word and list document IDs.</li>
<li>Implement AND search: return docs containing all words.</li>
<li>Implement OR search: return docs containing at least one word.</li>
<li>Extend the tokenizer to remove stop words like <code>"the"</code>, <code>"and"</code>.</li>
<li>Modify the index to count word frequency in each document.</li>
<li>Add a simple ranking: prefer documents with more matches.</li>
<li>Test the system with queries on <code>"cat"</code> when no doc contains <code>"cat"</code>.</li>
<li>Explain why inverted indexes are better than scanning.</li>
<li>Design how you would scale this to 1 million documents.</li>
</ol>
</section>
</section>
<section id="lab-14-compression-of-repetitive-strings" class="level2">
<h2 class="anchored" data-anchor-id="lab-14-compression-of-repetitive-strings">LAB 14: Compression of Repetitive Strings</h2>
<section id="goal-13" class="level3">
<h3 class="anchored" data-anchor-id="goal-13">Goal</h3>
<p>Understand how string compression reduces storage by exploiting repetition. Learn simple dictionary-based compression, compare sizes with and without compression, and see how algorithms like gzip or Huffman coding achieve savings.</p>
</section>
<section id="setup-13" class="level3">
<h3 class="anchored" data-anchor-id="setup-13">Setup</h3>
<p>We’ll simulate a simple compression scheme:</p>
<ul>
<li>Naive storage: keep the string as-is.</li>
<li>Dictionary-based compression: replace repeated substrings with references.</li>
<li>Compare results with Python’s <code>zlib</code> (which implements DEFLATE, combining LZ77 + Huffman coding).</li>
</ul>
<p>Test input:</p>
<pre><code>"banana banana banana"</code></pre>
</section>
<section id="step-by-step-13" class="level3">
<h3 class="anchored" data-anchor-id="step-by-step-13">Step-by-Step</h3>
<ol type="1">
<li><p>Uncompressed Storage</p>
<ul>
<li>Measure length of original string in bytes.</li>
</ul></li>
<li><p>Naive Dictionary Compression</p>
<ul>
<li>Store <code>"banana"</code> once.</li>
<li>Represent repeated <code>"banana"</code>s as references.</li>
<li>Calculate compressed size (dictionary + references).</li>
</ul></li>
<li><p>zlib Compression</p>
<ul>
<li>Use <code>zlib.compress()</code> to compress.</li>
<li>Compare compressed size with original.</li>
</ul></li>
<li><p>Test with Different Inputs</p>
<ul>
<li>Highly repetitive: <code>"abc abc abc abc"</code> → compresses well.</li>
<li>Random: <code>"qwertyuiop"</code> → compresses poorly.</li>
</ul></li>
<li><p>Discussion</p>
<ul>
<li>Compression works best when redundancy exists.</li>
<li>Dictionary + entropy coding are the backbone of text and file compression.</li>
<li>Trade-off: compression saves space but costs CPU time.</li>
</ul></li>
</ol>
</section>
<section id="example-python-12" class="level3">
<h3 class="anchored" data-anchor-id="example-python-12">Example (Python)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> zlib</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Original string</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="st">"banana banana banana"</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>original_size <span class="op">=</span> <span class="bu">len</span>(text.encode(<span class="st">"utf-8"</span>))</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Original text:"</span>, text)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Original size:"</span>, original_size, <span class="st">"bytes"</span>)</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Naive dictionary compression simulation</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>dictionary <span class="op">=</span> {<span class="st">"banana"</span>: <span class="dv">1</span>}</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>tokens <span class="op">=</span> [dictionary.get(word, word) <span class="cf">for</span> word <span class="kw">in</span> text.split()]</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>compressed_repr <span class="op">=</span> (dictionary, tokens)</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>simulated_size <span class="op">=</span> <span class="bu">len</span>(<span class="st">"banana"</span>) <span class="op">+</span> <span class="bu">len</span>(tokens)  <span class="co"># rough size</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Naive simulated compressed size:"</span>, simulated_size, <span class="st">"bytes"</span>)</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. zlib compression</span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>compressed <span class="op">=</span> zlib.compress(text.encode(<span class="st">"utf-8"</span>))</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"zlib compressed size:"</span>, <span class="bu">len</span>(compressed), <span class="st">"bytes"</span>)</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Compare with random string</span></span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>random_text <span class="op">=</span> <span class="st">"qwertyuiop"</span></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>compressed_random <span class="op">=</span> zlib.compress(random_text.encode(<span class="st">"utf-8"</span>))</span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Random original size:"</span>, <span class="bu">len</span>(random_text), <span class="st">"bytes"</span>)</span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Random compressed size:"</span>, <span class="bu">len</span>(compressed_random), <span class="st">"bytes"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="expected-results-13" class="level3">
<h3 class="anchored" data-anchor-id="expected-results-13">Expected Results</h3>
<ul>
<li>Original: ~20 bytes.</li>
<li>Naive dictionary scheme: fewer bytes than original.</li>
<li>zlib: compressed size significantly smaller (e.g., 20 → 17).</li>
<li>Random text: compressed size ≈ original (sometimes slightly larger due to overhead).</li>
</ul>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Original Size</th>
<th>Compressed Size</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>"banana banana banana"</code></td>
<td>20 bytes</td>
<td>~17 bytes</td>
</tr>
<tr class="even">
<td><code>"abc abc abc abc"</code></td>
<td>15 bytes</td>
<td>~13 bytes</td>
</tr>
<tr class="odd">
<td><code>"qwertyuiop"</code></td>
<td>10 bytes</td>
<td>~12 bytes (overhead)</td>
</tr>
</tbody>
</table>
</section>
<section id="why-it-matters-28" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-28">Why it matters</h3>
<ul>
<li>Compression underpins storage (zip files, databases, backups) and transmission (HTTP gzip, messaging).</li>
<li>Saves bandwidth and storage by removing redundancy.</li>
<li>Shows trade-offs: repetitive text compresses well, random text does not.</li>
<li>Foundation for deeper algorithms: Huffman coding, LZ77, arithmetic coding.</li>
</ul>
</section>
<section id="exercises-27" class="level3">
<h3 class="anchored" data-anchor-id="exercises-27">Exercises</h3>
<ol type="1">
<li>Compute original and compressed sizes of <code>"hello hello hello"</code>.</li>
<li>Compare compression ratio for <code>"aaaaa"</code> vs <code>"abcde"</code>.</li>
<li>Write a function that stores unique words in a dictionary and replaces repeats with indexes.</li>
<li>Extend your dictionary to store <code>"banana"</code> as key <code>1</code> and <code>"apple"</code> as key <code>2</code>. Compress <code>"banana apple banana"</code>.</li>
<li>Measure zlib compression ratio for a large string of repeated <code>"test"</code>.</li>
<li>Generate random strings of length 100 and test compression. What happens?</li>
<li>Explain why compression sometimes increases size on short random inputs.</li>
<li>Compare zlib compression with <code>bz2</code> or <code>lzma</code> in Python.</li>
<li>Explain how compression is used in network protocols like HTTP/2.</li>
<li>Propose how compression could be applied in search engine indexes (from LAB 13).</li>
</ol>
</section>
</section>
<section id="lab-15-injection-attack-simulation" class="level2">
<h2 class="anchored" data-anchor-id="lab-15-injection-attack-simulation">LAB 15: Injection Attack Simulation</h2>
<section id="goal-14" class="level3">
<h3 class="anchored" data-anchor-id="goal-14">Goal</h3>
<p>Demonstrate how insecure string handling in queries can lead to injection attacks (e.g., SQL injection). Show how malicious inputs manipulate string-based queries, and how parameterized queries prevent this.</p>
</section>
<section id="setup-14" class="level3">
<h3 class="anchored" data-anchor-id="setup-14">Setup</h3>
<p>Any system that builds queries with string concatenation is vulnerable. We’ll simulate SQL injection in Python:</p>
<ul>
<li>Unsafe example: concatenating user input directly into a query string.</li>
<li>Safe example: using parameterized queries (<code>?</code> or <code>%s</code>).</li>
</ul>
<p>We’ll use <code>sqlite3</code> for demonstration, since it’s lightweight and built into Python.</p>
</section>
<section id="step-by-step-14" class="level3">
<h3 class="anchored" data-anchor-id="step-by-step-14">Step-by-Step</h3>
<ol type="1">
<li><p>Create a Sample Database</p>
<ul>
<li>Table: <code>accounts(name TEXT, balance INT)</code>.</li>
<li>Insert rows: <code>"Alice", 100</code>, <code>"Bob", 50</code>.</li>
</ul></li>
<li><p>Unsafe Query</p>
<ul>
<li><p>Take user input for name.</p></li>
<li><p>Build query with string concatenation:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> accounts <span class="kw">WHERE</span> name <span class="op">=</span> <span class="st">'USER_INPUT'</span>;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>Input <code>"Alice"</code> → works fine.</p></li>
<li><p>Input <code>"' OR '1'='1"</code> → query returns all rows (attack).</p></li>
</ul></li>
<li><p>Simulated SQL Injection Attack</p>
<ul>
<li>Input <code>"; DROP TABLE accounts; --"</code> → destructive query.</li>
<li>In real systems, this would delete the table.</li>
</ul></li>
<li><p>Safe Query with Parameters</p>
<ul>
<li>Use <code>cursor.execute("SELECT * FROM accounts WHERE name = ?", (user_input,))</code>.</li>
<li>Input <code>"' OR '1'='1"</code> → safely treated as a literal string, no injection.</li>
</ul></li>
<li><p>Discussion</p>
<ul>
<li>String concatenation = dangerous.</li>
<li>Parameterization = safe.</li>
<li>This applies to SQL, shell commands, HTML, and beyond.</li>
</ul></li>
</ol>
</section>
<section id="example-python-13" class="level3">
<h3 class="anchored" data-anchor-id="example-python-13">Example (Python)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Setup</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>conn <span class="op">=</span> sqlite3.<span class="ex">connect</span>(<span class="st">":memory:"</span>)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> conn.cursor()</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>c.execute(<span class="st">"CREATE TABLE accounts (name TEXT, balance INT)"</span>)</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>c.executemany(<span class="st">"INSERT INTO accounts VALUES (?, ?)"</span>, [(<span class="st">"Alice"</span>, <span class="dv">100</span>), (<span class="st">"Bob"</span>, <span class="dv">50</span>)])</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>conn.commit()</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Unsafe query</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> unsafe_query(user_input):</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>    query <span class="op">=</span> <span class="ss">f"SELECT * FROM accounts WHERE name = '</span><span class="sc">{</span>user_input<span class="sc">}</span><span class="ss">'"</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Unsafe query:"</span>, query)</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">list</span>(c.execute(query))</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Safe query</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> safe_query(user_input):</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>    query <span class="op">=</span> <span class="st">"SELECT * FROM accounts WHERE name = ?"</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Safe query:"</span>, query)</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">list</span>(c.execute(query, (user_input,)))</span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Normal input</span></span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Normal unsafe:"</span>, unsafe_query(<span class="st">"Alice"</span>))</span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Injection attack</span></span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Injection unsafe:"</span>, unsafe_query(<span class="st">"' OR '1'='1"</span>))</span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Safe version prevents injection</span></span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Safe version:"</span>, safe_query(<span class="st">"' OR '1'='1"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="expected-results-14" class="level3">
<h3 class="anchored" data-anchor-id="expected-results-14">Expected Results</h3>
<ul>
<li>Normal input <code>"Alice"</code> works fine.</li>
<li>Injection input <code>"' OR '1'='1"</code> returns all rows in unsafe query.</li>
<li>Safe query treats it literally → no injection.</li>
</ul>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Unsafe Query Result</th>
<th>Safe Query Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>"Alice"</code></td>
<td><code>[("Alice", 100)]</code></td>
<td><code>[("Alice", 100)]</code></td>
</tr>
<tr class="even">
<td><code>"' OR '1'='1"</code></td>
<td><code>[("Alice",100),("Bob",50)]</code></td>
<td><code>[]</code> (no match)</td>
</tr>
</tbody>
</table>
</section>
<section id="why-it-matters-29" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-29">Why it matters</h3>
<ul>
<li>SQL injection is one of the most critical web vulnerabilities (OWASP Top 10).</li>
<li>Attackers can dump data, bypass authentication, or destroy databases.</li>
<li>The problem is not SQL itself but string misuse.</li>
<li>Fix: always use parameterized queries or ORMs with safe bindings.</li>
</ul>
</section>
<section id="exercises-28" class="level3">
<h3 class="anchored" data-anchor-id="exercises-28">Exercises</h3>
<ol type="1">
<li>Write a query vulnerable to injection and test with <code>"Alice"</code>.</li>
<li>Inject <code>"' OR '1'='1"</code> and explain why it returns all rows.</li>
<li>Try input <code>"; DROP TABLE accounts; --"</code> and explain what would happen in a real DB.</li>
<li>Rewrite your code to use parameterized queries.</li>
<li>Test injection again with safe queries and verify no effect.</li>
<li>Extend this idea to shell commands (<code>os.system</code>) and simulate command injection.</li>
<li>Research one real-world breach caused by SQL injection.</li>
<li>Explain why escaping input manually (e.g., replacing quotes) is insufficient.</li>
<li>Design input validation rules that complement parameterization.</li>
<li>Propose a security guideline for handling strings in queries for your organization.</li>
</ol>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./chapter_2.html" class="pagination-link" aria-label="Chapter 2. Arrays">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">Chapter 2. Arrays</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




</body></html>