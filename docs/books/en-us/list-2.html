<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Chapter 2. Sorting and searching – The Little Book of Algorithms</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../books/en-us/list-3.html" rel="next">
<link href="../../books/en-us/list-1.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-1fe81d0376b2c50856e68e651e390326.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-27c261d06b905028a18691de25d09dde.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../books/en-us/list-2.html"><span class="chapter-title">Chapter 2. Sorting and searching</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../../index.html" class="sidebar-logo-link">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">The Little Book of Algorithms</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Content</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../books/en-us/cheatsheet.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">The Cheatsheet</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../books/en-us/plan.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">The Plan</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../books/en-us/book.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">The Book</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../books/en-us/list-1.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Chapter 1. Foundatmemtions of Algorithms</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../books/en-us/list-2.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">Chapter 2. Sorting and searching</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../books/en-us/list-3.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Chapter 3. Data Structure in Action</span></a>
  </div>
</li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#elementary-sorting" id="toc-elementary-sorting" class="nav-link active" data-scroll-target="#elementary-sorting">11. Elementary sorting</a>
  <ul class="collapse">
  <li><a href="#bubble-sort" id="toc-bubble-sort" class="nav-link" data-scroll-target="#bubble-sort">101 Bubble Sort</a></li>
  <li><a href="#what-problem-are-we-solving" id="toc-what-problem-are-we-solving" class="nav-link" data-scroll-target="#what-problem-are-we-solving">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language" id="toc-how-does-it-work-plain-language" class="nav-link" data-scroll-target="#how-does-it-work-plain-language">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions" id="toc-tiny-code-easy-versions" class="nav-link" data-scroll-target="#tiny-code-easy-versions">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters" id="toc-why-it-matters" class="nav-link" data-scroll-target="#why-it-matters">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works" id="toc-a-gentle-proof-why-it-works" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself" id="toc-try-it-yourself" class="nav-link" data-scroll-target="#try-it-yourself">Try It Yourself</a></li>
  <li><a href="#test-cases" id="toc-test-cases" class="nav-link" data-scroll-target="#test-cases">Test Cases</a></li>
  <li><a href="#complexity" id="toc-complexity" class="nav-link" data-scroll-target="#complexity">Complexity</a></li>
  <li><a href="#improved-bubble-sort" id="toc-improved-bubble-sort" class="nav-link" data-scroll-target="#improved-bubble-sort">102 Improved Bubble Sort</a></li>
  <li><a href="#what-problem-are-we-solving-1" id="toc-what-problem-are-we-solving-1" class="nav-link" data-scroll-target="#what-problem-are-we-solving-1">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-1" id="toc-how-does-it-work-plain-language-1" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-1">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-1" id="toc-tiny-code-easy-versions-1" class="nav-link" data-scroll-target="#tiny-code-easy-versions-1">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-1" id="toc-why-it-matters-1" class="nav-link" data-scroll-target="#why-it-matters-1">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-1" id="toc-a-gentle-proof-why-it-works-1" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-1">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-1" id="toc-try-it-yourself-1" class="nav-link" data-scroll-target="#try-it-yourself-1">Try It Yourself</a></li>
  <li><a href="#test-cases-1" id="toc-test-cases-1" class="nav-link" data-scroll-target="#test-cases-1">Test Cases</a></li>
  <li><a href="#complexity-1" id="toc-complexity-1" class="nav-link" data-scroll-target="#complexity-1">Complexity</a></li>
  <li><a href="#cocktail-shaker-sort" id="toc-cocktail-shaker-sort" class="nav-link" data-scroll-target="#cocktail-shaker-sort">103 Cocktail Shaker Sort</a></li>
  <li><a href="#what-problem-are-we-solving-2" id="toc-what-problem-are-we-solving-2" class="nav-link" data-scroll-target="#what-problem-are-we-solving-2">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-2" id="toc-how-does-it-work-plain-language-2" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-2">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-2" id="toc-tiny-code-easy-versions-2" class="nav-link" data-scroll-target="#tiny-code-easy-versions-2">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-2" id="toc-why-it-matters-2" class="nav-link" data-scroll-target="#why-it-matters-2">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-2" id="toc-a-gentle-proof-why-it-works-2" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-2">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-2" id="toc-try-it-yourself-2" class="nav-link" data-scroll-target="#try-it-yourself-2">Try It Yourself</a></li>
  <li><a href="#test-cases-2" id="toc-test-cases-2" class="nav-link" data-scroll-target="#test-cases-2">Test Cases</a></li>
  <li><a href="#complexity-2" id="toc-complexity-2" class="nav-link" data-scroll-target="#complexity-2">Complexity</a></li>
  <li><a href="#selection-sort" id="toc-selection-sort" class="nav-link" data-scroll-target="#selection-sort">104 Selection Sort</a></li>
  <li><a href="#what-problem-are-we-solving-3" id="toc-what-problem-are-we-solving-3" class="nav-link" data-scroll-target="#what-problem-are-we-solving-3">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-3" id="toc-how-does-it-work-plain-language-3" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-3">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-3" id="toc-tiny-code-easy-versions-3" class="nav-link" data-scroll-target="#tiny-code-easy-versions-3">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-3" id="toc-why-it-matters-3" class="nav-link" data-scroll-target="#why-it-matters-3">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-3" id="toc-a-gentle-proof-why-it-works-3" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-3">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-3" id="toc-try-it-yourself-3" class="nav-link" data-scroll-target="#try-it-yourself-3">Try It Yourself</a></li>
  <li><a href="#test-cases-3" id="toc-test-cases-3" class="nav-link" data-scroll-target="#test-cases-3">Test Cases</a></li>
  <li><a href="#complexity-3" id="toc-complexity-3" class="nav-link" data-scroll-target="#complexity-3">Complexity</a></li>
  <li><a href="#double-selection-sort" id="toc-double-selection-sort" class="nav-link" data-scroll-target="#double-selection-sort">105 Double Selection Sort</a></li>
  <li><a href="#what-problem-are-we-solving-4" id="toc-what-problem-are-we-solving-4" class="nav-link" data-scroll-target="#what-problem-are-we-solving-4">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-4" id="toc-how-does-it-work-plain-language-4" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-4">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-4" id="toc-tiny-code-easy-versions-4" class="nav-link" data-scroll-target="#tiny-code-easy-versions-4">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-4" id="toc-why-it-matters-4" class="nav-link" data-scroll-target="#why-it-matters-4">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-4" id="toc-a-gentle-proof-why-it-works-4" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-4">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-4" id="toc-try-it-yourself-4" class="nav-link" data-scroll-target="#try-it-yourself-4">Try It Yourself</a></li>
  <li><a href="#test-cases-4" id="toc-test-cases-4" class="nav-link" data-scroll-target="#test-cases-4">Test Cases</a></li>
  <li><a href="#complexity-4" id="toc-complexity-4" class="nav-link" data-scroll-target="#complexity-4">Complexity</a></li>
  <li><a href="#insertion-sort" id="toc-insertion-sort" class="nav-link" data-scroll-target="#insertion-sort">106 Insertion Sort</a></li>
  <li><a href="#what-problem-are-we-solving-5" id="toc-what-problem-are-we-solving-5" class="nav-link" data-scroll-target="#what-problem-are-we-solving-5">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-5" id="toc-how-does-it-work-plain-language-5" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-5">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-5" id="toc-tiny-code-easy-versions-5" class="nav-link" data-scroll-target="#tiny-code-easy-versions-5">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-5" id="toc-why-it-matters-5" class="nav-link" data-scroll-target="#why-it-matters-5">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-5" id="toc-a-gentle-proof-why-it-works-5" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-5">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-5" id="toc-try-it-yourself-5" class="nav-link" data-scroll-target="#try-it-yourself-5">Try It Yourself</a></li>
  <li><a href="#test-cases-5" id="toc-test-cases-5" class="nav-link" data-scroll-target="#test-cases-5">Test Cases</a></li>
  <li><a href="#complexity-5" id="toc-complexity-5" class="nav-link" data-scroll-target="#complexity-5">Complexity</a></li>
  <li><a href="#binary-insertion-sort" id="toc-binary-insertion-sort" class="nav-link" data-scroll-target="#binary-insertion-sort">107 Binary Insertion Sort</a></li>
  <li><a href="#what-problem-are-we-solving-6" id="toc-what-problem-are-we-solving-6" class="nav-link" data-scroll-target="#what-problem-are-we-solving-6">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-6" id="toc-how-does-it-work-plain-language-6" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-6">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-6" id="toc-tiny-code-easy-versions-6" class="nav-link" data-scroll-target="#tiny-code-easy-versions-6">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-6" id="toc-why-it-matters-6" class="nav-link" data-scroll-target="#why-it-matters-6">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-6" id="toc-a-gentle-proof-why-it-works-6" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-6">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-6" id="toc-try-it-yourself-6" class="nav-link" data-scroll-target="#try-it-yourself-6">Try It Yourself</a></li>
  <li><a href="#test-cases-6" id="toc-test-cases-6" class="nav-link" data-scroll-target="#test-cases-6">Test Cases</a></li>
  <li><a href="#complexity-6" id="toc-complexity-6" class="nav-link" data-scroll-target="#complexity-6">Complexity</a></li>
  <li><a href="#gnome-sort" id="toc-gnome-sort" class="nav-link" data-scroll-target="#gnome-sort">108 Gnome Sort</a></li>
  <li><a href="#what-problem-are-we-solving-7" id="toc-what-problem-are-we-solving-7" class="nav-link" data-scroll-target="#what-problem-are-we-solving-7">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-7" id="toc-how-does-it-work-plain-language-7" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-7">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-7" id="toc-tiny-code-easy-versions-7" class="nav-link" data-scroll-target="#tiny-code-easy-versions-7">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-7" id="toc-why-it-matters-7" class="nav-link" data-scroll-target="#why-it-matters-7">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-7" id="toc-a-gentle-proof-why-it-works-7" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-7">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-7" id="toc-try-it-yourself-7" class="nav-link" data-scroll-target="#try-it-yourself-7">Try It Yourself</a></li>
  <li><a href="#test-cases-7" id="toc-test-cases-7" class="nav-link" data-scroll-target="#test-cases-7">Test Cases</a></li>
  <li><a href="#complexity-7" id="toc-complexity-7" class="nav-link" data-scroll-target="#complexity-7">Complexity</a></li>
  <li><a href="#odd-even-sort" id="toc-odd-even-sort" class="nav-link" data-scroll-target="#odd-even-sort">109 Odd-Even Sort</a></li>
  <li><a href="#what-problem-are-we-solving-8" id="toc-what-problem-are-we-solving-8" class="nav-link" data-scroll-target="#what-problem-are-we-solving-8">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-8" id="toc-how-does-it-work-plain-language-8" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-8">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-8" id="toc-tiny-code-easy-versions-8" class="nav-link" data-scroll-target="#tiny-code-easy-versions-8">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-8" id="toc-why-it-matters-8" class="nav-link" data-scroll-target="#why-it-matters-8">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-8" id="toc-a-gentle-proof-why-it-works-8" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-8">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-8" id="toc-try-it-yourself-8" class="nav-link" data-scroll-target="#try-it-yourself-8">Try It Yourself</a></li>
  <li><a href="#test-cases-8" id="toc-test-cases-8" class="nav-link" data-scroll-target="#test-cases-8">Test Cases</a></li>
  <li><a href="#complexity-8" id="toc-complexity-8" class="nav-link" data-scroll-target="#complexity-8">Complexity</a></li>
  <li><a href="#stooge-sort" id="toc-stooge-sort" class="nav-link" data-scroll-target="#stooge-sort">110 Stooge Sort</a></li>
  <li><a href="#what-problem-are-we-solving-9" id="toc-what-problem-are-we-solving-9" class="nav-link" data-scroll-target="#what-problem-are-we-solving-9">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-9" id="toc-how-does-it-work-plain-language-9" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-9">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-9" id="toc-tiny-code-easy-versions-9" class="nav-link" data-scroll-target="#tiny-code-easy-versions-9">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-9" id="toc-why-it-matters-9" class="nav-link" data-scroll-target="#why-it-matters-9">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-9" id="toc-a-gentle-proof-why-it-works-9" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-9">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-9" id="toc-try-it-yourself-9" class="nav-link" data-scroll-target="#try-it-yourself-9">Try It Yourself</a></li>
  <li><a href="#test-cases-9" id="toc-test-cases-9" class="nav-link" data-scroll-target="#test-cases-9">Test Cases</a></li>
  <li><a href="#complexity-9" id="toc-complexity-9" class="nav-link" data-scroll-target="#complexity-9">Complexity</a></li>
  </ul></li>
  <li><a href="#section-12.-divide-and-conquer-sorting" id="toc-section-12.-divide-and-conquer-sorting" class="nav-link" data-scroll-target="#section-12.-divide-and-conquer-sorting">Section 12. Divide and conquer sorting</a>
  <ul class="collapse">
  <li><a href="#merge-sort" id="toc-merge-sort" class="nav-link" data-scroll-target="#merge-sort">111 Merge Sort</a></li>
  <li><a href="#what-problem-are-we-solving-10" id="toc-what-problem-are-we-solving-10" class="nav-link" data-scroll-target="#what-problem-are-we-solving-10">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-10" id="toc-how-does-it-work-plain-language-10" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-10">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-10" id="toc-tiny-code-easy-versions-10" class="nav-link" data-scroll-target="#tiny-code-easy-versions-10">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-10" id="toc-why-it-matters-10" class="nav-link" data-scroll-target="#why-it-matters-10">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-10" id="toc-a-gentle-proof-why-it-works-10" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-10">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-10" id="toc-try-it-yourself-10" class="nav-link" data-scroll-target="#try-it-yourself-10">Try It Yourself</a></li>
  <li><a href="#test-cases-10" id="toc-test-cases-10" class="nav-link" data-scroll-target="#test-cases-10">Test Cases</a></li>
  <li><a href="#complexity-10" id="toc-complexity-10" class="nav-link" data-scroll-target="#complexity-10">Complexity</a></li>
  <li><a href="#iterative-merge-sort" id="toc-iterative-merge-sort" class="nav-link" data-scroll-target="#iterative-merge-sort">112 Iterative Merge Sort</a></li>
  <li><a href="#what-problem-are-we-solving-11" id="toc-what-problem-are-we-solving-11" class="nav-link" data-scroll-target="#what-problem-are-we-solving-11">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-11" id="toc-how-does-it-work-plain-language-11" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-11">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-11" id="toc-tiny-code-easy-versions-11" class="nav-link" data-scroll-target="#tiny-code-easy-versions-11">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-11" id="toc-why-it-matters-11" class="nav-link" data-scroll-target="#why-it-matters-11">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-11" id="toc-a-gentle-proof-why-it-works-11" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-11">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-11" id="toc-try-it-yourself-11" class="nav-link" data-scroll-target="#try-it-yourself-11">Try It Yourself</a></li>
  <li><a href="#test-cases-11" id="toc-test-cases-11" class="nav-link" data-scroll-target="#test-cases-11">Test Cases</a></li>
  <li><a href="#complexity-11" id="toc-complexity-11" class="nav-link" data-scroll-target="#complexity-11">Complexity</a></li>
  <li><a href="#quick-sort" id="toc-quick-sort" class="nav-link" data-scroll-target="#quick-sort">113 Quick Sort</a></li>
  <li><a href="#what-problem-are-we-solving-12" id="toc-what-problem-are-we-solving-12" class="nav-link" data-scroll-target="#what-problem-are-we-solving-12">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-12" id="toc-how-does-it-work-plain-language-12" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-12">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-12" id="toc-tiny-code-easy-versions-12" class="nav-link" data-scroll-target="#tiny-code-easy-versions-12">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-12" id="toc-why-it-matters-12" class="nav-link" data-scroll-target="#why-it-matters-12">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-12" id="toc-a-gentle-proof-why-it-works-12" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-12">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-12" id="toc-try-it-yourself-12" class="nav-link" data-scroll-target="#try-it-yourself-12">Try It Yourself</a></li>
  <li><a href="#test-cases-12" id="toc-test-cases-12" class="nav-link" data-scroll-target="#test-cases-12">Test Cases</a></li>
  <li><a href="#complexity-12" id="toc-complexity-12" class="nav-link" data-scroll-target="#complexity-12">Complexity</a></li>
  <li><a href="#hoare-partition-scheme" id="toc-hoare-partition-scheme" class="nav-link" data-scroll-target="#hoare-partition-scheme">114 Hoare Partition Scheme</a></li>
  <li><a href="#what-problem-are-we-solving-13" id="toc-what-problem-are-we-solving-13" class="nav-link" data-scroll-target="#what-problem-are-we-solving-13">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-13" id="toc-how-does-it-work-plain-language-13" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-13">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-13" id="toc-tiny-code-easy-versions-13" class="nav-link" data-scroll-target="#tiny-code-easy-versions-13">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-13" id="toc-why-it-matters-13" class="nav-link" data-scroll-target="#why-it-matters-13">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-13" id="toc-a-gentle-proof-why-it-works-13" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-13">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-13" id="toc-try-it-yourself-13" class="nav-link" data-scroll-target="#try-it-yourself-13">Try It Yourself</a></li>
  <li><a href="#test-cases-13" id="toc-test-cases-13" class="nav-link" data-scroll-target="#test-cases-13">Test Cases</a></li>
  <li><a href="#complexity-13" id="toc-complexity-13" class="nav-link" data-scroll-target="#complexity-13">Complexity</a></li>
  <li><a href="#lomuto-partition-scheme" id="toc-lomuto-partition-scheme" class="nav-link" data-scroll-target="#lomuto-partition-scheme">115 Lomuto Partition Scheme</a></li>
  <li><a href="#what-problem-are-we-solving-14" id="toc-what-problem-are-we-solving-14" class="nav-link" data-scroll-target="#what-problem-are-we-solving-14">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-14" id="toc-how-does-it-work-plain-language-14" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-14">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-14" id="toc-tiny-code-easy-versions-14" class="nav-link" data-scroll-target="#tiny-code-easy-versions-14">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-14" id="toc-why-it-matters-14" class="nav-link" data-scroll-target="#why-it-matters-14">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-14" id="toc-a-gentle-proof-why-it-works-14" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-14">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-14" id="toc-try-it-yourself-14" class="nav-link" data-scroll-target="#try-it-yourself-14">Try It Yourself</a></li>
  <li><a href="#test-cases-14" id="toc-test-cases-14" class="nav-link" data-scroll-target="#test-cases-14">Test Cases</a></li>
  <li><a href="#complexity-14" id="toc-complexity-14" class="nav-link" data-scroll-target="#complexity-14">Complexity</a></li>
  <li><a href="#randomized-quick-sort" id="toc-randomized-quick-sort" class="nav-link" data-scroll-target="#randomized-quick-sort">116 Randomized Quick Sort</a></li>
  <li><a href="#what-problem-are-we-solving-15" id="toc-what-problem-are-we-solving-15" class="nav-link" data-scroll-target="#what-problem-are-we-solving-15">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-15" id="toc-how-does-it-work-plain-language-15" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-15">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-15" id="toc-tiny-code-easy-versions-15" class="nav-link" data-scroll-target="#tiny-code-easy-versions-15">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-15" id="toc-why-it-matters-15" class="nav-link" data-scroll-target="#why-it-matters-15">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-15" id="toc-a-gentle-proof-why-it-works-15" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-15">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-15" id="toc-try-it-yourself-15" class="nav-link" data-scroll-target="#try-it-yourself-15">Try It Yourself</a></li>
  <li><a href="#test-cases-15" id="toc-test-cases-15" class="nav-link" data-scroll-target="#test-cases-15">Test Cases</a></li>
  <li><a href="#complexity-15" id="toc-complexity-15" class="nav-link" data-scroll-target="#complexity-15">Complexity</a></li>
  <li><a href="#heap-sort" id="toc-heap-sort" class="nav-link" data-scroll-target="#heap-sort">117 Heap Sort</a></li>
  <li><a href="#what-problem-are-we-solving-16" id="toc-what-problem-are-we-solving-16" class="nav-link" data-scroll-target="#what-problem-are-we-solving-16">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-16" id="toc-how-does-it-work-plain-language-16" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-16">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-16" id="toc-tiny-code-easy-versions-16" class="nav-link" data-scroll-target="#tiny-code-easy-versions-16">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-16" id="toc-why-it-matters-16" class="nav-link" data-scroll-target="#why-it-matters-16">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-16" id="toc-a-gentle-proof-why-it-works-16" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-16">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-16" id="toc-try-it-yourself-16" class="nav-link" data-scroll-target="#try-it-yourself-16">Try It Yourself</a></li>
  <li><a href="#test-cases-16" id="toc-test-cases-16" class="nav-link" data-scroll-target="#test-cases-16">Test Cases</a></li>
  <li><a href="#complexity-16" id="toc-complexity-16" class="nav-link" data-scroll-target="#complexity-16">Complexity</a></li>
  <li><a href="#way-quick-sort" id="toc-way-quick-sort" class="nav-link" data-scroll-target="#way-quick-sort">118 3-Way Quick Sort</a></li>
  <li><a href="#what-problem-are-we-solving-17" id="toc-what-problem-are-we-solving-17" class="nav-link" data-scroll-target="#what-problem-are-we-solving-17">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-17" id="toc-how-does-it-work-plain-language-17" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-17">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-17" id="toc-tiny-code-easy-versions-17" class="nav-link" data-scroll-target="#tiny-code-easy-versions-17">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-17" id="toc-why-it-matters-17" class="nav-link" data-scroll-target="#why-it-matters-17">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-17" id="toc-a-gentle-proof-why-it-works-17" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-17">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-17" id="toc-try-it-yourself-17" class="nav-link" data-scroll-target="#try-it-yourself-17">Try It Yourself</a></li>
  <li><a href="#test-cases-17" id="toc-test-cases-17" class="nav-link" data-scroll-target="#test-cases-17">Test Cases</a></li>
  <li><a href="#complexity-17" id="toc-complexity-17" class="nav-link" data-scroll-target="#complexity-17">Complexity</a></li>
  <li><a href="#external-merge-sort" id="toc-external-merge-sort" class="nav-link" data-scroll-target="#external-merge-sort">119 External Merge Sort</a></li>
  <li><a href="#what-problem-are-we-solving-18" id="toc-what-problem-are-we-solving-18" class="nav-link" data-scroll-target="#what-problem-are-we-solving-18">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-18" id="toc-how-does-it-work-plain-language-18" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-18">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-simplified-simulation" id="toc-tiny-code-simplified-simulation" class="nav-link" data-scroll-target="#tiny-code-simplified-simulation">Tiny Code (Simplified Simulation)</a></li>
  <li><a href="#why-it-matters-18" id="toc-why-it-matters-18" class="nav-link" data-scroll-target="#why-it-matters-18">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-18" id="toc-a-gentle-proof-why-it-works-18" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-18">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-18" id="toc-try-it-yourself-18" class="nav-link" data-scroll-target="#try-it-yourself-18">Try It Yourself</a></li>
  <li><a href="#test-cases-18" id="toc-test-cases-18" class="nav-link" data-scroll-target="#test-cases-18">Test Cases</a></li>
  <li><a href="#complexity-18" id="toc-complexity-18" class="nav-link" data-scroll-target="#complexity-18">Complexity</a></li>
  <li><a href="#parallel-merge-sort" id="toc-parallel-merge-sort" class="nav-link" data-scroll-target="#parallel-merge-sort">120 Parallel Merge Sort</a></li>
  <li><a href="#what-problem-are-we-solving-19" id="toc-what-problem-are-we-solving-19" class="nav-link" data-scroll-target="#what-problem-are-we-solving-19">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-19" id="toc-how-does-it-work-plain-language-19" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-19">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-18" id="toc-tiny-code-easy-versions-18" class="nav-link" data-scroll-target="#tiny-code-easy-versions-18">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-19" id="toc-why-it-matters-19" class="nav-link" data-scroll-target="#why-it-matters-19">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-19" id="toc-a-gentle-proof-why-it-works-19" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-19">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-19" id="toc-try-it-yourself-19" class="nav-link" data-scroll-target="#try-it-yourself-19">Try It Yourself</a></li>
  <li><a href="#test-cases-19" id="toc-test-cases-19" class="nav-link" data-scroll-target="#test-cases-19">Test Cases</a></li>
  <li><a href="#complexity-19" id="toc-complexity-19" class="nav-link" data-scroll-target="#complexity-19">Complexity</a></li>
  </ul></li>
  <li><a href="#section-13.-counting-and-distribution-sorts" id="toc-section-13.-counting-and-distribution-sorts" class="nav-link" data-scroll-target="#section-13.-counting-and-distribution-sorts">Section 13. Counting and distribution sorts</a>
  <ul class="collapse">
  <li><a href="#counting-sort" id="toc-counting-sort" class="nav-link" data-scroll-target="#counting-sort">121 Counting Sort</a></li>
  <li><a href="#what-problem-are-we-solving-20" id="toc-what-problem-are-we-solving-20" class="nav-link" data-scroll-target="#what-problem-are-we-solving-20">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-20" id="toc-how-does-it-work-plain-language-20" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-20">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-19" id="toc-tiny-code-easy-versions-19" class="nav-link" data-scroll-target="#tiny-code-easy-versions-19">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-20" id="toc-why-it-matters-20" class="nav-link" data-scroll-target="#why-it-matters-20">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-20" id="toc-a-gentle-proof-why-it-works-20" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-20">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-20" id="toc-try-it-yourself-20" class="nav-link" data-scroll-target="#try-it-yourself-20">Try It Yourself</a></li>
  <li><a href="#test-cases-20" id="toc-test-cases-20" class="nav-link" data-scroll-target="#test-cases-20">Test Cases</a></li>
  <li><a href="#complexity-20" id="toc-complexity-20" class="nav-link" data-scroll-target="#complexity-20">Complexity</a></li>
  <li><a href="#stable-counting-sort" id="toc-stable-counting-sort" class="nav-link" data-scroll-target="#stable-counting-sort">122 Stable Counting Sort</a></li>
  <li><a href="#what-problem-are-we-solving-21" id="toc-what-problem-are-we-solving-21" class="nav-link" data-scroll-target="#what-problem-are-we-solving-21">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-21" id="toc-how-does-it-work-plain-language-21" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-21">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-20" id="toc-tiny-code-easy-versions-20" class="nav-link" data-scroll-target="#tiny-code-easy-versions-20">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-21" id="toc-why-it-matters-21" class="nav-link" data-scroll-target="#why-it-matters-21">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-21" id="toc-a-gentle-proof-why-it-works-21" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-21">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-21" id="toc-try-it-yourself-21" class="nav-link" data-scroll-target="#try-it-yourself-21">Try It Yourself</a></li>
  <li><a href="#test-cases-21" id="toc-test-cases-21" class="nav-link" data-scroll-target="#test-cases-21">Test Cases</a></li>
  <li><a href="#complexity-21" id="toc-complexity-21" class="nav-link" data-scroll-target="#complexity-21">Complexity</a></li>
  <li><a href="#radix-sort-lsd" id="toc-radix-sort-lsd" class="nav-link" data-scroll-target="#radix-sort-lsd">123 Radix Sort (LSD)</a></li>
  <li><a href="#what-problem-are-we-solving-22" id="toc-what-problem-are-we-solving-22" class="nav-link" data-scroll-target="#what-problem-are-we-solving-22">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-22" id="toc-how-does-it-work-plain-language-22" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-22">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-21" id="toc-tiny-code-easy-versions-21" class="nav-link" data-scroll-target="#tiny-code-easy-versions-21">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-22" id="toc-why-it-matters-22" class="nav-link" data-scroll-target="#why-it-matters-22">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-22" id="toc-a-gentle-proof-why-it-works-22" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-22">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-22" id="toc-try-it-yourself-22" class="nav-link" data-scroll-target="#try-it-yourself-22">Try It Yourself</a></li>
  <li><a href="#test-cases-22" id="toc-test-cases-22" class="nav-link" data-scroll-target="#test-cases-22">Test Cases</a></li>
  <li><a href="#complexity-22" id="toc-complexity-22" class="nav-link" data-scroll-target="#complexity-22">Complexity</a></li>
  <li><a href="#radix-sort-msd" id="toc-radix-sort-msd" class="nav-link" data-scroll-target="#radix-sort-msd">124 Radix Sort (MSD)</a></li>
  <li><a href="#what-problem-are-we-solving-23" id="toc-what-problem-are-we-solving-23" class="nav-link" data-scroll-target="#what-problem-are-we-solving-23">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-23" id="toc-how-does-it-work-plain-language-23" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-23">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-22" id="toc-tiny-code-easy-versions-22" class="nav-link" data-scroll-target="#tiny-code-easy-versions-22">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-23" id="toc-why-it-matters-23" class="nav-link" data-scroll-target="#why-it-matters-23">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-23" id="toc-a-gentle-proof-why-it-works-23" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-23">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-23" id="toc-try-it-yourself-23" class="nav-link" data-scroll-target="#try-it-yourself-23">Try It Yourself</a></li>
  <li><a href="#test-cases-23" id="toc-test-cases-23" class="nav-link" data-scroll-target="#test-cases-23">Test Cases</a></li>
  <li><a href="#complexity-23" id="toc-complexity-23" class="nav-link" data-scroll-target="#complexity-23">Complexity</a></li>
  <li><a href="#bucket-sort" id="toc-bucket-sort" class="nav-link" data-scroll-target="#bucket-sort">125 Bucket Sort</a></li>
  <li><a href="#what-problem-are-we-solving-24" id="toc-what-problem-are-we-solving-24" class="nav-link" data-scroll-target="#what-problem-are-we-solving-24">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-24" id="toc-how-does-it-work-plain-language-24" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-24">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-23" id="toc-tiny-code-easy-versions-23" class="nav-link" data-scroll-target="#tiny-code-easy-versions-23">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-24" id="toc-why-it-matters-24" class="nav-link" data-scroll-target="#why-it-matters-24">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-24" id="toc-a-gentle-proof-why-it-works-24" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-24">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-24" id="toc-try-it-yourself-24" class="nav-link" data-scroll-target="#try-it-yourself-24">Try It Yourself</a></li>
  <li><a href="#test-cases-24" id="toc-test-cases-24" class="nav-link" data-scroll-target="#test-cases-24">Test Cases</a></li>
  <li><a href="#complexity-24" id="toc-complexity-24" class="nav-link" data-scroll-target="#complexity-24">Complexity</a></li>
  <li><a href="#pigeonhole-sort" id="toc-pigeonhole-sort" class="nav-link" data-scroll-target="#pigeonhole-sort">126 Pigeonhole Sort</a></li>
  <li><a href="#what-problem-are-we-solving-25" id="toc-what-problem-are-we-solving-25" class="nav-link" data-scroll-target="#what-problem-are-we-solving-25">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-25" id="toc-how-does-it-work-plain-language-25" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-25">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-24" id="toc-tiny-code-easy-versions-24" class="nav-link" data-scroll-target="#tiny-code-easy-versions-24">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-25" id="toc-why-it-matters-25" class="nav-link" data-scroll-target="#why-it-matters-25">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-25" id="toc-a-gentle-proof-why-it-works-25" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-25">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-25" id="toc-try-it-yourself-25" class="nav-link" data-scroll-target="#try-it-yourself-25">Try It Yourself</a></li>
  <li><a href="#test-cases-25" id="toc-test-cases-25" class="nav-link" data-scroll-target="#test-cases-25">Test Cases</a></li>
  <li><a href="#complexity-25" id="toc-complexity-25" class="nav-link" data-scroll-target="#complexity-25">Complexity</a></li>
  <li><a href="#flash-sort" id="toc-flash-sort" class="nav-link" data-scroll-target="#flash-sort">127 Flash Sort</a></li>
  <li><a href="#what-problem-are-we-solving-26" id="toc-what-problem-are-we-solving-26" class="nav-link" data-scroll-target="#what-problem-are-we-solving-26">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-26" id="toc-how-does-it-work-plain-language-26" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-26">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-25" id="toc-tiny-code-easy-versions-25" class="nav-link" data-scroll-target="#tiny-code-easy-versions-25">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-26" id="toc-why-it-matters-26" class="nav-link" data-scroll-target="#why-it-matters-26">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-26" id="toc-a-gentle-proof-why-it-works-26" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-26">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-26" id="toc-try-it-yourself-26" class="nav-link" data-scroll-target="#try-it-yourself-26">Try It Yourself</a></li>
  <li><a href="#test-cases-26" id="toc-test-cases-26" class="nav-link" data-scroll-target="#test-cases-26">Test Cases</a></li>
  <li><a href="#complexity-26" id="toc-complexity-26" class="nav-link" data-scroll-target="#complexity-26">Complexity</a></li>
  <li><a href="#postman-sort" id="toc-postman-sort" class="nav-link" data-scroll-target="#postman-sort">128 Postman Sort</a></li>
  <li><a href="#what-problem-are-we-solving-27" id="toc-what-problem-are-we-solving-27" class="nav-link" data-scroll-target="#what-problem-are-we-solving-27">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-27" id="toc-how-does-it-work-plain-language-27" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-27">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-26" id="toc-tiny-code-easy-versions-26" class="nav-link" data-scroll-target="#tiny-code-easy-versions-26">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-27" id="toc-why-it-matters-27" class="nav-link" data-scroll-target="#why-it-matters-27">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-27" id="toc-a-gentle-proof-why-it-works-27" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-27">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-27" id="toc-try-it-yourself-27" class="nav-link" data-scroll-target="#try-it-yourself-27">Try It Yourself</a></li>
  <li><a href="#test-cases-27" id="toc-test-cases-27" class="nav-link" data-scroll-target="#test-cases-27">Test Cases</a></li>
  <li><a href="#complexity-27" id="toc-complexity-27" class="nav-link" data-scroll-target="#complexity-27">Complexity</a></li>
  <li><a href="#address-calculation-sort" id="toc-address-calculation-sort" class="nav-link" data-scroll-target="#address-calculation-sort">129 Address Calculation Sort</a></li>
  <li><a href="#what-problem-are-we-solving-28" id="toc-what-problem-are-we-solving-28" class="nav-link" data-scroll-target="#what-problem-are-we-solving-28">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-28" id="toc-how-does-it-work-plain-language-28" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-28">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-27" id="toc-tiny-code-easy-versions-27" class="nav-link" data-scroll-target="#tiny-code-easy-versions-27">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-28" id="toc-why-it-matters-28" class="nav-link" data-scroll-target="#why-it-matters-28">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-28" id="toc-a-gentle-proof-why-it-works-28" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-28">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-28" id="toc-try-it-yourself-28" class="nav-link" data-scroll-target="#try-it-yourself-28">Try It Yourself</a></li>
  <li><a href="#test-cases-28" id="toc-test-cases-28" class="nav-link" data-scroll-target="#test-cases-28">Test Cases</a></li>
  <li><a href="#complexity-28" id="toc-complexity-28" class="nav-link" data-scroll-target="#complexity-28">Complexity</a></li>
  <li><a href="#spread-sort" id="toc-spread-sort" class="nav-link" data-scroll-target="#spread-sort">130 Spread Sort</a></li>
  <li><a href="#what-problem-are-we-solving-29" id="toc-what-problem-are-we-solving-29" class="nav-link" data-scroll-target="#what-problem-are-we-solving-29">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-29" id="toc-how-does-it-work-plain-language-29" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-29">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-28" id="toc-tiny-code-easy-versions-28" class="nav-link" data-scroll-target="#tiny-code-easy-versions-28">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-29" id="toc-why-it-matters-29" class="nav-link" data-scroll-target="#why-it-matters-29">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-29" id="toc-a-gentle-proof-why-it-works-29" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-29">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-29" id="toc-try-it-yourself-29" class="nav-link" data-scroll-target="#try-it-yourself-29">Try It Yourself</a></li>
  <li><a href="#test-cases-29" id="toc-test-cases-29" class="nav-link" data-scroll-target="#test-cases-29">Test Cases</a></li>
  <li><a href="#complexity-29" id="toc-complexity-29" class="nav-link" data-scroll-target="#complexity-29">Complexity</a></li>
  </ul></li>
  <li><a href="#section-14.-hybrid-sorts" id="toc-section-14.-hybrid-sorts" class="nav-link" data-scroll-target="#section-14.-hybrid-sorts">Section 14. Hybrid sorts</a>
  <ul class="collapse">
  <li><a href="#introsort" id="toc-introsort" class="nav-link" data-scroll-target="#introsort">131 IntroSort</a></li>
  <li><a href="#what-problem-are-we-solving-30" id="toc-what-problem-are-we-solving-30" class="nav-link" data-scroll-target="#what-problem-are-we-solving-30">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-30" id="toc-how-does-it-work-plain-language-30" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-30">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-29" id="toc-tiny-code-easy-versions-29" class="nav-link" data-scroll-target="#tiny-code-easy-versions-29">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-30" id="toc-why-it-matters-30" class="nav-link" data-scroll-target="#why-it-matters-30">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-30" id="toc-a-gentle-proof-why-it-works-30" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-30">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-30" id="toc-try-it-yourself-30" class="nav-link" data-scroll-target="#try-it-yourself-30">Try It Yourself</a></li>
  <li><a href="#test-cases-30" id="toc-test-cases-30" class="nav-link" data-scroll-target="#test-cases-30">Test Cases</a></li>
  <li><a href="#complexity-30" id="toc-complexity-30" class="nav-link" data-scroll-target="#complexity-30">Complexity</a></li>
  <li><a href="#timsort" id="toc-timsort" class="nav-link" data-scroll-target="#timsort">132 TimSort</a></li>
  <li><a href="#what-problem-are-we-solving-31" id="toc-what-problem-are-we-solving-31" class="nav-link" data-scroll-target="#what-problem-are-we-solving-31">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-31" id="toc-how-does-it-work-plain-language-31" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-31">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-30" id="toc-tiny-code-easy-versions-30" class="nav-link" data-scroll-target="#tiny-code-easy-versions-30">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-31" id="toc-why-it-matters-31" class="nav-link" data-scroll-target="#why-it-matters-31">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-31" id="toc-a-gentle-proof-why-it-works-31" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-31">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-31" id="toc-try-it-yourself-31" class="nav-link" data-scroll-target="#try-it-yourself-31">Try It Yourself</a></li>
  <li><a href="#test-cases-31" id="toc-test-cases-31" class="nav-link" data-scroll-target="#test-cases-31">Test Cases</a></li>
  <li><a href="#complexity-31" id="toc-complexity-31" class="nav-link" data-scroll-target="#complexity-31">Complexity</a></li>
  <li><a href="#dual-pivot-quicksort" id="toc-dual-pivot-quicksort" class="nav-link" data-scroll-target="#dual-pivot-quicksort">133 Dual-Pivot QuickSort</a></li>
  <li><a href="#what-problem-are-we-solving-32" id="toc-what-problem-are-we-solving-32" class="nav-link" data-scroll-target="#what-problem-are-we-solving-32">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-32" id="toc-how-does-it-work-plain-language-32" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-32">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-31" id="toc-tiny-code-easy-versions-31" class="nav-link" data-scroll-target="#tiny-code-easy-versions-31">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-32" id="toc-why-it-matters-32" class="nav-link" data-scroll-target="#why-it-matters-32">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-32" id="toc-a-gentle-proof-why-it-works-32" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-32">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-32" id="toc-try-it-yourself-32" class="nav-link" data-scroll-target="#try-it-yourself-32">Try It Yourself</a></li>
  <li><a href="#test-cases-32" id="toc-test-cases-32" class="nav-link" data-scroll-target="#test-cases-32">Test Cases</a></li>
  <li><a href="#complexity-32" id="toc-complexity-32" class="nav-link" data-scroll-target="#complexity-32">Complexity</a></li>
  <li><a href="#smoothsort" id="toc-smoothsort" class="nav-link" data-scroll-target="#smoothsort">134 SmoothSort</a></li>
  <li><a href="#what-problem-are-we-solving-33" id="toc-what-problem-are-we-solving-33" class="nav-link" data-scroll-target="#what-problem-are-we-solving-33">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-33" id="toc-how-does-it-work-plain-language-33" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-33">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-32" id="toc-tiny-code-easy-versions-32" class="nav-link" data-scroll-target="#tiny-code-easy-versions-32">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-33" id="toc-why-it-matters-33" class="nav-link" data-scroll-target="#why-it-matters-33">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-33" id="toc-a-gentle-proof-why-it-works-33" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-33">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-33" id="toc-try-it-yourself-33" class="nav-link" data-scroll-target="#try-it-yourself-33">Try It Yourself</a></li>
  <li><a href="#test-cases-33" id="toc-test-cases-33" class="nav-link" data-scroll-target="#test-cases-33">Test Cases</a></li>
  <li><a href="#complexity-33" id="toc-complexity-33" class="nav-link" data-scroll-target="#complexity-33">Complexity</a></li>
  <li><a href="#block-merge-sort" id="toc-block-merge-sort" class="nav-link" data-scroll-target="#block-merge-sort">135 Block Merge Sort</a></li>
  <li><a href="#what-problem-are-we-solving-34" id="toc-what-problem-are-we-solving-34" class="nav-link" data-scroll-target="#what-problem-are-we-solving-34">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-34" id="toc-how-does-it-work-plain-language-34" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-34">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-33" id="toc-tiny-code-easy-versions-33" class="nav-link" data-scroll-target="#tiny-code-easy-versions-33">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-34" id="toc-why-it-matters-34" class="nav-link" data-scroll-target="#why-it-matters-34">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-34" id="toc-a-gentle-proof-why-it-works-34" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-34">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-34" id="toc-try-it-yourself-34" class="nav-link" data-scroll-target="#try-it-yourself-34">Try It Yourself</a></li>
  <li><a href="#test-cases-34" id="toc-test-cases-34" class="nav-link" data-scroll-target="#test-cases-34">Test Cases</a></li>
  <li><a href="#complexity-34" id="toc-complexity-34" class="nav-link" data-scroll-target="#complexity-34">Complexity</a></li>
  <li><a href="#adaptive-merge-sort" id="toc-adaptive-merge-sort" class="nav-link" data-scroll-target="#adaptive-merge-sort">136 Adaptive Merge Sort</a></li>
  <li><a href="#what-problem-are-we-solving-35" id="toc-what-problem-are-we-solving-35" class="nav-link" data-scroll-target="#what-problem-are-we-solving-35">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-35" id="toc-how-does-it-work-plain-language-35" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-35">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-34" id="toc-tiny-code-easy-versions-34" class="nav-link" data-scroll-target="#tiny-code-easy-versions-34">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-35" id="toc-why-it-matters-35" class="nav-link" data-scroll-target="#why-it-matters-35">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-35" id="toc-a-gentle-proof-why-it-works-35" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-35">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-35" id="toc-try-it-yourself-35" class="nav-link" data-scroll-target="#try-it-yourself-35">Try It Yourself</a></li>
  <li><a href="#test-cases-35" id="toc-test-cases-35" class="nav-link" data-scroll-target="#test-cases-35">Test Cases</a></li>
  <li><a href="#complexity-35" id="toc-complexity-35" class="nav-link" data-scroll-target="#complexity-35">Complexity</a></li>
  <li><a href="#pdqsort-pattern-defeating-quicksort" id="toc-pdqsort-pattern-defeating-quicksort" class="nav-link" data-scroll-target="#pdqsort-pattern-defeating-quicksort">137 PDQSort (Pattern-Defeating QuickSort)</a></li>
  <li><a href="#what-problem-are-we-solving-36" id="toc-what-problem-are-we-solving-36" class="nav-link" data-scroll-target="#what-problem-are-we-solving-36">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-36" id="toc-how-does-it-work-plain-language-36" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-36">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-35" id="toc-tiny-code-easy-versions-35" class="nav-link" data-scroll-target="#tiny-code-easy-versions-35">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-36" id="toc-why-it-matters-36" class="nav-link" data-scroll-target="#why-it-matters-36">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-36" id="toc-a-gentle-proof-why-it-works-36" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-36">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-36" id="toc-try-it-yourself-36" class="nav-link" data-scroll-target="#try-it-yourself-36">Try It Yourself</a></li>
  <li><a href="#test-cases-36" id="toc-test-cases-36" class="nav-link" data-scroll-target="#test-cases-36">Test Cases</a></li>
  <li><a href="#complexity-36" id="toc-complexity-36" class="nav-link" data-scroll-target="#complexity-36">Complexity</a></li>
  <li><a href="#wikisort" id="toc-wikisort" class="nav-link" data-scroll-target="#wikisort">138 WikiSort</a></li>
  <li><a href="#what-problem-are-we-solving-37" id="toc-what-problem-are-we-solving-37" class="nav-link" data-scroll-target="#what-problem-are-we-solving-37">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-37" id="toc-how-does-it-work-plain-language-37" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-37">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-36" id="toc-tiny-code-easy-versions-36" class="nav-link" data-scroll-target="#tiny-code-easy-versions-36">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-37" id="toc-why-it-matters-37" class="nav-link" data-scroll-target="#why-it-matters-37">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-37" id="toc-a-gentle-proof-why-it-works-37" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-37">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-37" id="toc-try-it-yourself-37" class="nav-link" data-scroll-target="#try-it-yourself-37">Try It Yourself</a></li>
  <li><a href="#test-cases-37" id="toc-test-cases-37" class="nav-link" data-scroll-target="#test-cases-37">Test Cases</a></li>
  <li><a href="#complexity-37" id="toc-complexity-37" class="nav-link" data-scroll-target="#complexity-37">Complexity</a></li>
  <li><a href="#grailsort" id="toc-grailsort" class="nav-link" data-scroll-target="#grailsort">139 GrailSort</a></li>
  <li><a href="#what-problem-are-we-solving-38" id="toc-what-problem-are-we-solving-38" class="nav-link" data-scroll-target="#what-problem-are-we-solving-38">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-38" id="toc-how-does-it-work-plain-language-38" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-38">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-37" id="toc-tiny-code-easy-versions-37" class="nav-link" data-scroll-target="#tiny-code-easy-versions-37">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-38" id="toc-why-it-matters-38" class="nav-link" data-scroll-target="#why-it-matters-38">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-38" id="toc-a-gentle-proof-why-it-works-38" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-38">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-38" id="toc-try-it-yourself-38" class="nav-link" data-scroll-target="#try-it-yourself-38">Try It Yourself</a></li>
  <li><a href="#test-cases-38" id="toc-test-cases-38" class="nav-link" data-scroll-target="#test-cases-38">Test Cases</a></li>
  <li><a href="#complexity-38" id="toc-complexity-38" class="nav-link" data-scroll-target="#complexity-38">Complexity</a></li>
  <li><a href="#adaptive-hybrid-sort" id="toc-adaptive-hybrid-sort" class="nav-link" data-scroll-target="#adaptive-hybrid-sort">140 Adaptive Hybrid Sort</a></li>
  <li><a href="#what-problem-are-we-solving-39" id="toc-what-problem-are-we-solving-39" class="nav-link" data-scroll-target="#what-problem-are-we-solving-39">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-39" id="toc-how-does-it-work-plain-language-39" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-39">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-38" id="toc-tiny-code-easy-versions-38" class="nav-link" data-scroll-target="#tiny-code-easy-versions-38">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-39" id="toc-why-it-matters-39" class="nav-link" data-scroll-target="#why-it-matters-39">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-39" id="toc-a-gentle-proof-why-it-works-39" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-39">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-39" id="toc-try-it-yourself-39" class="nav-link" data-scroll-target="#try-it-yourself-39">Try It Yourself</a></li>
  <li><a href="#test-cases-39" id="toc-test-cases-39" class="nav-link" data-scroll-target="#test-cases-39">Test Cases</a></li>
  <li><a href="#complexity-39" id="toc-complexity-39" class="nav-link" data-scroll-target="#complexity-39">Complexity</a></li>
  </ul></li>
  <li><a href="#section-15.-special-sorts" id="toc-section-15.-special-sorts" class="nav-link" data-scroll-target="#section-15.-special-sorts">Section 15. Special sorts</a>
  <ul class="collapse">
  <li><a href="#cycle-sort" id="toc-cycle-sort" class="nav-link" data-scroll-target="#cycle-sort">141 Cycle Sort</a></li>
  <li><a href="#what-problem-are-we-solving-40" id="toc-what-problem-are-we-solving-40" class="nav-link" data-scroll-target="#what-problem-are-we-solving-40">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-40" id="toc-how-does-it-work-plain-language-40" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-40">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-39" id="toc-tiny-code-easy-versions-39" class="nav-link" data-scroll-target="#tiny-code-easy-versions-39">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-40" id="toc-why-it-matters-40" class="nav-link" data-scroll-target="#why-it-matters-40">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-40" id="toc-a-gentle-proof-why-it-works-40" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-40">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-40" id="toc-try-it-yourself-40" class="nav-link" data-scroll-target="#try-it-yourself-40">Try It Yourself</a></li>
  <li><a href="#test-cases-40" id="toc-test-cases-40" class="nav-link" data-scroll-target="#test-cases-40">Test Cases</a></li>
  <li><a href="#complexity-40" id="toc-complexity-40" class="nav-link" data-scroll-target="#complexity-40">Complexity</a></li>
  <li><a href="#comb-sort" id="toc-comb-sort" class="nav-link" data-scroll-target="#comb-sort">142 Comb Sort</a></li>
  <li><a href="#what-problem-are-we-solving-41" id="toc-what-problem-are-we-solving-41" class="nav-link" data-scroll-target="#what-problem-are-we-solving-41">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-41" id="toc-how-does-it-work-plain-language-41" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-41">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-40" id="toc-tiny-code-easy-versions-40" class="nav-link" data-scroll-target="#tiny-code-easy-versions-40">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-41" id="toc-why-it-matters-41" class="nav-link" data-scroll-target="#why-it-matters-41">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-41" id="toc-a-gentle-proof-why-it-works-41" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-41">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-41" id="toc-try-it-yourself-41" class="nav-link" data-scroll-target="#try-it-yourself-41">Try It Yourself</a></li>
  <li><a href="#test-cases-41" id="toc-test-cases-41" class="nav-link" data-scroll-target="#test-cases-41">Test Cases</a></li>
  <li><a href="#complexity-41" id="toc-complexity-41" class="nav-link" data-scroll-target="#complexity-41">Complexity</a></li>
  <li><a href="#gnome-sort-1" id="toc-gnome-sort-1" class="nav-link" data-scroll-target="#gnome-sort-1">143 Gnome Sort</a></li>
  <li><a href="#what-problem-are-we-solving-42" id="toc-what-problem-are-we-solving-42" class="nav-link" data-scroll-target="#what-problem-are-we-solving-42">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-42" id="toc-how-does-it-work-plain-language-42" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-42">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-41" id="toc-tiny-code-easy-versions-41" class="nav-link" data-scroll-target="#tiny-code-easy-versions-41">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-42" id="toc-why-it-matters-42" class="nav-link" data-scroll-target="#why-it-matters-42">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-42" id="toc-a-gentle-proof-why-it-works-42" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-42">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-42" id="toc-try-it-yourself-42" class="nav-link" data-scroll-target="#try-it-yourself-42">Try It Yourself</a></li>
  <li><a href="#test-cases-42" id="toc-test-cases-42" class="nav-link" data-scroll-target="#test-cases-42">Test Cases</a></li>
  <li><a href="#complexity-42" id="toc-complexity-42" class="nav-link" data-scroll-target="#complexity-42">Complexity</a></li>
  <li><a href="#cocktail-sort" id="toc-cocktail-sort" class="nav-link" data-scroll-target="#cocktail-sort">144 Cocktail Sort</a></li>
  <li><a href="#what-problem-are-we-solving-43" id="toc-what-problem-are-we-solving-43" class="nav-link" data-scroll-target="#what-problem-are-we-solving-43">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-43" id="toc-how-does-it-work-plain-language-43" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-43">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-42" id="toc-tiny-code-easy-versions-42" class="nav-link" data-scroll-target="#tiny-code-easy-versions-42">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-43" id="toc-why-it-matters-43" class="nav-link" data-scroll-target="#why-it-matters-43">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-43" id="toc-a-gentle-proof-why-it-works-43" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-43">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-43" id="toc-try-it-yourself-43" class="nav-link" data-scroll-target="#try-it-yourself-43">Try It Yourself</a></li>
  <li><a href="#test-cases-43" id="toc-test-cases-43" class="nav-link" data-scroll-target="#test-cases-43">Test Cases</a></li>
  <li><a href="#complexity-43" id="toc-complexity-43" class="nav-link" data-scroll-target="#complexity-43">Complexity</a></li>
  <li><a href="#pancake-sort" id="toc-pancake-sort" class="nav-link" data-scroll-target="#pancake-sort">145 Pancake Sort</a></li>
  <li><a href="#what-problem-are-we-solving-44" id="toc-what-problem-are-we-solving-44" class="nav-link" data-scroll-target="#what-problem-are-we-solving-44">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-44" id="toc-how-does-it-work-plain-language-44" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-44">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-43" id="toc-tiny-code-easy-versions-43" class="nav-link" data-scroll-target="#tiny-code-easy-versions-43">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-44" id="toc-why-it-matters-44" class="nav-link" data-scroll-target="#why-it-matters-44">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-44" id="toc-a-gentle-proof-why-it-works-44" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-44">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-44" id="toc-try-it-yourself-44" class="nav-link" data-scroll-target="#try-it-yourself-44">Try It Yourself</a></li>
  <li><a href="#test-cases-44" id="toc-test-cases-44" class="nav-link" data-scroll-target="#test-cases-44">Test Cases</a></li>
  <li><a href="#complexity-44" id="toc-complexity-44" class="nav-link" data-scroll-target="#complexity-44">Complexity</a></li>
  <li><a href="#bitonic-sort" id="toc-bitonic-sort" class="nav-link" data-scroll-target="#bitonic-sort">146 Bitonic Sort</a></li>
  <li><a href="#what-problem-are-we-solving-45" id="toc-what-problem-are-we-solving-45" class="nav-link" data-scroll-target="#what-problem-are-we-solving-45">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-45" id="toc-how-does-it-work-plain-language-45" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-45">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-44" id="toc-tiny-code-easy-versions-44" class="nav-link" data-scroll-target="#tiny-code-easy-versions-44">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-45" id="toc-why-it-matters-45" class="nav-link" data-scroll-target="#why-it-matters-45">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-45" id="toc-a-gentle-proof-why-it-works-45" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-45">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-45" id="toc-try-it-yourself-45" class="nav-link" data-scroll-target="#try-it-yourself-45">Try It Yourself</a></li>
  <li><a href="#test-cases-45" id="toc-test-cases-45" class="nav-link" data-scroll-target="#test-cases-45">Test Cases</a></li>
  <li><a href="#complexity-45" id="toc-complexity-45" class="nav-link" data-scroll-target="#complexity-45">Complexity</a></li>
  <li><a href="#odd-even-merge-sort" id="toc-odd-even-merge-sort" class="nav-link" data-scroll-target="#odd-even-merge-sort">147 Odd-Even Merge Sort</a></li>
  <li><a href="#what-problem-are-we-solving-46" id="toc-what-problem-are-we-solving-46" class="nav-link" data-scroll-target="#what-problem-are-we-solving-46">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-46" id="toc-how-does-it-work-plain-language-46" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-46">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-45" id="toc-tiny-code-easy-versions-45" class="nav-link" data-scroll-target="#tiny-code-easy-versions-45">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-46" id="toc-why-it-matters-46" class="nav-link" data-scroll-target="#why-it-matters-46">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-46" id="toc-a-gentle-proof-why-it-works-46" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-46">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-46" id="toc-try-it-yourself-46" class="nav-link" data-scroll-target="#try-it-yourself-46">Try It Yourself</a></li>
  <li><a href="#test-cases-46" id="toc-test-cases-46" class="nav-link" data-scroll-target="#test-cases-46">Test Cases</a></li>
  <li><a href="#complexity-46" id="toc-complexity-46" class="nav-link" data-scroll-target="#complexity-46">Complexity</a></li>
  <li><a href="#sleep-sort" id="toc-sleep-sort" class="nav-link" data-scroll-target="#sleep-sort">148 Sleep Sort</a></li>
  <li><a href="#what-problem-are-we-solving-47" id="toc-what-problem-are-we-solving-47" class="nav-link" data-scroll-target="#what-problem-are-we-solving-47">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-47" id="toc-how-does-it-work-plain-language-47" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-47">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-46" id="toc-tiny-code-easy-versions-46" class="nav-link" data-scroll-target="#tiny-code-easy-versions-46">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-47" id="toc-why-it-matters-47" class="nav-link" data-scroll-target="#why-it-matters-47">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-47" id="toc-a-gentle-proof-why-it-works-47" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-47">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-47" id="toc-try-it-yourself-47" class="nav-link" data-scroll-target="#try-it-yourself-47">Try It Yourself</a></li>
  <li><a href="#test-cases-47" id="toc-test-cases-47" class="nav-link" data-scroll-target="#test-cases-47">Test Cases</a></li>
  <li><a href="#complexity-47" id="toc-complexity-47" class="nav-link" data-scroll-target="#complexity-47">Complexity</a></li>
  <li><a href="#bead-sort" id="toc-bead-sort" class="nav-link" data-scroll-target="#bead-sort">149 Bead Sort</a></li>
  <li><a href="#what-problem-are-we-solving-48" id="toc-what-problem-are-we-solving-48" class="nav-link" data-scroll-target="#what-problem-are-we-solving-48">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-48" id="toc-how-does-it-work-plain-language-48" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-48">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-47" id="toc-tiny-code-easy-versions-47" class="nav-link" data-scroll-target="#tiny-code-easy-versions-47">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-48" id="toc-why-it-matters-48" class="nav-link" data-scroll-target="#why-it-matters-48">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-48" id="toc-a-gentle-proof-why-it-works-48" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-48">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-48" id="toc-try-it-yourself-48" class="nav-link" data-scroll-target="#try-it-yourself-48">Try It Yourself</a></li>
  <li><a href="#test-cases-48" id="toc-test-cases-48" class="nav-link" data-scroll-target="#test-cases-48">Test Cases</a></li>
  <li><a href="#complexity-48" id="toc-complexity-48" class="nav-link" data-scroll-target="#complexity-48">Complexity</a></li>
  <li><a href="#bogo-sort" id="toc-bogo-sort" class="nav-link" data-scroll-target="#bogo-sort">150 Bogo Sort</a></li>
  <li><a href="#what-problem-are-we-solving-49" id="toc-what-problem-are-we-solving-49" class="nav-link" data-scroll-target="#what-problem-are-we-solving-49">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-49" id="toc-how-does-it-work-plain-language-49" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-49">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-48" id="toc-tiny-code-easy-versions-48" class="nav-link" data-scroll-target="#tiny-code-easy-versions-48">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-49" id="toc-why-it-matters-49" class="nav-link" data-scroll-target="#why-it-matters-49">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-49" id="toc-a-gentle-proof-why-it-works-49" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-49">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-49" id="toc-try-it-yourself-49" class="nav-link" data-scroll-target="#try-it-yourself-49">Try It Yourself</a></li>
  <li><a href="#test-cases-49" id="toc-test-cases-49" class="nav-link" data-scroll-target="#test-cases-49">Test Cases</a></li>
  <li><a href="#complexity-49" id="toc-complexity-49" class="nav-link" data-scroll-target="#complexity-49">Complexity</a></li>
  </ul></li>
  <li><a href="#section-16.-linear-and-binary-search" id="toc-section-16.-linear-and-binary-search" class="nav-link" data-scroll-target="#section-16.-linear-and-binary-search">Section 16. Linear and Binary Search</a>
  <ul class="collapse">
  <li><a href="#linear-search" id="toc-linear-search" class="nav-link" data-scroll-target="#linear-search">151 Linear Search</a></li>
  <li><a href="#what-problem-are-we-solving-50" id="toc-what-problem-are-we-solving-50" class="nav-link" data-scroll-target="#what-problem-are-we-solving-50">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-50" id="toc-how-does-it-work-plain-language-50" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-50">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-49" id="toc-tiny-code-easy-versions-49" class="nav-link" data-scroll-target="#tiny-code-easy-versions-49">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-50" id="toc-why-it-matters-50" class="nav-link" data-scroll-target="#why-it-matters-50">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-50" id="toc-a-gentle-proof-why-it-works-50" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-50">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-50" id="toc-try-it-yourself-50" class="nav-link" data-scroll-target="#try-it-yourself-50">Try It Yourself</a></li>
  <li><a href="#test-cases-50" id="toc-test-cases-50" class="nav-link" data-scroll-target="#test-cases-50">Test Cases</a></li>
  <li><a href="#complexity-50" id="toc-complexity-50" class="nav-link" data-scroll-target="#complexity-50">Complexity</a></li>
  <li><a href="#linear-search-sentinel" id="toc-linear-search-sentinel" class="nav-link" data-scroll-target="#linear-search-sentinel">152 Linear Search (Sentinel)</a></li>
  <li><a href="#what-problem-are-we-solving-51" id="toc-what-problem-are-we-solving-51" class="nav-link" data-scroll-target="#what-problem-are-we-solving-51">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-51" id="toc-how-does-it-work-plain-language-51" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-51">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-50" id="toc-tiny-code-easy-versions-50" class="nav-link" data-scroll-target="#tiny-code-easy-versions-50">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-51" id="toc-why-it-matters-51" class="nav-link" data-scroll-target="#why-it-matters-51">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-51" id="toc-a-gentle-proof-why-it-works-51" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-51">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-51" id="toc-try-it-yourself-51" class="nav-link" data-scroll-target="#try-it-yourself-51">Try It Yourself</a></li>
  <li><a href="#test-cases-51" id="toc-test-cases-51" class="nav-link" data-scroll-target="#test-cases-51">Test Cases</a></li>
  <li><a href="#complexity-51" id="toc-complexity-51" class="nav-link" data-scroll-target="#complexity-51">Complexity</a></li>
  <li><a href="#binary-search-iterative" id="toc-binary-search-iterative" class="nav-link" data-scroll-target="#binary-search-iterative">153 Binary Search (Iterative)</a></li>
  <li><a href="#what-problem-are-we-solving-52" id="toc-what-problem-are-we-solving-52" class="nav-link" data-scroll-target="#what-problem-are-we-solving-52">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-52" id="toc-how-does-it-work-plain-language-52" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-52">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-51" id="toc-tiny-code-easy-versions-51" class="nav-link" data-scroll-target="#tiny-code-easy-versions-51">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-52" id="toc-why-it-matters-52" class="nav-link" data-scroll-target="#why-it-matters-52">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-52" id="toc-a-gentle-proof-why-it-works-52" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-52">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-52" id="toc-try-it-yourself-52" class="nav-link" data-scroll-target="#try-it-yourself-52">Try It Yourself</a></li>
  <li><a href="#test-cases-52" id="toc-test-cases-52" class="nav-link" data-scroll-target="#test-cases-52">Test Cases</a></li>
  <li><a href="#complexity-52" id="toc-complexity-52" class="nav-link" data-scroll-target="#complexity-52">Complexity</a></li>
  <li><a href="#binary-search-recursive" id="toc-binary-search-recursive" class="nav-link" data-scroll-target="#binary-search-recursive">154 Binary Search (Recursive)</a></li>
  <li><a href="#what-problem-are-we-solving-53" id="toc-what-problem-are-we-solving-53" class="nav-link" data-scroll-target="#what-problem-are-we-solving-53">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-53" id="toc-how-does-it-work-plain-language-53" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-53">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-52" id="toc-tiny-code-easy-versions-52" class="nav-link" data-scroll-target="#tiny-code-easy-versions-52">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-53" id="toc-why-it-matters-53" class="nav-link" data-scroll-target="#why-it-matters-53">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-53" id="toc-a-gentle-proof-why-it-works-53" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-53">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-53" id="toc-try-it-yourself-53" class="nav-link" data-scroll-target="#try-it-yourself-53">Try It Yourself</a></li>
  <li><a href="#test-cases-53" id="toc-test-cases-53" class="nav-link" data-scroll-target="#test-cases-53">Test Cases</a></li>
  <li><a href="#complexity-53" id="toc-complexity-53" class="nav-link" data-scroll-target="#complexity-53">Complexity</a></li>
  <li><a href="#binary-search-lower-bound" id="toc-binary-search-lower-bound" class="nav-link" data-scroll-target="#binary-search-lower-bound">155 Binary Search (Lower Bound)</a></li>
  <li><a href="#what-problem-are-we-solving-54" id="toc-what-problem-are-we-solving-54" class="nav-link" data-scroll-target="#what-problem-are-we-solving-54">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-54" id="toc-how-does-it-work-plain-language-54" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-54">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-53" id="toc-tiny-code-easy-versions-53" class="nav-link" data-scroll-target="#tiny-code-easy-versions-53">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-54" id="toc-why-it-matters-54" class="nav-link" data-scroll-target="#why-it-matters-54">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-54" id="toc-a-gentle-proof-why-it-works-54" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-54">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-54" id="toc-try-it-yourself-54" class="nav-link" data-scroll-target="#try-it-yourself-54">Try It Yourself</a></li>
  <li><a href="#test-cases-54" id="toc-test-cases-54" class="nav-link" data-scroll-target="#test-cases-54">Test Cases</a></li>
  <li><a href="#complexity-54" id="toc-complexity-54" class="nav-link" data-scroll-target="#complexity-54">Complexity</a></li>
  <li><a href="#binary-search-upper-bound" id="toc-binary-search-upper-bound" class="nav-link" data-scroll-target="#binary-search-upper-bound">156 Binary Search (Upper Bound)</a></li>
  <li><a href="#what-problem-are-we-solving-55" id="toc-what-problem-are-we-solving-55" class="nav-link" data-scroll-target="#what-problem-are-we-solving-55">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-55" id="toc-how-does-it-work-plain-language-55" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-55">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-54" id="toc-tiny-code-easy-versions-54" class="nav-link" data-scroll-target="#tiny-code-easy-versions-54">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-55" id="toc-why-it-matters-55" class="nav-link" data-scroll-target="#why-it-matters-55">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-55" id="toc-a-gentle-proof-why-it-works-55" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-55">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-55" id="toc-try-it-yourself-55" class="nav-link" data-scroll-target="#try-it-yourself-55">Try It Yourself</a></li>
  <li><a href="#test-cases-55" id="toc-test-cases-55" class="nav-link" data-scroll-target="#test-cases-55">Test Cases</a></li>
  <li><a href="#complexity-55" id="toc-complexity-55" class="nav-link" data-scroll-target="#complexity-55">Complexity</a></li>
  <li><a href="#exponential-search" id="toc-exponential-search" class="nav-link" data-scroll-target="#exponential-search">157 Exponential Search</a></li>
  <li><a href="#what-problem-are-we-solving-56" id="toc-what-problem-are-we-solving-56" class="nav-link" data-scroll-target="#what-problem-are-we-solving-56">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-56" id="toc-how-does-it-work-plain-language-56" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-56">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-55" id="toc-tiny-code-easy-versions-55" class="nav-link" data-scroll-target="#tiny-code-easy-versions-55">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-56" id="toc-why-it-matters-56" class="nav-link" data-scroll-target="#why-it-matters-56">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-56" id="toc-a-gentle-proof-why-it-works-56" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-56">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-56" id="toc-try-it-yourself-56" class="nav-link" data-scroll-target="#try-it-yourself-56">Try It Yourself</a></li>
  <li><a href="#test-cases-56" id="toc-test-cases-56" class="nav-link" data-scroll-target="#test-cases-56">Test Cases</a></li>
  <li><a href="#complexity-56" id="toc-complexity-56" class="nav-link" data-scroll-target="#complexity-56">Complexity</a></li>
  <li><a href="#jump-search" id="toc-jump-search" class="nav-link" data-scroll-target="#jump-search">158 Jump Search</a></li>
  <li><a href="#what-problem-are-we-solving-57" id="toc-what-problem-are-we-solving-57" class="nav-link" data-scroll-target="#what-problem-are-we-solving-57">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-57" id="toc-how-does-it-work-plain-language-57" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-57">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-56" id="toc-tiny-code-easy-versions-56" class="nav-link" data-scroll-target="#tiny-code-easy-versions-56">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-57" id="toc-why-it-matters-57" class="nav-link" data-scroll-target="#why-it-matters-57">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-57" id="toc-a-gentle-proof-why-it-works-57" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-57">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-57" id="toc-try-it-yourself-57" class="nav-link" data-scroll-target="#try-it-yourself-57">Try It Yourself</a></li>
  <li><a href="#test-cases-57" id="toc-test-cases-57" class="nav-link" data-scroll-target="#test-cases-57">Test Cases</a></li>
  <li><a href="#complexity-57" id="toc-complexity-57" class="nav-link" data-scroll-target="#complexity-57">Complexity</a></li>
  <li><a href="#fibonacci-search" id="toc-fibonacci-search" class="nav-link" data-scroll-target="#fibonacci-search">159 Fibonacci Search</a></li>
  <li><a href="#what-problem-are-we-solving-58" id="toc-what-problem-are-we-solving-58" class="nav-link" data-scroll-target="#what-problem-are-we-solving-58">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-58" id="toc-how-does-it-work-plain-language-58" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-58">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-57" id="toc-tiny-code-easy-versions-57" class="nav-link" data-scroll-target="#tiny-code-easy-versions-57">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-58" id="toc-why-it-matters-58" class="nav-link" data-scroll-target="#why-it-matters-58">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-58" id="toc-a-gentle-proof-why-it-works-58" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-58">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-58" id="toc-try-it-yourself-58" class="nav-link" data-scroll-target="#try-it-yourself-58">Try It Yourself</a></li>
  <li><a href="#test-cases-58" id="toc-test-cases-58" class="nav-link" data-scroll-target="#test-cases-58">Test Cases</a></li>
  <li><a href="#complexity-58" id="toc-complexity-58" class="nav-link" data-scroll-target="#complexity-58">Complexity</a></li>
  <li><a href="#uniform-binary-search" id="toc-uniform-binary-search" class="nav-link" data-scroll-target="#uniform-binary-search">160 Uniform Binary Search</a></li>
  <li><a href="#what-problem-are-we-solving-59" id="toc-what-problem-are-we-solving-59" class="nav-link" data-scroll-target="#what-problem-are-we-solving-59">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-59" id="toc-how-does-it-work-plain-language-59" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-59">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-58" id="toc-tiny-code-easy-versions-58" class="nav-link" data-scroll-target="#tiny-code-easy-versions-58">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-59" id="toc-why-it-matters-59" class="nav-link" data-scroll-target="#why-it-matters-59">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-59" id="toc-a-gentle-proof-why-it-works-59" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-59">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-59" id="toc-try-it-yourself-59" class="nav-link" data-scroll-target="#try-it-yourself-59">Try It Yourself</a></li>
  <li><a href="#test-cases-59" id="toc-test-cases-59" class="nav-link" data-scroll-target="#test-cases-59">Test Cases</a></li>
  <li><a href="#complexity-59" id="toc-complexity-59" class="nav-link" data-scroll-target="#complexity-59">Complexity</a></li>
  </ul></li>
  <li><a href="#section-17.-interpolation-and-exponential-search" id="toc-section-17.-interpolation-and-exponential-search" class="nav-link" data-scroll-target="#section-17.-interpolation-and-exponential-search">Section 17. Interpolation and exponential search</a>
  <ul class="collapse">
  <li><a href="#interpolation-search" id="toc-interpolation-search" class="nav-link" data-scroll-target="#interpolation-search">161 Interpolation Search</a></li>
  <li><a href="#what-problem-are-we-solving-60" id="toc-what-problem-are-we-solving-60" class="nav-link" data-scroll-target="#what-problem-are-we-solving-60">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-60" id="toc-how-does-it-work-plain-language-60" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-60">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-59" id="toc-tiny-code-easy-versions-59" class="nav-link" data-scroll-target="#tiny-code-easy-versions-59">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-60" id="toc-why-it-matters-60" class="nav-link" data-scroll-target="#why-it-matters-60">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-60" id="toc-a-gentle-proof-why-it-works-60" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-60">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-60" id="toc-try-it-yourself-60" class="nav-link" data-scroll-target="#try-it-yourself-60">Try It Yourself</a></li>
  <li><a href="#test-cases-60" id="toc-test-cases-60" class="nav-link" data-scroll-target="#test-cases-60">Test Cases</a></li>
  <li><a href="#complexity-60" id="toc-complexity-60" class="nav-link" data-scroll-target="#complexity-60">Complexity</a></li>
  <li><a href="#recursive-interpolation-search" id="toc-recursive-interpolation-search" class="nav-link" data-scroll-target="#recursive-interpolation-search">162 Recursive Interpolation Search</a></li>
  <li><a href="#what-problem-are-we-solving-61" id="toc-what-problem-are-we-solving-61" class="nav-link" data-scroll-target="#what-problem-are-we-solving-61">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-61" id="toc-how-does-it-work-plain-language-61" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-61">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-60" id="toc-tiny-code-easy-versions-60" class="nav-link" data-scroll-target="#tiny-code-easy-versions-60">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-61" id="toc-why-it-matters-61" class="nav-link" data-scroll-target="#why-it-matters-61">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-61" id="toc-a-gentle-proof-why-it-works-61" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-61">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-61" id="toc-try-it-yourself-61" class="nav-link" data-scroll-target="#try-it-yourself-61">Try It Yourself</a></li>
  <li><a href="#test-cases-61" id="toc-test-cases-61" class="nav-link" data-scroll-target="#test-cases-61">Test Cases</a></li>
  <li><a href="#complexity-61" id="toc-complexity-61" class="nav-link" data-scroll-target="#complexity-61">Complexity</a></li>
  <li><a href="#exponential-search-1" id="toc-exponential-search-1" class="nav-link" data-scroll-target="#exponential-search-1">163 Exponential Search</a></li>
  <li><a href="#what-problem-are-we-solving-62" id="toc-what-problem-are-we-solving-62" class="nav-link" data-scroll-target="#what-problem-are-we-solving-62">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-62" id="toc-how-does-it-work-plain-language-62" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-62">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-61" id="toc-tiny-code-easy-versions-61" class="nav-link" data-scroll-target="#tiny-code-easy-versions-61">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-62" id="toc-why-it-matters-62" class="nav-link" data-scroll-target="#why-it-matters-62">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-62" id="toc-a-gentle-proof-why-it-works-62" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-62">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-62" id="toc-try-it-yourself-62" class="nav-link" data-scroll-target="#try-it-yourself-62">Try It Yourself</a></li>
  <li><a href="#test-cases-62" id="toc-test-cases-62" class="nav-link" data-scroll-target="#test-cases-62">Test Cases</a></li>
  <li><a href="#complexity-62" id="toc-complexity-62" class="nav-link" data-scroll-target="#complexity-62">Complexity</a></li>
  <li><a href="#doubling-search" id="toc-doubling-search" class="nav-link" data-scroll-target="#doubling-search">164 Doubling Search</a></li>
  <li><a href="#what-problem-are-we-solving-63" id="toc-what-problem-are-we-solving-63" class="nav-link" data-scroll-target="#what-problem-are-we-solving-63">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-63" id="toc-how-does-it-work-plain-language-63" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-63">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-62" id="toc-tiny-code-easy-versions-62" class="nav-link" data-scroll-target="#tiny-code-easy-versions-62">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-63" id="toc-why-it-matters-63" class="nav-link" data-scroll-target="#why-it-matters-63">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-63" id="toc-a-gentle-proof-why-it-works-63" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-63">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-63" id="toc-try-it-yourself-63" class="nav-link" data-scroll-target="#try-it-yourself-63">Try It Yourself</a></li>
  <li><a href="#test-cases-63" id="toc-test-cases-63" class="nav-link" data-scroll-target="#test-cases-63">Test Cases</a></li>
  <li><a href="#complexity-63" id="toc-complexity-63" class="nav-link" data-scroll-target="#complexity-63">Complexity</a></li>
  <li><a href="#galloping-search" id="toc-galloping-search" class="nav-link" data-scroll-target="#galloping-search">165 Galloping Search</a></li>
  <li><a href="#what-problem-are-we-solving-64" id="toc-what-problem-are-we-solving-64" class="nav-link" data-scroll-target="#what-problem-are-we-solving-64">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-64" id="toc-how-does-it-work-plain-language-64" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-64">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-63" id="toc-tiny-code-easy-versions-63" class="nav-link" data-scroll-target="#tiny-code-easy-versions-63">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-64" id="toc-why-it-matters-64" class="nav-link" data-scroll-target="#why-it-matters-64">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-64" id="toc-a-gentle-proof-why-it-works-64" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-64">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-64" id="toc-try-it-yourself-64" class="nav-link" data-scroll-target="#try-it-yourself-64">Try It Yourself</a></li>
  <li><a href="#test-cases-64" id="toc-test-cases-64" class="nav-link" data-scroll-target="#test-cases-64">Test Cases</a></li>
  <li><a href="#complexity-64" id="toc-complexity-64" class="nav-link" data-scroll-target="#complexity-64">Complexity</a></li>
  <li><a href="#unbounded-binary-search" id="toc-unbounded-binary-search" class="nav-link" data-scroll-target="#unbounded-binary-search">166 Unbounded Binary Search</a></li>
  <li><a href="#what-problem-are-we-solving-65" id="toc-what-problem-are-we-solving-65" class="nav-link" data-scroll-target="#what-problem-are-we-solving-65">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-65" id="toc-how-does-it-work-plain-language-65" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-65">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-64" id="toc-tiny-code-easy-versions-64" class="nav-link" data-scroll-target="#tiny-code-easy-versions-64">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-65" id="toc-why-it-matters-65" class="nav-link" data-scroll-target="#why-it-matters-65">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-65" id="toc-a-gentle-proof-why-it-works-65" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-65">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-65" id="toc-try-it-yourself-65" class="nav-link" data-scroll-target="#try-it-yourself-65">Try It Yourself</a></li>
  <li><a href="#test-cases-65" id="toc-test-cases-65" class="nav-link" data-scroll-target="#test-cases-65">Test Cases</a></li>
  <li><a href="#complexity-65" id="toc-complexity-65" class="nav-link" data-scroll-target="#complexity-65">Complexity</a></li>
  <li><a href="#root-finding-bisection" id="toc-root-finding-bisection" class="nav-link" data-scroll-target="#root-finding-bisection">167 Root-Finding Bisection</a></li>
  <li><a href="#what-problem-are-we-solving-66" id="toc-what-problem-are-we-solving-66" class="nav-link" data-scroll-target="#what-problem-are-we-solving-66">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-66" id="toc-how-does-it-work-plain-language-66" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-66">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-65" id="toc-tiny-code-easy-versions-65" class="nav-link" data-scroll-target="#tiny-code-easy-versions-65">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-66" id="toc-why-it-matters-66" class="nav-link" data-scroll-target="#why-it-matters-66">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-66" id="toc-a-gentle-proof-why-it-works-66" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-66">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-66" id="toc-try-it-yourself-66" class="nav-link" data-scroll-target="#try-it-yourself-66">Try It Yourself</a></li>
  <li><a href="#test-cases-66" id="toc-test-cases-66" class="nav-link" data-scroll-target="#test-cases-66">Test Cases</a></li>
  <li><a href="#complexity-66" id="toc-complexity-66" class="nav-link" data-scroll-target="#complexity-66">Complexity</a></li>
  <li><a href="#golden-section-search" id="toc-golden-section-search" class="nav-link" data-scroll-target="#golden-section-search">168 Golden Section Search</a></li>
  <li><a href="#what-problem-are-we-solving-67" id="toc-what-problem-are-we-solving-67" class="nav-link" data-scroll-target="#what-problem-are-we-solving-67">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-67" id="toc-how-does-it-work-plain-language-67" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-67">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-66" id="toc-tiny-code-easy-versions-66" class="nav-link" data-scroll-target="#tiny-code-easy-versions-66">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-67" id="toc-why-it-matters-67" class="nav-link" data-scroll-target="#why-it-matters-67">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-67" id="toc-a-gentle-proof-why-it-works-67" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-67">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-67" id="toc-try-it-yourself-67" class="nav-link" data-scroll-target="#try-it-yourself-67">Try It Yourself</a></li>
  <li><a href="#test-cases-67" id="toc-test-cases-67" class="nav-link" data-scroll-target="#test-cases-67">Test Cases</a></li>
  <li><a href="#complexity-67" id="toc-complexity-67" class="nav-link" data-scroll-target="#complexity-67">Complexity</a></li>
  <li><a href="#fibonacci-search-optimum" id="toc-fibonacci-search-optimum" class="nav-link" data-scroll-target="#fibonacci-search-optimum">169 Fibonacci Search (Optimum)</a></li>
  <li><a href="#what-problem-are-we-solving-68" id="toc-what-problem-are-we-solving-68" class="nav-link" data-scroll-target="#what-problem-are-we-solving-68">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-68" id="toc-how-does-it-work-plain-language-68" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-68">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-67" id="toc-tiny-code-easy-versions-67" class="nav-link" data-scroll-target="#tiny-code-easy-versions-67">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-68" id="toc-why-it-matters-68" class="nav-link" data-scroll-target="#why-it-matters-68">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-68" id="toc-a-gentle-proof-why-it-works-68" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-68">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-68" id="toc-try-it-yourself-68" class="nav-link" data-scroll-target="#try-it-yourself-68">Try It Yourself</a></li>
  <li><a href="#test-cases-68" id="toc-test-cases-68" class="nav-link" data-scroll-target="#test-cases-68">Test Cases</a></li>
  <li><a href="#complexity-68" id="toc-complexity-68" class="nav-link" data-scroll-target="#complexity-68">Complexity</a></li>
  <li><a href="#jump-binary-hybrid" id="toc-jump-binary-hybrid" class="nav-link" data-scroll-target="#jump-binary-hybrid">170 Jump + Binary Hybrid</a></li>
  <li><a href="#what-problem-are-we-solving-69" id="toc-what-problem-are-we-solving-69" class="nav-link" data-scroll-target="#what-problem-are-we-solving-69">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-69" id="toc-how-does-it-work-plain-language-69" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-69">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-68" id="toc-tiny-code-easy-versions-68" class="nav-link" data-scroll-target="#tiny-code-easy-versions-68">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-69" id="toc-why-it-matters-69" class="nav-link" data-scroll-target="#why-it-matters-69">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-69" id="toc-a-gentle-proof-why-it-works-69" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-69">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-69" id="toc-try-it-yourself-69" class="nav-link" data-scroll-target="#try-it-yourself-69">Try It Yourself</a></li>
  <li><a href="#test-cases-69" id="toc-test-cases-69" class="nav-link" data-scroll-target="#test-cases-69">Test Cases</a></li>
  <li><a href="#complexity-69" id="toc-complexity-69" class="nav-link" data-scroll-target="#complexity-69">Complexity</a></li>
  </ul></li>
  <li><a href="#section-18.-selection-algorithms" id="toc-section-18.-selection-algorithms" class="nav-link" data-scroll-target="#section-18.-selection-algorithms">Section 18. Selection Algorithms</a>
  <ul class="collapse">
  <li><a href="#quickselect" id="toc-quickselect" class="nav-link" data-scroll-target="#quickselect">171 Quickselect</a></li>
  <li><a href="#what-problem-are-we-solving-70" id="toc-what-problem-are-we-solving-70" class="nav-link" data-scroll-target="#what-problem-are-we-solving-70">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-70" id="toc-how-does-it-work-plain-language-70" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-70">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-69" id="toc-tiny-code-easy-versions-69" class="nav-link" data-scroll-target="#tiny-code-easy-versions-69">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-70" id="toc-why-it-matters-70" class="nav-link" data-scroll-target="#why-it-matters-70">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-70" id="toc-a-gentle-proof-why-it-works-70" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-70">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-70" id="toc-try-it-yourself-70" class="nav-link" data-scroll-target="#try-it-yourself-70">Try It Yourself</a></li>
  <li><a href="#test-cases-70" id="toc-test-cases-70" class="nav-link" data-scroll-target="#test-cases-70">Test Cases</a></li>
  <li><a href="#complexity-70" id="toc-complexity-70" class="nav-link" data-scroll-target="#complexity-70">Complexity</a></li>
  <li><a href="#median-of-medians" id="toc-median-of-medians" class="nav-link" data-scroll-target="#median-of-medians">172 Median of Medians</a></li>
  <li><a href="#what-problem-are-we-solving-71" id="toc-what-problem-are-we-solving-71" class="nav-link" data-scroll-target="#what-problem-are-we-solving-71">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-71" id="toc-how-does-it-work-plain-language-71" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-71">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-70" id="toc-tiny-code-easy-versions-70" class="nav-link" data-scroll-target="#tiny-code-easy-versions-70">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-71" id="toc-why-it-matters-71" class="nav-link" data-scroll-target="#why-it-matters-71">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-71" id="toc-a-gentle-proof-why-it-works-71" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-71">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-71" id="toc-try-it-yourself-71" class="nav-link" data-scroll-target="#try-it-yourself-71">Try It Yourself</a></li>
  <li><a href="#test-cases-71" id="toc-test-cases-71" class="nav-link" data-scroll-target="#test-cases-71">Test Cases</a></li>
  <li><a href="#complexity-71" id="toc-complexity-71" class="nav-link" data-scroll-target="#complexity-71">Complexity</a></li>
  <li><a href="#randomized-select" id="toc-randomized-select" class="nav-link" data-scroll-target="#randomized-select">173 Randomized Select</a></li>
  <li><a href="#what-problem-are-we-solving-72" id="toc-what-problem-are-we-solving-72" class="nav-link" data-scroll-target="#what-problem-are-we-solving-72">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-72" id="toc-how-does-it-work-plain-language-72" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-72">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-71" id="toc-tiny-code-easy-versions-71" class="nav-link" data-scroll-target="#tiny-code-easy-versions-71">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-72" id="toc-why-it-matters-72" class="nav-link" data-scroll-target="#why-it-matters-72">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-72" id="toc-a-gentle-proof-why-it-works-72" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-72">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-72" id="toc-try-it-yourself-72" class="nav-link" data-scroll-target="#try-it-yourself-72">Try It Yourself</a></li>
  <li><a href="#test-cases-72" id="toc-test-cases-72" class="nav-link" data-scroll-target="#test-cases-72">Test Cases</a></li>
  <li><a href="#complexity-72" id="toc-complexity-72" class="nav-link" data-scroll-target="#complexity-72">Complexity</a></li>
  <li><a href="#binary-search-on-answer" id="toc-binary-search-on-answer" class="nav-link" data-scroll-target="#binary-search-on-answer">174 Binary Search on Answer</a></li>
  <li><a href="#what-problem-are-we-solving-73" id="toc-what-problem-are-we-solving-73" class="nav-link" data-scroll-target="#what-problem-are-we-solving-73">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-73" id="toc-how-does-it-work-plain-language-73" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-73">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-72" id="toc-tiny-code-easy-versions-72" class="nav-link" data-scroll-target="#tiny-code-easy-versions-72">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-73" id="toc-why-it-matters-73" class="nav-link" data-scroll-target="#why-it-matters-73">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-73" id="toc-a-gentle-proof-why-it-works-73" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-73">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-73" id="toc-try-it-yourself-73" class="nav-link" data-scroll-target="#try-it-yourself-73">Try It Yourself</a></li>
  <li><a href="#test-cases-73" id="toc-test-cases-73" class="nav-link" data-scroll-target="#test-cases-73">Test Cases</a></li>
  <li><a href="#complexity-73" id="toc-complexity-73" class="nav-link" data-scroll-target="#complexity-73">Complexity</a></li>
  <li><a href="#order-statistics-tree" id="toc-order-statistics-tree" class="nav-link" data-scroll-target="#order-statistics-tree">175 Order Statistics Tree</a></li>
  <li><a href="#what-problem-are-we-solving-74" id="toc-what-problem-are-we-solving-74" class="nav-link" data-scroll-target="#what-problem-are-we-solving-74">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-74" id="toc-how-does-it-work-plain-language-74" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-74">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-73" id="toc-tiny-code-easy-versions-73" class="nav-link" data-scroll-target="#tiny-code-easy-versions-73">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-74" id="toc-why-it-matters-74" class="nav-link" data-scroll-target="#why-it-matters-74">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-74" id="toc-a-gentle-proof-why-it-works-74" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-74">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-74" id="toc-try-it-yourself-74" class="nav-link" data-scroll-target="#try-it-yourself-74">Try It Yourself</a></li>
  <li><a href="#test-cases-74" id="toc-test-cases-74" class="nav-link" data-scroll-target="#test-cases-74">Test Cases</a></li>
  <li><a href="#complexity-74" id="toc-complexity-74" class="nav-link" data-scroll-target="#complexity-74">Complexity</a></li>
  <li><a href="#tournament-tree-selection" id="toc-tournament-tree-selection" class="nav-link" data-scroll-target="#tournament-tree-selection">176 Tournament Tree Selection</a></li>
  <li><a href="#what-problem-are-we-solving-75" id="toc-what-problem-are-we-solving-75" class="nav-link" data-scroll-target="#what-problem-are-we-solving-75">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-75" id="toc-how-does-it-work-plain-language-75" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-75">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-74" id="toc-tiny-code-easy-versions-74" class="nav-link" data-scroll-target="#tiny-code-easy-versions-74">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-75" id="toc-why-it-matters-75" class="nav-link" data-scroll-target="#why-it-matters-75">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-75" id="toc-a-gentle-proof-why-it-works-75" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-75">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-75" id="toc-try-it-yourself-75" class="nav-link" data-scroll-target="#try-it-yourself-75">Try It Yourself</a></li>
  <li><a href="#test-cases-75" id="toc-test-cases-75" class="nav-link" data-scroll-target="#test-cases-75">Test Cases</a></li>
  <li><a href="#complexity-75" id="toc-complexity-75" class="nav-link" data-scroll-target="#complexity-75">Complexity</a></li>
  <li><a href="#heap-select-min-heap" id="toc-heap-select-min-heap" class="nav-link" data-scroll-target="#heap-select-min-heap">177 Heap Select (Min-Heap)</a></li>
  <li><a href="#what-problem-are-we-solving-76" id="toc-what-problem-are-we-solving-76" class="nav-link" data-scroll-target="#what-problem-are-we-solving-76">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-76" id="toc-how-does-it-work-plain-language-76" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-76">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-75" id="toc-tiny-code-easy-versions-75" class="nav-link" data-scroll-target="#tiny-code-easy-versions-75">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-76" id="toc-why-it-matters-76" class="nav-link" data-scroll-target="#why-it-matters-76">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-76" id="toc-a-gentle-proof-why-it-works-76" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-76">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-76" id="toc-try-it-yourself-76" class="nav-link" data-scroll-target="#try-it-yourself-76">Try It Yourself</a></li>
  <li><a href="#test-cases-76" id="toc-test-cases-76" class="nav-link" data-scroll-target="#test-cases-76">Test Cases</a></li>
  <li><a href="#complexity-76" id="toc-complexity-76" class="nav-link" data-scroll-target="#complexity-76">Complexity</a></li>
  <li><a href="#partial-quicksort" id="toc-partial-quicksort" class="nav-link" data-scroll-target="#partial-quicksort">178 Partial QuickSort</a></li>
  <li><a href="#what-problem-are-we-solving-77" id="toc-what-problem-are-we-solving-77" class="nav-link" data-scroll-target="#what-problem-are-we-solving-77">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-77" id="toc-how-does-it-work-plain-language-77" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-77">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-76" id="toc-tiny-code-easy-versions-76" class="nav-link" data-scroll-target="#tiny-code-easy-versions-76">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-77" id="toc-why-it-matters-77" class="nav-link" data-scroll-target="#why-it-matters-77">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-77" id="toc-a-gentle-proof-why-it-works-77" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-77">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-77" id="toc-try-it-yourself-77" class="nav-link" data-scroll-target="#try-it-yourself-77">Try It Yourself</a></li>
  <li><a href="#test-cases-77" id="toc-test-cases-77" class="nav-link" data-scroll-target="#test-cases-77">Test Cases</a></li>
  <li><a href="#complexity-77" id="toc-complexity-77" class="nav-link" data-scroll-target="#complexity-77">Complexity</a></li>
  <li><a href="#bfprt-algorithm-median-of-medians-selection" id="toc-bfprt-algorithm-median-of-medians-selection" class="nav-link" data-scroll-target="#bfprt-algorithm-median-of-medians-selection">179 BFPRT Algorithm (Median of Medians Selection)</a></li>
  <li><a href="#what-problem-are-we-solving-78" id="toc-what-problem-are-we-solving-78" class="nav-link" data-scroll-target="#what-problem-are-we-solving-78">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-78" id="toc-how-does-it-work-plain-language-78" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-78">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-77" id="toc-tiny-code-easy-versions-77" class="nav-link" data-scroll-target="#tiny-code-easy-versions-77">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-78" id="toc-why-it-matters-78" class="nav-link" data-scroll-target="#why-it-matters-78">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-78" id="toc-a-gentle-proof-why-it-works-78" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-78">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-78" id="toc-try-it-yourself-78" class="nav-link" data-scroll-target="#try-it-yourself-78">Try It Yourself</a></li>
  <li><a href="#test-cases-78" id="toc-test-cases-78" class="nav-link" data-scroll-target="#test-cases-78">Test Cases</a></li>
  <li><a href="#complexity-78" id="toc-complexity-78" class="nav-link" data-scroll-target="#complexity-78">Complexity</a></li>
  <li><a href="#kth-largest-stream" id="toc-kth-largest-stream" class="nav-link" data-scroll-target="#kth-largest-stream">180 Kth Largest Stream</a></li>
  <li><a href="#what-problem-are-we-solving-79" id="toc-what-problem-are-we-solving-79" class="nav-link" data-scroll-target="#what-problem-are-we-solving-79">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-79" id="toc-how-does-it-work-plain-language-79" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-79">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-78" id="toc-tiny-code-easy-versions-78" class="nav-link" data-scroll-target="#tiny-code-easy-versions-78">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-79" id="toc-why-it-matters-79" class="nav-link" data-scroll-target="#why-it-matters-79">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-79" id="toc-a-gentle-proof-why-it-works-79" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-79">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-79" id="toc-try-it-yourself-79" class="nav-link" data-scroll-target="#try-it-yourself-79">Try It Yourself</a></li>
  <li><a href="#test-cases-79" id="toc-test-cases-79" class="nav-link" data-scroll-target="#test-cases-79">Test Cases</a></li>
  <li><a href="#complexity-79" id="toc-complexity-79" class="nav-link" data-scroll-target="#complexity-79">Complexity</a></li>
  </ul></li>
  <li><a href="#section-19.-range-search-and-nearest-neighbor" id="toc-section-19.-range-search-and-nearest-neighbor" class="nav-link" data-scroll-target="#section-19.-range-search-and-nearest-neighbor">Section 19. Range Search and Nearest Neighbor</a>
  <ul class="collapse">
  <li><a href="#binary-search-range" id="toc-binary-search-range" class="nav-link" data-scroll-target="#binary-search-range">181 Binary Search Range</a></li>
  <li><a href="#what-problem-are-we-solving-80" id="toc-what-problem-are-we-solving-80" class="nav-link" data-scroll-target="#what-problem-are-we-solving-80">What Problem Are We Solving?</a></li>
  <li><a href="#how-does-it-work-plain-language-80" id="toc-how-does-it-work-plain-language-80" class="nav-link" data-scroll-target="#how-does-it-work-plain-language-80">How Does It Work (Plain Language)?</a></li>
  <li><a href="#tiny-code-easy-versions-79" id="toc-tiny-code-easy-versions-79" class="nav-link" data-scroll-target="#tiny-code-easy-versions-79">Tiny Code (Easy Versions)</a></li>
  <li><a href="#why-it-matters-80" id="toc-why-it-matters-80" class="nav-link" data-scroll-target="#why-it-matters-80">Why It Matters</a></li>
  <li><a href="#a-gentle-proof-why-it-works-80" id="toc-a-gentle-proof-why-it-works-80" class="nav-link" data-scroll-target="#a-gentle-proof-why-it-works-80">A Gentle Proof (Why It Works)</a></li>
  <li><a href="#try-it-yourself-80" id="toc-try-it-yourself-80" class="nav-link" data-scroll-target="#try-it-yourself-80">Try It Yourself</a></li>
  <li><a href="#test-cases-80" id="toc-test-cases-80" class="nav-link" data-scroll-target="#test-cases-80">Test Cases</a></li>
  <li><a href="#complexity-80" id="toc-complexity-80" class="nav-link" data-scroll-target="#complexity-80">Complexity</a></li>
  <li><a href="#segment-tree-query" id="toc-segment-tree-query" class="nav-link" data-scroll-target="#segment-tree-query">182 Segment Tree Query</a></li>
  <li><a href="#what-problem-are-we-solving-81" id="toc-what-problem-are-we-solving-81" class="nav-link" data-scroll-target="#what-problem-are-we-solving-81">What Problem Are We Solving?</a></li>
  <li><a href="#how-it-works-intuitive-view" id="toc-how-it-works-intuitive-view" class="nav-link" data-scroll-target="#how-it-works-intuitive-view">How It Works (Intuitive View)</a></li>
  <li><a href="#tiny-code-sum-query-example" id="toc-tiny-code-sum-query-example" class="nav-link" data-scroll-target="#tiny-code-sum-query-example">Tiny Code (Sum Query Example)</a></li>
  <li><a href="#why-it-matters-81" id="toc-why-it-matters-81" class="nav-link" data-scroll-target="#why-it-matters-81">Why It Matters</a></li>
  <li><a href="#intuition-associativity-rule" id="toc-intuition-associativity-rule" class="nav-link" data-scroll-target="#intuition-associativity-rule">Intuition (Associativity Rule)</a></li>
  <li><a href="#try-it-yourself-81" id="toc-try-it-yourself-81" class="nav-link" data-scroll-target="#try-it-yourself-81">Try It Yourself</a></li>
  <li><a href="#test-cases-81" id="toc-test-cases-81" class="nav-link" data-scroll-target="#test-cases-81">Test Cases</a></li>
  <li><a href="#complexity-81" id="toc-complexity-81" class="nav-link" data-scroll-target="#complexity-81">Complexity</a></li>
  <li><a href="#fenwick-tree-query" id="toc-fenwick-tree-query" class="nav-link" data-scroll-target="#fenwick-tree-query">183 Fenwick Tree Query</a></li>
  <li><a href="#what-problem-are-we-solving-82" id="toc-what-problem-are-we-solving-82" class="nav-link" data-scroll-target="#what-problem-are-we-solving-82">What Problem Are We Solving?</a></li>
  <li><a href="#how-it-works-plain-language" id="toc-how-it-works-plain-language" class="nav-link" data-scroll-target="#how-it-works-plain-language">How It Works (Plain Language)</a></li>
  <li><a href="#tiny-code-sum-example" id="toc-tiny-code-sum-example" class="nav-link" data-scroll-target="#tiny-code-sum-example">Tiny Code (Sum Example)</a></li>
  <li><a href="#why-it-matters-82" id="toc-why-it-matters-82" class="nav-link" data-scroll-target="#why-it-matters-82">Why It Matters</a></li>
  <li><a href="#intuition-least-significant-bit" id="toc-intuition-least-significant-bit" class="nav-link" data-scroll-target="#intuition-least-significant-bit">Intuition (Least Significant Bit)</a></li>
  <li><a href="#try-it-yourself-82" id="toc-try-it-yourself-82" class="nav-link" data-scroll-target="#try-it-yourself-82">Try It Yourself</a></li>
  <li><a href="#test-cases-82" id="toc-test-cases-82" class="nav-link" data-scroll-target="#test-cases-82">Test Cases</a></li>
  <li><a href="#complexity-82" id="toc-complexity-82" class="nav-link" data-scroll-target="#complexity-82">Complexity</a></li>
  <li><a href="#interval-tree-search" id="toc-interval-tree-search" class="nav-link" data-scroll-target="#interval-tree-search">184 Interval Tree Search</a></li>
  <li><a href="#what-problem-are-we-solving-83" id="toc-what-problem-are-we-solving-83" class="nav-link" data-scroll-target="#what-problem-are-we-solving-83">What Problem Are We Solving?</a></li>
  <li><a href="#how-it-works-plain-language-1" id="toc-how-it-works-plain-language-1" class="nav-link" data-scroll-target="#how-it-works-plain-language-1">How It Works (Plain Language)</a></li>
  <li><a href="#tiny-code-query-example" id="toc-tiny-code-query-example" class="nav-link" data-scroll-target="#tiny-code-query-example">Tiny Code (Query Example)</a></li>
  <li><a href="#why-it-matters-83" id="toc-why-it-matters-83" class="nav-link" data-scroll-target="#why-it-matters-83">Why It Matters</a></li>
  <li><a href="#key-intuition" id="toc-key-intuition" class="nav-link" data-scroll-target="#key-intuition">Key Intuition</a></li>
  <li><a href="#try-it-yourself-83" id="toc-try-it-yourself-83" class="nav-link" data-scroll-target="#try-it-yourself-83">Try It Yourself</a></li>
  <li><a href="#test-cases-83" id="toc-test-cases-83" class="nav-link" data-scroll-target="#test-cases-83">Test Cases</a></li>
  <li><a href="#complexity-83" id="toc-complexity-83" class="nav-link" data-scroll-target="#complexity-83">Complexity</a></li>
  <li><a href="#kd-tree-search" id="toc-kd-tree-search" class="nav-link" data-scroll-target="#kd-tree-search">185 KD-Tree Search</a></li>
  <li><a href="#what-problem-are-we-solving-84" id="toc-what-problem-are-we-solving-84" class="nav-link" data-scroll-target="#what-problem-are-we-solving-84">What Problem Are We Solving?</a></li>
  <li><a href="#how-it-works-plain-language-2" id="toc-how-it-works-plain-language-2" class="nav-link" data-scroll-target="#how-it-works-plain-language-2">How It Works (Plain Language)</a></li>
  <li><a href="#tiny-code-2d-example" id="toc-tiny-code-2d-example" class="nav-link" data-scroll-target="#tiny-code-2d-example">Tiny Code (2D Example)</a></li>
  <li><a href="#why-it-matters-84" id="toc-why-it-matters-84" class="nav-link" data-scroll-target="#why-it-matters-84">Why It Matters</a></li>
  <li><a href="#intuition" id="toc-intuition" class="nav-link" data-scroll-target="#intuition">Intuition</a></li>
  <li><a href="#try-it-yourself-84" id="toc-try-it-yourself-84" class="nav-link" data-scroll-target="#try-it-yourself-84">Try It Yourself</a></li>
  <li><a href="#test-cases-84" id="toc-test-cases-84" class="nav-link" data-scroll-target="#test-cases-84">Test Cases</a></li>
  <li><a href="#complexity-84" id="toc-complexity-84" class="nav-link" data-scroll-target="#complexity-84">Complexity</a></li>
  <li><a href="#r-tree-query" id="toc-r-tree-query" class="nav-link" data-scroll-target="#r-tree-query">186 R-Tree Query</a></li>
  <li><a href="#what-problem-are-we-solving-85" id="toc-what-problem-are-we-solving-85" class="nav-link" data-scroll-target="#what-problem-are-we-solving-85">What Problem Are We Solving?</a></li>
  <li><a href="#how-it-works-plain-language-3" id="toc-how-it-works-plain-language-3" class="nav-link" data-scroll-target="#how-it-works-plain-language-3">How It Works (Plain Language)</a></li>
  <li><a href="#tiny-code-2d-rectangles" id="toc-tiny-code-2d-rectangles" class="nav-link" data-scroll-target="#tiny-code-2d-rectangles">Tiny Code (2D Rectangles)</a></li>
  <li><a href="#why-it-matters-85" id="toc-why-it-matters-85" class="nav-link" data-scroll-target="#why-it-matters-85">Why It Matters</a></li>
  <li><a href="#intuition-1" id="toc-intuition-1" class="nav-link" data-scroll-target="#intuition-1">Intuition</a></li>
  <li><a href="#try-it-yourself-85" id="toc-try-it-yourself-85" class="nav-link" data-scroll-target="#try-it-yourself-85">Try It Yourself</a></li>
  <li><a href="#test-cases-85" id="toc-test-cases-85" class="nav-link" data-scroll-target="#test-cases-85">Test Cases</a></li>
  <li><a href="#complexity-85" id="toc-complexity-85" class="nav-link" data-scroll-target="#complexity-85">Complexity</a></li>
  <li><a href="#range-minimum-query-rmq-sparse-table-approach" id="toc-range-minimum-query-rmq-sparse-table-approach" class="nav-link" data-scroll-target="#range-minimum-query-rmq-sparse-table-approach">187 Range Minimum Query (RMQ), Sparse Table Approach</a></li>
  <li><a href="#what-problem-are-we-solving-86" id="toc-what-problem-are-we-solving-86" class="nav-link" data-scroll-target="#what-problem-are-we-solving-86">What Problem Are We Solving?</a></li>
  <li><a href="#how-it-works-plain-language-4" id="toc-how-it-works-plain-language-4" class="nav-link" data-scroll-target="#how-it-works-plain-language-4">How It Works (Plain Language)</a></li>
  <li><a href="#tiny-code" id="toc-tiny-code" class="nav-link" data-scroll-target="#tiny-code">Tiny Code</a></li>
  <li><a href="#why-it-matters-86" id="toc-why-it-matters-86" class="nav-link" data-scroll-target="#why-it-matters-86">Why It Matters</a></li>
  <li><a href="#intuition-2" id="toc-intuition-2" class="nav-link" data-scroll-target="#intuition-2">Intuition</a></li>
  <li><a href="#try-it-yourself-86" id="toc-try-it-yourself-86" class="nav-link" data-scroll-target="#try-it-yourself-86">Try It Yourself</a></li>
  <li><a href="#test-cases-86" id="toc-test-cases-86" class="nav-link" data-scroll-target="#test-cases-86">Test Cases</a></li>
  <li><a href="#complexity-86" id="toc-complexity-86" class="nav-link" data-scroll-target="#complexity-86">Complexity</a></li>
  <li><a href="#mos-algorithm" id="toc-mos-algorithm" class="nav-link" data-scroll-target="#mos-algorithm">188 Mo’s Algorithm</a></li>
  <li><a href="#what-problem-are-we-solving-87" id="toc-what-problem-are-we-solving-87" class="nav-link" data-scroll-target="#what-problem-are-we-solving-87">What Problem Are We Solving?</a></li>
  <li><a href="#how-it-works-plain-language-5" id="toc-how-it-works-plain-language-5" class="nav-link" data-scroll-target="#how-it-works-plain-language-5">How It Works (Plain Language)</a></li>
  <li><a href="#tiny-code-distinct-count-example" id="toc-tiny-code-distinct-count-example" class="nav-link" data-scroll-target="#tiny-code-distinct-count-example">Tiny Code (Distinct Count Example)</a></li>
  <li><a href="#why-it-matters-87" id="toc-why-it-matters-87" class="nav-link" data-scroll-target="#why-it-matters-87">Why It Matters</a></li>
  <li><a href="#intuition-3" id="toc-intuition-3" class="nav-link" data-scroll-target="#intuition-3">Intuition</a></li>
  <li><a href="#try-it-yourself-87" id="toc-try-it-yourself-87" class="nav-link" data-scroll-target="#try-it-yourself-87">Try It Yourself</a></li>
  <li><a href="#test-cases-87" id="toc-test-cases-87" class="nav-link" data-scroll-target="#test-cases-87">Test Cases</a></li>
  <li><a href="#complexity-87" id="toc-complexity-87" class="nav-link" data-scroll-target="#complexity-87">Complexity</a></li>
  <li><a href="#sweep-line-range-search" id="toc-sweep-line-range-search" class="nav-link" data-scroll-target="#sweep-line-range-search">189 Sweep Line Range Search</a></li>
  <li><a href="#what-problem-are-we-solving-88" id="toc-what-problem-are-we-solving-88" class="nav-link" data-scroll-target="#what-problem-are-we-solving-88">What Problem Are We Solving?</a></li>
  <li><a href="#how-it-works-plain-language-6" id="toc-how-it-works-plain-language-6" class="nav-link" data-scroll-target="#how-it-works-plain-language-6">How It Works (Plain Language)</a></li>
  <li><a href="#tiny-code-interval-overlaps" id="toc-tiny-code-interval-overlaps" class="nav-link" data-scroll-target="#tiny-code-interval-overlaps">Tiny Code (Interval Overlaps)</a></li>
  <li><a href="#why-it-matters-88" id="toc-why-it-matters-88" class="nav-link" data-scroll-target="#why-it-matters-88">Why It Matters</a></li>
  <li><a href="#intuition-4" id="toc-intuition-4" class="nav-link" data-scroll-target="#intuition-4">Intuition</a></li>
  <li><a href="#try-it-yourself-88" id="toc-try-it-yourself-88" class="nav-link" data-scroll-target="#try-it-yourself-88">Try It Yourself</a></li>
  <li><a href="#test-cases-88" id="toc-test-cases-88" class="nav-link" data-scroll-target="#test-cases-88">Test Cases</a></li>
  <li><a href="#complexity-88" id="toc-complexity-88" class="nav-link" data-scroll-target="#complexity-88">Complexity</a></li>
  <li><a href="#ball-tree-nearest-neighbor" id="toc-ball-tree-nearest-neighbor" class="nav-link" data-scroll-target="#ball-tree-nearest-neighbor">190 Ball Tree Nearest Neighbor</a></li>
  <li><a href="#what-problem-are-we-solving-89" id="toc-what-problem-are-we-solving-89" class="nav-link" data-scroll-target="#what-problem-are-we-solving-89">What Problem Are We Solving?</a></li>
  <li><a href="#how-it-works-plain-language-7" id="toc-how-it-works-plain-language-7" class="nav-link" data-scroll-target="#how-it-works-plain-language-7">How It Works (Plain Language)</a></li>
  <li><a href="#tiny-code-2d-example-1" id="toc-tiny-code-2d-example-1" class="nav-link" data-scroll-target="#tiny-code-2d-example-1">Tiny Code (2D Example)</a></li>
  <li><a href="#why-it-matters-89" id="toc-why-it-matters-89" class="nav-link" data-scroll-target="#why-it-matters-89">Why It Matters</a></li>
  <li><a href="#intuition-5" id="toc-intuition-5" class="nav-link" data-scroll-target="#intuition-5">Intuition</a></li>
  <li><a href="#try-it-yourself-89" id="toc-try-it-yourself-89" class="nav-link" data-scroll-target="#try-it-yourself-89">Try It Yourself</a></li>
  <li><a href="#test-cases-89" id="toc-test-cases-89" class="nav-link" data-scroll-target="#test-cases-89">Test Cases</a></li>
  <li><a href="#complexity-89" id="toc-complexity-89" class="nav-link" data-scroll-target="#complexity-89">Complexity</a></li>
  </ul></li>
  <li><a href="#section-20.-search-optimizations-and-variants" id="toc-section-20.-search-optimizations-and-variants" class="nav-link" data-scroll-target="#section-20.-search-optimizations-and-variants">Section 20. Search Optimizations and variants</a>
  <ul class="collapse">
  <li><a href="#binary-search-with-tolerance" id="toc-binary-search-with-tolerance" class="nav-link" data-scroll-target="#binary-search-with-tolerance">191 Binary Search with Tolerance</a></li>
  <li><a href="#what-problem-are-we-solving-90" id="toc-what-problem-are-we-solving-90" class="nav-link" data-scroll-target="#what-problem-are-we-solving-90">What Problem Are We Solving?</a></li>
  <li><a href="#example-90" id="toc-example-90" class="nav-link" data-scroll-target="#example-90">Example</a></li>
  <li><a href="#tiny-code-1" id="toc-tiny-code-1" class="nav-link" data-scroll-target="#tiny-code-1">Tiny Code</a></li>
  <li><a href="#why-it-matters-90" id="toc-why-it-matters-90" class="nav-link" data-scroll-target="#why-it-matters-90">Why It Matters</a></li>
  <li><a href="#intuition-6" id="toc-intuition-6" class="nav-link" data-scroll-target="#intuition-6">Intuition</a></li>
  <li><a href="#try-it-yourself-90" id="toc-try-it-yourself-90" class="nav-link" data-scroll-target="#try-it-yourself-90">Try It Yourself</a></li>
  <li><a href="#test-cases-90" id="toc-test-cases-90" class="nav-link" data-scroll-target="#test-cases-90">Test Cases</a></li>
  <li><a href="#complexity-90" id="toc-complexity-90" class="nav-link" data-scroll-target="#complexity-90">Complexity</a></li>
  <li><a href="#ternary-search" id="toc-ternary-search" class="nav-link" data-scroll-target="#ternary-search">192 Ternary Search</a></li>
  <li><a href="#what-problem-are-we-solving-91" id="toc-what-problem-are-we-solving-91" class="nav-link" data-scroll-target="#what-problem-are-we-solving-91">What Problem Are We Solving?</a></li>
  <li><a href="#example-unimodal-function" id="toc-example-unimodal-function" class="nav-link" data-scroll-target="#example-unimodal-function">Example (Unimodal Function)</a></li>
  <li><a href="#how-it-works-step-by-step" id="toc-how-it-works-step-by-step" class="nav-link" data-scroll-target="#how-it-works-step-by-step">How It Works (Step-by-Step)</a></li>
  <li><a href="#tiny-code-2" id="toc-tiny-code-2" class="nav-link" data-scroll-target="#tiny-code-2">Tiny Code</a></li>
  <li><a href="#why-it-matters-91" id="toc-why-it-matters-91" class="nav-link" data-scroll-target="#why-it-matters-91">Why It Matters</a></li>
  <li><a href="#try-it-yourself-91" id="toc-try-it-yourself-91" class="nav-link" data-scroll-target="#try-it-yourself-91">Try It Yourself</a></li>
  <li><a href="#test-cases-91" id="toc-test-cases-91" class="nav-link" data-scroll-target="#test-cases-91">Test Cases</a></li>
  <li><a href="#complexity-91" id="toc-complexity-91" class="nav-link" data-scroll-target="#complexity-91">Complexity</a></li>
  <li><a href="#hash-based-search" id="toc-hash-based-search" class="nav-link" data-scroll-target="#hash-based-search">193 Hash-Based Search</a></li>
  <li><a href="#what-problem-are-we-solving-92" id="toc-what-problem-are-we-solving-92" class="nav-link" data-scroll-target="#what-problem-are-we-solving-92">What Problem Are We Solving?</a></li>
  <li><a href="#example-simple-lookup" id="toc-example-simple-lookup" class="nav-link" data-scroll-target="#example-simple-lookup">Example (Simple Lookup)</a></li>
  <li><a href="#how-it-works-plain-language-8" id="toc-how-it-works-plain-language-8" class="nav-link" data-scroll-target="#how-it-works-plain-language-8">How It Works (Plain Language)</a></li>
  <li><a href="#tiny-code-3" id="toc-tiny-code-3" class="nav-link" data-scroll-target="#tiny-code-3">Tiny Code</a></li>
  <li><a href="#why-it-matters-92" id="toc-why-it-matters-92" class="nav-link" data-scroll-target="#why-it-matters-92">Why It Matters</a></li>
  <li><a href="#try-it-yourself-92" id="toc-try-it-yourself-92" class="nav-link" data-scroll-target="#try-it-yourself-92">Try It Yourself</a></li>
  <li><a href="#test-cases-92" id="toc-test-cases-92" class="nav-link" data-scroll-target="#test-cases-92">Test Cases</a></li>
  <li><a href="#complexity-92" id="toc-complexity-92" class="nav-link" data-scroll-target="#complexity-92">Complexity</a></li>
  <li><a href="#bloom-filter-lookup" id="toc-bloom-filter-lookup" class="nav-link" data-scroll-target="#bloom-filter-lookup">194 Bloom Filter Lookup</a></li>
  <li><a href="#what-problem-are-we-solving-93" id="toc-what-problem-are-we-solving-93" class="nav-link" data-scroll-target="#what-problem-are-we-solving-93">What Problem Are We Solving?</a></li>
  <li><a href="#example-cache-lookup" id="toc-example-cache-lookup" class="nav-link" data-scroll-target="#example-cache-lookup">Example (Cache Lookup)</a></li>
  <li><a href="#how-it-works-plain-language-9" id="toc-how-it-works-plain-language-9" class="nav-link" data-scroll-target="#how-it-works-plain-language-9">How It Works (Plain Language)</a></li>
  <li><a href="#tiny-code-4" id="toc-tiny-code-4" class="nav-link" data-scroll-target="#tiny-code-4">Tiny Code</a></li>
  <li><a href="#why-it-matters-93" id="toc-why-it-matters-93" class="nav-link" data-scroll-target="#why-it-matters-93">Why It Matters</a></li>
  <li><a href="#try-it-yourself-93" id="toc-try-it-yourself-93" class="nav-link" data-scroll-target="#try-it-yourself-93">Try It Yourself</a></li>
  <li><a href="#test-cases-93" id="toc-test-cases-93" class="nav-link" data-scroll-target="#test-cases-93">Test Cases</a></li>
  <li><a href="#complexity-93" id="toc-complexity-93" class="nav-link" data-scroll-target="#complexity-93">Complexity</a></li>
  <li><a href="#cuckoo-hash-search" id="toc-cuckoo-hash-search" class="nav-link" data-scroll-target="#cuckoo-hash-search">195 Cuckoo Hash Search</a></li>
  <li><a href="#what-problem-are-we-solving-94" id="toc-what-problem-are-we-solving-94" class="nav-link" data-scroll-target="#what-problem-are-we-solving-94">What Problem Are We Solving?</a></li>
  <li><a href="#example-small-table" id="toc-example-small-table" class="nav-link" data-scroll-target="#example-small-table">Example (Small Table)</a></li>
  <li><a href="#how-it-works-plain-language-10" id="toc-how-it-works-plain-language-10" class="nav-link" data-scroll-target="#how-it-works-plain-language-10">How It Works (Plain Language)</a></li>
  <li><a href="#tiny-code-5" id="toc-tiny-code-5" class="nav-link" data-scroll-target="#tiny-code-5">Tiny Code</a></li>
  <li><a href="#why-it-matters-94" id="toc-why-it-matters-94" class="nav-link" data-scroll-target="#why-it-matters-94">Why It Matters</a></li>
  <li><a href="#try-it-yourself-94" id="toc-try-it-yourself-94" class="nav-link" data-scroll-target="#try-it-yourself-94">Try It Yourself</a></li>
  <li><a href="#test-cases-94" id="toc-test-cases-94" class="nav-link" data-scroll-target="#test-cases-94">Test Cases</a></li>
  <li><a href="#complexity-94" id="toc-complexity-94" class="nav-link" data-scroll-target="#complexity-94">Complexity</a></li>
  <li><a href="#robin-hood-hashing" id="toc-robin-hood-hashing" class="nav-link" data-scroll-target="#robin-hood-hashing">196 Robin Hood Hashing</a></li>
  <li><a href="#what-problem-are-we-solving-95" id="toc-what-problem-are-we-solving-95" class="nav-link" data-scroll-target="#what-problem-are-we-solving-95">What Problem Are We Solving?</a></li>
  <li><a href="#example-collision-handling" id="toc-example-collision-handling" class="nav-link" data-scroll-target="#example-collision-handling">Example (Collision Handling)</a></li>
  <li><a href="#how-it-works-plain-language-11" id="toc-how-it-works-plain-language-11" class="nav-link" data-scroll-target="#how-it-works-plain-language-11">How It Works (Plain Language)</a></li>
  <li><a href="#tiny-code-6" id="toc-tiny-code-6" class="nav-link" data-scroll-target="#tiny-code-6">Tiny Code</a></li>
  <li><a href="#why-it-matters-95" id="toc-why-it-matters-95" class="nav-link" data-scroll-target="#why-it-matters-95">Why It Matters</a></li>
  <li><a href="#try-it-yourself-95" id="toc-try-it-yourself-95" class="nav-link" data-scroll-target="#try-it-yourself-95">Try It Yourself</a></li>
  <li><a href="#test-cases-95" id="toc-test-cases-95" class="nav-link" data-scroll-target="#test-cases-95">Test Cases</a></li>
  <li><a href="#complexity-95" id="toc-complexity-95" class="nav-link" data-scroll-target="#complexity-95">Complexity</a></li>
  <li><a href="#jump-consistent-hashing" id="toc-jump-consistent-hashing" class="nav-link" data-scroll-target="#jump-consistent-hashing">197 Jump Consistent Hashing</a></li>
  <li><a href="#what-problem-are-we-solving-96" id="toc-what-problem-are-we-solving-96" class="nav-link" data-scroll-target="#what-problem-are-we-solving-96">What Problem Are We Solving?</a></li>
  <li><a href="#example-adding-buckets" id="toc-example-adding-buckets" class="nav-link" data-scroll-target="#example-adding-buckets">Example (Adding Buckets)</a></li>
  <li><a href="#how-it-works-plain-language-12" id="toc-how-it-works-plain-language-12" class="nav-link" data-scroll-target="#how-it-works-plain-language-12">How It Works (Plain Language)</a></li>
  <li><a href="#tiny-code-7" id="toc-tiny-code-7" class="nav-link" data-scroll-target="#tiny-code-7">Tiny Code</a></li>
  <li><a href="#why-it-matters-96" id="toc-why-it-matters-96" class="nav-link" data-scroll-target="#why-it-matters-96">Why It Matters</a></li>
  <li><a href="#try-it-yourself-96" id="toc-try-it-yourself-96" class="nav-link" data-scroll-target="#try-it-yourself-96">Try It Yourself</a></li>
  <li><a href="#test-cases-96" id="toc-test-cases-96" class="nav-link" data-scroll-target="#test-cases-96">Test Cases</a></li>
  <li><a href="#complexity-96" id="toc-complexity-96" class="nav-link" data-scroll-target="#complexity-96">Complexity</a></li>
  <li><a href="#prefix-search-in-trie" id="toc-prefix-search-in-trie" class="nav-link" data-scroll-target="#prefix-search-in-trie">198 Prefix Search in Trie</a></li>
  <li><a href="#what-problem-are-we-solving-97" id="toc-what-problem-are-we-solving-97" class="nav-link" data-scroll-target="#what-problem-are-we-solving-97">What Problem Are We Solving?</a></li>
  <li><a href="#example-words-app-apple-bat" id="toc-example-words-app-apple-bat" class="nav-link" data-scroll-target="#example-words-app-apple-bat">Example (Words: <code>app</code>, <code>apple</code>, <code>bat</code>)</a></li>
  <li><a href="#how-it-works-plain-language-13" id="toc-how-it-works-plain-language-13" class="nav-link" data-scroll-target="#how-it-works-plain-language-13">How It Works (Plain Language)</a></li>
  <li><a href="#tiny-code-8" id="toc-tiny-code-8" class="nav-link" data-scroll-target="#tiny-code-8">Tiny Code</a></li>
  <li><a href="#why-it-matters-97" id="toc-why-it-matters-97" class="nav-link" data-scroll-target="#why-it-matters-97">Why It Matters</a></li>
  <li><a href="#try-it-yourself-97" id="toc-try-it-yourself-97" class="nav-link" data-scroll-target="#try-it-yourself-97">Try It Yourself</a></li>
  <li><a href="#test-cases-97" id="toc-test-cases-97" class="nav-link" data-scroll-target="#test-cases-97">Test Cases</a></li>
  <li><a href="#complexity-97" id="toc-complexity-97" class="nav-link" data-scroll-target="#complexity-97">Complexity</a></li>
  <li><a href="#pattern-search-in-suffix-array" id="toc-pattern-search-in-suffix-array" class="nav-link" data-scroll-target="#pattern-search-in-suffix-array">199 Pattern Search in Suffix Array</a></li>
  <li><a href="#what-problem-are-we-solving-98" id="toc-what-problem-are-we-solving-98" class="nav-link" data-scroll-target="#what-problem-are-we-solving-98">What Problem Are We Solving?</a></li>
  <li><a href="#example-text-banana" id="toc-example-text-banana" class="nav-link" data-scroll-target="#example-text-banana">Example (Text = “banana”)</a></li>
  <li><a href="#how-it-works-plain-language-14" id="toc-how-it-works-plain-language-14" class="nav-link" data-scroll-target="#how-it-works-plain-language-14">How It Works (Plain Language)</a></li>
  <li><a href="#tiny-code-9" id="toc-tiny-code-9" class="nav-link" data-scroll-target="#tiny-code-9">Tiny Code</a></li>
  <li><a href="#why-it-matters-98" id="toc-why-it-matters-98" class="nav-link" data-scroll-target="#why-it-matters-98">Why It Matters</a></li>
  <li><a href="#try-it-yourself-98" id="toc-try-it-yourself-98" class="nav-link" data-scroll-target="#try-it-yourself-98">Try It Yourself</a></li>
  <li><a href="#test-cases-98" id="toc-test-cases-98" class="nav-link" data-scroll-target="#test-cases-98">Test Cases</a></li>
  <li><a href="#complexity-98" id="toc-complexity-98" class="nav-link" data-scroll-target="#complexity-98">Complexity</a></li>
  <li><a href="#search-in-infinite-array" id="toc-search-in-infinite-array" class="nav-link" data-scroll-target="#search-in-infinite-array">200 Search in Infinite Array</a></li>
  <li><a href="#what-problem-are-we-solving-99" id="toc-what-problem-are-we-solving-99" class="nav-link" data-scroll-target="#what-problem-are-we-solving-99">What Problem Are We Solving?</a></li>
  <li><a href="#example-91" id="toc-example-91" class="nav-link" data-scroll-target="#example-91">Example</a></li>
  <li><a href="#how-it-works-plain-language-15" id="toc-how-it-works-plain-language-15" class="nav-link" data-scroll-target="#how-it-works-plain-language-15">How It Works (Plain Language)</a></li>
  <li><a href="#tiny-code-10" id="toc-tiny-code-10" class="nav-link" data-scroll-target="#tiny-code-10">Tiny Code</a></li>
  <li><a href="#why-it-matters-99" id="toc-why-it-matters-99" class="nav-link" data-scroll-target="#why-it-matters-99">Why It Matters</a></li>
  <li><a href="#try-it-yourself-99" id="toc-try-it-yourself-99" class="nav-link" data-scroll-target="#try-it-yourself-99">Try It Yourself</a></li>
  <li><a href="#test-cases-99" id="toc-test-cases-99" class="nav-link" data-scroll-target="#test-cases-99">Test Cases</a></li>
  <li><a href="#complexity-99" id="toc-complexity-99" class="nav-link" data-scroll-target="#complexity-99">Complexity</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-title">Chapter 2. Sorting and searching</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="elementary-sorting" class="level2">
<h2 class="anchored" data-anchor-id="elementary-sorting">11. Elementary sorting</h2>
<section id="bubble-sort" class="level3">
<h3 class="anchored" data-anchor-id="bubble-sort">101 Bubble Sort</h3>
<p>Bubble Sort is like washing dishes one by one, you keep moving the biggest plate to the bottom until everything is clean and sorted. It is simple, visual, and perfect for building your sorting intuition before diving into more advanced methods.</p>
</section>
<section id="what-problem-are-we-solving" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving">What Problem Are We Solving?</h3>
<p>We want to arrange a list of elements in order (ascending or descending) by repeatedly comparing and swapping adjacent items that are out of order.</p>
<p>Formally: Given an array <code>A[0…n-1]</code>, repeat passes until no swaps occur. Each pass bubbles up the largest remaining element to its final position.</p>
<section id="example" class="level4">
<h4 class="anchored" data-anchor-id="example">Example</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Array State</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>[5, 3, 4, 1]</td>
<td>Initial array</td>
</tr>
<tr class="even">
<td>1</td>
<td>[3, 4, 1, 5]</td>
<td>5 bubbled to the end</td>
</tr>
<tr class="odd">
<td>2</td>
<td>[3, 1, 4, 5]</td>
<td>4 bubbled to position 3</td>
</tr>
<tr class="even">
<td>3</td>
<td>[1, 3, 4, 5]</td>
<td>Array fully sorted</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language">How Does It Work (Plain Language)?</h3>
<p>Imagine bubbles rising to the surface, the biggest one reaches the top first. In Bubble Sort, each sweep through the list compares neighboring pairs, swapping them if they are in the wrong order. After each full pass, one more element settles into place.</p>
<p>We repeat until a pass finishes with no swaps, meaning the array is sorted.</p>
<section id="step-by-step-process" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Resulting Array</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Compare A[0] and A[1]</td>
<td>Swap if needed</td>
</tr>
<tr class="even">
<td>2</td>
<td>Compare A[1] and A[2]</td>
<td>Swap if needed</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Continue through A[n-2]</td>
<td>Repeat comparisons</td>
</tr>
<tr class="even">
<td>4</td>
<td>Repeat passes until sorted</td>
<td>Early stop if sorted</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions">Tiny Code (Easy Versions)</h3>
<section id="c" class="level4">
<h4 class="anchored" data-anchor-id="c">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdbool.h&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> bubble_sort<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">bool</span> swapped<span class="op">;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> pass <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> pass <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> pass<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>        swapped <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n <span class="op">-</span> pass <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>                <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>                a<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>                swapped <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(!</span>swapped<span class="op">)</span> <span class="cf">break</span><span class="op">;</span> <span class="co">// early exit if already sorted</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    bubble_sort<span class="op">(</span>a<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python" class="level4">
<h4 class="anchored" data-anchor-id="python">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bubble_sort(a):</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(a)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> pass_num <span class="kw">in</span> <span class="bu">range</span>(n <span class="op">-</span> <span class="dv">1</span>):</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>        swapped <span class="op">=</span> <span class="va">False</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n <span class="op">-</span> pass_num <span class="op">-</span> <span class="dv">1</span>):</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> a[i] <span class="op">&gt;</span> a[i <span class="op">+</span> <span class="dv">1</span>]:</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>                a[i], a[i <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> a[i <span class="op">+</span> <span class="dv">1</span>], a[i]</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>                swapped <span class="op">=</span> <span class="va">True</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> swapped:</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>bubble_sort(arr)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters">Why It Matters</h3>
<ul>
<li>Teaches comparison-based sorting through intuition</li>
<li>Builds understanding of adjacent swaps and pass-based progress</li>
<li>Introduces stability (equal elements keep their relative order)</li>
<li>Sets the stage for improved versions (Improved Bubble Sort, Cocktail Shaker Sort, Comb Sort)</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works">A Gentle Proof (Why It Works)</h3>
<p>After the first pass, the largest element moves to the last position. After the second pass, the second largest is in position n-2.</p>
<p>So after k passes, the last k elements are sorted.</p>
<p>If we track comparisons: 1st pass: (n−1) comparisons 2nd pass: (n−2) comparisons … (n−1)th pass: 1 comparison</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Pass</th>
<th>Comparisons</th>
<th>Elements Sorted at End</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>n−1</td>
<td>Largest element</td>
</tr>
<tr class="even">
<td>2</td>
<td>n−2</td>
<td>Next largest</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr class="even">
<td>n−1</td>
<td>1</td>
<td>Fully sorted array</td>
</tr>
</tbody>
</table>
<p>Total comparisons = (n−1) + (n−2) + … + 1 = n(n−1)/2</p>
<p>So time = O(n²) in the worst case. If already sorted, early exit makes it O(n).</p>
</section>
<section id="try-it-yourself" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself">Try It Yourself</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Task</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Sort [3, 2, 1] step by step</td>
</tr>
<tr class="even">
<td>2</td>
<td>Count how many swaps occur</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Add a flag to detect early termination</td>
</tr>
<tr class="even">
<td>4</td>
<td>Compare with Insertion Sort on the same data</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Modify to sort descending</td>
</tr>
</tbody>
</table>
</section>
<section id="test-cases" class="level3">
<h3 class="anchored" data-anchor-id="test-cases">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Passes</th>
<th>Swaps</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 2, 1]</td>
<td>[1, 2, 3]</td>
<td>3</td>
<td>3</td>
</tr>
<tr class="even">
<td>[1, 2, 3]</td>
<td>[1, 2, 3]</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td>[5, 1, 4, 2, 8]</td>
<td>[1, 2, 4, 5, 8]</td>
<td>4</td>
<td>5</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity" class="level3">
<h3 class="anchored" data-anchor-id="complexity">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(1) (in-place)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>Yes (stops early if sorted)</td>
</tr>
</tbody>
</table>
<p>Bubble Sort is your first step into the sorting world, simple enough to code by hand, visual enough to animate, and powerful enough to spark intuition for more advanced sorts.</p>
</section>
<section id="improved-bubble-sort" class="level3">
<h3 class="anchored" data-anchor-id="improved-bubble-sort">102 Improved Bubble Sort</h3>
<p>Improved Bubble Sort builds on the basic version by recognizing that once part of the array is sorted, there’s no need to revisit it. It introduces small optimizations like early termination and tracking the last swap position to reduce unnecessary comparisons.</p>
</section>
<section id="what-problem-are-we-solving-1" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-1">What Problem Are We Solving?</h3>
<p>Basic Bubble Sort keeps scanning the whole array every pass, even when the tail is already sorted. Improved Bubble Sort fixes this by remembering where the last swap happened. Elements beyond that index are already in place, so the next pass can stop earlier.</p>
<p>This optimization is especially effective for arrays that are nearly sorted.</p>
<section id="example-1" class="level4">
<h4 class="anchored" data-anchor-id="example-1">Example</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Array State</th>
<th>Last Swap Index</th>
<th>Range Checked</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>[5, 3, 4, 1, 2]</td>
<td>-</td>
<td>0 to 4</td>
</tr>
<tr class="even">
<td>1</td>
<td>[3, 4, 1, 2, 5]</td>
<td>3</td>
<td>0 to 3</td>
</tr>
<tr class="odd">
<td>2</td>
<td>[3, 1, 2, 4, 5]</td>
<td>2</td>
<td>0 to 2</td>
</tr>
<tr class="even">
<td>3</td>
<td>[1, 2, 3, 4, 5]</td>
<td>1</td>
<td>0 to 1</td>
</tr>
<tr class="odd">
<td>4</td>
<td>[1, 2, 3, 4, 5]</td>
<td>0</td>
<td>Stop early</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-1" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-1">How Does It Work (Plain Language)?</h3>
<p>We improve efficiency by narrowing each pass to only the unsorted part. We also stop early when no swaps occur, signaling the array is already sorted.</p>
<p>Step by step:</p>
<ol type="1">
<li>Track index of the last swap in each pass</li>
<li>Next pass ends at that index</li>
<li>Stop when no swaps occur (fully sorted)</li>
</ol>
<p>This reduces unnecessary comparisons in nearly sorted arrays.</p>
</section>
<section id="tiny-code-easy-versions-1" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-1">Tiny Code (Easy Versions)</h3>
<section id="c-1" class="level4">
<h4 class="anchored" data-anchor-id="c-1">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> improved_bubble_sort<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> new_n<span class="op">;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        new_n <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">&gt;</span> a<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>                <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>                a<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>                a<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>                new_n <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> new_n<span class="op">;</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    improved_bubble_sort<span class="op">(</span>a<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-1" class="level4">
<h4 class="anchored" data-anchor-id="python-1">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> improved_bubble_sort(a):</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(a)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> n <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        new_n <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n):</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> a[i <span class="op">-</span> <span class="dv">1</span>] <span class="op">&gt;</span> a[i]:</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>                a[i <span class="op">-</span> <span class="dv">1</span>], a[i] <span class="op">=</span> a[i], a[i <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>                new_n <span class="op">=</span> i</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> new_n</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>improved_bubble_sort(arr)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-1" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-1">Why It Matters</h3>
<ul>
<li>Reduces redundant comparisons</li>
<li>Automatically adapts to partially sorted data</li>
<li>Stops as soon as the array is sorted</li>
<li>Retains stability and simplicity</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-1" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-1">A Gentle Proof (Why It Works)</h3>
<p>If the last swap occurs at index <code>k</code>, all elements after <code>k</code> are already in order. Next pass only needs to scan up to <code>k</code>. If no swaps occur (<code>k = 0</code>), the array is sorted.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Pass</th>
<th>Comparisons</th>
<th>Last Swap</th>
<th>Range Next Pass</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>n−1</td>
<td>k₁</td>
<td>0..k₁</td>
</tr>
<tr class="even">
<td>2</td>
<td>k₁−1</td>
<td>k₂</td>
<td>0..k₂</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
<p>In the best case (already sorted), only one pass occurs: O(n) Worst case remains O(n²)</p>
</section>
<section id="try-it-yourself-1" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-1">Try It Yourself</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Task</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Sort [1, 2, 3, 4, 5] and observe early stop</td>
</tr>
<tr class="even">
<td>2</td>
<td>Sort [5, 4, 3, 2, 1] and track last swap index</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Modify to print last swap index each pass</td>
</tr>
<tr class="even">
<td>4</td>
<td>Compare with standard Bubble Sort pass count</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Try arrays with repeated values to verify stability</td>
</tr>
</tbody>
</table>
</section>
<section id="test-cases-1" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-1">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Passes</th>
<th>Improvement</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[1, 2, 3, 4, 5]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>1</td>
<td>Early stop</td>
</tr>
<tr class="even">
<td>[5, 3, 4, 1, 2]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>4</td>
<td>Fewer checks each pass</td>
</tr>
<tr class="odd">
<td>[2, 1, 3, 4, 5]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>1</td>
<td>Detects sorted tail</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-1" class="level3">
<h3 class="anchored" data-anchor-id="complexity-1">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Improved Bubble Sort shows how a small observation can make a classic algorithm smarter. By tracking the last swap, it skips already-sorted tails and gives a glimpse of how adaptive sorting works in practice.</p>
</section>
<section id="cocktail-shaker-sort" class="level3">
<h3 class="anchored" data-anchor-id="cocktail-shaker-sort">103 Cocktail Shaker Sort</h3>
<p>Cocktail Shaker Sort, also known as Bidirectional Bubble Sort, improves on Bubble Sort by sorting in both directions during each pass. It moves the largest element to the end and the smallest to the beginning, reducing the number of passes required.</p>
</section>
<section id="what-problem-are-we-solving-2" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-2">What Problem Are We Solving?</h3>
<p>Standard Bubble Sort only bubbles up in one direction, pushing the largest element to the end each pass. If small elements start near the end, they take many passes to reach their position.</p>
<p>Cocktail Shaker Sort fixes this by sweeping back and forth, bubbling both ends at once.</p>
<section id="example-2" class="level4">
<h4 class="anchored" data-anchor-id="example-2">Example</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Direction</th>
<th>Array State</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>–</td>
<td>[5, 3, 4, 1, 2]</td>
<td>Initial array</td>
</tr>
<tr class="even">
<td>1</td>
<td>Left → Right</td>
<td>[3, 4, 1, 2, 5]</td>
<td>5 bubbled to end</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Right → Left</td>
<td>[1, 3, 4, 2, 5]</td>
<td>1 bubbled to start</td>
</tr>
<tr class="even">
<td>3</td>
<td>Left → Right</td>
<td>[1, 3, 2, 4, 5]</td>
<td>4 bubbled to position 4</td>
</tr>
<tr class="odd">
<td>4</td>
<td>Right → Left</td>
<td>[1, 2, 3, 4, 5]</td>
<td>2 bubbled to position 2</td>
</tr>
</tbody>
</table>
<p>Sorted after 4 directional passes.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-2" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-2">How Does It Work (Plain Language)?</h3>
<p>Cocktail Shaker Sort is like stirring from both sides of the array. Each forward pass moves the largest unsorted element to the end. Each backward pass moves the smallest unsorted element to the start.</p>
<p>The unsorted region shrinks from both ends with each full cycle.</p>
<section id="step-by-step-process-1" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-1">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Sweep left to right, bubble largest to end</td>
<td></td>
</tr>
<tr class="even">
<td>2</td>
<td>Sweep right to left, bubble smallest to start</td>
<td></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Narrow bounds, repeat until sorted</td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-2" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-2">Tiny Code (Easy Versions)</h3>
<section id="c-2" class="level4">
<h4 class="anchored" data-anchor-id="c-2">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdbool.h&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> cocktail_shaker_sort<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">bool</span> swapped <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> start <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> end <span class="op">=</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>swapped<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        swapped <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Forward pass</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> start<span class="op">;</span> i <span class="op">&lt;</span> end<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>                <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>                a<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>                a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>                swapped <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(!</span>swapped<span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>        swapped <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>        end<span class="op">--;</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Backward pass</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> end <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;=</span> start<span class="op">;</span> i<span class="op">--)</span> <span class="op">{</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>                <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>                a<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>                a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>                swapped <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>        start<span class="op">++;</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>    cocktail_shaker_sort<span class="op">(</span>a<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-2" class="level4">
<h4 class="anchored" data-anchor-id="python-2">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cocktail_shaker_sort(a):</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(a)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    start, end <span class="op">=</span> <span class="dv">0</span>, n <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    swapped <span class="op">=</span> <span class="va">True</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> swapped:</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>        swapped <span class="op">=</span> <span class="va">False</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(start, end):</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> a[i] <span class="op">&gt;</span> a[i <span class="op">+</span> <span class="dv">1</span>]:</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>                a[i], a[i <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> a[i <span class="op">+</span> <span class="dv">1</span>], a[i]</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>                swapped <span class="op">=</span> <span class="va">True</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> swapped:</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>        swapped <span class="op">=</span> <span class="va">False</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>        end <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(end <span class="op">-</span> <span class="dv">1</span>, start <span class="op">-</span> <span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> a[i] <span class="op">&gt;</span> a[i <span class="op">+</span> <span class="dv">1</span>]:</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>                a[i], a[i <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> a[i <span class="op">+</span> <span class="dv">1</span>], a[i]</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>                swapped <span class="op">=</span> <span class="va">True</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>        start <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>cocktail_shaker_sort(arr)</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-2" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-2">Why It Matters</h3>
<ul>
<li>Sorts in both directions, reducing unnecessary passes</li>
<li>Performs better than Bubble Sort on many practical inputs</li>
<li>Stable and easy to visualize</li>
<li>Demonstrates bidirectional improvement, a foundation for adaptive sorting</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-2" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-2">A Gentle Proof (Why It Works)</h3>
<p>Each forward pass moves the maximum element of the unsorted range to the end. Each backward pass moves the minimum element of the unsorted range to the start. Thus, the unsorted range shrinks from both sides, guaranteeing progress each cycle.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Cycle</th>
<th>Forward Pass</th>
<th>Backward Pass</th>
<th>Sorted Range</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Largest to end</td>
<td>Smallest to start</td>
<td>[0], [n-1]</td>
</tr>
<tr class="even">
<td>2</td>
<td>Next largest</td>
<td>Next smallest</td>
<td>[0,1], [n-2,n-1]</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
<p>Worst case still O(n²), best case O(n) if already sorted.</p>
</section>
<section id="try-it-yourself-2" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-2">Try It Yourself</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Task</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Sort [5, 3, 4, 1, 2] and track forward/backward passes</td>
</tr>
<tr class="even">
<td>2</td>
<td>Visualize the shrinking unsorted range</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Compare with standard Bubble Sort on reverse array</td>
</tr>
<tr class="even">
<td>4</td>
<td>Modify code to print array after each pass</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Test stability with duplicate values</td>
</tr>
</tbody>
</table>
</section>
<section id="test-cases-2" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-2">Test Cases</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 23%">
<col style="width: 23%">
<col style="width: 9%">
<col style="width: 44%">
</colgroup>
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Passes</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[5, 3, 4, 1, 2]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>4</td>
<td>Fewer passes than bubble sort</td>
</tr>
<tr class="even">
<td>[1, 2, 3, 4, 5]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>1</td>
<td>Early termination</td>
</tr>
<tr class="odd">
<td>[2, 1, 3, 5, 4]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>2</td>
<td>Moves smallest quickly</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-2" class="level3">
<h3 class="anchored" data-anchor-id="complexity-2">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Cocktail Shaker Sort takes the simplicity of Bubble Sort and doubles its efficiency for certain inputs. By sorting in both directions, it highlights the power of symmetry and small algorithmic tweaks.</p>
</section>
<section id="selection-sort" class="level3">
<h3 class="anchored" data-anchor-id="selection-sort">104 Selection Sort</h3>
<p>Selection Sort is like organizing a deck of cards by repeatedly picking the smallest card and placing it in order. It is simple, predictable, and useful for understanding how selection-based sorting works.</p>
</section>
<section id="what-problem-are-we-solving-3" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-3">What Problem Are We Solving?</h3>
<p>We want to sort an array by repeatedly selecting the smallest (or largest) element from the unsorted part and swapping it into the correct position.</p>
<p>Selection Sort separates the array into two parts:</p>
<ul>
<li>A sorted prefix (built one element at a time)</li>
<li>An unsorted suffix (from which we select the next minimum)</li>
</ul>
<section id="example-3" class="level4">
<h4 class="anchored" data-anchor-id="example-3">Example</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 24%">
<col style="width: 29%">
<col style="width: 18%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Array State</th>
<th>Action</th>
<th>Sorted Part</th>
<th>Unsorted Part</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>[5, 3, 4, 1, 2]</td>
<td>Start</td>
<td>[]</td>
<td>[5,3,4,1,2]</td>
</tr>
<tr class="even">
<td>1</td>
<td>[1, 3, 4, 5, 2]</td>
<td>Place 1 at index 0</td>
<td>[1]</td>
<td>[3,4,5,2]</td>
</tr>
<tr class="odd">
<td>2</td>
<td>[1, 2, 4, 5, 3]</td>
<td>Place 2 at index 1</td>
<td>[1,2]</td>
<td>[4,5,3]</td>
</tr>
<tr class="even">
<td>3</td>
<td>[1, 2, 3, 5, 4]</td>
<td>Place 3 at index 2</td>
<td>[1,2,3]</td>
<td>[5,4]</td>
</tr>
<tr class="odd">
<td>4</td>
<td>[1, 2, 3, 4, 5]</td>
<td>Place 4 at index 3</td>
<td>[1,2,3,4]</td>
<td>[5]</td>
</tr>
<tr class="even">
<td>5</td>
<td>[1, 2, 3, 4, 5]</td>
<td>Done</td>
<td>[1,2,3,4,5]</td>
<td>[]</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-3" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-3">How Does It Work (Plain Language)?</h3>
<p>Selection Sort looks through the unsorted portion, finds the smallest element, and moves it to the front. It does not care about intermediate order until each selection is done.</p>
<p>Each pass fixes one position permanently.</p>
<section id="step-by-step-process-2" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-2">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Find smallest in unsorted part</td>
<td>Move it to front</td>
</tr>
<tr class="even">
<td>2</td>
<td>Repeat for next unsorted index</td>
<td>Grow sorted prefix</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Stop when entire array sorted</td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-3" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-3">Tiny Code (Easy Versions)</h3>
<section id="c-3" class="level4">
<h4 class="anchored" data-anchor-id="c-3">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> selection_sort<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> min_idx <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;</span> n<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>j<span class="op">]</span> <span class="op">&lt;</span> a<span class="op">[</span>min_idx<span class="op">])</span> <span class="op">{</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>                min_idx <span class="op">=</span> j<span class="op">;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        a<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>min_idx<span class="op">];</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        a<span class="op">[</span>min_idx<span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    selection_sort<span class="op">(</span>a<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-3" class="level4">
<h4 class="anchored" data-anchor-id="python-3">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> selection_sort(a):</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(a)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n <span class="op">-</span> <span class="dv">1</span>):</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        min_idx <span class="op">=</span> i</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(i <span class="op">+</span> <span class="dv">1</span>, n):</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> a[j] <span class="op">&lt;</span> a[min_idx]:</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>                min_idx <span class="op">=</span> j</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        a[i], a[min_idx] <span class="op">=</span> a[min_idx], a[i]</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>selection_sort(arr)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-3" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-3">Why It Matters</h3>
<ul>
<li>Simple, deterministic sorting algorithm</li>
<li>Demonstrates selection rather than swapping neighbors</li>
<li>Good for small lists and teaching purposes</li>
<li>Useful when minimizing number of swaps matters</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-3" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-3">A Gentle Proof (Why It Works)</h3>
<p>At each iteration, the smallest remaining element is placed at its correct position. Once placed, it never moves again.</p>
<p>The algorithm performs n−1 selections and at most n−1 swaps. Each selection requires scanning the unsorted part: O(n) comparisons.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Pass</th>
<th>Search Range</th>
<th>Comparisons</th>
<th>Swap</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>n elements</td>
<td>n−1</td>
<td>1</td>
</tr>
<tr class="even">
<td>2</td>
<td>n−1 elements</td>
<td>n−2</td>
<td>1</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr class="even">
<td>n−1</td>
<td>2 elements</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Total comparisons = n(n−1)/2 = O(n²)</p>
</section>
<section id="try-it-yourself-3" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-3">Try It Yourself</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Task</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Trace sorting of [5, 3, 4, 1, 2] step by step</td>
</tr>
<tr class="even">
<td>2</td>
<td>Count total swaps and comparisons</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Modify to find maximum each pass (descending order)</td>
</tr>
<tr class="even">
<td>4</td>
<td>Add print statements to see progress</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Compare with Bubble Sort efficiency</td>
</tr>
</tbody>
</table>
</section>
<section id="test-cases-3" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-3">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Passes</th>
<th>Swaps</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 2, 1]</td>
<td>[1, 2, 3]</td>
<td>2</td>
<td>2</td>
</tr>
<tr class="even">
<td>[1, 2, 3]</td>
<td>[1, 2, 3]</td>
<td>2</td>
<td>0</td>
</tr>
<tr class="odd">
<td>[5, 3, 4, 1, 2]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>4</td>
<td>4</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-3" class="level3">
<h3 class="anchored" data-anchor-id="complexity-3">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Time (Best)</td>
<td>O(n²)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>No (swap may break order)</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Selection Sort is a calm, methodical sorter. It does not adapt, but it does not waste swaps either. It is the simplest demonstration of the idea: find the smallest, place it, repeat.</p>
</section>
<section id="double-selection-sort" class="level3">
<h3 class="anchored" data-anchor-id="double-selection-sort">105 Double Selection Sort</h3>
<p>Double Selection Sort is a refined version of Selection Sort. Instead of finding just the smallest element each pass, it finds both the smallest and the largest, placing them at the beginning and end simultaneously. This halves the number of passes needed.</p>
</section>
<section id="what-problem-are-we-solving-4" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-4">What Problem Are We Solving?</h3>
<p>Standard Selection Sort finds one element per pass. Double Selection Sort improves efficiency by selecting two elements per pass, one from each end, reducing total iterations by about half.</p>
<p>It is useful when both extremes can be found in a single scan, improving constant factors while keeping overall simplicity.</p>
<section id="example-4" class="level4">
<h4 class="anchored" data-anchor-id="example-4">Example</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 22%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 43%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Array State</th>
<th>Min</th>
<th>Max</th>
<th>Action</th>
<th>Sorted Part</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>[5, 3, 4, 1, 2]</td>
<td>1</td>
<td>5</td>
<td>Swap 1 → front, 5 → back</td>
<td>[1, …, 5]</td>
</tr>
<tr class="even">
<td>1</td>
<td>[1, 3, 4, 2, 5]</td>
<td>2</td>
<td>4</td>
<td>Swap 2 → index 1, 4 → index 3</td>
<td>[1,2, …,4,5]</td>
</tr>
<tr class="odd">
<td>2</td>
<td>[1, 2, 3, 4, 5]</td>
<td>3</td>
<td>3</td>
<td>Middle element sorted</td>
<td>[1,2,3,4,5]</td>
</tr>
</tbody>
</table>
<p>Sorted in 3 passes instead of 5.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-4" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-4">How Does It Work (Plain Language)?</h3>
<p>Double Selection Sort narrows the unsorted range from both sides. Each pass:</p>
<ol type="1">
<li>Scans the unsorted section once.</li>
<li>Finds both the smallest and largest elements.</li>
<li>Swaps them to their correct positions at the front and back.</li>
</ol>
<p>Then it shrinks the bounds and repeats.</p>
<section id="step-by-step-process-3" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-3">Step-by-Step Process</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 50%">
<col style="width: 44%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Find smallest and largest in unsorted</td>
<td>Move smallest left, largest right</td>
</tr>
<tr class="even">
<td>2</td>
<td>Shrink unsorted range</td>
<td>Repeat search</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Stop when range collapses</td>
<td>Array sorted</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-4" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-4">Tiny Code (Easy Versions)</h3>
<section id="c-4" class="level4">
<h4 class="anchored" data-anchor-id="c-4">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> double_selection_sort<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> right <span class="op">=</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>left <span class="op">&lt;</span> right<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> min_idx <span class="op">=</span> left<span class="op">,</span> max_idx <span class="op">=</span> left<span class="op">;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> left<span class="op">;</span> i <span class="op">&lt;=</span> right<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> a<span class="op">[</span>min_idx<span class="op">])</span> min_idx <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> a<span class="op">[</span>max_idx<span class="op">])</span> max_idx <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Move smallest to front</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">[</span>left<span class="op">];</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>        a<span class="op">[</span>left<span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>min_idx<span class="op">];</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>        a<span class="op">[</span>min_idx<span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>        <span class="co">// If max element was swapped into min_idx</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>max_idx <span class="op">==</span> left<span class="op">)</span> max_idx <span class="op">=</span> min_idx<span class="op">;</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Move largest to back</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>        temp <span class="op">=</span> a<span class="op">[</span>right<span class="op">];</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>        a<span class="op">[</span>right<span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>max_idx<span class="op">];</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>        a<span class="op">[</span>max_idx<span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>        left<span class="op">++;</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>        right<span class="op">--;</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>    double_selection_sort<span class="op">(</span>a<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-4" class="level4">
<h4 class="anchored" data-anchor-id="python-4">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> double_selection_sort(a):</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    left, right <span class="op">=</span> <span class="dv">0</span>, <span class="bu">len</span>(a) <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> left <span class="op">&lt;</span> right:</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>        min_idx, max_idx <span class="op">=</span> left, left</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(left, right <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> a[i] <span class="op">&lt;</span> a[min_idx]:</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>                min_idx <span class="op">=</span> i</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> a[i] <span class="op">&gt;</span> a[max_idx]:</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>                max_idx <span class="op">=</span> i</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        a[left], a[min_idx] <span class="op">=</span> a[min_idx], a[left]</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> max_idx <span class="op">==</span> left:</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>            max_idx <span class="op">=</span> min_idx</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>        a[right], a[max_idx] <span class="op">=</span> a[max_idx], a[right]</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>        left <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>        right <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>double_selection_sort(arr)</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-4" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-4">Why It Matters</h3>
<ul>
<li>Improves Selection Sort by reducing passes</li>
<li>Selects two extremes in one scan</li>
<li>Fewer total swaps and comparisons</li>
<li>Demonstrates bidirectional selection</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-4" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-4">A Gentle Proof (Why It Works)</h3>
<p>Each pass moves two elements to their correct final positions. Thus, after k passes, the first k and last k positions are sorted. The unsorted range shrinks by 2 each pass.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Pass</th>
<th>Range Checked</th>
<th>Elements Fixed</th>
<th>Remaining Unsorted</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>[0..n−1]</td>
<td>2</td>
<td>n−2</td>
</tr>
<tr class="even">
<td>2</td>
<td>[1..n−2]</td>
<td>2</td>
<td>n−4</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
<p>Total passes = n/2, each O(n) scan ⇒ O(n²) overall.</p>
</section>
<section id="try-it-yourself-4" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-4">Try It Yourself</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Task</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Sort [5, 3, 4, 1, 2] manually</td>
</tr>
<tr class="even">
<td>2</td>
<td>Count passes and swaps</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Print range boundaries each pass</td>
</tr>
<tr class="even">
<td>4</td>
<td>Compare to Selection Sort passes</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Modify for descending order</td>
</tr>
</tbody>
</table>
</section>
<section id="test-cases-4" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-4">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Passes</th>
<th>Swaps</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 2, 1]</td>
<td>[1, 2, 3]</td>
<td>2</td>
<td>2</td>
</tr>
<tr class="even">
<td>[1, 2, 3, 4, 5]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>2</td>
<td>0</td>
</tr>
<tr class="odd">
<td>[5, 3, 4, 1, 2]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>3</td>
<td>6</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-4" class="level3">
<h3 class="anchored" data-anchor-id="complexity-4">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Time (Best)</td>
<td>O(n²)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Double Selection Sort keeps Selection Sort’s simplicity but doubles its reach. By grabbing both ends each pass, it highlights how symmetry can bring efficiency without new data structures.</p>
</section>
<section id="insertion-sort" class="level3">
<h3 class="anchored" data-anchor-id="insertion-sort">106 Insertion Sort</h3>
<p>Insertion Sort builds the sorted array one element at a time, like sorting playing cards in your hand. It takes each new element and inserts it into the correct position among those already sorted.</p>
</section>
<section id="what-problem-are-we-solving-5" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-5">What Problem Are We Solving?</h3>
<p>We want a simple, stable way to sort elements by inserting each into place within the growing sorted section. This works especially well for small arrays or nearly sorted data.</p>
<p>Insertion Sort splits the array into two parts:</p>
<ul>
<li>Sorted prefix: elements that are already in order</li>
<li>Unsorted suffix: remaining elements yet to be inserted</li>
</ul>
<section id="example-5" class="level4">
<h4 class="anchored" data-anchor-id="example-5">Example</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 18%">
<col style="width: 19%">
<col style="width: 38%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Array State</th>
<th>Element Inserted</th>
<th>Action</th>
<th>Sorted Prefix</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>[5, 3, 4, 1, 2]</td>
<td>-</td>
<td>Start with first element sorted</td>
<td>[5]</td>
</tr>
<tr class="even">
<td>1</td>
<td>[3, 5, 4, 1, 2]</td>
<td>3</td>
<td>Insert 3 before 5</td>
<td>[3, 5]</td>
</tr>
<tr class="odd">
<td>2</td>
<td>[3, 4, 5, 1, 2]</td>
<td>4</td>
<td>Insert 4 before 5</td>
<td>[3, 4, 5]</td>
</tr>
<tr class="even">
<td>3</td>
<td>[1, 3, 4, 5, 2]</td>
<td>1</td>
<td>Insert 1 at front</td>
<td>[1, 3, 4, 5]</td>
</tr>
<tr class="odd">
<td>4</td>
<td>[1, 2, 3, 4, 5]</td>
<td>2</td>
<td>Insert 2 after 1</td>
<td>[1, 2, 3, 4, 5]</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-5" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-5">How Does It Work (Plain Language)?</h3>
<p>Imagine picking cards one by one and placing each into the correct spot among those already held. Insertion Sort repeats this logic for arrays:</p>
<ol type="1">
<li>Start with the first element (already sorted)</li>
<li>Take the next element</li>
<li>Compare backward through the sorted section</li>
<li>Shift elements to make space and insert it</li>
</ol>
<section id="step-by-step-process-4" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-4">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Take next unsorted element</td>
<td></td>
</tr>
<tr class="even">
<td>2</td>
<td>Move through sorted part to find position</td>
<td></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Shift larger elements right</td>
<td></td>
</tr>
<tr class="even">
<td>4</td>
<td>Insert element in correct position</td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-5" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-5">Tiny Code (Easy Versions)</h3>
<section id="c-5" class="level4">
<h4 class="anchored" data-anchor-id="c-5">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> insertion_sort<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> key <span class="op">=</span> a<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>j <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> a<span class="op">[</span>j<span class="op">]</span> <span class="op">&gt;</span> key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>            a<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>            j<span class="op">--;</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>        a<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    insertion_sort<span class="op">(</span>a<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-5" class="level4">
<h4 class="anchored" data-anchor-id="python-5">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> insertion_sort(a):</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(a)):</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> a[i]</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>        j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&gt;=</span> <span class="dv">0</span> <span class="kw">and</span> a[j] <span class="op">&gt;</span> key:</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>            a[j <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> a[j]</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>            j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>        a[j <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> key</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>insertion_sort(arr)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-5" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-5">Why It Matters</h3>
<ul>
<li>Simple, intuitive, and stable</li>
<li>Works well for small or nearly sorted arrays</li>
<li>Commonly used as a subroutine in advanced algorithms (like Timsort)</li>
<li>Demonstrates concept of incremental insertion</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-5" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-5">A Gentle Proof (Why It Works)</h3>
<p>At step <code>i</code>, the first <code>i</code> elements are sorted. Inserting element <code>a[i]</code> keeps the prefix sorted. Each insertion shifts elements greater than <code>key</code> to the right, ensuring correct position.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Pass</th>
<th>Sorted Portion</th>
<th>Comparisons (Worst)</th>
<th>Shifts (Worst)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>[a₀,a₁]</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td>2</td>
<td>[a₀,a₁,a₂]</td>
<td>2</td>
<td>2</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr class="even">
<td>n-1</td>
<td>[a₀…aₙ₋₁]</td>
<td>n-1</td>
<td>n-1</td>
</tr>
</tbody>
</table>
<p>Total ≈ (n²)/2 operations in the worst case.</p>
<p>If already sorted, only one comparison per element → O(n).</p>
</section>
<section id="try-it-yourself-5" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-5">Try It Yourself</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Task</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Sort [5, 3, 4, 1, 2] step by step</td>
</tr>
<tr class="even">
<td>2</td>
<td>Count shifts and comparisons</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Modify to sort descending</td>
</tr>
<tr class="even">
<td>4</td>
<td>Compare runtime with Bubble Sort</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Insert print statements to trace insertions</td>
</tr>
</tbody>
</table>
</section>
<section id="test-cases-5" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-5">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Passes</th>
<th>Swaps/Shifts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 2, 1]</td>
<td>[1, 2, 3]</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="even">
<td>[1, 2, 3]</td>
<td>[1, 2, 3]</td>
<td>2</td>
<td>0</td>
</tr>
<tr class="odd">
<td>[5, 3, 4, 1, 2]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>4</td>
<td>8</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-5" class="level3">
<h3 class="anchored" data-anchor-id="complexity-5">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Insertion Sort captures the logic of careful, incremental organization. It is slow for large random lists, but elegant, stable, and highly efficient when the data is already close to sorted.</p>
</section>
<section id="binary-insertion-sort" class="level3">
<h3 class="anchored" data-anchor-id="binary-insertion-sort">107 Binary Insertion Sort</h3>
<p>Binary Insertion Sort improves on traditional Insertion Sort by using binary search to find the correct insertion point instead of linear scanning. This reduces the number of comparisons from linear to logarithmic per insertion, while keeping the same stable, adaptive behavior.</p>
</section>
<section id="what-problem-are-we-solving-6" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-6">What Problem Are We Solving?</h3>
<p>Standard Insertion Sort searches linearly through the sorted part to find where to insert the new element. If the sorted prefix is long, this costs O(n) comparisons per element.</p>
<p>Binary Insertion Sort replaces that with binary search, which finds the position in O(log n) time, while still performing O(n) shifts.</p>
<p>This makes it a good choice when comparisons are expensive but shifting is cheap.</p>
<section id="example-6" class="level4">
<h4 class="anchored" data-anchor-id="example-6">Example</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 17%">
<col style="width: 20%">
<col style="width: 38%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Sorted Portion</th>
<th>Element to Insert</th>
<th>Insertion Index (Binary Search)</th>
<th>Resulting Array</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>[5]</td>
<td>3</td>
<td>0</td>
<td>[3, 5, 4, 1, 2]</td>
</tr>
<tr class="even">
<td>1</td>
<td>[3, 5]</td>
<td>4</td>
<td>1</td>
<td>[3, 4, 5, 1, 2]</td>
</tr>
<tr class="odd">
<td>2</td>
<td>[3, 4, 5]</td>
<td>1</td>
<td>0</td>
<td>[1, 3, 4, 5, 2]</td>
</tr>
<tr class="even">
<td>3</td>
<td>[1, 3, 4, 5]</td>
<td>2</td>
<td>1</td>
<td>[1, 2, 3, 4, 5]</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-6" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-6">How Does It Work (Plain Language)?</h3>
<p>Just like Insertion Sort, we build a sorted prefix one element at a time. But instead of scanning backwards linearly, we use binary search to locate the correct position to insert the next element.</p>
<p>We still need to shift larger elements to the right, but we now know exactly where to stop.</p>
<section id="step-by-step-process-5" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-5">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Perform binary search in sorted prefix</td>
<td>Find insertion point</td>
</tr>
<tr class="even">
<td>2</td>
<td>Shift larger elements right</td>
<td>Create space</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Insert element at found index</td>
<td>Maintain order</td>
</tr>
<tr class="even">
<td>4</td>
<td>Repeat until sorted</td>
<td>Fully sorted array</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-6" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-6">Tiny Code (Easy Versions)</h3>
<section id="c-6" class="level4">
<h4 class="anchored" data-anchor-id="c-6">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> binary_search<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> item<span class="op">,</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>low <span class="op">&lt;=</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> <span class="op">(</span>low <span class="op">+</span> high<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>item <span class="op">==</span> a<span class="op">[</span>mid<span class="op">])</span> <span class="cf">return</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>item <span class="op">&gt;</span> a<span class="op">[</span>mid<span class="op">])</span> low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> low<span class="op">;</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> binary_insertion_sort<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> key <span class="op">=</span> a<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> pos <span class="op">=</span> binary_search<span class="op">(</span>a<span class="op">,</span> key<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> j<span class="op">);</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>j <span class="op">&gt;=</span> pos<span class="op">)</span> <span class="op">{</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>            a<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>            j<span class="op">--;</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>        a<span class="op">[</span>pos<span class="op">]</span> <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>    binary_insertion_sort<span class="op">(</span>a<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-6" class="level4">
<h4 class="anchored" data-anchor-id="python-6">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> binary_search(a, item, low, high):</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> low <span class="op">&lt;=</span> high:</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (low <span class="op">+</span> high) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> item <span class="op">==</span> a[mid]:</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> item <span class="op">&gt;</span> a[mid]:</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> low</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> binary_insertion_sort(a):</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(a)):</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> a[i]</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> binary_search(a, key, <span class="dv">0</span>, i <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>        a[pos <span class="op">+</span> <span class="dv">1</span> : i <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> a[pos : i]</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>        a[pos] <span class="op">=</span> key</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>binary_insertion_sort(arr)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-6" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-6">Why It Matters</h3>
<ul>
<li>Fewer comparisons than standard Insertion Sort</li>
<li>Retains stability and adaptiveness</li>
<li>Great when comparisons dominate runtime (e.g., complex objects)</li>
<li>Demonstrates combining search and insertion ideas</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-6" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-6">A Gentle Proof (Why It Works)</h3>
<p>Binary search always finds the correct index in O(log i) comparisons for the i-th element. Shifting elements still takes O(i) time. So total cost:</p>
<p><span class="math display">\[
T(n) = \sum_{i=1}^{n-1} (\log i + i) = O(n^2)
\]</span></p>
<p>but with fewer comparisons than standard Insertion Sort.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Comparisons</th>
<th>Shifts</th>
<th>Total Cost</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>log₂1 = 0</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td>2</td>
<td>log₂2 = 1</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="odd">
<td>3</td>
<td>log₂3 ≈ 2</td>
<td>3</td>
<td>5</td>
</tr>
<tr class="even">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-6" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-6">Try It Yourself</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Task</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Sort [5, 3, 4, 1, 2] step by step</td>
</tr>
<tr class="even">
<td>2</td>
<td>Print insertion index each pass</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Compare comparisons vs normal Insertion Sort</td>
</tr>
<tr class="even">
<td>4</td>
<td>Modify to sort descending</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Try with already sorted list</td>
</tr>
</tbody>
</table>
</section>
<section id="test-cases-6" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-6">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Comparisons</th>
<th>Shifts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 2, 1]</td>
<td>[1, 2, 3]</td>
<td>~3</td>
<td>3</td>
</tr>
<tr class="even">
<td>[1, 2, 3]</td>
<td>[1, 2, 3]</td>
<td>~2</td>
<td>0</td>
</tr>
<tr class="odd">
<td>[5, 3, 4, 1, 2]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>~7</td>
<td>8</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-6" class="level3">
<h3 class="anchored" data-anchor-id="complexity-6">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Time (Best)</td>
<td>O(n log n) comparisons, O(n) shifts</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Binary Insertion Sort is a thoughtful balance, smarter searches, same simple structure. It reminds us that even small changes (like using binary search) can bring real efficiency when precision matters.</p>
</section>
<section id="gnome-sort" class="level3">
<h3 class="anchored" data-anchor-id="gnome-sort">108 Gnome Sort</h3>
<p>Gnome Sort is a simple sorting algorithm that works by swapping adjacent elements, similar to Bubble Sort, but with a twist, it moves backward whenever a swap is made. Imagine a gnome tidying flower pots: each time it finds two out of order, it swaps them and steps back to recheck the previous pair.</p>
</section>
<section id="what-problem-are-we-solving-7" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-7">What Problem Are We Solving?</h3>
<p>We want a simple, intuitive, and in-place sorting method that uses local swaps to restore order. Gnome Sort is particularly easy to implement and works like an insertion sort with adjacent swaps instead of shifting elements.</p>
<p>It’s not the fastest, but it’s charmingly simple, perfect for understanding local correction logic.</p>
<section id="example-7" class="level4">
<h4 class="anchored" data-anchor-id="example-7">Example</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 13%">
<col style="width: 25%">
<col style="width: 55%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Position</th>
<th>Array State</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>1</td>
<td>[5, 3, 4, 1, 2]</td>
<td>Compare 5 &gt; 3 → Swap, move back</td>
</tr>
<tr class="even">
<td>1</td>
<td>0</td>
<td>[3, 5, 4, 1, 2]</td>
<td>At start → move forward</td>
</tr>
<tr class="odd">
<td>2</td>
<td>1</td>
<td>[3, 5, 4, 1, 2]</td>
<td>Compare 5 &gt; 4 → Swap, move back</td>
</tr>
<tr class="even">
<td>3</td>
<td>0</td>
<td>[3, 4, 5, 1, 2]</td>
<td>At start → move forward</td>
</tr>
<tr class="odd">
<td>4</td>
<td>1</td>
<td>[3, 4, 5, 1, 2]</td>
<td>Compare 4 &lt; 5 → OK → move forward</td>
</tr>
<tr class="even">
<td>5</td>
<td>3</td>
<td>[3, 4, 5, 1, 2]</td>
<td>Compare 5 &gt; 1 → Swap, move back</td>
</tr>
<tr class="odd">
<td>6</td>
<td>2</td>
<td>[3, 4, 1, 5, 2]</td>
<td>Compare 4 &gt; 1 → Swap, move back</td>
</tr>
<tr class="even">
<td>7</td>
<td>1</td>
<td>[3, 1, 4, 5, 2]</td>
<td>Compare 3 &gt; 1 → Swap, move back</td>
</tr>
<tr class="odd">
<td>8</td>
<td>0</td>
<td>[1, 3, 4, 5, 2]</td>
<td>At start → move forward</td>
</tr>
<tr class="even">
<td>9</td>
<td>…</td>
<td>…</td>
<td>Continue until sorted [1,2,3,4,5]</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-7" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-7">How Does It Work (Plain Language)?</h3>
<p>The algorithm “walks” through the list:</p>
<ol type="1">
<li>If the current element is greater or equal to the previous one, move forward.</li>
<li>If not, swap them and move one step back.</li>
<li>Repeat until the end is reached.</li>
</ol>
<p>If you reach the start of the array, step forward.</p>
<p>It’s like Insertion Sort, but instead of shifting, it walks and swaps.</p>
<section id="step-by-step-process-6" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-6">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Condition</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>If A[i] ≥ A[i−1]</td>
<td>Move forward (i++)</td>
<td></td>
</tr>
<tr class="even">
<td>If A[i] &lt; A[i−1]</td>
<td>Swap, move backward (i−−)</td>
<td></td>
</tr>
<tr class="odd">
<td>If i == 0</td>
<td>Move forward (i++)</td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-7" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-7">Tiny Code (Easy Versions)</h3>
<section id="c-7" class="level4">
<h4 class="anchored" data-anchor-id="c-7">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> gnome_sort<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> a<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;=</span> a<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>            i<span class="op">++;</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>            a<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>            a<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>            i<span class="op">--;</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    gnome_sort<span class="op">(</span>a<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-7" class="level4">
<h4 class="anchored" data-anchor-id="python-7">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> gnome_sort(a):</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(a)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> n:</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> i <span class="op">==</span> <span class="dv">0</span> <span class="kw">or</span> a[i] <span class="op">&gt;=</span> a[i <span class="op">-</span> <span class="dv">1</span>]:</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>            a[i], a[i <span class="op">-</span> <span class="dv">1</span>] <span class="op">=</span> a[i <span class="op">-</span> <span class="dv">1</span>], a[i]</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>            i <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>gnome_sort(arr)</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-7" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-7">Why It Matters</h3>
<ul>
<li>Demonstrates sorting through local correction</li>
<li>Visually intuitive (good for animation)</li>
<li>Requires no additional memory</li>
<li>Stable and adaptive on partially sorted data</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-7" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-7">A Gentle Proof (Why It Works)</h3>
<p>Each time we swap out-of-order elements, we step back to verify order with the previous one. Thus, by the time we move forward again, all prior elements are guaranteed to be sorted.</p>
<p>Gnome Sort effectively performs Insertion Sort via adjacent swaps.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Pass</th>
<th>Swaps</th>
<th>Movement</th>
<th>Sorted Portion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Few</td>
<td>Backward</td>
<td>Expands gradually</td>
</tr>
<tr class="even">
<td>n</td>
<td>Many</td>
<td>Oscillating</td>
<td>Fully sorted</td>
</tr>
</tbody>
</table>
<p>Worst-case swaps: O(n²) Best-case (already sorted): O(n)</p>
</section>
<section id="try-it-yourself-7" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-7">Try It Yourself</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Task</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Sort [5, 3, 4, 1, 2] step by step</td>
</tr>
<tr class="even">
<td>2</td>
<td>Trace <code>i</code> pointer movement</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Compare with Insertion Sort shifts</td>
</tr>
<tr class="even">
<td>4</td>
<td>Animate using console output</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Try reversed input to see maximum swaps</td>
</tr>
</tbody>
</table>
</section>
<section id="test-cases-7" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-7">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Swaps</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 2, 1]</td>
<td>[1, 2, 3]</td>
<td>3</td>
<td>Many backtracks</td>
</tr>
<tr class="even">
<td>[1, 2, 3]</td>
<td>[1, 2, 3]</td>
<td>0</td>
<td>Already sorted</td>
</tr>
<tr class="odd">
<td>[5, 3, 4, 1, 2]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>8</td>
<td>Moderate swaps</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-7" class="level3">
<h3 class="anchored" data-anchor-id="complexity-7">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Gnome Sort is a whimsical algorithm that teaches persistence: every time something’s out of order, step back, fix it, and keep going. It’s inefficient for large data but delightful for learning and visualization.</p>
</section>
<section id="odd-even-sort" class="level3">
<h3 class="anchored" data-anchor-id="odd-even-sort">109 Odd-Even Sort</h3>
<p>Odd-Even Sort, also known as Brick Sort, is a parallel-friendly variant of Bubble Sort. It alternates between comparing odd-even and even-odd indexed pairs to gradually sort the array. It’s especially useful in parallel processing where pairs can be compared simultaneously.</p>
</section>
<section id="what-problem-are-we-solving-8" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-8">What Problem Are We Solving?</h3>
<p>Bubble Sort compares every adjacent pair in one sweep. Odd-Even Sort breaks this into two alternating phases:</p>
<ul>
<li>Odd phase: compare (1,2), (3,4), (5,6), …</li>
<li>Even phase: compare (0,1), (2,3), (4,5), …</li>
</ul>
<p>Repeating these two passes ensures all adjacent pairs eventually become sorted.</p>
<p>It’s ideal for parallel systems or hardware implementations since comparisons in each phase are independent.</p>
<section id="example-8" class="level4">
<h4 class="anchored" data-anchor-id="example-8">Example</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Type</th>
<th>Array State</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>Init</td>
<td>[5, 3, 4, 1, 2]</td>
<td>Start</td>
</tr>
<tr class="even">
<td>1</td>
<td>Even</td>
<td>[3, 5, 1, 4, 2]</td>
<td>Compare (0,1), (2,3), (4,5)</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Odd</td>
<td>[3, 1, 5, 2, 4]</td>
<td>Compare (1,2), (3,4)</td>
</tr>
<tr class="even">
<td>3</td>
<td>Even</td>
<td>[1, 3, 2, 4, 5]</td>
<td>Compare (0,1), (2,3), (4,5)</td>
</tr>
<tr class="odd">
<td>4</td>
<td>Odd</td>
<td>[1, 2, 3, 4, 5]</td>
<td>Compare (1,2), (3,4) → Sorted</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-8" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-8">How Does It Work (Plain Language)?</h3>
<p>Odd-Even Sort moves elements closer to their correct position with every alternating phase. It works like a traffic system: cars at even intersections move, then cars at odd intersections move. Over time, all cars (elements) line up in order.</p>
<section id="step-by-step-process-7" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-7">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Compare all even-odd pairs</td>
<td>Swap if out of order</td>
</tr>
<tr class="even">
<td>2</td>
<td>Compare all odd-even pairs</td>
<td>Swap if out of order</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Repeat until no swaps occur</td>
<td>Sorted array</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-8" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-8">Tiny Code (Easy Versions)</h3>
<section id="c-8" class="level4">
<h4 class="anchored" data-anchor-id="c-8">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdbool.h&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> odd_even_sort<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">bool</span> sorted <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(!</span>sorted<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>        sorted <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Even phase</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">+=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>                <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>                a<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>                a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>                sorted <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Odd phase</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">+=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>                <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>                a<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>                a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>                sorted <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>    odd_even_sort<span class="op">(</span>a<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-8" class="level4">
<h4 class="anchored" data-anchor-id="python-8">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> odd_even_sort(a):</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(a)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">sorted</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="kw">not</span> <span class="bu">sorted</span>:</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">sorted</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Even phase</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, n <span class="op">-</span> <span class="dv">1</span>, <span class="dv">2</span>):</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> a[i] <span class="op">&gt;</span> a[i <span class="op">+</span> <span class="dv">1</span>]:</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>                a[i], a[i <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> a[i <span class="op">+</span> <span class="dv">1</span>], a[i]</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>                <span class="bu">sorted</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Odd phase</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n <span class="op">-</span> <span class="dv">1</span>, <span class="dv">2</span>):</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> a[i] <span class="op">&gt;</span> a[i <span class="op">+</span> <span class="dv">1</span>]:</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>                a[i], a[i <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> a[i <span class="op">+</span> <span class="dv">1</span>], a[i]</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>                <span class="bu">sorted</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>odd_even_sort(arr)</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-8" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-8">Why It Matters</h3>
<ul>
<li>Demonstrates parallel sorting principles</li>
<li>Conceptually simple, easy to visualize</li>
<li>Can be implemented on parallel processors (SIMD, GPU)</li>
<li>Stable and in-place</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-8" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-8">A Gentle Proof (Why It Works)</h3>
<p>Odd-Even Sort systematically removes all inversions by alternating comparisons:</p>
<ul>
<li>Even phase fixes pairs (0,1), (2,3), (4,5), …</li>
<li>Odd phase fixes pairs (1,2), (3,4), (5,6), …</li>
</ul>
<p>After n iterations, every element “bubbles” to its position. It behaves like Bubble Sort but is more structured and phase-based.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Comparisons</th>
<th>Independent?</th>
<th>Swaps</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Even</td>
<td>⌊n/2⌋</td>
<td>Yes</td>
<td>Some</td>
</tr>
<tr class="even">
<td>Odd</td>
<td>⌊n/2⌋</td>
<td>Yes</td>
<td>Some</td>
</tr>
</tbody>
</table>
<p>Total complexity remains O(n²), but parallelizable phases reduce wall-clock time.</p>
</section>
<section id="try-it-yourself-8" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-8">Try It Yourself</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Task</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Trace [5, 3, 4, 1, 2] through phases</td>
</tr>
<tr class="even">
<td>2</td>
<td>Count number of phases to sort</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Implement using threads (parallel version)</td>
</tr>
<tr class="even">
<td>4</td>
<td>Compare with Bubble Sort</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Animate even and odd passes</td>
</tr>
</tbody>
</table>
</section>
<section id="test-cases-8" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-8">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Phases</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 2, 1]</td>
<td>[1, 2, 3]</td>
<td>3</td>
<td>Alternating passes</td>
</tr>
<tr class="even">
<td>[1, 2, 3]</td>
<td>[1, 2, 3]</td>
<td>1</td>
<td>Early stop</td>
</tr>
<tr class="odd">
<td>[5, 3, 4, 1, 2]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>4</td>
<td>Moderate passes</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-8" class="level3">
<h3 class="anchored" data-anchor-id="complexity-8">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Odd-Even Sort shows that structure matters. By alternating phases, it opens the door to parallel sorting, where independent comparisons can run at once, a neat step toward high-performance sorting.</p>
</section>
<section id="stooge-sort" class="level3">
<h3 class="anchored" data-anchor-id="stooge-sort">110 Stooge Sort</h3>
<p>Stooge Sort is one of the most unusual and quirky recursive sorting algorithms. It’s not efficient, but it’s fascinating because it sorts by recursively sorting overlapping sections of the array, a great way to study recursion and algorithmic curiosity.</p>
</section>
<section id="what-problem-are-we-solving-9" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-9">What Problem Are We Solving?</h3>
<p>Stooge Sort doesn’t aim for speed. Instead, it provides an example of a recursive divide-and-conquer strategy that’s neither efficient nor conventional. It divides the array into overlapping parts and recursively sorts them, twice on the first two-thirds, once on the last two-thirds.</p>
<p>This algorithm is often used for educational purposes to demonstrate how recursion can be applied in non-traditional ways.</p>
<section id="example-9" class="level4">
<h4 class="anchored" data-anchor-id="example-9">Example</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Range</th>
<th>Action</th>
<th>Array State</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>[0..4]</td>
<td>Start sorting [5,3,4,1,2]</td>
<td>[5,3,4,1,2]</td>
</tr>
<tr class="even">
<td>1</td>
<td>[0..3]</td>
<td>Sort first 2/3 (4 elements)</td>
<td>[3,4,1,5,2]</td>
</tr>
<tr class="odd">
<td>2</td>
<td>[1..4]</td>
<td>Sort last 2/3 (4 elements)</td>
<td>[3,1,4,2,5]</td>
</tr>
<tr class="even">
<td>3</td>
<td>[0..3]</td>
<td>Sort first 2/3 again (4 elements)</td>
<td>[1,3,2,4,5]</td>
</tr>
<tr class="odd">
<td>4</td>
<td>Repeat</td>
<td>Until subarrays shrink to length 1</td>
<td>[1,2,3,4,5]</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-9" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-9">How Does It Work (Plain Language)?</h3>
<p>If the first element is larger than the last, swap them. Then recursively:</p>
<ol type="1">
<li>Sort the first two-thirds of the array.</li>
<li>Sort the last two-thirds of the array.</li>
<li>Sort the first two-thirds again.</li>
</ol>
<p>It’s like checking the front, then the back, then rechecking the front, until everything settles in order.</p>
<section id="step-by-step-process-8" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-8">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Compare first and last elements; swap if needed</td>
</tr>
<tr class="even">
<td>2</td>
<td>Recursively sort first 2/3 of array</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Recursively sort last 2/3 of array</td>
</tr>
<tr class="even">
<td>4</td>
<td>Recursively sort first 2/3 again</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Stop when subarray length ≤ 1</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-9" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-9">Tiny Code (Easy Versions)</h3>
<section id="c-9" class="level4">
<h4 class="anchored" data-anchor-id="c-9">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> stooge_sort<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> l<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>l<span class="op">]</span> <span class="op">&gt;</span> a<span class="op">[</span>h<span class="op">])</span> <span class="op">{</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">[</span>l<span class="op">];</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>        a<span class="op">[</span>l<span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>h<span class="op">];</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>        a<span class="op">[</span>h<span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>h <span class="op">-</span> l <span class="op">+</span> <span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> t <span class="op">=</span> <span class="op">(</span>h <span class="op">-</span> l <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">/</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>        stooge_sort<span class="op">(</span>a<span class="op">,</span> l<span class="op">,</span> h <span class="op">-</span> t<span class="op">);</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>        stooge_sort<span class="op">(</span>a<span class="op">,</span> l <span class="op">+</span> t<span class="op">,</span> h<span class="op">);</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>        stooge_sort<span class="op">(</span>a<span class="op">,</span> l<span class="op">,</span> h <span class="op">-</span> t<span class="op">);</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>    stooge_sort<span class="op">(</span>a<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-9" class="level4">
<h4 class="anchored" data-anchor-id="python-9">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> stooge_sort(a, l, h):</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> a[l] <span class="op">&gt;</span> a[h]:</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>        a[l], a[h] <span class="op">=</span> a[h], a[l]</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> h <span class="op">-</span> l <span class="op">+</span> <span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">2</span>:</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> (h <span class="op">-</span> l <span class="op">+</span> <span class="dv">1</span>) <span class="op">//</span> <span class="dv">3</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>        stooge_sort(a, l, h <span class="op">-</span> t)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>        stooge_sort(a, l <span class="op">+</span> t, h)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>        stooge_sort(a, l, h <span class="op">-</span> t)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>stooge_sort(arr, <span class="dv">0</span>, <span class="bu">len</span>(arr) <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-9" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-9">Why It Matters</h3>
<ul>
<li>Demonstrates recursive divide-and-conquer logic</li>
<li>A fun counterexample to “more recursion = more speed”</li>
<li>Useful in theoretical discussions or algorithmic humor</li>
<li>Helps build understanding of overlapping subproblems</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-9" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-9">A Gentle Proof (Why It Works)</h3>
<p>At each step, Stooge Sort ensures:</p>
<ul>
<li>The smallest element moves toward the front,</li>
<li>The largest element moves toward the back,</li>
<li>The array converges to sorted order through overlapping recursive calls.</li>
</ul>
<p>Each recursion operates on 2/3 of the range, repeated 3 times, giving recurrence:</p>
<p><span class="math display">\[
T(n) = 3T(2n/3) + O(1)
\]</span></p>
<p>Solving it (using Master Theorem):</p>
<p><span class="math display">\[
T(n) = O(n^{\log_{1.5} 3}) \approx O(n^{2.7095})
\]</span></p>
<p>Slower than Bubble Sort (O(n²))!</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Subarray Length</th>
<th>Recursive Calls</th>
<th>Work per Level</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>n</td>
<td>3</td>
<td>O(1)</td>
<td>Constant</td>
</tr>
<tr class="even">
<td>n/2</td>
<td>3×3</td>
<td>O(3)</td>
<td>Larger</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-9" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-9">Try It Yourself</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Task</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Sort [5, 3, 4, 1, 2] manually and trace recursive calls</td>
</tr>
<tr class="even">
<td>2</td>
<td>Count total swaps</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Print recursion depth</td>
</tr>
<tr class="even">
<td>4</td>
<td>Compare with Merge Sort steps</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Measure runtime for n=10, 100, 1000</td>
</tr>
</tbody>
</table>
</section>
<section id="test-cases-9" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-9">Test Cases</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 24%">
<col style="width: 24%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Recursion Depth</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 2, 1]</td>
<td>[1, 2, 3]</td>
<td>3</td>
<td>Works recursively</td>
</tr>
<tr class="even">
<td>[1, 2, 3]</td>
<td>[1, 2, 3]</td>
<td>1</td>
<td>Minimal swaps</td>
</tr>
<tr class="odd">
<td>[5, 3, 4, 1, 2]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>6</td>
<td>Many overlaps</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-9" class="level3">
<h3 class="anchored" data-anchor-id="complexity-9">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n².7095)</td>
</tr>
<tr class="even">
<td>Time (Best)</td>
<td>O(n².7095)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(log n) recursion stack</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Stooge Sort is a delightful oddity, slow, redundant, but undeniably creative. It reminds us that not every recursive idea leads to efficiency, and that algorithm design is as much art as science.</p>
</section>
</section>
<section id="section-12.-divide-and-conquer-sorting" class="level2">
<h2 class="anchored" data-anchor-id="section-12.-divide-and-conquer-sorting">Section 12. Divide and conquer sorting</h2>
<section id="merge-sort" class="level3">
<h3 class="anchored" data-anchor-id="merge-sort">111 Merge Sort</h3>
<p>Merge Sort is one of the most famous divide-and-conquer sorting algorithms. It splits the array into halves, sorts each half recursively, and then merges the two sorted halves into a single sorted array. It guarantees O(n log n) performance, is stable, and serves as the backbone of many modern sorting libraries.</p>
</section>
<section id="what-problem-are-we-solving-10" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-10">What Problem Are We Solving?</h3>
<p>We want a sorting algorithm that is:</p>
<ul>
<li>Efficient on large datasets (O(n log n))</li>
<li>Stable (preserves equal element order)</li>
<li>Predictable (no worst-case degradation)</li>
</ul>
<p>Merge Sort achieves this by dividing the problem into smaller, easily solved subproblems and combining their results.</p>
<p>It’s ideal for:</p>
<ul>
<li>Sorting linked lists</li>
<li>External sorting (on disk)</li>
<li>Stable merges (for multi-key sorting)</li>
</ul>
<section id="example-10" class="level4">
<h4 class="anchored" data-anchor-id="example-10">Example</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>Input</td>
<td>[5, 3, 4, 1, 2]</td>
</tr>
<tr class="even">
<td>1</td>
<td>Split</td>
<td>[5, 3, 4] and [1, 2]</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Split further</td>
<td>[5], [3, 4], [1], [2]</td>
</tr>
<tr class="even">
<td>3</td>
<td>Sort subarrays</td>
<td>[3, 4, 5], [1, 2]</td>
</tr>
<tr class="odd">
<td>4</td>
<td>Merge sorted halves</td>
<td>[1, 2, 3, 4, 5]</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-10" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-10">How Does It Work (Plain Language)?</h3>
<ol type="1">
<li>Divide: Split the array into two halves.</li>
<li>Conquer: Recursively sort both halves.</li>
<li>Combine: Merge the sorted halves into a single sorted array.</li>
</ol>
<p>Think of it as sorting two smaller piles, then interleaving them in order, like merging two stacks of playing cards.</p>
<section id="step-by-step-process-9" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-9">Step-by-Step Process</h4>
<ul>
<li>If the array has 0 or 1 element, it’s already sorted.</li>
<li>Recursively sort left and right halves.</li>
<li>Use a helper merge function to combine them.</li>
</ul>
</section>
</section>
<section id="tiny-code-easy-versions-10" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-10">Tiny Code (Easy Versions)</h3>
<section id="c-10" class="level4">
<h4 class="anchored" data-anchor-id="c-10">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> merge<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> left<span class="op">,</span> <span class="dt">int</span> mid<span class="op">,</span> <span class="dt">int</span> right<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n1 <span class="op">=</span> mid <span class="op">-</span> left <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> n2 <span class="op">=</span> right <span class="op">-</span> mid<span class="op">;</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> L<span class="op">[</span>n1<span class="op">],</span> R<span class="op">[</span>n2<span class="op">];</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n1<span class="op">;</span> i<span class="op">++)</span> L<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>left <span class="op">+</span> i<span class="op">];</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> n2<span class="op">;</span> j<span class="op">++)</span> R<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>mid <span class="op">+</span> <span class="dv">1</span> <span class="op">+</span> j<span class="op">];</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> k <span class="op">=</span> left<span class="op">;</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n1 <span class="op">&amp;&amp;</span> j <span class="op">&lt;</span> n2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>L<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;=</span> R<span class="op">[</span>j<span class="op">])</span> a<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> L<span class="op">[</span>i<span class="op">++];</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> a<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> R<span class="op">[</span>j<span class="op">++];</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n1<span class="op">)</span> a<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> L<span class="op">[</span>i<span class="op">++];</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>j <span class="op">&lt;</span> n2<span class="op">)</span> a<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> R<span class="op">[</span>j<span class="op">++];</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> merge_sort<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> left<span class="op">,</span> <span class="dt">int</span> right<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>left <span class="op">&lt;</span> right<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> left <span class="op">+</span> <span class="op">(</span>right <span class="op">-</span> left<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>        merge_sort<span class="op">(</span>a<span class="op">,</span> left<span class="op">,</span> mid<span class="op">);</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>        merge_sort<span class="op">(</span>a<span class="op">,</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> right<span class="op">);</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>        merge<span class="op">(</span>a<span class="op">,</span> left<span class="op">,</span> mid<span class="op">,</span> right<span class="op">);</span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>    merge_sort<span class="op">(</span>a<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-10" class="level4">
<h4 class="anchored" data-anchor-id="python-10">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> merge_sort(a):</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(a) <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> <span class="bu">len</span>(a) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>        left <span class="op">=</span> a[:mid]</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>        right <span class="op">=</span> a[mid:]</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>        merge_sort(left)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>        merge_sort(right)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> j <span class="op">=</span> k <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(left) <span class="kw">and</span> j <span class="op">&lt;</span> <span class="bu">len</span>(right):</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> left[i] <span class="op">&lt;=</span> right[j]:</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>                a[k] <span class="op">=</span> left[i]</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>                i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>                a[k] <span class="op">=</span> right[j]</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>                j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>            k <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(left):</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>            a[k] <span class="op">=</span> left[i]</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>            k <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&lt;</span> <span class="bu">len</span>(right):</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>            a[k] <span class="op">=</span> right[j]</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>            j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>            k <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>merge_sort(arr)</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-10" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-10">Why It Matters</h3>
<ul>
<li>Stable: Keeps relative order of equal elements</li>
<li>Deterministic O(n log n): Always efficient</li>
<li>Parallelizable: Subarrays can be sorted independently</li>
<li>Foundation: For hybrid algorithms like TimSort and External Merge Sort</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-10" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-10">A Gentle Proof (Why It Works)</h3>
<p>Merge Sort divides the array into two halves at each level. There are log₂ n levels of recursion, and each merge takes O(n) time.</p>
<p>So total time: <span class="math display">\[
T(n) = O(n \log n)
\]</span></p>
<p>Merging is linear because each element is copied once per level.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Work</th>
<th>Subarrays</th>
<th>Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>O(n)</td>
<td>1</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>2</td>
<td>O(n/2) × 2</td>
<td>2</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>3</td>
<td>O(n/4) × 4</td>
<td>4</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>…</td>
<td>…</td>
<td>…</td>
<td>O(n log n)</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-10" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-10">Try It Yourself</h3>
<ol type="1">
<li>Split [5, 3, 4, 1, 2] into halves step by step.</li>
<li>Merge [3, 5] and [1, 4] manually.</li>
<li>Trace the recursive calls on paper.</li>
<li>Implement an iterative bottom-up version.</li>
<li>Modify to sort descending.</li>
<li>Print arrays at each merge step.</li>
<li>Compare the number of comparisons vs.&nbsp;Bubble Sort.</li>
<li>Try merging two pre-sorted arrays [1,3,5] and [2,4,6].</li>
<li>Sort a list of strings (alphabetically).</li>
<li>Visualize the recursion tree for n = 8.</li>
</ol>
</section>
<section id="test-cases-10" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-10">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 2, 1]</td>
<td>[1, 2, 3]</td>
<td>Standard test</td>
</tr>
<tr class="even">
<td>[1, 2, 3]</td>
<td>[1, 2, 3]</td>
<td>Already sorted</td>
</tr>
<tr class="odd">
<td>[5, 3, 4, 1, 2]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>General case</td>
</tr>
<tr class="even">
<td>[2, 2, 1, 1]</td>
<td>[1, 1, 2, 2]</td>
<td>Tests stability</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-10" class="level3">
<h3 class="anchored" data-anchor-id="complexity-10">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Time (Best)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Merge Sort is your first taste of divide and conquer sorting, calm, reliable, and elegant. It divides the problem cleanly, conquers recursively, and merges with precision.</p>
</section>
<section id="iterative-merge-sort" class="level3">
<h3 class="anchored" data-anchor-id="iterative-merge-sort">112 Iterative Merge Sort</h3>
<p>Iterative Merge Sort is a non-recursive version of Merge Sort that uses bottom-up merging. Instead of dividing recursively, it starts with subarrays of size 1 and iteratively merges them in pairs, doubling the size each round. This makes it ideal for environments where recursion is expensive or limited.</p>
</section>
<section id="what-problem-are-we-solving-11" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-11">What Problem Are We Solving?</h3>
<p>Recursive Merge Sort requires function calls and stack space. In some systems, recursion might be slow or infeasible (e.g.&nbsp;embedded systems, large arrays). Iterative Merge Sort avoids recursion by sorting iteratively, merging subarrays of increasing size until the entire array is sorted.</p>
<p>It’s especially handy for:</p>
<ul>
<li>Iterative environments (no recursion)</li>
<li>Large data sets (predictable memory)</li>
<li>External sorting with iterative passes</li>
</ul>
<section id="example-11" class="level4">
<h4 class="anchored" data-anchor-id="example-11">Example</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 18%">
<col style="width: 54%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Subarray Size</th>
<th>Action</th>
<th>Array State</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>1</td>
<td>Each element is trivially sorted</td>
<td>[5, 3, 4, 1, 2]</td>
</tr>
<tr class="even">
<td>1</td>
<td>1</td>
<td>Merge pairs of 1-element subarrays</td>
<td>[3, 5, 1, 4, 2]</td>
</tr>
<tr class="odd">
<td>2</td>
<td>2</td>
<td>Merge pairs of 2-element subarrays</td>
<td>[1, 3, 4, 5, 2]</td>
</tr>
<tr class="even">
<td>3</td>
<td>4</td>
<td>Merge 4-element sorted block with last</td>
<td>[1, 2, 3, 4, 5]</td>
</tr>
<tr class="odd">
<td>4</td>
<td>Done</td>
<td>Fully sorted</td>
<td>[1, 2, 3, 4, 5]</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-11" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-11">How Does It Work (Plain Language)?</h3>
<p>Think of it as sorting small groups first and then merging those into bigger groups, no recursion required.</p>
<p>Process:</p>
<ol type="1">
<li>Start with subarrays of size 1 (already sorted).</li>
<li>Merge adjacent pairs of subarrays.</li>
<li>Double the subarray size and repeat.</li>
<li>Continue until subarray size ≥ n.</li>
</ol>
<section id="step-by-step-process-10" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-10">Step-by-Step Process</h4>
<ul>
<li>Outer loop: size = 1, 2, 4, 8, … until ≥ n</li>
<li>Inner loop: merge every two adjacent blocks of given size</li>
</ul>
</section>
</section>
<section id="tiny-code-easy-versions-11" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-11">Tiny Code (Easy Versions)</h3>
<section id="c-11" class="level4">
<h4 class="anchored" data-anchor-id="c-11">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> merge<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> left<span class="op">,</span> <span class="dt">int</span> mid<span class="op">,</span> <span class="dt">int</span> right<span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n1 <span class="op">=</span> mid <span class="op">-</span> left <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> n2 <span class="op">=</span> right <span class="op">-</span> mid<span class="op">;</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> L<span class="op">[</span>n1<span class="op">],</span> R<span class="op">[</span>n2<span class="op">];</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n1<span class="op">;</span> i<span class="op">++)</span> L<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>left <span class="op">+</span> i<span class="op">];</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> n2<span class="op">;</span> j<span class="op">++)</span> R<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>mid <span class="op">+</span> <span class="dv">1</span> <span class="op">+</span> j<span class="op">];</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> k <span class="op">=</span> left<span class="op">;</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n1 <span class="op">&amp;&amp;</span> j <span class="op">&lt;</span> n2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>L<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;=</span> R<span class="op">[</span>j<span class="op">])</span> a<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> L<span class="op">[</span>i<span class="op">++];</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> a<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> R<span class="op">[</span>j<span class="op">++];</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n1<span class="op">)</span> a<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> L<span class="op">[</span>i<span class="op">++];</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>j <span class="op">&lt;</span> n2<span class="op">)</span> a<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> R<span class="op">[</span>j<span class="op">++];</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> iterative_merge_sort<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> size <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> size <span class="op">&lt;</span> n<span class="op">;</span> size <span class="op">*=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> left <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> left <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> left <span class="op">+=</span> <span class="dv">2</span> <span class="op">*</span> size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> mid <span class="op">=</span> left <span class="op">+</span> size <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> right <span class="op">=</span> <span class="op">(</span>left <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> size <span class="op">-</span> <span class="dv">1</span> <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">?</span> <span class="op">(</span>left <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> size <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">:</span> <span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>mid <span class="op">&lt;</span> right<span class="op">)</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>                merge<span class="op">(</span>a<span class="op">,</span> left<span class="op">,</span> mid<span class="op">,</span> right<span class="op">);</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>    iterative_merge_sort<span class="op">(</span>a<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-11" class="level4">
<h4 class="anchored" data-anchor-id="python-11">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> merge(a, left, mid, right):</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    left_arr <span class="op">=</span> a[left:mid<span class="op">+</span><span class="dv">1</span>]</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    right_arr <span class="op">=</span> a[mid<span class="op">+</span><span class="dv">1</span>:right<span class="op">+</span><span class="dv">1</span>]</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> j <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    k <span class="op">=</span> left</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(left_arr) <span class="kw">and</span> j <span class="op">&lt;</span> <span class="bu">len</span>(right_arr):</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> left_arr[i] <span class="op">&lt;=</span> right_arr[j]:</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>            a[k] <span class="op">=</span> left_arr[i]</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>            a[k] <span class="op">=</span> right_arr[j]</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>            j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>        k <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(left_arr):</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>        a[k] <span class="op">=</span> left_arr[i]</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>        i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>        k <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> j <span class="op">&lt;</span> <span class="bu">len</span>(right_arr):</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>        a[k] <span class="op">=</span> right_arr[j]</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>        j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>        k <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> iterative_merge_sort(a):</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(a)</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>    size <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> size <span class="op">&lt;</span> n:</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> left <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, n, <span class="dv">2</span> <span class="op">*</span> size):</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>            mid <span class="op">=</span> <span class="bu">min</span>(left <span class="op">+</span> size <span class="op">-</span> <span class="dv">1</span>, n <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>            right <span class="op">=</span> <span class="bu">min</span>(left <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> size <span class="op">-</span> <span class="dv">1</span>, n <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> mid <span class="op">&lt;</span> right:</span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>                merge(a, left, mid, right)</span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>        size <span class="op">*=</span> <span class="dv">2</span></span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>iterative_merge_sort(arr)</span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-11" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-11">Why It Matters</h3>
<ul>
<li>Eliminates recursion (more predictable memory usage)</li>
<li>Still guarantees O(n log n) performance</li>
<li>Useful for iterative, bottom-up, or external sorting</li>
<li>Easier to parallelize since merge operations are independent</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-11" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-11">A Gentle Proof (Why It Works)</h3>
<p>Each iteration doubles the sorted block size. Since each element participates in log₂ n merge levels, and each level costs O(n) work, total cost:</p>
<p><span class="math display">\[
T(n) = O(n \log n)
\]</span></p>
<p>Like recursive Merge Sort, each merge step is linear, and merging subarrays is stable.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Iteration</th>
<th>Block Size</th>
<th>Merges</th>
<th>Work</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>n/2</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>2</td>
<td>2</td>
<td>n/4</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>3</td>
<td>4</td>
<td>n/8</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
<p>Total = O(n log n)</p>
</section>
<section id="try-it-yourself-11" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-11">Try It Yourself</h3>
<ol type="1">
<li>Sort [5, 3, 4, 1, 2] manually using bottom-up passes.</li>
<li>Trace each pass: subarray size = 1 → 2 → 4.</li>
<li>Print intermediate arrays after each pass.</li>
<li>Compare recursion depth with recursive version.</li>
<li>Implement a space-efficient version (in-place merge).</li>
<li>Modify to sort descending.</li>
<li>Apply to linked list version.</li>
<li>Test performance on large array (n = 10⁶).</li>
<li>Visualize merging passes as a tree.</li>
<li>Implement on external storage (file-based).</li>
</ol>
</section>
<section id="test-cases-11" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-11">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 2, 1]</td>
<td>[1, 2, 3]</td>
<td>Small test</td>
</tr>
<tr class="even">
<td>[1, 2, 3]</td>
<td>[1, 2, 3]</td>
<td>Already sorted</td>
</tr>
<tr class="odd">
<td>[5, 3, 4, 1, 2]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>General test</td>
</tr>
<tr class="even">
<td>[2, 2, 1, 1]</td>
<td>[1, 1, 2, 2]</td>
<td>Tests stability</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-11" class="level3">
<h3 class="anchored" data-anchor-id="complexity-11">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Time (Best)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Iterative Merge Sort is the non-recursive twin of classic Merge Sort, efficient, stable, and memory-predictable, making it perfect when stack space is at a premium.</p>
</section>
<section id="quick-sort" class="level3">
<h3 class="anchored" data-anchor-id="quick-sort">113 Quick Sort</h3>
<p>Quick Sort is one of the fastest and most widely used sorting algorithms. It works by partitioning an array into two halves around a pivot element and recursively sorting the two parts. With average-case O(n log n) performance and in-place operation, it’s the go-to choice in many libraries and real-world systems.</p>
</section>
<section id="what-problem-are-we-solving-12" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-12">What Problem Are We Solving?</h3>
<p>We need a sorting algorithm that’s:</p>
<ul>
<li>Efficient in practice (fast average case)</li>
<li>In-place (minimal memory use)</li>
<li>Divide-and-conquer-based (parallelizable)</li>
</ul>
<p>Quick Sort partitions the array so that:</p>
<ul>
<li>All elements smaller than the pivot go left</li>
<li>All elements larger go right</li>
</ul>
<p>Then it sorts each half recursively.</p>
<p>It’s ideal for:</p>
<ul>
<li>Large datasets in memory</li>
<li>Systems where memory allocation is limited</li>
<li>Average-case performance optimization</li>
</ul>
<section id="example-12" class="level4">
<h4 class="anchored" data-anchor-id="example-12">Example</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Pivot</th>
<th>Action</th>
<th>Array State</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>5</td>
<td>Partition</td>
<td>[3, 4, 1, 2, 5]</td>
</tr>
<tr class="even">
<td>1</td>
<td>3</td>
<td>Partition left</td>
<td>[1, 2, 3, 4, 5]</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Done</td>
<td>Sorted</td>
<td>[1, 2, 3, 4, 5]</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-12" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-12">How Does It Work (Plain Language)?</h3>
<ol type="1">
<li><p>Choose a pivot element.</p></li>
<li><p>Rearrange (partition) array so:</p>
<ul>
<li>Elements smaller than pivot move to the left</li>
<li>Elements larger than pivot move to the right</li>
</ul></li>
<li><p>Recursively apply the same logic to each half.</p></li>
</ol>
<p>Think of the pivot as the “divider” that splits the unsorted array into two smaller problems.</p>
<section id="step-by-step-process-11" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-11">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Select a pivot (e.g., last element)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Partition array around pivot</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Recursively sort left and right subarrays</td>
</tr>
<tr class="even">
<td>4</td>
<td>Stop when subarray size ≤ 1</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-12" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-12">Tiny Code (Easy Versions)</h3>
<section id="c-lomuto-partition-scheme" class="level4">
<h4 class="anchored" data-anchor-id="c-lomuto-partition-scheme">C (Lomuto Partition Scheme)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> partition<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pivot <span class="op">=</span> a<span class="op">[</span>high<span class="op">];</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> low <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> low<span class="op">;</span> j <span class="op">&lt;</span> high<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>j<span class="op">]</span> <span class="op">&lt;</span> pivot<span class="op">)</span> <span class="op">{</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>            i<span class="op">++;</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>            swap<span class="op">(&amp;</span>a<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>a<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>    swap<span class="op">(&amp;</span>a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">],</span> <span class="op">&amp;</span>a<span class="op">[</span>high<span class="op">]);</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> quick_sort<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>low <span class="op">&lt;</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> pi <span class="op">=</span> partition<span class="op">(</span>a<span class="op">,</span> low<span class="op">,</span> high<span class="op">);</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>        quick_sort<span class="op">(</span>a<span class="op">,</span> low<span class="op">,</span> pi <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>        quick_sort<span class="op">(</span>a<span class="op">,</span> pi <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> high<span class="op">);</span></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>    quick_sort<span class="op">(</span>a<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-12" class="level4">
<h4 class="anchored" data-anchor-id="python-12">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> partition(a, low, high):</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    pivot <span class="op">=</span> a[high]</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> low <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(low, high):</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> a[j] <span class="op">&lt;</span> pivot:</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>            a[i], a[j] <span class="op">=</span> a[j], a[i]</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    a[i <span class="op">+</span> <span class="dv">1</span>], a[high] <span class="op">=</span> a[high], a[i <span class="op">+</span> <span class="dv">1</span>]</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> quick_sort(a, low, high):</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> low <span class="op">&lt;</span> high:</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>        pi <span class="op">=</span> partition(a, low, high)</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>        quick_sort(a, low, pi <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>        quick_sort(a, pi <span class="op">+</span> <span class="dv">1</span>, high)</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>quick_sort(arr, <span class="dv">0</span>, <span class="bu">len</span>(arr) <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-12" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-12">Why It Matters</h3>
<ul>
<li>In-place and fast in most real-world cases</li>
<li>Divide and conquer: naturally parallelizable</li>
<li>Often used as the default sorting algorithm in libraries (C, Java, Python)</li>
<li>Introduces partitioning, a key algorithmic pattern</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-12" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-12">A Gentle Proof (Why It Works)</h3>
<p>Each partition divides the problem into smaller subarrays. Average partition splits are balanced, giving O(log n) depth and O(n) work per level:</p>
<p><span class="math display">\[
T(n) = 2T(n/2) + O(n) = O(n \log n)
\]</span></p>
<p>If the pivot is poor (e.g.&nbsp;smallest or largest), complexity degrades:</p>
<p><span class="math display">\[
T(n) = T(n-1) + O(n) = O(n^2)
\]</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Case</th>
<th>Partition Quality</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Best</td>
<td>Perfect halves</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Average</td>
<td>Random</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Worst</td>
<td>Unbalanced</td>
<td>O(n²)</td>
</tr>
</tbody>
</table>
<p>Choosing pivots wisely (randomization, median-of-three) avoids worst-case splits.</p>
</section>
<section id="try-it-yourself-12" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-12">Try It Yourself</h3>
<ol type="1">
<li>Sort [5, 3, 4, 1, 2] and trace partitions.</li>
<li>Change pivot selection (first, middle, random).</li>
<li>Count comparisons and swaps for each case.</li>
<li>Implement using Hoare Partition scheme.</li>
<li>Modify to sort descending.</li>
<li>Visualize recursion tree for n = 8.</li>
<li>Compare runtime with Merge Sort.</li>
<li>Try sorted input [1, 2, 3, 4, 5] and note behavior.</li>
<li>Add a counter to count recursive calls.</li>
<li>Implement tail recursion optimization.</li>
</ol>
</section>
<section id="test-cases-12" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-12">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 2, 1]</td>
<td>[1, 2, 3]</td>
<td>Basic</td>
</tr>
<tr class="even">
<td>[1, 2, 3]</td>
<td>[1, 2, 3]</td>
<td>Worst case (sorted input)</td>
</tr>
<tr class="odd">
<td>[5, 3, 4, 1, 2]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>General</td>
</tr>
<tr class="even">
<td>[2, 2, 1, 1]</td>
<td>[1, 1, 2, 2]</td>
<td>Duplicates</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-12" class="level3">
<h3 class="anchored" data-anchor-id="complexity-12">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(log n) (recursion)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Quick Sort is the practical workhorse of sorting, swift, elegant, and widely loved. It teaches how a single smart pivot can bring order to chaos.</p>
</section>
<section id="hoare-partition-scheme" class="level3">
<h3 class="anchored" data-anchor-id="hoare-partition-scheme">114 Hoare Partition Scheme</h3>
<p>The Hoare Partition Scheme is an early and elegant version of Quick Sort’s partitioning method, designed by C.A.R. Hoare himself. It’s more efficient than the Lomuto scheme in many cases because it does fewer swaps and uses two pointers moving inward from both ends.</p>
</section>
<section id="what-problem-are-we-solving-13" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-13">What Problem Are We Solving?</h3>
<p>In Quick Sort, we need a way to divide an array into two parts:</p>
<ul>
<li>Elements less than or equal to the pivot</li>
<li>Elements greater than or equal to the pivot</li>
</ul>
<p>Hoare’s scheme achieves this using two indices that move toward each other, swapping elements that are out of place. It reduces the number of swaps compared to the Lomuto scheme and often performs better on real data.</p>
<p>It’s especially useful for:</p>
<ul>
<li>Large arrays (fewer writes)</li>
<li>Performance-critical systems</li>
<li>In-place partitioning without extra space</li>
</ul>
<section id="example-13" class="level4">
<h4 class="anchored" data-anchor-id="example-13">Example</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 20%">
<col style="width: 43%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Pivot</th>
<th>Left (i)</th>
<th>Right (j)</th>
<th>Array State</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>5</td>
<td>i=0</td>
<td>j=4</td>
<td>[5, 3, 4, 1, 2]</td>
<td>pivot = 5</td>
</tr>
<tr class="even">
<td>1</td>
<td>5</td>
<td>i→2</td>
<td>j→4</td>
<td>[5, 3, 4, 1, 2]</td>
<td>a[j]=2&lt;5 swap(5,2) → [2,3,4,1,5]</td>
</tr>
<tr class="odd">
<td>2</td>
<td>5</td>
<td>i→2</td>
<td>j→3</td>
<td>[2,3,4,1,5]</td>
<td>a[i]=4&gt;5? no swap</td>
</tr>
<tr class="even">
<td>3</td>
<td>stop</td>
<td>-</td>
<td>-</td>
<td>[2,3,4,1,5]</td>
<td>partition done</td>
</tr>
</tbody>
</table>
<p>The pivot ends up near its correct position, but not necessarily in the final index.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-13" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-13">How Does It Work (Plain Language)?</h3>
<p>The algorithm picks a pivot (commonly the first element), then moves two pointers:</p>
<ul>
<li>Left pointer (i): moves right, skipping small elements</li>
<li>Right pointer (j): moves left, skipping large elements</li>
</ul>
<p>When both pointers find misplaced elements, they are swapped. This continues until they cross, at that point, the array is partitioned.</p>
<section id="step-by-step-process-12" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-12">Step-by-Step Process</h4>
<ol type="1">
<li>Choose a pivot (e.g.&nbsp;first element).</li>
<li>Set two indices: <code>i = left - 1</code>, <code>j = right + 1</code>.</li>
<li>Increment <code>i</code> until <code>a[i] &gt;= pivot</code>.</li>
<li>Decrement <code>j</code> until <code>a[j] &lt;= pivot</code>.</li>
<li>If <code>i &lt; j</code>, swap <code>a[i]</code> and <code>a[j]</code>. Otherwise, return <code>j</code> (partition index).</li>
</ol>
</section>
</section>
<section id="tiny-code-easy-versions-13" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-13">Tiny Code (Easy Versions)</h3>
<section id="c-12" class="level4">
<h4 class="anchored" data-anchor-id="c-12">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> hoare_partition<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pivot <span class="op">=</span> a<span class="op">[</span>low<span class="op">];</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> low <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> j <span class="op">=</span> high <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">do</span> <span class="op">{</span> i<span class="op">++;</span> <span class="op">}</span> <span class="cf">while</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> pivot<span class="op">);</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">do</span> <span class="op">{</span> j<span class="op">--;</span> <span class="op">}</span> <span class="cf">while</span> <span class="op">(</span>a<span class="op">[</span>j<span class="op">]</span> <span class="op">&gt;</span> pivot<span class="op">);</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">&gt;=</span> j<span class="op">)</span> <span class="cf">return</span> j<span class="op">;</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>        swap<span class="op">(&amp;</span>a<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>a<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> quick_sort_hoare<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>low <span class="op">&lt;</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> p <span class="op">=</span> hoare_partition<span class="op">(</span>a<span class="op">,</span> low<span class="op">,</span> high<span class="op">);</span></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>        quick_sort_hoare<span class="op">(</span>a<span class="op">,</span> low<span class="op">,</span> p<span class="op">);</span></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>        quick_sort_hoare<span class="op">(</span>a<span class="op">,</span> p <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> high<span class="op">);</span></span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>    quick_sort_hoare<span class="op">(</span>a<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-13" class="level4">
<h4 class="anchored" data-anchor-id="python-13">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hoare_partition(a, low, high):</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    pivot <span class="op">=</span> a[low]</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> low <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    j <span class="op">=</span> high <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>        i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> a[i] <span class="op">&lt;</span> pivot:</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>        j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> a[j] <span class="op">&gt;</span> pivot:</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>            j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> i <span class="op">&gt;=</span> j:</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> j</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>        a[i], a[j] <span class="op">=</span> a[j], a[i]</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> quick_sort_hoare(a, low, high):</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> low <span class="op">&lt;</span> high:</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>        p <span class="op">=</span> hoare_partition(a, low, high)</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>        quick_sort_hoare(a, low, p)</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>        quick_sort_hoare(a, p <span class="op">+</span> <span class="dv">1</span>, high)</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>quick_sort_hoare(arr, <span class="dv">0</span>, <span class="bu">len</span>(arr) <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-13" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-13">Why It Matters</h3>
<ul>
<li>Fewer swaps than Lomuto partition</li>
<li>More efficient in practice on most datasets</li>
<li>Still in-place, divide-and-conquer, O(n log n) average</li>
<li>Introduces the idea of two-pointer partitioning</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-13" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-13">A Gentle Proof (Why It Works)</h3>
<p>The loop invariants ensure that:</p>
<ul>
<li>Left side: all elements ≤ pivot</li>
<li>Right side: all elements ≥ pivot</li>
<li><code>i</code> and <code>j</code> move inward until they cross When they cross, all elements are partitioned correctly.</li>
</ul>
<p>The pivot does not end in its final sorted position, but the subarrays can be recursively sorted independently.</p>
<p><span class="math display">\[
T(n) = T(k) + T(n - k - 1) + O(n)
\]</span></p>
<p>Average complexity O(n log n); worst-case O(n²) if pivot is poor.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Case</th>
<th>Pivot</th>
<th>Behavior</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Best</td>
<td>Median</td>
<td>Balanced halves</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Average</td>
<td>Random</td>
<td>Slight imbalance</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Worst</td>
<td>Min/Max</td>
<td>Unbalanced</td>
<td>O(n²)</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-13" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-13">Try It Yourself</h3>
<ol type="1">
<li>Sort [5, 3, 4, 1, 2] step by step using Hoare’s scheme.</li>
<li>Print <code>i</code> and <code>j</code> at each iteration.</li>
<li>Compare with Lomuto’s version on the same array.</li>
<li>Try different pivot positions (first, last, random).</li>
<li>Measure number of swaps vs.&nbsp;Lomuto.</li>
<li>Modify to sort descending.</li>
<li>Visualize partition boundaries.</li>
<li>Test on array with duplicates [3,3,2,1,4].</li>
<li>Implement hybrid pivot selection (median-of-three).</li>
<li>Compare runtime with Merge Sort.</li>
</ol>
</section>
<section id="test-cases-13" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-13">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 2, 1]</td>
<td>[1, 2, 3]</td>
<td>Simple</td>
</tr>
<tr class="even">
<td>[5, 3, 4, 1, 2]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>General</td>
</tr>
<tr class="odd">
<td>[2, 2, 1, 1]</td>
<td>[1, 1, 2, 2]</td>
<td>Works with duplicates</td>
</tr>
<tr class="even">
<td>[1, 2, 3, 4, 5]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>Sorted input (worst case)</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-13" class="level3">
<h3 class="anchored" data-anchor-id="complexity-13">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(log n) recursion</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Hoare Partition Scheme is elegant and efficient, the original genius of Quick Sort. Its two-pointer dance is graceful and economical, a timeless classic in algorithm design.</p>
</section>
<section id="lomuto-partition-scheme" class="level3">
<h3 class="anchored" data-anchor-id="lomuto-partition-scheme">115 Lomuto Partition Scheme</h3>
<p>The Lomuto Partition Scheme is a simple and widely taught method for partitioning in Quick Sort. It’s easier to understand and implement than Hoare’s scheme, though it often performs slightly more swaps. It always selects a pivot (commonly the last element) and partitions the array in a single forward pass.</p>
</section>
<section id="what-problem-are-we-solving-14" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-14">What Problem Are We Solving?</h3>
<p>We need a clear and intuitive way to partition an array around a pivot, ensuring all smaller elements go to the left and all larger elements go to the right.</p>
<p>Lomuto’s method uses one scanning pointer and one boundary pointer, making it easy for beginners and ideal for pedagogical purposes or small datasets.</p>
<section id="example-14" class="level4">
<h4 class="anchored" data-anchor-id="example-14">Example</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 15%">
<col style="width: 10%">
<col style="width: 51%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Pivot</th>
<th>i (Boundary)</th>
<th>j (Scan)</th>
<th>Array State</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>2</td>
<td>i=-1</td>
<td>j=0</td>
<td>[5, 3, 4, 1, 2]</td>
<td>pivot = 2</td>
</tr>
<tr class="even">
<td>1</td>
<td>2</td>
<td>i=-1</td>
<td>j=0</td>
<td>a[0]=5&gt;2 → no swap</td>
<td></td>
</tr>
<tr class="odd">
<td>2</td>
<td>2</td>
<td>i=-1</td>
<td>j=1</td>
<td>a[1]=3&gt;2 → no swap</td>
<td></td>
</tr>
<tr class="even">
<td>3</td>
<td>2</td>
<td>i=-1</td>
<td>j=2</td>
<td>a[2]=4&gt;2 → no swap</td>
<td></td>
</tr>
<tr class="odd">
<td>4</td>
<td>2</td>
<td>i=0</td>
<td>j=3</td>
<td>a[3]=1&lt;2 → swap(5,1) → [1,3,4,5,2]</td>
<td></td>
</tr>
<tr class="even">
<td>5</td>
<td>2</td>
<td>i=0</td>
<td>j=4</td>
<td>end of scan; swap pivot with a[i+1]=a[1]</td>
<td></td>
</tr>
<tr class="odd">
<td>6</td>
<td>Done</td>
<td>-</td>
<td>-</td>
<td>[1,2,4,5,3] partitioned</td>
<td></td>
</tr>
</tbody>
</table>
<p>Pivot 2 is placed in its final position at index 1. Elements left of 2 are smaller, right are larger.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-14" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-14">How Does It Work (Plain Language)?</h3>
<ol type="1">
<li><p>Choose a pivot (commonly last element).</p></li>
<li><p>Initialize boundary pointer <code>i</code> before start of array.</p></li>
<li><p>Iterate through array with pointer <code>j</code>:</p>
<ul>
<li>If <code>a[j] &lt; pivot</code>, increment <code>i</code> and swap <code>a[i]</code> with <code>a[j]</code>.</li>
</ul></li>
<li><p>After loop, swap <code>pivot</code> into position <code>i + 1</code>.</p></li>
<li><p>Return <code>i + 1</code> (pivot’s final position).</p></li>
</ol>
<p>It’s like separating a deck of cards, you keep moving smaller cards to the front as you scan.</p>
<section id="step-by-step-process-13" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-13">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Choose pivot (usually last element)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Move smaller elements before pivot</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Move larger elements after pivot</td>
</tr>
<tr class="even">
<td>4</td>
<td>Place pivot in its correct position</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Return pivot index for recursive sorting</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-14" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-14">Tiny Code (Easy Versions)</h3>
<section id="c-13" class="level4">
<h4 class="anchored" data-anchor-id="c-13">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> lomuto_partition<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pivot <span class="op">=</span> a<span class="op">[</span>high<span class="op">];</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> low <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> low<span class="op">;</span> j <span class="op">&lt;</span> high<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>j<span class="op">]</span> <span class="op">&lt;</span> pivot<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>            i<span class="op">++;</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>            swap<span class="op">(&amp;</span>a<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>a<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    swap<span class="op">(&amp;</span>a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">],</span> <span class="op">&amp;</span>a<span class="op">[</span>high<span class="op">]);</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> quick_sort_lomuto<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>low <span class="op">&lt;</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> pi <span class="op">=</span> lomuto_partition<span class="op">(</span>a<span class="op">,</span> low<span class="op">,</span> high<span class="op">);</span></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>        quick_sort_lomuto<span class="op">(</span>a<span class="op">,</span> low<span class="op">,</span> pi <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>        quick_sort_lomuto<span class="op">(</span>a<span class="op">,</span> pi <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> high<span class="op">);</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>    quick_sort_lomuto<span class="op">(</span>a<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-14" class="level4">
<h4 class="anchored" data-anchor-id="python-14">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> lomuto_partition(a, low, high):</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    pivot <span class="op">=</span> a[high]</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> low <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(low, high):</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> a[j] <span class="op">&lt;</span> pivot:</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>            a[i], a[j] <span class="op">=</span> a[j], a[i]</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    a[i <span class="op">+</span> <span class="dv">1</span>], a[high] <span class="op">=</span> a[high], a[i <span class="op">+</span> <span class="dv">1</span>]</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> quick_sort_lomuto(a, low, high):</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> low <span class="op">&lt;</span> high:</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>        pi <span class="op">=</span> lomuto_partition(a, low, high)</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>        quick_sort_lomuto(a, low, pi <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>        quick_sort_lomuto(a, pi <span class="op">+</span> <span class="dv">1</span>, high)</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>quick_sort_lomuto(arr, <span class="dv">0</span>, <span class="bu">len</span>(arr) <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-14" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-14">Why It Matters</h3>
<ul>
<li>Simple and easy to implement</li>
<li>Pivot ends in correct final position each step</li>
<li>Useful for educational demonstration of Quick Sort</li>
<li>Common in textbooks and basic Quick Sort examples</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-14" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-14">A Gentle Proof (Why It Works)</h3>
<p>Invariant:</p>
<ul>
<li>Elements left of <code>i</code> are smaller than pivot.</li>
<li>Elements between <code>i</code> and <code>j</code> are greater or not yet checked. At the end, swapping pivot with <code>a[i+1]</code> places it in its final position.</li>
</ul>
<p>Time complexity:</p>
<p><span class="math display">\[
T(n) = T(k) + T(n - k - 1) + O(n)
\]</span></p>
<p>Average: O(n log n) Worst (already sorted): O(n²)</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Case</th>
<th>Partition</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Best</td>
<td>Balanced</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Average</td>
<td>Random</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Worst</td>
<td>Unbalanced</td>
<td>O(n²)</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-14" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-14">Try It Yourself</h3>
<ol type="1">
<li>Sort [5, 3, 4, 1, 2] using Lomuto step by step.</li>
<li>Trace <code>i</code> and <code>j</code> positions at each comparison.</li>
<li>Compare with Hoare partition’s number of swaps.</li>
<li>Test with sorted input, see worst case.</li>
<li>Randomize pivot to avoid worst-case.</li>
<li>Modify to sort descending order.</li>
<li>Count total swaps and comparisons.</li>
<li>Combine with tail recursion optimization.</li>
<li>Visualize partition boundary after each pass.</li>
<li>Implement a hybrid Quick Sort using Lomuto for small arrays.</li>
</ol>
</section>
<section id="test-cases-14" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-14">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 2, 1]</td>
<td>[1, 2, 3]</td>
<td>Simple</td>
</tr>
<tr class="even">
<td>[1, 2, 3]</td>
<td>[1, 2, 3]</td>
<td>Worst-case</td>
</tr>
<tr class="odd">
<td>[5, 3, 4, 1, 2]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>General</td>
</tr>
<tr class="even">
<td>[2, 2, 1, 1]</td>
<td>[1, 1, 2, 2]</td>
<td>Handles duplicates</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-14" class="level3">
<h3 class="anchored" data-anchor-id="complexity-14">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(log n) recursion</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Lomuto’s scheme is the friendly teacher of Quick Sort, easy to grasp, simple to code, and perfect for building intuition about partitioning and divide-and-conquer sorting.</p>
</section>
<section id="randomized-quick-sort" class="level3">
<h3 class="anchored" data-anchor-id="randomized-quick-sort">116 Randomized Quick Sort</h3>
<p>Randomized Quick Sort enhances the classic Quick Sort by choosing the pivot randomly. This small tweak eliminates the risk of hitting the worst-case O(n²) behavior on already sorted or adversarial inputs, making it one of the most robust and practical sorting strategies in real-world use.</p>
</section>
<section id="what-problem-are-we-solving-15" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-15">What Problem Are We Solving?</h3>
<p>Regular Quick Sort can degrade badly if the pivot is chosen poorly (for example, always picking the first or last element in a sorted array). Randomized Quick Sort fixes this by selecting a random pivot, ensuring that, on average, partitions are balanced, regardless of input distribution.</p>
<p>This makes it ideal for:</p>
<ul>
<li>Unpredictable or adversarial inputs</li>
<li>Large datasets where worst-case avoidance matters</li>
<li>Performance-critical systems requiring consistent behavior</li>
</ul>
<section id="example-15" class="level4">
<h4 class="anchored" data-anchor-id="example-15">Example</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Array State</th>
<th>Pivot</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>Choose random pivot</td>
<td>[5, 3, 4, 1, 2]</td>
<td>4</td>
</tr>
<tr class="even">
<td>1</td>
<td>Partition around 4</td>
<td>[3, 2, 1, 4, 5]</td>
<td>4 at index 3</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Recurse on left [3, 2, 1]</td>
<td>[1, 2, 3]</td>
<td>2</td>
</tr>
<tr class="even">
<td>3</td>
<td>Merge subarrays</td>
<td>[1, 2, 3, 4, 5]</td>
<td>Done</td>
</tr>
</tbody>
</table>
<p>Randomization ensures the pivot is unlikely to create unbalanced partitions.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-15" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-15">How Does It Work (Plain Language)?</h3>
<p>It’s the same Quick Sort, but before partitioning, we randomly pick one element and use it as the pivot. This random pivot is swapped into the last position, and the normal Lomuto or Hoare partitioning continues.</p>
<p>This small randomness makes it robust and efficient on average, even for worst-case inputs.</p>
<section id="step-by-step-process-14" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-14">Step-by-Step Process</h4>
<ol type="1">
<li>Pick a random pivot index between <code>low</code> and <code>high</code>.</li>
<li>Swap the random pivot with the last element.</li>
<li>Partition the array (e.g., Lomuto or Hoare).</li>
<li>Recursively sort left and right partitions.</li>
</ol>
</section>
</section>
<section id="tiny-code-easy-versions-15" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-15">Tiny Code (Easy Versions)</h3>
<section id="c-lomuto-random-pivot" class="level4">
<h4 class="anchored" data-anchor-id="c-lomuto-random-pivot">C (Lomuto + Random Pivot)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;time.h&gt;</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> lomuto_partition<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pivot <span class="op">=</span> a<span class="op">[</span>high<span class="op">];</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> low <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> low<span class="op">;</span> j <span class="op">&lt;</span> high<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>j<span class="op">]</span> <span class="op">&lt;</span> pivot<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>            i<span class="op">++;</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>            swap<span class="op">(&amp;</span>a<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>a<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>    swap<span class="op">(&amp;</span>a<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">],</span> <span class="op">&amp;</span>a<span class="op">[</span>high<span class="op">]);</span></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> randomized_partition<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pivotIndex <span class="op">=</span> low <span class="op">+</span> rand<span class="op">()</span> <span class="op">%</span> <span class="op">(</span>high <span class="op">-</span> low <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>    swap<span class="op">(&amp;</span>a<span class="op">[</span>pivotIndex<span class="op">],</span> <span class="op">&amp;</span>a<span class="op">[</span>high<span class="op">]);</span></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> lomuto_partition<span class="op">(</span>a<span class="op">,</span> low<span class="op">,</span> high<span class="op">);</span></span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> randomized_quick_sort<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>low <span class="op">&lt;</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> pi <span class="op">=</span> randomized_partition<span class="op">(</span>a<span class="op">,</span> low<span class="op">,</span> high<span class="op">);</span></span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>        randomized_quick_sort<span class="op">(</span>a<span class="op">,</span> low<span class="op">,</span> pi <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>        randomized_quick_sort<span class="op">(</span>a<span class="op">,</span> pi <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> high<span class="op">);</span></span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>    srand<span class="op">(</span>time<span class="op">(</span>NULL<span class="op">));</span></span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a>    randomized_quick_sort<span class="op">(</span>a<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-15" class="level4">
<h4 class="anchored" data-anchor-id="python-15">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> lomuto_partition(a, low, high):</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    pivot <span class="op">=</span> a[high]</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> low <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(low, high):</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> a[j] <span class="op">&lt;</span> pivot:</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>            a[i], a[j] <span class="op">=</span> a[j], a[i]</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    a[i <span class="op">+</span> <span class="dv">1</span>], a[high] <span class="op">=</span> a[high], a[i <span class="op">+</span> <span class="dv">1</span>]</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> randomized_partition(a, low, high):</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>    pivot_index <span class="op">=</span> random.randint(low, high)</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>    a[pivot_index], a[high] <span class="op">=</span> a[high], a[pivot_index]</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> lomuto_partition(a, low, high)</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> randomized_quick_sort(a, low, high):</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> low <span class="op">&lt;</span> high:</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>        pi <span class="op">=</span> randomized_partition(a, low, high)</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>        randomized_quick_sort(a, low, pi <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>        randomized_quick_sort(a, pi <span class="op">+</span> <span class="dv">1</span>, high)</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>randomized_quick_sort(arr, <span class="dv">0</span>, <span class="bu">len</span>(arr) <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-15" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-15">Why It Matters</h3>
<ul>
<li>Prevents worst-case O(n²) behavior</li>
<li>Simple yet highly effective</li>
<li>Ensures consistent average-case across all inputs</li>
<li>Foundation for Randomized Select and Randomized Algorithms</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-15" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-15">A Gentle Proof (Why It Works)</h3>
<p>Random pivot selection ensures the expected split size is balanced, independent of input order. Each pivot divides the array such that expected recursion depth is O(log n) and total comparisons O(n log n).</p>
<p>Expected complexity: <span class="math display">\[
E[T(n)] = O(n \log n)
\]</span> Worst-case only occurs with extremely low probability (1/n!).</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Case</th>
<th>Pivot Choice</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Best</td>
<td>Balanced</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Average</td>
<td>Random</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Worst</td>
<td>Unlucky (rare)</td>
<td>O(n²)</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-15" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-15">Try It Yourself</h3>
<ol type="1">
<li>Sort [5, 3, 4, 1, 2] multiple times, note pivot differences.</li>
<li>Print pivot each recursive call.</li>
<li>Compare against deterministic pivot (first, last).</li>
<li>Test on sorted input [1, 2, 3, 4, 5].</li>
<li>Test on reverse input [5, 4, 3, 2, 1].</li>
<li>Count recursive depth across runs.</li>
<li>Modify to use Hoare partition.</li>
<li>Implement <code>random.choice()</code> version.</li>
<li>Compare runtime vs.&nbsp;normal Quick Sort.</li>
<li>Seed RNG to reproduce same run.</li>
</ol>
</section>
<section id="test-cases-15" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-15">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 2, 1]</td>
<td>[1, 2, 3]</td>
<td>Random pivot each run</td>
</tr>
<tr class="even">
<td>[1, 2, 3]</td>
<td>[1, 2, 3]</td>
<td>Avoids O(n²)</td>
</tr>
<tr class="odd">
<td>[5, 3, 4, 1, 2]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>General</td>
</tr>
<tr class="even">
<td>[2, 2, 1, 1]</td>
<td>[1, 1, 2, 2]</td>
<td>Handles duplicates</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-15" class="level3">
<h3 class="anchored" data-anchor-id="complexity-15">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²) (rare)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(log n)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Randomized Quick Sort shows the power of randomness, a tiny change transforms a fragile algorithm into a reliably fast one, making it one of the most practical sorts in modern computing.</p>
</section>
<section id="heap-sort" class="level3">
<h3 class="anchored" data-anchor-id="heap-sort">117 Heap Sort</h3>
<p>Heap Sort is a classic comparison-based, in-place, O(n log n) sorting algorithm built upon the heap data structure. It first turns the array into a max-heap, then repeatedly removes the largest element (the heap root) and places it at the end, shrinking the heap as it goes. It’s efficient and memory-friendly but not stable.</p>
</section>
<section id="what-problem-are-we-solving-16" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-16">What Problem Are We Solving?</h3>
<p>We want a sorting algorithm that:</p>
<ul>
<li>Has guaranteed O(n log n) time in all cases</li>
<li>Uses constant extra space (O(1))</li>
<li>Doesn’t require recursion or extra arrays like Merge Sort</li>
</ul>
<p>Heap Sort achieves this by using a binary heap to always extract the largest element efficiently, then placing it in its correct position at the end.</p>
<p>Perfect for:</p>
<ul>
<li>Memory-constrained systems</li>
<li>Predictable performance needs</li>
<li>Offline sorting when data fits in RAM</li>
</ul>
<section id="example-16" class="level4">
<h4 class="anchored" data-anchor-id="example-16">Example</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Array State</th>
<th>Heap Size</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>Build max-heap</td>
<td>[5, 3, 4, 1, 2]</td>
<td>5</td>
</tr>
<tr class="even">
<td>1</td>
<td>Swap root with last</td>
<td>[2, 3, 4, 1, 5]</td>
<td>4</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Heapify root</td>
<td>[4, 3, 2, 1, 5]</td>
<td>4</td>
</tr>
<tr class="even">
<td>3</td>
<td>Swap root with last</td>
<td>[1, 3, 2, 4, 5]</td>
<td>3</td>
</tr>
<tr class="odd">
<td>4</td>
<td>Heapify root</td>
<td>[3, 1, 2, 4, 5]</td>
<td>3</td>
</tr>
<tr class="even">
<td>5</td>
<td>Repeat until heap shrinks</td>
<td>[1, 2, 3, 4, 5]</td>
<td>0</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-16" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-16">How Does It Work (Plain Language)?</h3>
<p>Think of a heap like a tree stored in an array. The root (index 0) is the largest element. Heap Sort works in two main steps:</p>
<ol type="1">
<li><p>Build a max-heap (arranged so every parent ≥ its children)</p></li>
<li><p>Extract max repeatedly:</p>
<ul>
<li>Swap root with last element</li>
<li>Reduce heap size</li>
<li>Heapify root to restore max-heap property</li>
</ul></li>
</ol>
<p>After each extraction, the sorted part grows at the end of the array.</p>
<section id="step-by-step-process-15" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-15">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Build a max-heap from the array</td>
</tr>
<tr class="even">
<td>2</td>
<td>Swap the first (max) with the last element</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Reduce heap size by one</td>
</tr>
<tr class="even">
<td>4</td>
<td>Heapify the root</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Repeat until heap is empty</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-16" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-16">Tiny Code (Easy Versions)</h3>
<section id="c-14" class="level4">
<h4 class="anchored" data-anchor-id="c-14">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> heapify<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> largest <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> right <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> i <span class="op">+</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>left <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> a<span class="op">[</span>left<span class="op">]</span> <span class="op">&gt;</span> a<span class="op">[</span>largest<span class="op">])</span> largest <span class="op">=</span> left<span class="op">;</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>right <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> a<span class="op">[</span>right<span class="op">]</span> <span class="op">&gt;</span> a<span class="op">[</span>largest<span class="op">])</span> largest <span class="op">=</span> right<span class="op">;</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>largest <span class="op">!=</span> i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>        swap<span class="op">(&amp;</span>a<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>a<span class="op">[</span>largest<span class="op">]);</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>        heapify<span class="op">(</span>a<span class="op">,</span> n<span class="op">,</span> largest<span class="op">);</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> heap_sort<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Build max heap</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> n <span class="op">/</span> <span class="dv">2</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--)</span></span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>        heapify<span class="op">(</span>a<span class="op">,</span> n<span class="op">,</span> i<span class="op">);</span></span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Extract elements from heap</span></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--)</span> <span class="op">{</span></span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>        swap<span class="op">(&amp;</span>a<span class="op">[</span><span class="dv">0</span><span class="op">],</span> <span class="op">&amp;</span>a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>        heapify<span class="op">(</span>a<span class="op">,</span> i<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a>    heap_sort<span class="op">(</span>a<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-16" class="level4">
<h4 class="anchored" data-anchor-id="python-16">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> heapify(a, n, i):</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    largest <span class="op">=</span> i</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    left <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> i <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    right <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> i <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> left <span class="op">&lt;</span> n <span class="kw">and</span> a[left] <span class="op">&gt;</span> a[largest]:</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>        largest <span class="op">=</span> left</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> right <span class="op">&lt;</span> n <span class="kw">and</span> a[right] <span class="op">&gt;</span> a[largest]:</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>        largest <span class="op">=</span> right</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> largest <span class="op">!=</span> i:</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>        a[i], a[largest] <span class="op">=</span> a[largest], a[i]</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>        heapify(a, n, largest)</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> heap_sort(a):</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(a)</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Build max heap</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n <span class="op">//</span> <span class="dv">2</span> <span class="op">-</span> <span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>        heapify(a, n, i)</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract max and heapify</span></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n <span class="op">-</span> <span class="dv">1</span>, <span class="dv">0</span>, <span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>        a[<span class="dv">0</span>], a[i] <span class="op">=</span> a[i], a[<span class="dv">0</span>]</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>        heapify(a, i, <span class="dv">0</span>)</span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>heap_sort(arr)</span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-16" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-16">Why It Matters</h3>
<ul>
<li>Predictable O(n log n) in all cases</li>
<li>In-place, no extra memory needed</li>
<li>Excellent when memory is tight or recursion is not preferred</li>
<li>Demonstrates tree-based sorting logic</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-16" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-16">A Gentle Proof (Why It Works)</h3>
<p>Building the heap: O(n) Extracting each element: O(log n) Total time:</p>
<p><span class="math display">\[
T(n) = O(n) + n \times O(\log n) = O(n \log n)
\]</span></p>
<p>Each element is “bubbled down” log n levels at most once.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Work</th>
<th>Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Build heap</td>
<td>O(n)</td>
<td>Linear</td>
</tr>
<tr class="even">
<td>Extract n elements</td>
<td>n × O(log n)</td>
<td>O(n log n)</td>
</tr>
</tbody>
</table>
<p>Not stable, because swapping can break equal-element order.</p>
</section>
<section id="try-it-yourself-16" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-16">Try It Yourself</h3>
<ol type="1">
<li>Build max-heap from [5, 3, 4, 1, 2].</li>
<li>Draw heap tree for each step.</li>
<li>Trace heapify calls and swaps.</li>
<li>Implement min-heap version for descending sort.</li>
<li>Count comparisons per phase.</li>
<li>Compare with Merge Sort space usage.</li>
<li>Modify to stop early if already sorted.</li>
<li>Animate heap construction.</li>
<li>Test on reverse array [5,4,3,2,1].</li>
<li>Add debug prints showing heap after each step.</li>
</ol>
</section>
<section id="test-cases-16" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-16">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 2, 1]</td>
<td>[1, 2, 3]</td>
<td>Small test</td>
</tr>
<tr class="even">
<td>[1, 2, 3]</td>
<td>[1, 2, 3]</td>
<td>Already sorted</td>
</tr>
<tr class="odd">
<td>[5, 3, 4, 1, 2]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>General case</td>
</tr>
<tr class="even">
<td>[2, 2, 1, 1]</td>
<td>[1, 1, 2, 2]</td>
<td>Not stable but correct</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-16" class="level3">
<h3 class="anchored" data-anchor-id="complexity-16">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Heap Sort is the workhorse of guaranteed performance, steady, space-efficient, and built on elegant tree logic. It never surprises you with bad cases, a reliable friend when consistency matters.</p>
</section>
<section id="way-quick-sort" class="level3">
<h3 class="anchored" data-anchor-id="way-quick-sort">118 3-Way Quick Sort</h3>
<p>3-Way Quick Sort is a refined version of Quick Sort designed to handle arrays with many duplicate elements efficiently. Instead of dividing the array into two parts (less than and greater than pivot), it divides into three regions:</p>
<ul>
<li><code>&lt; pivot</code></li>
<li><code>= pivot</code></li>
<li><code>&gt; pivot</code></li>
</ul>
<p>This avoids redundant work when many elements are equal to the pivot, making it especially effective for datasets with low entropy or repeated keys.</p>
</section>
<section id="what-problem-are-we-solving-17" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-17">What Problem Are We Solving?</h3>
<p>Standard Quick Sort can perform unnecessary work when duplicates are present. For example, if all elements are the same, standard Quick Sort still recurses O(n log n) times.</p>
<p>3-Way Quick Sort fixes this by:</p>
<ul>
<li>Skipping equal elements during partitioning</li>
<li>Shrinking recursion depth dramatically</li>
</ul>
<p>It’s ideal for:</p>
<ul>
<li>Arrays with many duplicates</li>
<li>Sorting strings with common prefixes</li>
<li>Key-value pairs with repeated keys</li>
</ul>
<section id="example-17" class="level4">
<h4 class="anchored" data-anchor-id="example-17">Example</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 43%">
<col style="width: 23%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Pivot</th>
<th>Action</th>
<th>Array State</th>
<th>Partitions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>3</td>
<td>Start</td>
<td>[3, 2, 3, 1, 3]</td>
<td>l=0, i=0, g=4</td>
</tr>
<tr class="even">
<td>1</td>
<td>3</td>
<td>a[i]=3 → equal</td>
<td>[3, 2, 3, 1, 3]</td>
<td>i=1</td>
</tr>
<tr class="odd">
<td>2</td>
<td>3</td>
<td>a[i]=2 &lt; 3 → swap(a[l],a[i])</td>
<td>[2, 3, 3, 1, 3]</td>
<td>l=1, i=2</td>
</tr>
<tr class="even">
<td>3</td>
<td>3</td>
<td>a[i]=3 → equal</td>
<td>[2, 3, 3, 1, 3]</td>
<td>i=3</td>
</tr>
<tr class="odd">
<td>4</td>
<td>3</td>
<td>a[i]=1 &lt; 3 → swap(a[l],a[i])</td>
<td>[2, 1, 3, 3, 3]</td>
<td>l=2, i=4</td>
</tr>
<tr class="even">
<td>5</td>
<td>3</td>
<td>a[i]=3 → equal</td>
<td>[2, 1, 3, 3, 3]</td>
<td>Done</td>
</tr>
</tbody>
</table>
<p>Now recursively sort left <code>&lt; pivot</code> region [2,1], skip the middle <code>=3</code> block, and sort right <code>&gt; pivot</code> (empty).</p>
</section>
</section>
<section id="how-does-it-work-plain-language-17" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-17">How Does It Work (Plain Language)?</h3>
<p>We track three zones using three pointers:</p>
<ul>
<li><code>lt</code> (less than region)</li>
<li><code>i</code> (current element)</li>
<li><code>gt</code> (greater than region)</li>
</ul>
<p>Each iteration compares <code>a[i]</code> with the pivot:</p>
<ul>
<li>If <code>&lt; pivot</code>: swap with <code>lt</code>, expand both regions</li>
<li>If <code>&gt; pivot</code>: swap with <code>gt</code>, shrink right region</li>
<li>If <code>= pivot</code>: move forward</li>
</ul>
<p>Continue until <code>i &gt; gt</code>. This single pass partitions array into three regions, no need to revisit equals.</p>
<section id="step-by-step-process-16" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-16">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Condition</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td><code>a[i] &lt; pivot</code></td>
<td>swap(a[i], a[lt]), i++, lt++</td>
</tr>
<tr class="even">
<td>2</td>
<td><code>a[i] &gt; pivot</code></td>
<td>swap(a[i], a[gt]), gt–</td>
</tr>
<tr class="odd">
<td>3</td>
<td><code>a[i] == pivot</code></td>
<td>i++</td>
</tr>
<tr class="even">
<td>4</td>
<td>Stop when i &gt; gt</td>
<td></td>
</tr>
</tbody>
</table>
<p>Then recursively sort <code>[low..lt-1]</code> and <code>[gt+1..high]</code>.</p>
</section>
</section>
<section id="tiny-code-easy-versions-17" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-17">Tiny Code (Easy Versions)</h3>
<section id="c-15" class="level4">
<h4 class="anchored" data-anchor-id="c-15">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> quicksort_3way<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>low <span class="op">&gt;=</span> high<span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pivot <span class="op">=</span> a<span class="op">[</span>low<span class="op">];</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> lt <span class="op">=</span> low<span class="op">,</span> i <span class="op">=</span> low<span class="op">,</span> gt <span class="op">=</span> high<span class="op">;</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;=</span> gt<span class="op">)</span> <span class="op">{</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> pivot<span class="op">)</span> <span class="op">{</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>            swap<span class="op">(&amp;</span>a<span class="op">[</span>lt<span class="op">],</span> <span class="op">&amp;</span>a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>            lt<span class="op">++;</span> i<span class="op">++;</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> pivot<span class="op">)</span> <span class="op">{</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>            swap<span class="op">(&amp;</span>a<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>a<span class="op">[</span>gt<span class="op">]);</span></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>            gt<span class="op">--;</span></span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>            i<span class="op">++;</span></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a>    quicksort_3way<span class="op">(</span>a<span class="op">,</span> low<span class="op">,</span> lt <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a>    quicksort_3way<span class="op">(</span>a<span class="op">,</span> gt <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> high<span class="op">);</span></span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">3</span><span class="op">};</span></span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a>    quicksort_3way<span class="op">(</span>a<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-17" class="level4">
<h4 class="anchored" data-anchor-id="python-17">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> quicksort_3way(a, low, high):</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> low <span class="op">&gt;=</span> high:</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    pivot <span class="op">=</span> a[low]</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    lt, i, gt <span class="op">=</span> low, low, high</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;=</span> gt:</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> a[i] <span class="op">&lt;</span> pivot:</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>            a[lt], a[i] <span class="op">=</span> a[i], a[lt]</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>            lt <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> a[i] <span class="op">&gt;</span> pivot:</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>            a[i], a[gt] <span class="op">=</span> a[gt], a[i]</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>            gt <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>    quicksort_3way(a, low, lt <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>    quicksort_3way(a, gt <span class="op">+</span> <span class="dv">1</span>, high)</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">3</span>]</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>quicksort_3way(arr, <span class="dv">0</span>, <span class="bu">len</span>(arr) <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-17" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-17">Why It Matters</h3>
<ul>
<li>Efficient for arrays with duplicates</li>
<li>Reduces unnecessary recursion and comparisons</li>
<li>Used in string sorting and key-heavy data</li>
<li>Generalizes the idea of “partition” to multi-way splitting</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-17" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-17">A Gentle Proof (Why It Works)</h3>
<p>Standard Quick Sort always divides into two regions, even if all elements equal the pivot, leading to O(n²) on identical elements.</p>
<p>3-Way Quick Sort partitions into three zones:</p>
<ul>
<li><code>&lt; pivot</code> (left)</li>
<li><code>= pivot</code> (middle)</li>
<li><code>&gt; pivot</code> (right)</li>
</ul>
<p>The middle zone is skipped from recursion, reducing work dramatically.</p>
<p>If all elements are equal → only one pass O(n).</p>
<p>Expected complexity: <span class="math display">\[
T(n) = O(n \log n)
\]</span> Worst-case (no duplicates): same as Quick Sort.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Case</th>
<th>Duplicates</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>All equal</td>
<td>O(n)</td>
<td>One pass only</td>
</tr>
<tr class="even">
<td>Many</td>
<td>O(n log n)</td>
<td>Efficient</td>
</tr>
<tr class="odd">
<td>None</td>
<td>O(n log n)</td>
<td>Normal behavior</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-17" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-17">Try It Yourself</h3>
<ol type="1">
<li>Sort [3, 2, 3, 1, 3] step by step.</li>
<li>Print regions (<code>lt</code>, <code>i</code>, <code>gt</code>) after each iteration.</li>
<li>Compare recursion depth with normal Quick Sort.</li>
<li>Test input [1, 1, 1, 1].</li>
<li>Test input [5, 4, 3, 2, 1].</li>
<li>Sort [“apple”, “apple”, “banana”, “apple”].</li>
<li>Visualize partitions on paper.</li>
<li>Modify to count swaps and comparisons.</li>
<li>Implement descending order.</li>
<li>Apply to random integers with duplicates (e.g.&nbsp;[1,2,2,2,3,3,1]).</li>
</ol>
</section>
<section id="test-cases-17" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-17">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 2, 3, 1, 3]</td>
<td>[1, 2, 3, 3, 3]</td>
<td>Duplicates</td>
</tr>
<tr class="even">
<td>[5, 4, 3, 2, 1]</td>
<td>[1, 2, 3, 4, 5]</td>
<td>No duplicates</td>
</tr>
<tr class="odd">
<td>[2, 2, 2, 2]</td>
<td>[2, 2, 2, 2]</td>
<td>All equal (O(n))</td>
</tr>
<tr class="even">
<td>[1, 3, 1, 3, 1]</td>
<td>[1, 1, 1, 3, 3]</td>
<td>Clustered duplicates</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-17" class="level3">
<h3 class="anchored" data-anchor-id="complexity-17">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n) (all equal)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(log n) recursion</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes (handles duplicates efficiently)</td>
</tr>
</tbody>
</table>
<p>3-Way Quick Sort shows how a small change, three-way partitioning, can transform Quick Sort into a powerful tool for duplicate-heavy datasets, blending elegance with efficiency.</p>
</section>
<section id="external-merge-sort" class="level3">
<h3 class="anchored" data-anchor-id="external-merge-sort">119 External Merge Sort</h3>
<p>External Merge Sort is a specialized sorting algorithm designed for very large datasets that don’t fit entirely into main memory (RAM). It works by sorting chunks of data in memory, writing them to disk, and then merging those sorted chunks. This makes it a key tool in databases, file systems, and big data processing.</p>
</section>
<section id="what-problem-are-we-solving-18" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-18">What Problem Are We Solving?</h3>
<p>When data exceeds RAM capacity, in-memory sorts like Quick Sort or Heap Sort fail, they need random access to all elements. External Merge Sort solves this by processing data in blocks:</p>
<ul>
<li>Sort manageable chunks in memory</li>
<li>Write sorted chunks (“runs”) to disk</li>
<li>Merge runs sequentially using streaming I/O</li>
</ul>
<p>This minimizes disk reads/writes, the main bottleneck in large-scale sorting.</p>
<p>It’s ideal for:</p>
<ul>
<li>Large files (GBs to TBs)</li>
<li>Database query engines</li>
<li>Batch processing pipelines</li>
</ul>
<section id="example-18" class="level4">
<h4 class="anchored" data-anchor-id="example-18">Example</h4>
<p>Let’s say you have 1 GB of data and only 100 MB of RAM.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Split</td>
<td>Divide file into 10 chunks of 100 MB</td>
</tr>
<tr class="even">
<td>2</td>
<td>Sort</td>
<td>Load each chunk in memory, sort, write to disk</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Merge</td>
<td>Use k-way merge (e.g.&nbsp;10-way) to merge sorted runs</td>
</tr>
<tr class="even">
<td>4</td>
<td>Output</td>
<td>Final sorted file written sequentially</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-18" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-18">How Does It Work (Plain Language)?</h3>
<p>Think of it like sorting pages of a giant book:</p>
<ol type="1">
<li>Take a few pages at a time (fit in memory)</li>
<li>Sort them and place them in order piles</li>
<li>Combine the piles in order until the whole book is sorted</li>
</ol>
<p>It’s a multi-pass algorithm:</p>
<ul>
<li>Pass 1: Create sorted runs</li>
<li>Pass 2+: Merge runs in multiple passes until one remains</li>
</ul>
<section id="step-by-step-process-17" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-17">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Divide the large file into blocks fitting memory</td>
</tr>
<tr class="even">
<td>2</td>
<td>Load a block, sort it using in-memory sort</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Write each sorted block (run) to disk</td>
</tr>
<tr class="even">
<td>4</td>
<td>Merge all runs using k-way merging</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Repeat merges until a single sorted file remains</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-simplified-simulation" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-simplified-simulation">Tiny Code (Simplified Simulation)</h3>
<section id="python-simulated-external-sort" class="level4">
<h4 class="anchored" data-anchor-id="python-simulated-external-sort">Python (Simulated External Sort)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> heapq</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> tempfile</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sort_chunk(chunk):</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    chunk.sort()</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    temp <span class="op">=</span> tempfile.TemporaryFile(mode<span class="op">=</span><span class="st">"w+t"</span>)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    temp.writelines(<span class="ss">f"</span><span class="sc">{</span>x<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span> <span class="cf">for</span> x <span class="kw">in</span> chunk)</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    temp.seek(<span class="dv">0</span>)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> temp</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> merge_files(files, output_file):</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    iters <span class="op">=</span> [<span class="bu">map</span>(<span class="bu">int</span>, f) <span class="cf">for</span> f <span class="kw">in</span> files]</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(output_file, <span class="st">"w"</span>) <span class="im">as</span> out:</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> num <span class="kw">in</span> heapq.merge(<span class="op">*</span>iters):</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>            out.write(<span class="ss">f"</span><span class="sc">{</span>num<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> external_merge_sort(input_data, chunk_size<span class="op">=</span><span class="dv">5</span>):</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>    chunks <span class="op">=</span> []</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(input_data), chunk_size):</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>        chunk <span class="op">=</span> input_data[i:i <span class="op">+</span> chunk_size]</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>        chunks.append(sort_chunk(chunk))</span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>    merge_files(chunks, <span class="st">"sorted_output.txt"</span>)</span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> [<span class="dv">42</span>, <span class="dv">17</span>, <span class="dv">93</span>, <span class="dv">8</span>, <span class="dv">23</span>, <span class="dv">4</span>, <span class="dv">16</span>, <span class="dv">99</span>, <span class="dv">55</span>, <span class="dv">12</span>, <span class="dv">71</span>, <span class="dv">3</span>]</span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>external_merge_sort(data, chunk_size<span class="op">=</span><span class="dv">4</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This example simulates external sorting in Python, splitting input into chunks, sorting each, and merging with <code>heapq.merge</code>.</p>
</section>
</section>
<section id="why-it-matters-18" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-18">Why It Matters</h3>
<ul>
<li>Handles massive datasets beyond memory limits</li>
<li>Sequential disk I/O (fast and predictable)</li>
<li>Foundation of database sort-merge joins</li>
<li>Works well with distributed systems (MapReduce, Spark)</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-18" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-18">A Gentle Proof (Why It Works)</h3>
<p>Each pass performs O(n) work to read and write the entire dataset. If <code>r</code> is the number of runs, and <code>k</code> is merge fan-in (number of runs merged at once):</p>
<p><span class="math display">\[
\text{Number of passes} = \lceil \log_k r \rceil
\]</span></p>
<p>Total cost ≈ <span class="math display">\[
O(n \log_k r)
\]</span> dominated by I/O operations rather than comparisons.</p>
<p>For <code>r = n/M</code> (chunks of memory size <code>M</code>), performance is optimized by choosing <code>k ≈ M</code>.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Work</th>
<th>Cost</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Create Runs</td>
<td>O(n log M)</td>
<td>Sort chunks</td>
</tr>
<tr class="even">
<td>Merge Runs</td>
<td>O(n log_k r)</td>
<td>Merge passes</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-18" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-18">Try It Yourself</h3>
<ol type="1">
<li>Split [42, 17, 93, 8, 23, 4, 16, 99, 55, 12, 71, 3] into 4-element chunks.</li>
<li>Sort each chunk individually.</li>
<li>Simulate merging sorted runs.</li>
<li>Try merging 2-way vs 4-way, count passes.</li>
<li>Visualize merging tree (runs combining).</li>
<li>Test with random large arrays (simulate files).</li>
<li>Modify chunk size and observe performance.</li>
<li>Compare I/O counts with in-memory sort.</li>
<li>Use <code>heapq.merge</code> to merge sorted streams.</li>
<li>Extend to merge files on disk (not just lists).</li>
</ol>
</section>
<section id="test-cases-18" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-18">Test Cases</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 35%">
<col style="width: 15%">
<col style="width: 25%">
<col style="width: 23%">
</colgroup>
<thead>
<tr class="header">
<th>Input</th>
<th>Memory Limit</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[9, 4, 7, 2, 5, 1, 8, 3, 6]</td>
<td>3 elements</td>
<td>[1,2,3,4,5,6,7,8,9]</td>
<td>3-way merge</td>
</tr>
<tr class="even">
<td>1 GB integers</td>
<td>100 MB</td>
<td>Sorted file</td>
<td>10 sorted runs</td>
</tr>
<tr class="odd">
<td>[1,1,1,1,1]</td>
<td>small</td>
<td>[1,1,1,1,1]</td>
<td>Handles duplicates</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-18" class="level3">
<h3 class="anchored" data-anchor-id="complexity-18">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(n log_k (n/M))</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(M) (memory buffer)</td>
</tr>
<tr class="odd">
<td>I/O Passes</td>
<td>O(log_k (n/M))</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>Yes (fewer runs if data partially sorted)</td>
</tr>
</tbody>
</table>
<p>External Merge Sort is the unsung hero behind large-scale sorting, when memory ends, it steps in with disk-based precision, keeping order across terabytes with calm efficiency.</p>
</section>
<section id="parallel-merge-sort" class="level3">
<h3 class="anchored" data-anchor-id="parallel-merge-sort">120 Parallel Merge Sort</h3>
<p>Parallel Merge Sort takes the familiar divide-and-conquer structure of Merge Sort and spreads the work across multiple threads or processors, achieving faster sorting on multi-core CPUs or distributed systems. It’s an ideal illustration of how parallelism can amplify a classic algorithm without changing its logic.</p>
</section>
<section id="what-problem-are-we-solving-19" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-19">What Problem Are We Solving?</h3>
<p>Traditional Merge Sort runs sequentially, so even though its complexity is O(n log n), it uses only one CPU core. On modern hardware with many cores, that’s a waste.</p>
<p>Parallel Merge Sort tackles this by:</p>
<ul>
<li>Sorting subarrays in parallel</li>
<li>Merging results concurrently</li>
<li>Utilizing full CPU or cluster potential</li>
</ul>
<p>It’s essential for:</p>
<ul>
<li>High-performance computing</li>
<li>Large-scale sorting</li>
<li>Real-time analytics pipelines</li>
</ul>
<section id="example-19" class="level4">
<h4 class="anchored" data-anchor-id="example-19">Example</h4>
<p>Sort [5, 3, 4, 1, 2] using 2 threads:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 33%">
<col style="width: 40%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Threads</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Split array into halves</td>
<td>2 threads</td>
<td>[5, 3, 4], [1, 2]</td>
</tr>
<tr class="even">
<td>2</td>
<td>Sort each half concurrently</td>
<td>T1: sort [5,3,4], T2: sort [1,2]</td>
<td>[3,4,5], [1,2]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Merge results</td>
<td>1 thread</td>
<td>[1,2,3,4,5]</td>
</tr>
</tbody>
</table>
<p>Parallelism reduces total time roughly by 1 / number of threads (with overhead).</p>
</section>
</section>
<section id="how-does-it-work-plain-language-19" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-19">How Does It Work (Plain Language)?</h3>
<p>It’s still divide and conquer, just with teamwork:</p>
<ol type="1">
<li>Split array into two halves.</li>
<li>Sort each half in parallel.</li>
<li>Merge the two sorted halves.</li>
<li>Stop splitting when subarrays are small (then sort sequentially).</li>
</ol>
<p>Each recursive level can launch new threads until you reach a threshold or maximum depth.</p>
<section id="step-by-step-process-18" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-18">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Divide the array into halves</td>
</tr>
<tr class="even">
<td>2</td>
<td>Sort both halves concurrently</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Wait for both to finish</td>
</tr>
<tr class="even">
<td>4</td>
<td>Merge results sequentially</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Repeat recursively for subparts</td>
</tr>
</tbody>
</table>
<p>This pattern fits well with thread pools, task schedulers, or fork-join frameworks.</p>
</section>
</section>
<section id="tiny-code-easy-versions-18" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-18">Tiny Code (Easy Versions)</h3>
<section id="c-posix-threads-example" class="level4">
<h4 class="anchored" data-anchor-id="c-posix-threads-example">C (POSIX Threads Example)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb38"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;pthread.h&gt;</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>arr<span class="op">;</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left<span class="op">;</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> right<span class="op">;</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Args<span class="op">;</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> merge<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> l<span class="op">,</span> <span class="dt">int</span> m<span class="op">,</span> <span class="dt">int</span> r<span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n1 <span class="op">=</span> m <span class="op">-</span> l <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> n2 <span class="op">=</span> r <span class="op">-</span> m<span class="op">;</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> L<span class="op">[</span>n1<span class="op">],</span> R<span class="op">[</span>n2<span class="op">];</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n1<span class="op">;</span> i<span class="op">++)</span> L<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>l <span class="op">+</span> i<span class="op">];</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> n2<span class="op">;</span> j<span class="op">++)</span> R<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>m <span class="op">+</span> <span class="dv">1</span> <span class="op">+</span> j<span class="op">];</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> k <span class="op">=</span> l<span class="op">;</span></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n1 <span class="op">&amp;&amp;</span> j <span class="op">&lt;</span> n2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> <span class="op">(</span>L<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;=</span> R<span class="op">[</span>j<span class="op">])</span> <span class="op">?</span> L<span class="op">[</span>i<span class="op">++]</span> <span class="op">:</span> R<span class="op">[</span>j<span class="op">++];</span></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n1<span class="op">)</span> arr<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> L<span class="op">[</span>i<span class="op">++];</span></span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>j <span class="op">&lt;</span> n2<span class="op">)</span> arr<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> R<span class="op">[</span>j<span class="op">++];</span></span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="op">*</span>parallel_merge_sort<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>arg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a>    Args <span class="op">*</span>args <span class="op">=</span> <span class="op">(</span>Args <span class="op">*)</span>arg<span class="op">;</span></span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> l <span class="op">=</span> args<span class="op">-&gt;</span>left<span class="op">,</span> r <span class="op">=</span> args<span class="op">-&gt;</span>right<span class="op">;</span></span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>arr <span class="op">=</span> args<span class="op">-&gt;</span>arr<span class="op">;</span></span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>l <span class="op">&lt;</span> r<span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> m <span class="op">=</span> l <span class="op">+</span> <span class="op">(</span>r <span class="op">-</span> l<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"></a>        Args leftArgs <span class="op">=</span> <span class="op">{</span>arr<span class="op">,</span> l<span class="op">,</span> m<span class="op">};</span></span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"></a>        Args rightArgs <span class="op">=</span> <span class="op">{</span>arr<span class="op">,</span> m <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> r<span class="op">};</span></span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"></a>        pthread_t leftThread<span class="op">,</span> rightThread<span class="op">;</span></span>
<span id="cb38-36"><a href="#cb38-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-37"><a href="#cb38-37" aria-hidden="true" tabindex="-1"></a>        pthread_create<span class="op">(&amp;</span>leftThread<span class="op">,</span> NULL<span class="op">,</span> parallel_merge_sort<span class="op">,</span> <span class="op">&amp;</span>leftArgs<span class="op">);</span></span>
<span id="cb38-38"><a href="#cb38-38" aria-hidden="true" tabindex="-1"></a>        pthread_create<span class="op">(&amp;</span>rightThread<span class="op">,</span> NULL<span class="op">,</span> parallel_merge_sort<span class="op">,</span> <span class="op">&amp;</span>rightArgs<span class="op">);</span></span>
<span id="cb38-39"><a href="#cb38-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-40"><a href="#cb38-40" aria-hidden="true" tabindex="-1"></a>        pthread_join<span class="op">(</span>leftThread<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb38-41"><a href="#cb38-41" aria-hidden="true" tabindex="-1"></a>        pthread_join<span class="op">(</span>rightThread<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb38-42"><a href="#cb38-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-43"><a href="#cb38-43" aria-hidden="true" tabindex="-1"></a>        merge<span class="op">(</span>arr<span class="op">,</span> l<span class="op">,</span> m<span class="op">,</span> r<span class="op">);</span></span>
<span id="cb38-44"><a href="#cb38-44" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb38-45"><a href="#cb38-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb38-46"><a href="#cb38-46" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb38-47"><a href="#cb38-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-48"><a href="#cb38-48" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb38-49"><a href="#cb38-49" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb38-50"><a href="#cb38-50" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb38-51"><a href="#cb38-51" aria-hidden="true" tabindex="-1"></a>    Args args <span class="op">=</span> <span class="op">{</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">};</span></span>
<span id="cb38-52"><a href="#cb38-52" aria-hidden="true" tabindex="-1"></a>    parallel_merge_sort<span class="op">(&amp;</span>args<span class="op">);</span></span>
<span id="cb38-53"><a href="#cb38-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb38-54"><a href="#cb38-54" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb38-55"><a href="#cb38-55" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>(Note: This simple version may create too many threads; real implementations limit thread depth.)</em></p>
</section>
<section id="python-using-multiprocessing" class="level4">
<h4 class="anchored" data-anchor-id="python-using-multiprocessing">Python (Using multiprocessing)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> multiprocessing <span class="im">import</span> Pool</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> merge(left, right):</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> j <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(left) <span class="kw">and</span> j <span class="op">&lt;</span> <span class="bu">len</span>(right):</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> left[i] <span class="op">&lt;</span> right[j]:</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>            result.append(left[i])</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>            result.append(right[j])</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>            j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>    result.extend(left[i:])</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>    result.extend(right[j:])</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> parallel_merge_sort(arr):</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(arr) <span class="op">&lt;=</span> <span class="dv">1</span>:</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> arr</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(arr) <span class="op">&lt;</span> <span class="dv">1000</span>:  <span class="co"># threshold</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">sorted</span>(arr)</span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>    mid <span class="op">=</span> <span class="bu">len</span>(arr) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> Pool(<span class="dv">2</span>) <span class="im">as</span> p:</span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>        left, right <span class="op">=</span> p.<span class="bu">map</span>(parallel_merge_sort, [arr[:mid], arr[mid:]])</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> merge(left, right)</span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parallel_merge_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-19" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-19">Why It Matters</h3>
<ul>
<li>Exploits multi-core architectures</li>
<li>Significantly reduces wall-clock time</li>
<li>Maintains O(n log n) work</li>
<li>Great showcase of parallel divide-and-conquer</li>
</ul>
<p>Used in:</p>
<ul>
<li>HPC (High Performance Computing)</li>
<li>Modern standard libraries (<code>std::execution::par</code>)</li>
<li>Big data frameworks (Spark, Hadoop)</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-19" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-19">A Gentle Proof (Why It Works)</h3>
<p>Each recursive call sorts n/2 elements, but now in parallel. Let P = number of processors.</p>
<p>Work (total operations): <span class="math display">\[
T_{work}(n) = O(n \log n)
\]</span> Span (critical path time): <span class="math display">\[
T_{span}(n) = O(\log^2 n)
\]</span></p>
<p>Total time ≈ <span class="math display">\[
O\left(\frac{n \log n}{P} + \log^2 n\right)
\]</span></p>
<p>Speedup ≈ P×, limited by synchronization and merge overhead.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Parallelizable</th>
<th>Work</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Sort subarrays</td>
<td>Yes</td>
<td>O(n log n / P)</td>
</tr>
<tr class="even">
<td>Merge</td>
<td>Partially</td>
<td>O(n log P)</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-19" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-19">Try It Yourself</h3>
<ol type="1">
<li>Run with 1, 2, 4, 8 threads, compare speed.</li>
<li>Print thread IDs at each recursive call.</li>
<li>Implement threshold for small subarrays.</li>
<li>Merge using parallel merging.</li>
<li>Measure CPU utilization during sort.</li>
<li>Test with large random list (10⁶ elements).</li>
<li>Compare with sequential Merge Sort.</li>
<li>Profile with timing tools.</li>
<li>Try OpenMP version in C.</li>
<li>Extend to distributed nodes (MPI).</li>
</ol>
</section>
<section id="test-cases-19" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-19">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Threads</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3,2,1]</td>
<td>2</td>
<td>[1,2,3]</td>
<td>Simple</td>
</tr>
<tr class="even">
<td>[5,3,4,1,2]</td>
<td>2</td>
<td>[1,2,3,4,5]</td>
<td>Balanced work</td>
</tr>
<tr class="odd">
<td>1e6 random ints</td>
<td>8</td>
<td>sorted</td>
<td>Parallel boost</td>
</tr>
<tr class="even">
<td>[1,1,1,1]</td>
<td>4</td>
<td>[1,1,1,1]</td>
<td>Stable behavior</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-19" class="level3">
<h3 class="anchored" data-anchor-id="complexity-19">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Work</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Span</td>
<td>O(log² n)</td>
</tr>
<tr class="odd">
<td>Parallel Time</td>
<td>O(n log n / P + log² n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Parallel Merge Sort is Merge Sort reborn for the multi-core era, the same elegance, now with teamwork. It’s how classic algorithms learn to scale with hardware.</p>
</section>
</section>
<section id="section-13.-counting-and-distribution-sorts" class="level2">
<h2 class="anchored" data-anchor-id="section-13.-counting-and-distribution-sorts">Section 13. Counting and distribution sorts</h2>
<section id="counting-sort" class="level3">
<h3 class="anchored" data-anchor-id="counting-sort">121 Counting Sort</h3>
<p>Counting Sort is a non-comparison sorting algorithm that sorts integers (or items mapped to integer keys) by counting occurrences of each value. Instead of comparing elements, it directly uses their values as indices in a counting array. It’s fast (O(n + k)), stable, and perfect when the input range is limited and small.</p>
</section>
<section id="what-problem-are-we-solving-20" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-20">What Problem Are We Solving?</h3>
<p>When keys are integers within a known range, comparison-based sorts (O(n log n)) are overkill. Counting Sort leverages that limited range to sort in linear time, without any comparisons.</p>
<p>Perfect for:</p>
<ul>
<li>Sorting grades (0–100)</li>
<li>Sorting digits or ASCII codes (0–255)</li>
<li>Pre-step for Radix Sort or Bucket Sort</li>
<li>Scenarios where key range ≪ n²</li>
</ul>
<section id="example-20" class="level4">
<h4 class="anchored" data-anchor-id="example-20">Example</h4>
<p>Sort array <code>[4, 2, 2, 8, 3, 3, 1]</code></p>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 56%">
<col style="width: 37%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Find max = 8</td>
<td>Range = 0–8</td>
</tr>
<tr class="even">
<td>2</td>
<td>Initialize count[9] = [0,0,0,0,0,0,0,0,0]</td>
<td></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Count each number</td>
<td>count = [0,1,2,2,1,0,0,0,1]</td>
</tr>
<tr class="even">
<td>4</td>
<td>Prefix sum (positions)</td>
<td>count = [0,1,3,5,6,6,6,6,7]</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Place elements by count</td>
<td>[1,2,2,3,3,4,8]</td>
</tr>
</tbody>
</table>
<p>The count array tracks the position boundaries for each key.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-20" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-20">How Does It Work (Plain Language)?</h3>
<p>Counting Sort doesn’t compare elements. It counts how many times each value appears, then uses those counts to reconstruct the sorted list.</p>
<p>Think of it as filling labeled bins:</p>
<ul>
<li>One bin for each number</li>
<li>Drop each element into its bin</li>
<li>Then walk through bins in order and empty them</li>
</ul>
<section id="step-by-step-process-19" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-19">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Find min and max (determine range <code>k</code>)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Create count array of size <code>k + 1</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Count occurrences of each value</td>
</tr>
<tr class="even">
<td>4</td>
<td>Transform counts into prefix sums (for positions)</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Traverse input in reverse (for stability), placing elements</td>
</tr>
<tr class="even">
<td>6</td>
<td>Copy sorted output back</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-19" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-19">Tiny Code (Easy Versions)</h3>
<section id="c-16" class="level4">
<h4 class="anchored" data-anchor-id="c-16">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb40"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> counting_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max <span class="op">=</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> max<span class="op">)</span> max <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count<span class="op">[</span>max <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>    memset<span class="op">(</span>count<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>count<span class="op">));</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>        count<span class="op">[</span>arr<span class="op">[</span>i<span class="op">]]++;</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> max<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>        count<span class="op">[</span>i<span class="op">]</span> <span class="op">+=</span> count<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> output<span class="op">[</span>n<span class="op">];</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--)</span> <span class="op">{</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>        output<span class="op">[</span>count<span class="op">[</span>arr<span class="op">[</span>i<span class="op">]]</span> <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>        count<span class="op">[</span>arr<span class="op">[</span>i<span class="op">]]--;</span></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> output<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">1</span><span class="op">};</span></span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a>    counting_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-18" class="level4">
<h4 class="anchored" data-anchor-id="python-18">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> counting_sort(arr):</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>    max_val <span class="op">=</span> <span class="bu">max</span>(arr)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    count <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> (max_val <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> num <span class="kw">in</span> arr:</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>        count[num] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(count)):</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>        count[i] <span class="op">+=</span> count[i <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>    output <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> <span class="bu">len</span>(arr)</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> num <span class="kw">in</span> <span class="bu">reversed</span>(arr):</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>        count[num] <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>        output[count[num]] <span class="op">=</span> num</span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> output</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">1</span>]</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(counting_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-20" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-20">Why It Matters</h3>
<ul>
<li>Linear time when range is small (<code>O(n + k)</code>)</li>
<li>Stable, preserving input order</li>
<li>Foundation for Radix Sort</li>
<li>Great for integer, digit, or bucket sorting</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-20" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-20">A Gentle Proof (Why It Works)</h3>
<p>Counting Sort replaces comparison by index-based placement.</p>
<p>If <code>n</code> is number of elements and <code>k</code> is key range:</p>
<ul>
<li>Counting occurrences: O(n)</li>
<li>Prefix sums: O(k)</li>
<li>Placement: O(n)</li>
</ul>
<p>Total = O(n + k)</p>
<p>Stable because we traverse input in reverse while placing.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Work</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Count elements</td>
<td>O(n)</td>
<td>Scan once</td>
</tr>
<tr class="even">
<td>Prefix sum</td>
<td>O(k)</td>
<td>Range pass</td>
</tr>
<tr class="odd">
<td>Place elements</td>
<td>O(n)</td>
<td>Stable write</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-20" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-20">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[4, 2, 2, 8, 3, 3, 1]</code> step by step.</li>
<li>Show count array after counting.</li>
<li>Convert count to prefix sums.</li>
<li>Place elements in output (reverse scan).</li>
<li>Compare stable vs unstable version.</li>
<li>Change input to <code>[9, 9, 1, 2]</code>.</li>
<li>Try sorting <code>[5, 3, 5, 1, 0]</code>.</li>
<li>Handle input with min &gt; 0 (offset counts).</li>
<li>Measure runtime vs Bubble Sort.</li>
<li>Use as subroutine in Radix Sort.</li>
</ol>
</section>
<section id="test-cases-20" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-20">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[4,2,2,8,3,3,1]</td>
<td>[1,2,2,3,3,4,8]</td>
<td>Example</td>
</tr>
<tr class="even">
<td>[1,4,1,2,7,5,2]</td>
<td>[1,1,2,2,4,5,7]</td>
<td>Stable</td>
</tr>
<tr class="odd">
<td>[9,9,9,9]</td>
<td>[9,9,9,9]</td>
<td>Repeats</td>
</tr>
<tr class="even">
<td>[0,1,2,3]</td>
<td>[0,1,2,3]</td>
<td>Already sorted</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-20" class="level3">
<h3 class="anchored" data-anchor-id="complexity-20">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(n + k)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n + k)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Range-sensitive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Counting Sort is like sorting by bins, no comparisons, no stress, just clean counts and linear time. It’s a powerhouse behind Radix Sort and data bucketing in performance-critical pipelines.</p>
</section>
<section id="stable-counting-sort" class="level3">
<h3 class="anchored" data-anchor-id="stable-counting-sort">122 Stable Counting Sort</h3>
<p>Stable Counting Sort refines the basic Counting Sort by ensuring equal elements preserve their original order. This property, called <em>stability</em>, is crucial when sorting multi-key data, for example, sorting people by age, then by name. Stable versions are also the building blocks for Radix Sort, where each digit’s sort depends on stability.</p>
</section>
<section id="what-problem-are-we-solving-21" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-21">What Problem Are We Solving?</h3>
<p>Basic Counting Sort can break order among equal elements because it places them in arbitrary order. When sorting records or tuples where order matters (e.g., by secondary key), we need stability, if <code>a</code> and <code>b</code> have equal keys, their order in output must match input.</p>
<p>Stable Counting Sort ensures that:</p>
<blockquote class="blockquote">
<p>If <code>arr[i]</code> and <code>arr[j]</code> have the same key and <code>i &lt; j</code>, then <code>arr[i]</code> appears before <code>arr[j]</code> in the sorted output.</p>
</blockquote>
<p>Perfect for:</p>
<ul>
<li>Radix Sort digits</li>
<li>Multi-field records (e.g.&nbsp;sort by name, then by score)</li>
<li>Databases and stable pipelines</li>
</ul>
<section id="example-21" class="level4">
<h4 class="anchored" data-anchor-id="example-21">Example</h4>
<p>Sort <code>[4a, 2b, 2a, 8a, 3b, 3a, 1a]</code> (letters mark order)</p>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 41%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Count frequencies</td>
<td>count = [0,1,2,2,1,0,0,0,1]</td>
</tr>
<tr class="even">
<td>2</td>
<td>Prefix sums (positions)</td>
<td>count = [0,1,3,5,6,6,6,6,7]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Traverse input in reverse</td>
<td>output = [1a, 2b, 2a, 3b, 3a, 4a, 8a]</td>
</tr>
</tbody>
</table>
<p>See how <code>2b</code> (index 1) appears before <code>2a</code> (index 2), stable ordering preserved.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-21" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-21">How Does It Work (Plain Language)?</h3>
<p>It’s Counting Sort with a twist: we fill the output from the end of the input, ensuring last-seen equal items go last. By traversing in reverse, earlier elements are placed later, preserving their original order.</p>
<p>This is the core idea behind stable sorting.</p>
<section id="step-by-step-process-20" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-20">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Determine key range (0..max)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Count frequency of each key</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Compute prefix sums (to determine positions)</td>
</tr>
<tr class="even">
<td>4</td>
<td>Traverse input right to left</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Place elements in output using count as index</td>
</tr>
<tr class="even">
<td>6</td>
<td>Decrement count[key] after placement</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-20" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-20">Tiny Code (Easy Versions)</h3>
<section id="c-17" class="level4">
<h4 class="anchored" data-anchor-id="c-17">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb42"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tag<span class="op">;</span> <span class="co">// to visualize stability</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Item<span class="op">;</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> stable_counting_sort<span class="op">(</span>Item arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max <span class="op">=</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">].</span>key<span class="op">;</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">].</span>key <span class="op">&gt;</span> max<span class="op">)</span> max <span class="op">=</span> arr<span class="op">[</span>i<span class="op">].</span>key<span class="op">;</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count<span class="op">[</span>max <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>    memset<span class="op">(</span>count<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>count<span class="op">));</span></span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Count occurrences</span></span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>        count<span class="op">[</span>arr<span class="op">[</span>i<span class="op">].</span>key<span class="op">]++;</span></span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Prefix sums</span></span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> max<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a>        count<span class="op">[</span>i<span class="op">]</span> <span class="op">+=</span> count<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a>    Item output<span class="op">[</span>n<span class="op">];</span></span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Traverse input in reverse for stability</span></span>
<span id="cb42-28"><a href="#cb42-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--)</span> <span class="op">{</span></span>
<span id="cb42-29"><a href="#cb42-29" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> k <span class="op">=</span> arr<span class="op">[</span>i<span class="op">].</span>key<span class="op">;</span></span>
<span id="cb42-30"><a href="#cb42-30" aria-hidden="true" tabindex="-1"></a>        output<span class="op">[</span>count<span class="op">[</span>k<span class="op">]</span> <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb42-31"><a href="#cb42-31" aria-hidden="true" tabindex="-1"></a>        count<span class="op">[</span>k<span class="op">]--;</span></span>
<span id="cb42-32"><a href="#cb42-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb42-33"><a href="#cb42-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-34"><a href="#cb42-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb42-35"><a href="#cb42-35" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> output<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb42-36"><a href="#cb42-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb42-37"><a href="#cb42-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-38"><a href="#cb42-38" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb42-39"><a href="#cb42-39" aria-hidden="true" tabindex="-1"></a>    Item arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{{</span><span class="dv">4</span><span class="op">,</span><span class="ch">'a'</span><span class="op">},{</span><span class="dv">2</span><span class="op">,</span><span class="ch">'b'</span><span class="op">},{</span><span class="dv">2</span><span class="op">,</span><span class="ch">'a'</span><span class="op">},{</span><span class="dv">8</span><span class="op">,</span><span class="ch">'a'</span><span class="op">},{</span><span class="dv">3</span><span class="op">,</span><span class="ch">'b'</span><span class="op">},{</span><span class="dv">3</span><span class="op">,</span><span class="ch">'a'</span><span class="op">},{</span><span class="dv">1</span><span class="op">,</span><span class="ch">'a'</span><span class="op">}};</span></span>
<span id="cb42-40"><a href="#cb42-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb42-41"><a href="#cb42-41" aria-hidden="true" tabindex="-1"></a>    stable_counting_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb42-42"><a href="#cb42-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"(</span><span class="sc">%d</span><span class="st">,</span><span class="sc">%c</span><span class="st">) "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">].</span>key<span class="op">,</span> arr<span class="op">[</span>i<span class="op">].</span>tag<span class="op">);</span></span>
<span id="cb42-43"><a href="#cb42-43" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb42-44"><a href="#cb42-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-19" class="level4">
<h4 class="anchored" data-anchor-id="python-19">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> stable_counting_sort(arr):</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    max_val <span class="op">=</span> <span class="bu">max</span>(arr)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    count <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> (max_val <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> num <span class="kw">in</span> arr:</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>        count[num] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(count)):</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>        count[i] <span class="op">+=</span> count[i <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>    output <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> <span class="bu">len</span>(arr)</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> num <span class="kw">in</span> <span class="bu">reversed</span>(arr):</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>        count[num] <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>        output[count[num]] <span class="op">=</span> num</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> output</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">1</span>]</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stable_counting_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-21" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-21">Why It Matters</h3>
<ul>
<li>Stable sorting is essential for multi-key operations</li>
<li>Required for Radix Sort correctness</li>
<li>Guarantees consistent behavior for duplicates</li>
<li>Used in databases, language sort libraries, pipelines</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-21" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-21">A Gentle Proof (Why It Works)</h3>
<p>Each key is assigned a position range via prefix sums. Traversing input from right to left ensures that earlier items occupy smaller indices, preserving order.</p>
<p>If <code>a</code> appears before <code>b</code> in input and <code>key(a) = key(b)</code>, then <code>count[key(a)]</code> places <code>a</code> before <code>b</code>, stable.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Work</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Counting</td>
<td>O(n)</td>
<td>Pass once</td>
</tr>
<tr class="even">
<td>Prefix sums</td>
<td>O(k)</td>
<td>Range pass</td>
</tr>
<tr class="odd">
<td>Placement</td>
<td>O(n)</td>
<td>Reverse traversal</td>
</tr>
</tbody>
</table>
<p>Total = O(n + k), same as basic Counting Sort, but stable.</p>
</section>
<section id="try-it-yourself-21" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-21">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[(4,'a'), (2,'b'), (2,'a'), (3,'a')]</code>.</li>
<li>Show count and prefix arrays.</li>
<li>Traverse input from end, track output.</li>
<li>Compare with unstable version.</li>
<li>Try sorting <code>[5,3,5,1,0]</code>.</li>
<li>Visualize stability when equal keys appear.</li>
<li>Modify to handle offset keys (negative values).</li>
<li>Combine with Radix Sort (LSD).</li>
<li>Profile runtime vs normal Counting Sort.</li>
<li>Check stability by adding tags (letters).</li>
</ol>
</section>
<section id="test-cases-21" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-21">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[4,2,2,8,3,3,1]</td>
<td>[1,2,2,3,3,4,8]</td>
<td>Same as basic</td>
</tr>
<tr class="even">
<td>[(2,‘a’),(2,‘b’)]</td>
<td>[(2,‘a’),(2,‘b’)]</td>
<td>Stable preserved</td>
</tr>
<tr class="odd">
<td>[1,1,1]</td>
<td>[1,1,1]</td>
<td>Idempotent</td>
</tr>
<tr class="even">
<td>[0,1,2,3]</td>
<td>[0,1,2,3]</td>
<td>Already sorted</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-21" class="level3">
<h3 class="anchored" data-anchor-id="complexity-21">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(n + k)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n + k)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Range-sensitive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Stable Counting Sort is Counting Sort with memory, it not only sorts fast but also remembers your order, making it indispensable for multi-pass algorithms like Radix Sort.</p>
</section>
<section id="radix-sort-lsd" class="level3">
<h3 class="anchored" data-anchor-id="radix-sort-lsd">123 Radix Sort (LSD)</h3>
<p>Radix Sort (Least Significant Digit first) is a non-comparison, stable sorting algorithm that processes integers (or strings) digit by digit, starting from the least significant digit (LSD). By repeatedly applying a stable sort (like Counting Sort) on each digit, it can sort numbers in linear time when digit count is small.</p>
</section>
<section id="what-problem-are-we-solving-22" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-22">What Problem Are We Solving?</h3>
<p>When sorting integers or fixed-length keys (like dates, IDs, or strings of digits), traditional comparison-based sorts spend unnecessary effort. Radix Sort (LSD) sidesteps comparisons by leveraging digit-wise order and stability to achieve O(d × (n + k)) performance.</p>
<p>Perfect for:</p>
<ul>
<li>Sorting numbers, dates, zip codes, or strings</li>
<li>Datasets with bounded digit length</li>
<li>Applications where deterministic performance matters</li>
</ul>
<section id="example-22" class="level4">
<h4 class="anchored" data-anchor-id="example-22">Example</h4>
<p>Sort <code>[170, 45, 75, 90, 802, 24, 2, 66]</code></p>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 16%">
<col style="width: 38%">
<col style="width: 38%">
</colgroup>
<thead>
<tr class="header">
<th>Pass</th>
<th>Digit Place</th>
<th>Input</th>
<th>Output (Stable Sort)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Ones</td>
<td>[170,45,75,90,802,24,2,66]</td>
<td>[170,90,802,2,24,45,75,66]</td>
</tr>
<tr class="even">
<td>2</td>
<td>Tens</td>
<td>[170,90,802,2,24,45,75,66]</td>
<td>[802,2,24,45,66,170,75,90]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Hundreds</td>
<td>[802,2,24,45,66,170,75,90]</td>
<td>[2,24,45,66,75,90,170,802]</td>
</tr>
</tbody>
</table>
<p>Final sorted output: <code>[2, 24, 45, 66, 75, 90, 170, 802]</code></p>
<p>Each pass uses Stable Counting Sort on the current digit.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-22" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-22">How Does It Work (Plain Language)?</h3>
<p>Think of sorting by digit positions:</p>
<ol type="1">
<li>Group by ones place (units)</li>
<li>Group by tens</li>
<li>Group by hundreds, etc.</li>
</ol>
<p>Each pass reorders elements according to the digit at that place, while keeping earlier digit orders intact (thanks to stability).</p>
<p>It’s like sorting by last name, then first name, one field at a time, stable each round.</p>
<section id="step-by-step-process-21" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-21">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Find the maximum number to know the number of digits <code>d</code></td>
</tr>
<tr class="even">
<td>2</td>
<td>For each digit place (1, 10, 100, …):</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Use a stable counting sort based on that digit</td>
</tr>
<tr class="even">
<td>4</td>
<td>After the last pass, the array is fully sorted</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-21" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-21">Tiny Code (Easy Versions)</h3>
<section id="c-18" class="level4">
<h4 class="anchored" data-anchor-id="c-18">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb44"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> get_max<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max <span class="op">=</span> a<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> max<span class="op">)</span> max <span class="op">=</span> a<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max<span class="op">;</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> counting_sort_digit<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> exp<span class="op">)</span> <span class="op">{</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> output<span class="op">[</span>n<span class="op">];</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count<span class="op">[</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">0</span><span class="op">};</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>        count<span class="op">[(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">/</span> exp<span class="op">)</span> <span class="op">%</span> <span class="dv">10</span><span class="op">]++;</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>        count<span class="op">[</span>i<span class="op">]</span> <span class="op">+=</span> count<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--)</span> <span class="op">{</span></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> digit <span class="op">=</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">/</span> exp<span class="op">)</span> <span class="op">%</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>        output<span class="op">[</span>count<span class="op">[</span>digit<span class="op">]</span> <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> a<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>        count<span class="op">[</span>digit<span class="op">]--;</span></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a>        a<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> output<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> radix_sort<span class="op">(</span><span class="dt">int</span> a<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max <span class="op">=</span> get_max<span class="op">(</span>a<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> exp <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> max <span class="op">/</span> exp <span class="op">&gt;</span> <span class="dv">0</span><span class="op">;</span> exp <span class="op">*=</span> <span class="dv">10</span><span class="op">)</span></span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a>        counting_sort_digit<span class="op">(</span>a<span class="op">,</span> n<span class="op">,</span> exp<span class="op">);</span></span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">170</span><span class="op">,</span> <span class="dv">45</span><span class="op">,</span> <span class="dv">75</span><span class="op">,</span> <span class="dv">90</span><span class="op">,</span> <span class="dv">802</span><span class="op">,</span> <span class="dv">24</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">66</span><span class="op">};</span></span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb44-39"><a href="#cb44-39" aria-hidden="true" tabindex="-1"></a>    radix_sort<span class="op">(</span>a<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb44-40"><a href="#cb44-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> a<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb44-41"><a href="#cb44-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb44-42"><a href="#cb44-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-20" class="level4">
<h4 class="anchored" data-anchor-id="python-20">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> counting_sort_digit(arr, exp):</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    output <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> n</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    count <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> <span class="dv">10</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> num <span class="kw">in</span> arr:</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>        index <span class="op">=</span> (num <span class="op">//</span> exp) <span class="op">%</span> <span class="dv">10</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>        count[index] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">10</span>):</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>        count[i] <span class="op">+=</span> count[i <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> num <span class="kw">in</span> <span class="bu">reversed</span>(arr):</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>        index <span class="op">=</span> (num <span class="op">//</span> exp) <span class="op">%</span> <span class="dv">10</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>        count[index] <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>        output[count[index]] <span class="op">=</span> num</span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>        arr[i] <span class="op">=</span> output[i]</span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> radix_sort(arr):</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>    max_val <span class="op">=</span> <span class="bu">max</span>(arr)</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>    exp <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> max_val <span class="op">//</span> exp <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>        counting_sort_digit(arr, exp)</span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>        exp <span class="op">*=</span> <span class="dv">10</span></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">170</span>, <span class="dv">45</span>, <span class="dv">75</span>, <span class="dv">90</span>, <span class="dv">802</span>, <span class="dv">24</span>, <span class="dv">2</span>, <span class="dv">66</span>]</span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>radix_sort(arr)</span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-22" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-22">Why It Matters</h3>
<ul>
<li>Linear time (O(d × (n + k))) for fixed digits</li>
<li>Stable, retains order for equal keys</li>
<li>Great for large numeric datasets</li>
<li>Foundation for efficient key-based sorting (strings, dates)</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-22" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-22">A Gentle Proof (Why It Works)</h3>
<p>At each digit position:</p>
<ul>
<li>Stable Counting Sort reorders by that digit</li>
<li>Earlier digits remain ordered (stability)</li>
<li>After all digits, array is fully ordered</li>
</ul>
<p>If each digit has range <code>k</code> and <code>d</code> total digits:</p>
<p><span class="math display">\[
T(n) = O(d \times (n + k))
\]</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Work</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Per digit</td>
<td>O(n + k)</td>
<td>Counting sort</td>
</tr>
<tr class="even">
<td>All digits</td>
<td>d × O(n + k)</td>
<td>Total</td>
</tr>
</tbody>
</table>
<p>If <code>d</code> and <code>k</code> are constants → O(n) overall.</p>
</section>
<section id="try-it-yourself-22" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-22">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[170, 45, 75, 90, 802, 24, 2, 66]</code>.</li>
<li>Trace each pass (ones, tens, hundreds).</li>
<li>Show count table per digit.</li>
<li>Compare stable vs unstable sorting.</li>
<li>Add zeros: <code>[07, 70, 700]</code>.</li>
<li>Try <code>[3, 1, 2, 10, 11, 21]</code>.</li>
<li>Count digit comparisons.</li>
<li>Modify to handle negative numbers (offset).</li>
<li>Change base to 16 (hex).</li>
<li>Compare with Merge Sort performance on large input.</li>
</ol>
</section>
<section id="test-cases-22" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-22">Test Cases</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 37%">
<col style="width: 37%">
<col style="width: 24%">
</colgroup>
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[170,45,75,90,802,24,2,66]</td>
<td>[2,24,45,66,75,90,170,802]</td>
<td>Classic</td>
</tr>
<tr class="even">
<td>[9,8,7,6,5]</td>
<td>[5,6,7,8,9]</td>
<td>Reversed</td>
</tr>
<tr class="odd">
<td>[10,1,100,1000]</td>
<td>[1,10,100,1000]</td>
<td>Different lengths</td>
</tr>
<tr class="even">
<td>[22,22,11,11]</td>
<td>[11,11,22,22]</td>
<td>Stable</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-22" class="level3">
<h3 class="anchored" data-anchor-id="complexity-22">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(d × (n + k))</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n + k)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Range-sensitive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Radix Sort (LSD) is the assembly line of sorting, each pass builds upon the last, producing perfectly ordered output from simple stable steps.</p>
</section>
<section id="radix-sort-msd" class="level3">
<h3 class="anchored" data-anchor-id="radix-sort-msd">124 Radix Sort (MSD)</h3>
<p>Radix Sort (Most Significant Digit first) is a recursive variant of Radix Sort that begins sorting from the most significant digit (MSD) and works downward. Unlike LSD Radix Sort, which is iterative and stable across all digits, MSD focuses on prefix-based grouping and recursively sorts subgroups. This makes it ideal for variable-length keys such as strings, IP addresses, or long integers.</p>
</section>
<section id="what-problem-are-we-solving-23" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-23">What Problem Are We Solving?</h3>
<p>LSD Radix Sort works best for fixed-length keys, where every element has the same number of digits. But when keys differ in length (e.g., strings “a”, “ab”, “abc”), we need to respect prefix order, “a” should come before “ab”.</p>
<p>MSD Radix Sort handles this by grouping by prefix digits, then recursively sorting each group.</p>
<p>Perfect for:</p>
<ul>
<li>Strings, words, or variable-length keys</li>
<li>Hierarchical data (prefix-sensitive)</li>
<li>Lexicographic ordering (dictionary order)</li>
</ul>
<section id="example-23" class="level4">
<h4 class="anchored" data-anchor-id="example-23">Example</h4>
<p>Sort: <code>["b", "ba", "abc", "ab", "ac"]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Digit</th>
<th>Groups</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1st char</td>
<td>a → [“abc”, “ab”, “ac”], b → [“b”, “ba”]</td>
</tr>
<tr class="even">
<td>2</td>
<td>Group “a”</td>
<td>2nd char → b: [“abc”, “ab”], c: [“ac”]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Group “ab”</td>
<td>3rd char → c: [“abc”], end: [“ab”]</td>
</tr>
<tr class="even">
<td>4</td>
<td>Final merge</td>
<td>[“ab”, “abc”, “ac”, “b”, “ba”]</td>
</tr>
</tbody>
</table>
<p>Lexicographic order preserved, even with varying lengths.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-23" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-23">How Does It Work (Plain Language)?</h3>
<p>MSD Radix Sort organizes data by prefix trees (tries) conceptually:</p>
<ul>
<li>Partition elements by their most significant digit (or character)</li>
<li>Recurse within each group for next digit</li>
<li>Merge groups in order of digit values</li>
</ul>
<p>If LSD is like bucket sorting digits from the back, MSD is tree-like sorting from the top.</p>
<section id="step-by-step-process-22" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-22">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Find highest digit place (or first character)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Partition array into groups by that digit</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Recursively sort each group by next digit</td>
</tr>
<tr class="even">
<td>4</td>
<td>Concatenate groups in order</td>
</tr>
</tbody>
</table>
<p>For strings, if one string ends early, it’s considered smaller.</p>
</section>
</section>
<section id="tiny-code-easy-versions-22" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-22">Tiny Code (Easy Versions)</h3>
<section id="python-string-example" class="level4">
<h4 class="anchored" data-anchor-id="python-string-example">Python (String Example)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> msd_radix_sort(arr, pos<span class="op">=</span><span class="dv">0</span>):</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(arr) <span class="op">&lt;=</span> <span class="dv">1</span>:</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> arr</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Buckets for ASCII range (0-255) + 1 for end-of-string</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    buckets <span class="op">=</span> [[] <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">257</span>)]</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> word <span class="kw">in</span> arr:</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>        index <span class="op">=</span> <span class="bu">ord</span>(word[pos]) <span class="op">+</span> <span class="dv">1</span> <span class="cf">if</span> pos <span class="op">&lt;</span> <span class="bu">len</span>(word) <span class="cf">else</span> <span class="dv">0</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>        buckets[index].append(word)</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> bucket <span class="kw">in</span> buckets:</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> bucket:</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Only recurse if there's more than one element and not EOS</span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="bu">len</span>(bucket) <span class="op">&gt;</span> <span class="dv">1</span> <span class="kw">and</span> (pos <span class="op">&lt;</span> <span class="bu">max</span>(<span class="bu">len</span>(w) <span class="cf">for</span> w <span class="kw">in</span> bucket)):</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>                bucket <span class="op">=</span> msd_radix_sort(bucket, pos <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>            result.extend(bucket)</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="st">"b"</span>, <span class="st">"ba"</span>, <span class="st">"abc"</span>, <span class="st">"ab"</span>, <span class="st">"ac"</span>]</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(msd_radix_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$'ab', 'abc', 'ac', 'b', 'ba']</code></pre>
</section>
<section id="c-numeric-example" class="level4">
<h4 class="anchored" data-anchor-id="c-numeric-example">C (Numeric Example)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb48"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> get_digit<span class="op">(</span><span class="dt">int</span> num<span class="op">,</span> <span class="dt">int</span> exp<span class="op">,</span> <span class="dt">int</span> base<span class="op">)</span> <span class="op">{</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>num <span class="op">/</span> exp<span class="op">)</span> <span class="op">%</span> base<span class="op">;</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> msd_radix_sort_rec<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> exp<span class="op">,</span> <span class="dt">int</span> base<span class="op">,</span> <span class="dt">int</span> max<span class="op">)</span> <span class="op">{</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>exp <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> n <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> buckets<span class="op">[</span>base<span class="op">][</span>n<span class="op">];</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count<span class="op">[</span>base<span class="op">];</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> base<span class="op">;</span> i<span class="op">++)</span> count<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Distribute</span></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> d <span class="op">=</span> get_digit<span class="op">(</span>arr<span class="op">[</span>i<span class="op">],</span> exp<span class="op">,</span> base<span class="op">);</span></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>        buckets<span class="op">[</span>d<span class="op">][</span>count<span class="op">[</span>d<span class="op">]++]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Recurse and collect</span></span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> base<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>count<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a>            msd_radix_sort_rec<span class="op">(</span>buckets<span class="op">[</span>i<span class="op">],</span> count<span class="op">[</span>i<span class="op">],</span> exp <span class="op">/</span> base<span class="op">,</span> base<span class="op">,</span> max<span class="op">);</span></span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> count<span class="op">[</span>i<span class="op">];</span> j<span class="op">++)</span></span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>idx<span class="op">++]</span> <span class="op">=</span> buckets<span class="op">[</span>i<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> msd_radix_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max <span class="op">=</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> max<span class="op">)</span> max <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> exp <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb48-37"><a href="#cb48-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>max <span class="op">/</span> exp <span class="op">&gt;=</span> <span class="dv">10</span><span class="op">)</span> exp <span class="op">*=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb48-38"><a href="#cb48-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-39"><a href="#cb48-39" aria-hidden="true" tabindex="-1"></a>    msd_radix_sort_rec<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> exp<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> max<span class="op">);</span></span>
<span id="cb48-40"><a href="#cb48-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb48-41"><a href="#cb48-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-42"><a href="#cb48-42" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb48-43"><a href="#cb48-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">170</span><span class="op">,</span> <span class="dv">45</span><span class="op">,</span> <span class="dv">75</span><span class="op">,</span> <span class="dv">90</span><span class="op">,</span> <span class="dv">802</span><span class="op">,</span> <span class="dv">24</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">66</span><span class="op">};</span></span>
<span id="cb48-44"><a href="#cb48-44" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb48-45"><a href="#cb48-45" aria-hidden="true" tabindex="-1"></a>    msd_radix_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb48-46"><a href="#cb48-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb48-47"><a href="#cb48-47" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb48-48"><a href="#cb48-48" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-23" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-23">Why It Matters</h3>
<ul>
<li>Handles variable-length keys</li>
<li>Natural for lexicographic ordering</li>
<li>Used in string sorting, trie-based systems, suffix array construction</li>
<li>Recursively partitions, often faster for large diverse keys</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-23" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-23">A Gentle Proof (Why It Works)</h3>
<p>Each recursive call partitions the array by digit prefix. Since partitions are disjoint and ordered by digit, concatenating them yields a fully sorted sequence.</p>
<p>For <code>n</code> elements, <code>d</code> digits, and base <code>k</code>:</p>
<p><span class="math display">\[
T(n) = O(n + k) \text{ per level, depth } \le d
\]</span> <span class="math display">\[
\Rightarrow O(d \times (n + k))
\]</span></p>
<p>Stability preserved via ordered grouping.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Work</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Partition</td>
<td>O(n)</td>
<td>Place items in digit buckets</td>
</tr>
<tr class="even">
<td>Recurse</td>
<td>O(d)</td>
<td>Each level processes subgroups</td>
</tr>
<tr class="odd">
<td>Total</td>
<td>O(d(n + k))</td>
<td>Linear in digits</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-23" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-23">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>["b", "ba", "abc", "ab", "ac"]</code>.</li>
<li>Draw recursion tree by character.</li>
<li>Compare order with lexicographic.</li>
<li>Test <code>["dog", "cat", "apple", "apricot"]</code>.</li>
<li>Sort integers <code>[170,45,75,90,802,24,2,66]</code>.</li>
<li>Change base (binary, hex).</li>
<li>Compare with LSD Radix Sort.</li>
<li>Add duplicates and test stability.</li>
<li>Visualize grouping buckets.</li>
<li>Implement with trie-like data structure.</li>
</ol>
</section>
<section id="test-cases-23" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-23">Test Cases</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 38%">
<col style="width: 38%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[“b”,“ba”,“abc”,“ab”,“ac”]</td>
<td>[“ab”,“abc”,“ac”,“b”,“ba”]</td>
<td>Variable length</td>
</tr>
<tr class="even">
<td>[170,45,75,90,802,24,2,66]</td>
<td>[2,24,45,66,75,90,170,802]</td>
<td>Numeric</td>
</tr>
<tr class="odd">
<td>[“a”,“aa”,“aaa”]</td>
<td>[“a”,“aa”,“aaa”]</td>
<td>Prefix order</td>
</tr>
<tr class="even">
<td>[“z”,“y”,“x”]</td>
<td>[“x”,“y”,“z”]</td>
<td>Reverse input</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-23" class="level3">
<h3 class="anchored" data-anchor-id="complexity-23">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(d × (n + k))</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n + k)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Suitable for</td>
<td>Variable-length keys</td>
</tr>
</tbody>
</table>
<p>Radix Sort (MSD) is lexicographic sorting by recursion, it builds order from the top down, treating prefixes as leaders and details as followers, much like how dictionaries arrange words.</p>
</section>
<section id="bucket-sort" class="level3">
<h3 class="anchored" data-anchor-id="bucket-sort">125 Bucket Sort</h3>
<p>Bucket Sort is a distribution-based sorting algorithm that divides the input into several buckets (bins), sorts each bucket individually (often with Insertion Sort), and then concatenates them. When input data is uniformly distributed, Bucket Sort achieves linear time performance (O(n)).</p>
</section>
<section id="what-problem-are-we-solving-24" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-24">What Problem Are We Solving?</h3>
<p>Comparison-based sorts take O(n log n) time in the general case. But if we know that data values are spread evenly across a range, we can exploit this structure to sort faster by grouping similar values together.</p>
<p>Bucket Sort works best when:</p>
<ul>
<li>Input is real numbers in [0, 1) or any known range</li>
<li>Data is uniformly distributed</li>
<li>Buckets are balanced, each with few elements</li>
</ul>
<p>Used in:</p>
<ul>
<li>Probability distributions</li>
<li>Histogram-based sorting</li>
<li>Floating-point sorting</li>
</ul>
<section id="example-24" class="level4">
<h4 class="anchored" data-anchor-id="example-24">Example</h4>
<p>Sort <code>[0.78, 0.17, 0.39, 0.26, 0.72, 0.94, 0.21, 0.12, 0.23, 0.68]</code></p>
<table class="caption-top table">
<colgroup>
<col style="width: 3%">
<col style="width: 37%">
<col style="width: 58%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Create 10 buckets for range [0, 1)</td>
<td>[[] … []]</td>
</tr>
<tr class="even">
<td>2</td>
<td>Distribute elements by <code>int(n * value)</code></td>
<td>[[0.12,0.17,0.21,0.23,0.26],[0.39],[0.68,0.72,0.78],[0.94]]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Sort each bucket (Insertion Sort)</td>
<td>Each bucket sorted individually</td>
</tr>
<tr class="even">
<td>4</td>
<td>Concatenate buckets</td>
<td>[0.12, 0.17, 0.21, 0.23, 0.26, 0.39, 0.68, 0.72, 0.78, 0.94]</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-24" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-24">How Does It Work (Plain Language)?</h3>
<p>Think of sorting test scores:</p>
<ul>
<li>You group scores into bins (0–10, 10–20, 20–30, …)</li>
<li>Sort each bin individually</li>
<li>Merge bins back together in order</li>
</ul>
<p>Bucket Sort leverages range grouping, local order inside each bucket, global order from bucket sequence.</p>
<section id="step-by-step-process-23" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-23">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Create empty buckets for each range interval</td>
</tr>
<tr class="even">
<td>2</td>
<td>Distribute elements into buckets</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Sort each bucket individually</td>
</tr>
<tr class="even">
<td>4</td>
<td>Concatenate buckets sequentially</td>
</tr>
</tbody>
</table>
<p>If buckets are evenly filled, each small sort is fast, almost constant time.</p>
</section>
</section>
<section id="tiny-code-easy-versions-23" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-23">Tiny Code (Easy Versions)</h3>
<section id="c-19" class="level4">
<h4 class="anchored" data-anchor-id="c-19">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb49"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> insertion_sort<span class="op">(</span><span class="dt">float</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">float</span> key <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>j <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&gt;</span> key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>            j<span class="op">--;</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> bucket_sort<span class="op">(</span><span class="dt">float</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> buckets<span class="op">[</span>n<span class="op">][</span>n<span class="op">];</span></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count<span class="op">[</span>n<span class="op">];</span></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> count<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Distribute into buckets</span></span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> idx <span class="op">=</span> n <span class="op">*</span> arr<span class="op">[</span>i<span class="op">];</span> <span class="co">// index by range</span></span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a>        buckets<span class="op">[</span>idx<span class="op">][</span>count<span class="op">[</span>idx<span class="op">]++]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Sort each bucket</span></span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb49-29"><a href="#cb49-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>count<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb49-30"><a href="#cb49-30" aria-hidden="true" tabindex="-1"></a>            insertion_sort<span class="op">(</span>buckets<span class="op">[</span>i<span class="op">],</span> count<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb49-31"><a href="#cb49-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-32"><a href="#cb49-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Concatenate</span></span>
<span id="cb49-33"><a href="#cb49-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> k <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb49-34"><a href="#cb49-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb49-35"><a href="#cb49-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> count<span class="op">[</span>i<span class="op">];</span> j<span class="op">++)</span></span>
<span id="cb49-36"><a href="#cb49-36" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> buckets<span class="op">[</span>i<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb49-37"><a href="#cb49-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb49-38"><a href="#cb49-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-39"><a href="#cb49-39" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb49-40"><a href="#cb49-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="fl">0.78</span><span class="op">,</span><span class="fl">0.17</span><span class="op">,</span><span class="fl">0.39</span><span class="op">,</span><span class="fl">0.26</span><span class="op">,</span><span class="fl">0.72</span><span class="op">,</span><span class="fl">0.94</span><span class="op">,</span><span class="fl">0.21</span><span class="op">,</span><span class="fl">0.12</span><span class="op">,</span><span class="fl">0.23</span><span class="op">,</span><span class="fl">0.68</span><span class="op">};</span></span>
<span id="cb49-41"><a href="#cb49-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb49-42"><a href="#cb49-42" aria-hidden="true" tabindex="-1"></a>    bucket_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb49-43"><a href="#cb49-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%.2f</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb49-44"><a href="#cb49-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb49-45"><a href="#cb49-45" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-21" class="level4">
<h4 class="anchored" data-anchor-id="python-21">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bucket_sort(arr):</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    buckets <span class="op">=</span> [[] <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(n)]</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> num <span class="kw">in</span> arr:</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>        idx <span class="op">=</span> <span class="bu">int</span>(n <span class="op">*</span> num)</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>        buckets[idx].append(num)</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> bucket <span class="kw">in</span> buckets:</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>        bucket.sort()</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> bucket <span class="kw">in</span> buckets:</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>        result.extend(bucket)</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="fl">0.78</span>,<span class="fl">0.17</span>,<span class="fl">0.39</span>,<span class="fl">0.26</span>,<span class="fl">0.72</span>,<span class="fl">0.94</span>,<span class="fl">0.21</span>,<span class="fl">0.12</span>,<span class="fl">0.23</span>,<span class="fl">0.68</span>]</span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bucket_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-24" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-24">Why It Matters</h3>
<ul>
<li>Linear time for uniformly distributed data</li>
<li>Great for floating-point numbers</li>
<li>Illustrates distribution-based sorting</li>
<li>Foundation for histogram, flash, and spread sort</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-24" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-24">A Gentle Proof (Why It Works)</h3>
<p>If input elements are independent and uniformly distributed, expected elements per bucket = <code>O(1)</code>. Sorting each small bucket takes constant time → total linear time.</p>
<p>Total complexity:</p>
<p><span class="math display">\[
T(n) = O(n + \sum_{i=1}^{n} T_i)
\]</span> If each <code>T_i = O(1)</code>, <span class="math display">\[
T(n) = O(n)
\]</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Work</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Distribution</td>
<td>O(n)</td>
<td>One pass</td>
</tr>
<tr class="even">
<td>Local Sort</td>
<td>O(n) total</td>
<td>Expected</td>
</tr>
<tr class="odd">
<td>Concatenate</td>
<td>O(n)</td>
<td>Combine</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-24" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-24">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[0.78,0.17,0.39,0.26,0.72,0.94,0.21,0.12,0.23,0.68]</code>.</li>
<li>Visualize buckets as bins.</li>
<li>Change bucket count to 5, 20, see effect.</li>
<li>Try non-uniform data <code>[0.99,0.99,0.98]</code>.</li>
<li>Replace insertion sort with counting sort.</li>
<li>Measure performance with 10⁶ floats.</li>
<li>Test <code>[0.1,0.01,0.001]</code>, uneven distribution.</li>
<li>Implement bucket indexing for arbitrary ranges.</li>
<li>Compare with Quick Sort runtime.</li>
<li>Plot distribution histogram before sorting.</li>
</ol>
</section>
<section id="test-cases-24" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-24">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[0.78,0.17,0.39,0.26]</td>
<td>[0.17,0.26,0.39,0.78]</td>
<td>Basic</td>
</tr>
<tr class="even">
<td>[0.1,0.01,0.001]</td>
<td>[0.001,0.01,0.1]</td>
<td>Sparse</td>
</tr>
<tr class="odd">
<td>[0.9,0.8,0.7,0.6]</td>
<td>[0.6,0.7,0.8,0.9]</td>
<td>Reverse</td>
</tr>
<tr class="even">
<td>[0.1,0.1,0.1]</td>
<td>[0.1,0.1,0.1]</td>
<td>Duplicates</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-24" class="level3">
<h3 class="anchored" data-anchor-id="complexity-24">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²) (all in one bucket)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes (if bucket sort is stable)</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes (depends on distribution)</td>
</tr>
</tbody>
</table>
<p>Bucket Sort is like sorting by bins, fast, simple, and beautifully efficient when your data is evenly spread. It’s the go-to choice for continuous values in a fixed range.</p>
</section>
<section id="pigeonhole-sort" class="level3">
<h3 class="anchored" data-anchor-id="pigeonhole-sort">126 Pigeonhole Sort</h3>
<p>Pigeonhole Sort is a simple distribution sorting algorithm that places each element directly into its corresponding “pigeonhole” (or bucket) based on its key value. It’s ideal when elements are integers within a small known range, think of it as Counting Sort with explicit placement rather than counting.</p>
</section>
<section id="what-problem-are-we-solving-25" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-25">What Problem Are We Solving?</h3>
<p>When data values are integers and close together, we don’t need comparisons, we can map each value to a slot directly. Pigeonhole Sort is particularly useful for dense integer ranges, such as:</p>
<ul>
<li>Sorting integers from 0 to 100</li>
<li>Sorting scores, ranks, or IDs</li>
<li>Small ranges with many duplicates</li>
</ul>
<p>It trades space for speed, achieving O(n + range) performance.</p>
<section id="example-25" class="level4">
<h4 class="anchored" data-anchor-id="example-25">Example</h4>
<p>Sort <code>[8, 3, 2, 7, 4, 6, 8]</code></p>
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 51%">
<col style="width: 43%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Find min=2, max=8 → range = 7</td>
<td>holes[0..6]</td>
</tr>
<tr class="even">
<td>2</td>
<td>Create pigeonholes: <code>[[],[],[],[],[],[],[]]</code></td>
<td></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Place each number in its hole</td>
<td>holes = <code>[[2],[3],[4],[6],[7],[8,8]]</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>Concatenate holes</td>
<td><code>[2,3,4,6,7,8,8]</code></td>
</tr>
</tbody>
</table>
<p>Each value goes exactly to its mapped hole index.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-25" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-25">How Does It Work (Plain Language)?</h3>
<p>It’s like assigning students to exam rooms based on ID ranges, each slot holds all matching IDs. You fill slots (holes), then read them back in order.</p>
<p>Unlike Counting Sort, which only counts occurrences, Pigeonhole Sort stores the actual values, preserving duplicates directly.</p>
<section id="step-by-step-process-24" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-24">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Find minimum and maximum elements</td>
</tr>
<tr class="even">
<td>2</td>
<td>Compute range = max - min + 1</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Create array of empty pigeonholes of size <code>range</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>For each element, map to hole <code>arr[i] - min</code></td>
</tr>
<tr class="odd">
<td>5</td>
<td>Place element into that hole (append)</td>
</tr>
<tr class="even">
<td>6</td>
<td>Read holes in order and flatten into output</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-24" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-24">Tiny Code (Easy Versions)</h3>
<section id="c-20" class="level4">
<h4 class="anchored" data-anchor-id="c-20">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb51"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> pigeonhole_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> min <span class="op">=</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">],</span> max <span class="op">=</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> min<span class="op">)</span> min <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> max<span class="op">)</span> max <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> range <span class="op">=</span> max <span class="op">-</span> min <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>holes<span class="op">[</span>range<span class="op">];</span></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> counts<span class="op">[</span>range<span class="op">];</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> range<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>        holes<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> malloc<span class="op">(</span>n <span class="op">*</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>        counts<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Place elements into holes</span></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> index <span class="op">=</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">-</span> min<span class="op">;</span></span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a>        holes<span class="op">[</span>index<span class="op">][</span>counts<span class="op">[</span>index<span class="op">]++]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Flatten back</span></span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> index <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> range<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> counts<span class="op">[</span>i<span class="op">];</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>index<span class="op">++]</span> <span class="op">=</span> holes<span class="op">[</span>i<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a>        free<span class="op">(</span>holes<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb51-33"><a href="#cb51-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb51-34"><a href="#cb51-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-35"><a href="#cb51-35" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb51-36"><a href="#cb51-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">8</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">8</span><span class="op">};</span></span>
<span id="cb51-37"><a href="#cb51-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb51-38"><a href="#cb51-38" aria-hidden="true" tabindex="-1"></a>    pigeonhole_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb51-39"><a href="#cb51-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb51-40"><a href="#cb51-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb51-41"><a href="#cb51-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-22" class="level4">
<h4 class="anchored" data-anchor-id="python-22">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> pigeonhole_sort(arr):</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>    min_val, max_val <span class="op">=</span> <span class="bu">min</span>(arr), <span class="bu">max</span>(arr)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    size <span class="op">=</span> max_val <span class="op">-</span> min_val <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    holes <span class="op">=</span> [[] <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(size)]</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> x <span class="kw">in</span> arr:</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>        holes[x <span class="op">-</span> min_val].append(x)</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>    sorted_arr <span class="op">=</span> []</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> hole <span class="kw">in</span> holes:</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>        sorted_arr.extend(hole)</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sorted_arr</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>]</span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pigeonhole_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-25" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-25">Why It Matters</h3>
<ul>
<li>Simple mapping for small integer ranges</li>
<li>Linear time if range ≈ n</li>
<li>Useful in digit, rank, or ID sorting</li>
<li>Provides stable grouping with explicit placement</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-25" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-25">A Gentle Proof (Why It Works)</h3>
<p>Every key is mapped uniquely to a hole (offset by min). All duplicates fall into the same hole, preserving multiplicity. Reading holes sequentially yields sorted order.</p>
<p>If <code>n</code> = number of elements, <code>k</code> = range of values:</p>
<p><span class="math display">\[
T(n) = O(n + k)
\]</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Work</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Find min/max</td>
<td>O(n)</td>
<td>Single pass</td>
</tr>
<tr class="even">
<td>Distribute to holes</td>
<td>O(n)</td>
<td>One placement each</td>
</tr>
<tr class="odd">
<td>Collect results</td>
<td>O(n + k)</td>
<td>Flatten all</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-25" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-25">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[8,3,2,7,4,6,8]</code> by hand.</li>
<li>Show hole contents after distribution.</li>
<li>Add duplicate values, confirm stable grouping.</li>
<li>Try <code>[1,1,1,1]</code>, all in one hole.</li>
<li>Sort negative numbers <code>[0,-1,-2,1]</code> (offset by min).</li>
<li>Increase range to see space cost.</li>
<li>Compare runtime with Counting Sort.</li>
<li>Replace holes with linked lists.</li>
<li>Implement in-place version.</li>
<li>Extend for key-value pairs.</li>
</ol>
</section>
<section id="test-cases-25" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-25">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[8,3,2,7,4,6,8]</td>
<td>[2,3,4,6,7,8,8]</td>
<td>Example</td>
</tr>
<tr class="even">
<td>[1,1,1,1]</td>
<td>[1,1,1,1]</td>
<td>All equal</td>
</tr>
<tr class="odd">
<td>[9,8,7,6]</td>
<td>[6,7,8,9]</td>
<td>Reverse</td>
</tr>
<tr class="even">
<td>[0,-1,-2,1]</td>
<td>[-2,-1,0,1]</td>
<td>Negative offset</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-25" class="level3">
<h3 class="anchored" data-anchor-id="complexity-25">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(n + k)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n + k)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Range-sensitive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Pigeonhole Sort is as direct as sorting gets, one slot per value, one pass in, one pass out. Fast and clean when your data is dense and discrete.</p>
</section>
<section id="flash-sort" class="level3">
<h3 class="anchored" data-anchor-id="flash-sort">127 Flash Sort</h3>
<p>Flash Sort is a distribution-based sorting algorithm that combines ideas from bucket sort and insertion sort. It works in two phases:</p>
<ol type="1">
<li>Classification, distribute elements into classes (buckets) using a linear mapping</li>
<li>Permutation, rearrange elements in-place using cycles</li>
</ol>
<p>It achieves O(n) average time on uniformly distributed data but can degrade to O(n²) in the worst case. Invented by <em>Karl-Dietrich Neubert</em> (1990s), it’s known for being extremely fast in practice on large datasets.</p>
</section>
<section id="what-problem-are-we-solving-26" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-26">What Problem Are We Solving?</h3>
<p>When data is numerically distributed over a range, we can approximate where each element should go and move it close to its final position without full comparison sorting.</p>
<p>Flash Sort is built for:</p>
<ul>
<li>Uniformly distributed numeric data</li>
<li>Large arrays</li>
<li>Performance-critical applications (e.g., simulations, physics, graphics)</li>
</ul>
<p>It leverages approximate indexing and in-place permutation for speed.</p>
<section id="example-26" class="level4">
<h4 class="anchored" data-anchor-id="example-26">Example</h4>
<p>Sort <code>[9, 3, 1, 7, 4, 6, 2, 8, 5]</code> into <code>m = 5</code> classes.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 59%">
<col style="width: 36%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Find <code>min = 1</code>, <code>max = 9</code></td>
<td>range = 8</td>
</tr>
<tr class="even">
<td>2</td>
<td>Map each value to class <code>k = (m-1)*(a[i]-min)/(max-min)</code></td>
<td>Class indices: [4,1,0,3,1,3,0,4,2]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Count elements per class, compute cumulative positions</td>
<td>class boundaries = [0,2,4,6,8,9]</td>
</tr>
<tr class="even">
<td>4</td>
<td>Cycle elements into correct class positions</td>
<td>Rearranged approx order</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Apply insertion sort within classes</td>
<td>Sorted list</td>
</tr>
</tbody>
</table>
<p>Final: <code>[1,2,3,4,5,6,7,8,9]</code></p>
</section>
</section>
<section id="how-does-it-work-plain-language-26" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-26">How Does It Work (Plain Language)?</h3>
<p>Imagine flashing each element to its approximate destination class in one pass, that’s the “flash” phase. Then, fine-tune within each class using a simpler sort (like Insertion Sort).</p>
<p>It’s like placing books roughly into shelves, then tidying each shelf.</p>
<section id="step-by-step-process-25" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-25">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Find min and max</td>
</tr>
<tr class="even">
<td>2</td>
<td>Choose number of classes (usually ≈ 0.43 * n)</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Compute class index for each element</td>
</tr>
<tr class="even">
<td>4</td>
<td>Count elements per class and compute prefix sums</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Move elements to approximate class positions (flash phase)</td>
</tr>
<tr class="even">
<td>6</td>
<td>Use Insertion Sort within each class to finish</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-25" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-25">Tiny Code (Easy Versions)</h3>
<section id="c-21" class="level4">
<h4 class="anchored" data-anchor-id="c-21">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb53"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> insertion_sort<span class="op">(</span><span class="dt">float</span> arr<span class="op">[],</span> <span class="dt">int</span> start<span class="op">,</span> <span class="dt">int</span> end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> start <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> end<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">float</span> key <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>j <span class="op">&gt;=</span> start <span class="op">&amp;&amp;</span> arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&gt;</span> key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>            j<span class="op">--;</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> flash_sort<span class="op">(</span><span class="dt">float</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> min <span class="op">=</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">],</span> max <span class="op">=</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> min<span class="op">)</span> min <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> max<span class="op">)</span> max <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>max <span class="op">==</span> min<span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> m <span class="op">=</span> n <span class="op">*</span> <span class="fl">0.43</span><span class="op">;</span> <span class="co">// number of classes</span></span>
<span id="cb53-26"><a href="#cb53-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> L<span class="op">[</span>m<span class="op">];</span></span>
<span id="cb53-27"><a href="#cb53-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> m<span class="op">;</span> i<span class="op">++)</span> L<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb53-28"><a href="#cb53-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-29"><a href="#cb53-29" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Classification count</span></span>
<span id="cb53-30"><a href="#cb53-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb53-31"><a href="#cb53-31" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> k <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)((</span>m <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">-</span> min<span class="op">)</span> <span class="op">/</span> <span class="op">(</span>max <span class="op">-</span> min<span class="op">));</span></span>
<span id="cb53-32"><a href="#cb53-32" aria-hidden="true" tabindex="-1"></a>        L<span class="op">[</span>k<span class="op">]++;</span></span>
<span id="cb53-33"><a href="#cb53-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb53-34"><a href="#cb53-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-35"><a href="#cb53-35" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Prefix sums</span></span>
<span id="cb53-36"><a href="#cb53-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> m<span class="op">;</span> i<span class="op">++)</span> L<span class="op">[</span>i<span class="op">]</span> <span class="op">+=</span> L<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb53-37"><a href="#cb53-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-38"><a href="#cb53-38" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Flash phase</span></span>
<span id="cb53-39"><a href="#cb53-39" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> move <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> k <span class="op">=</span> m <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb53-40"><a href="#cb53-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>move <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb53-41"><a href="#cb53-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>j <span class="op">&gt;=</span> L<span class="op">[</span>k<span class="op">])</span> k <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)((</span>m <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span>arr<span class="op">[</span>j<span class="op">]</span> <span class="op">-</span> min<span class="op">)</span> <span class="op">/</span> <span class="op">(</span>max <span class="op">-</span> min<span class="op">));</span></span>
<span id="cb53-42"><a href="#cb53-42" aria-hidden="true" tabindex="-1"></a>        <span class="dt">float</span> flash <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb53-43"><a href="#cb53-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>j <span class="op">!=</span> L<span class="op">[</span>k<span class="op">])</span> <span class="op">{</span></span>
<span id="cb53-44"><a href="#cb53-44" aria-hidden="true" tabindex="-1"></a>            k <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)((</span>m <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span>flash <span class="op">-</span> min<span class="op">)</span> <span class="op">/</span> <span class="op">(</span>max <span class="op">-</span> min<span class="op">));</span></span>
<span id="cb53-45"><a href="#cb53-45" aria-hidden="true" tabindex="-1"></a>            <span class="dt">float</span> hold <span class="op">=</span> arr<span class="op">[--</span>L<span class="op">[</span>k<span class="op">]];</span></span>
<span id="cb53-46"><a href="#cb53-46" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>L<span class="op">[</span>k<span class="op">]]</span> <span class="op">=</span> flash<span class="op">;</span></span>
<span id="cb53-47"><a href="#cb53-47" aria-hidden="true" tabindex="-1"></a>            flash <span class="op">=</span> hold<span class="op">;</span></span>
<span id="cb53-48"><a href="#cb53-48" aria-hidden="true" tabindex="-1"></a>            move<span class="op">++;</span></span>
<span id="cb53-49"><a href="#cb53-49" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb53-50"><a href="#cb53-50" aria-hidden="true" tabindex="-1"></a>        j<span class="op">++;</span></span>
<span id="cb53-51"><a href="#cb53-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb53-52"><a href="#cb53-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-53"><a href="#cb53-53" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Insertion sort finish</span></span>
<span id="cb53-54"><a href="#cb53-54" aria-hidden="true" tabindex="-1"></a>    insertion_sort<span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb53-55"><a href="#cb53-55" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb53-56"><a href="#cb53-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-57"><a href="#cb53-57" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb53-58"><a href="#cb53-58" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">9</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">7</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">6</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">8</span><span class="op">,</span><span class="dv">5</span><span class="op">};</span></span>
<span id="cb53-59"><a href="#cb53-59" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb53-60"><a href="#cb53-60" aria-hidden="true" tabindex="-1"></a>    flash_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb53-61"><a href="#cb53-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%.0f</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb53-62"><a href="#cb53-62" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb53-63"><a href="#cb53-63" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-23" class="level4">
<h4 class="anchored" data-anchor-id="python-23">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> insertion_sort(arr, start, end):</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(start <span class="op">+</span> <span class="dv">1</span>, end <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> arr[i]</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>        j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&gt;=</span> start <span class="kw">and</span> arr[j] <span class="op">&gt;</span> key:</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>            arr[j <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> arr[j]</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>            j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>        arr[j <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> key</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> flash_sort(arr):</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> n <span class="op">&lt;=</span> <span class="dv">1</span>:</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> arr</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>    min_val, max_val <span class="op">=</span> <span class="bu">min</span>(arr), <span class="bu">max</span>(arr)</span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> max_val <span class="op">==</span> min_val:</span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> arr</span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>    m <span class="op">=</span> <span class="bu">int</span>(<span class="fl">0.43</span> <span class="op">*</span> n)</span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>    L <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> m</span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> x <span class="kw">in</span> arr:</span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>        k <span class="op">=</span> <span class="bu">int</span>((m <span class="op">-</span> <span class="dv">1</span>) <span class="op">*</span> (x <span class="op">-</span> min_val) <span class="op">/</span> (max_val <span class="op">-</span> min_val))</span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>        L[k] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, m):</span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a>        L[i] <span class="op">+=</span> L[i <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb54-26"><a href="#cb54-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-27"><a href="#cb54-27" aria-hidden="true" tabindex="-1"></a>    move, j, k <span class="op">=</span> <span class="dv">0</span>, <span class="dv">0</span>, m <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb54-28"><a href="#cb54-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> move <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span>:</span>
<span id="cb54-29"><a href="#cb54-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&gt;=</span> L[k]:</span>
<span id="cb54-30"><a href="#cb54-30" aria-hidden="true" tabindex="-1"></a>            k <span class="op">=</span> <span class="bu">int</span>((m <span class="op">-</span> <span class="dv">1</span>) <span class="op">*</span> (arr[j] <span class="op">-</span> min_val) <span class="op">/</span> (max_val <span class="op">-</span> min_val))</span>
<span id="cb54-31"><a href="#cb54-31" aria-hidden="true" tabindex="-1"></a>        flash <span class="op">=</span> arr[j]</span>
<span id="cb54-32"><a href="#cb54-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">!=</span> L[k]:</span>
<span id="cb54-33"><a href="#cb54-33" aria-hidden="true" tabindex="-1"></a>            k <span class="op">=</span> <span class="bu">int</span>((m <span class="op">-</span> <span class="dv">1</span>) <span class="op">*</span> (flash <span class="op">-</span> min_val) <span class="op">/</span> (max_val <span class="op">-</span> min_val))</span>
<span id="cb54-34"><a href="#cb54-34" aria-hidden="true" tabindex="-1"></a>            L[k] <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb54-35"><a href="#cb54-35" aria-hidden="true" tabindex="-1"></a>            arr[L[k]], flash <span class="op">=</span> flash, arr[L[k]]</span>
<span id="cb54-36"><a href="#cb54-36" aria-hidden="true" tabindex="-1"></a>            move <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb54-37"><a href="#cb54-37" aria-hidden="true" tabindex="-1"></a>        j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb54-38"><a href="#cb54-38" aria-hidden="true" tabindex="-1"></a>    insertion_sort(arr, <span class="dv">0</span>, n <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb54-39"><a href="#cb54-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr</span>
<span id="cb54-40"><a href="#cb54-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-41"><a href="#cb54-41" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">9</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">7</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">5</span>]</span>
<span id="cb54-42"><a href="#cb54-42" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(flash_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-26" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-26">Why It Matters</h3>
<ul>
<li>Extremely fast on uniformly distributed data</li>
<li>In-place (O(1) extra space)</li>
<li>Practical for large arrays</li>
<li>Combines distribution sorting and insertion finishing</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-26" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-26">A Gentle Proof (Why It Works)</h3>
<p>The classification step maps each element to its expected position region, dramatically reducing disorder. Since each class has a small local range, insertion sort completes quickly.</p>
<p>Expected complexity (uniform input):</p>
<p><span class="math display">\[
T(n) = O(n) \text{ (classification) } + O(n) \text{ (final pass) } = O(n)
\]</span></p>
<p>Worst-case (skewed distribution): O(n²)</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Work</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Classification</td>
<td>O(n)</td>
<td>Compute classes</td>
</tr>
<tr class="even">
<td>Flash rearrangement</td>
<td>O(n)</td>
<td>In-place moves</td>
</tr>
<tr class="odd">
<td>Final sort</td>
<td>O(n)</td>
<td>Local sorting</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-26" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-26">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[9,3,1,7,4,6,2,8,5]</code> step by step.</li>
<li>Change number of classes (0.3n, 0.5n).</li>
<li>Visualize class mapping for each element.</li>
<li>Count moves in flash phase.</li>
<li>Compare with Quick Sort timing on 10⁵ elements.</li>
<li>Test uniform vs skewed data.</li>
<li>Implement with different finishing sort.</li>
<li>Track cycles formed during flash phase.</li>
<li>Observe stability (it’s not stable).</li>
<li>Benchmark against Merge Sort.</li>
</ol>
</section>
<section id="test-cases-26" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-26">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[9,3,1,7,4,6,2,8,5]</td>
<td>[1,2,3,4,5,6,7,8,9]</td>
<td>Example</td>
</tr>
<tr class="even">
<td>[5,5,5,5]</td>
<td>[5,5,5,5]</td>
<td>Equal elements</td>
</tr>
<tr class="odd">
<td>[1,2,3,4,5]</td>
<td>[1,2,3,4,5]</td>
<td>Already sorted</td>
</tr>
<tr class="even">
<td>[9,8,7,6,5]</td>
<td>[5,6,7,8,9]</td>
<td>Reverse</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-26" class="level3">
<h3 class="anchored" data-anchor-id="complexity-26">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes (partially)</td>
</tr>
</tbody>
</table>
<p>Flash Sort is the lightning strike of sorting, it flashes elements to their expected zones in linear time, then finishes with a quick polish. When your data is uniform, it’s one of the fastest practical sorts around.</p>
</section>
<section id="postman-sort" class="level3">
<h3 class="anchored" data-anchor-id="postman-sort">128 Postman Sort</h3>
<p>Postman Sort is a stable, multi-key sorting algorithm that works by sorting keys digit by digit or field by field, starting from the least significant field (like LSD Radix Sort) or most significant field (like MSD Radix Sort), depending on the application. It’s often used for compound keys (e.g.&nbsp;postal addresses, dates, strings of fields), hence the name “Postman,” as it sorts data the way a postman organizes mail: by street, then house, then apartment.</p>
</section>
<section id="what-problem-are-we-solving-27" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-27">What Problem Are We Solving?</h3>
<p>When sorting complex records by multiple attributes, such as:</p>
<ul>
<li>Sorting people by <code>(city, street, house_number)</code></li>
<li>Sorting files by <code>(year, month, day)</code></li>
<li>Sorting products by <code>(category, brand, price)</code></li>
</ul>
<p>We need to sort hierarchically, that’s what Postman Sort excels at. It’s a stable, field-wise sorting approach, built upon Counting or Bucket Sort for each field.</p>
<section id="example-27" class="level4">
<h4 class="anchored" data-anchor-id="example-27">Example</h4>
<p>Sort tuples <code>(City, Street)</code> by City then Street:</p>
<pre><code>$$("Paris", "B"), ("London", "C"), ("Paris", "A"), ("London", "A")]</code></pre>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 16%">
<col style="width: 78%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Sort By</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Street (LSD)</td>
<td>[(“London”,“A”),(“Paris”,“A”),(“London”,“C”),(“Paris”,“B”)]</td>
</tr>
<tr class="even">
<td>2</td>
<td>City (MSD)</td>
<td>[(“London”,“A”),(“London”,“C”),(“Paris”,“A”),(“Paris”,“B”)]</td>
</tr>
</tbody>
</table>
<p>Stable sorting ensures inner order is preserved from previous pass.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-27" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-27">How Does It Work (Plain Language)?</h3>
<p>It’s like organizing mail:</p>
<ol type="1">
<li>Sort by the smallest unit (house number)</li>
<li>Then sort by street</li>
<li>Then by city</li>
</ol>
<p>Each pass refines the previous ordering. If sorting from least to most significant, use LSD order (like Radix). If sorting from most to least, use MSD order (like bucket recursion).</p>
<section id="step-by-step-process-26" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-26">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Identify key fields and their order of significance</td>
</tr>
<tr class="even">
<td>2</td>
<td>Choose stable sorting method (e.g., Counting Sort)</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Sort by least significant key first</td>
</tr>
<tr class="even">
<td>4</td>
<td>Repeat for each key moving to most significant</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Final order respects all key hierarchies</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-26" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-26">Tiny Code (Easy Versions)</h3>
<section id="python-lsd-approach" class="level4">
<h4 class="anchored" data-anchor-id="python-lsd-approach">Python (LSD Approach)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> postman_sort(records, key_funcs):</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># key_funcs = list of functions to extract each field</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> key_func <span class="kw">in</span> <span class="bu">reversed</span>(key_funcs):</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>        records.sort(key<span class="op">=</span>key_func)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> records</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: sort by (city, street)</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>records <span class="op">=</span> [(<span class="st">"Paris"</span>, <span class="st">"B"</span>), (<span class="st">"London"</span>, <span class="st">"C"</span>), (<span class="st">"Paris"</span>, <span class="st">"A"</span>), (<span class="st">"London"</span>, <span class="st">"A"</span>)]</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>sorted_records <span class="op">=</span> postman_sort(records, [<span class="kw">lambda</span> x: x[<span class="dv">0</span>], <span class="kw">lambda</span> x: x[<span class="dv">1</span>]])</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sorted_records)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$('London', 'A'), ('London', 'C'), ('Paris', 'A'), ('Paris', 'B')]</code></pre>
</section>
<section id="c-numeric-fields" class="level4">
<h4 class="anchored" data-anchor-id="c-numeric-fields">C (Numeric Fields)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb58"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> city<span class="op">;</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> street<span class="op">;</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Record<span class="op">;</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cmp_street<span class="op">(</span><span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>    Record <span class="op">*</span>ra <span class="op">=</span> <span class="op">(</span>Record<span class="op">*)</span>a<span class="op">,</span> <span class="op">*</span>rb <span class="op">=</span> <span class="op">(</span>Record<span class="op">*)</span>b<span class="op">;</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ra<span class="op">-&gt;</span>street <span class="op">-</span> rb<span class="op">-&gt;</span>street<span class="op">;</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cmp_city<span class="op">(</span><span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>    Record <span class="op">*</span>ra <span class="op">=</span> <span class="op">(</span>Record<span class="op">*)</span>a<span class="op">,</span> <span class="op">*</span>rb <span class="op">=</span> <span class="op">(</span>Record<span class="op">*)</span>b<span class="op">;</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ra<span class="op">-&gt;</span>city <span class="op">-</span> rb<span class="op">-&gt;</span>city<span class="op">;</span></span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> postman_sort<span class="op">(</span>Record arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Sort by street first (LSD)</span></span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a>    qsort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>Record<span class="op">),</span> cmp_street<span class="op">);</span></span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Then by city (MSD)</span></span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a>    qsort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>Record<span class="op">),</span> cmp_city<span class="op">);</span></span>
<span id="cb58-24"><a href="#cb58-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb58-25"><a href="#cb58-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-26"><a href="#cb58-26" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb58-27"><a href="#cb58-27" aria-hidden="true" tabindex="-1"></a>    Record arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{{</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">},</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">},</span> <span class="op">{</span><span class="dv">2</span><span class="op">,</span><span class="dv">1</span><span class="op">},</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span><span class="dv">1</span><span class="op">}};</span></span>
<span id="cb58-28"><a href="#cb58-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb58-29"><a href="#cb58-29" aria-hidden="true" tabindex="-1"></a>    postman_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb58-30"><a href="#cb58-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb58-31"><a href="#cb58-31" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"(</span><span class="sc">%d</span><span class="st">,</span><span class="sc">%d</span><span class="st">) "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">].</span>city<span class="op">,</span> arr<span class="op">[</span>i<span class="op">].</span>street<span class="op">);</span></span>
<span id="cb58-32"><a href="#cb58-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb58-33"><a href="#cb58-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-27" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-27">Why It Matters</h3>
<ul>
<li><p>Multi-key sorting (lexicographic order)</p></li>
<li><p>Stable, preserves order across passes</p></li>
<li><p>Versatile, works on compound keys, strings, records</p></li>
<li><p>Foundation for:</p>
<ul>
<li>Radix Sort</li>
<li>Database ORDER BY multi-column</li>
<li>Lexicographic ranking</li>
</ul></li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-27" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-27">A Gentle Proof (Why It Works)</h3>
<p>Each stable pass ensures that prior ordering (from less significant fields) remains intact.</p>
<p>If we denote each field as <span class="math inline">\(f_i\)</span>, sorted stably in order <span class="math inline">\(f_k \to f_1\)</span>:</p>
<p><span class="math display">\[
T(n) = \sum_{i=1}^k T_i(n)
\]</span></p>
<p>If each <span class="math inline">\(T_i(n)\)</span> is <span class="math inline">\(O(n)\)</span>, the total is <span class="math inline">\(O(kn)\)</span>.</p>
<p>Lexicographic order emerges naturally: <span class="math display">\[
(a_1, a_2, \ldots, a_k) &lt; (b_1, b_2, \ldots, b_k)
\iff a_i = b_i \text{ for } i &lt; j, \text{ and } a_j &lt; b_j
\]</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Operation</th>
<th>Stable</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>LSD Sort</td>
<td>Start from least significant</td>
<td>Yes</td>
<td><span class="math inline">\(O(nk)\)</span></td>
</tr>
<tr class="even">
<td>MSD Sort</td>
<td>Start from most significant</td>
<td>Yes</td>
<td><span class="math inline">\(O(nk)\)</span></td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-27" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-27">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[("Paris","B"),("London","C"),("Paris","A"),("London","A")]</code></li>
<li>Add a 3rd field (zip code), sort by zip → street → city</li>
<li>Implement with <code>lambda</code> keys in Python</li>
<li>Replace stable sort with Counting Sort per field</li>
<li>Test with <code>[(2021,12,25),(2020,1,1),(2021,1,1)]</code></li>
<li>Compare LSD vs MSD ordering</li>
<li>Sort strings by character groups (first char, second char, etc.)</li>
<li>Visualize passes and intermediate results</li>
<li>Test stability with repeated keys</li>
<li>Apply to sorting student records by <code>(grade, class, id)</code></li>
</ol>
</section>
<section id="test-cases-27" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-27">Test Cases</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 45%">
<col style="width: 45%">
<col style="width: 9%">
</colgroup>
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[(“Paris”,“B”),(“London”,“C”),(“Paris”,“A”),(“London”,“A”)]</td>
<td>[(“London”,“A”),(“London”,“C”),(“Paris”,“A”),(“Paris”,“B”)]</td>
<td>Lexicographic</td>
</tr>
<tr class="even">
<td>[(2021,12,25),(2020,1,1),(2021,1,1)]</td>
<td>[(2020,1,1),(2021,1,1),(2021,12,25)]</td>
<td>Date order</td>
</tr>
<tr class="odd">
<td>[(1,2,3),(1,1,3),(1,1,2)]</td>
<td>[(1,1,2),(1,1,3),(1,2,3)]</td>
<td>Multi-field</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-27" class="level3">
<h3 class="anchored" data-anchor-id="complexity-27">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(k × n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Keys</td>
<td>Multi-field</td>
</tr>
</tbody>
</table>
<p>Postman Sort delivers order like clockwork, field by field, pass by pass, ensuring every layer of your data finds its proper place, from apartment number to zip code.</p>
</section>
<section id="address-calculation-sort" class="level3">
<h3 class="anchored" data-anchor-id="address-calculation-sort">129 Address Calculation Sort</h3>
<p>Address Calculation Sort (sometimes called Hash Sort or Scatter Sort) is a distribution-based sorting method that uses a hash-like function (called an <em>address function</em>) to compute the final position of each element directly. Instead of comparing pairs, it computes where each element should go, much like direct addressing in hash tables.</p>
</section>
<section id="what-problem-are-we-solving-28" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-28">What Problem Are We Solving?</h3>
<p>Comparison sorts need O(n log n) time. If we know the range and distribution of input values, we can instead compute where each element belongs, placing it directly.</p>
<p>Address Calculation Sort bridges the gap between sorting and hashing:</p>
<ul>
<li>It computes a mapping from value to position.</li>
<li>It places each element directly or into small groups.</li>
<li>It works best when data distribution is known and uniform.</li>
</ul>
<p>Applications:</p>
<ul>
<li>Dense numeric datasets</li>
<li>Ranked records</li>
<li>Pre-bucketed ranges</li>
</ul>
<section id="example-28" class="level4">
<h4 class="anchored" data-anchor-id="example-28">Example</h4>
<p>Sort <code>[3, 1, 4, 0, 2]</code> with range <code>[0..4]</code>.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Element</th>
<th>Address Function <span class="math inline">\(f(x) = x\)</span></th>
<th>Placement</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>3</td>
<td>f(3) = 3</td>
<td>position 3</td>
</tr>
<tr class="even">
<td>2</td>
<td>1</td>
<td>f(1) = 1</td>
<td>position 1</td>
</tr>
<tr class="odd">
<td>3</td>
<td>4</td>
<td>f(4) = 4</td>
<td>position 4</td>
</tr>
<tr class="even">
<td>4</td>
<td>0</td>
<td>f(0) = 0</td>
<td>position 0</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2</td>
<td>f(2) = 2</td>
<td>position 2</td>
</tr>
</tbody>
</table>
<p>Result: <code>[0, 1, 2, 3, 4]</code></p>
<p>If multiple elements share the same address, they’re stored in a small linked list or bucket, then sorted locally.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-28" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-28">How Does It Work (Plain Language)?</h3>
<p>Imagine having labeled mailboxes for every possible key — each element knows exactly which box it belongs in. You just drop each letter into its slot, then read the boxes in order.</p>
<p>Unlike Counting Sort, which counts occurrences, Address Calculation Sort assigns positions, it can even be in-place if collisions are handled carefully.</p>
<section id="step-by-step-process-27" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-27">Step-by-Step Process</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 93%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Define address function <span class="math inline">\(f(x)\)</span> mapping each element to an index</td>
</tr>
<tr class="even">
<td>2</td>
<td>Initialize empty output array or buckets</td>
</tr>
<tr class="odd">
<td>3</td>
<td>For each element <span class="math inline">\(a_i\)</span>: compute index = <span class="math inline">\(f(a_i)\)</span></td>
</tr>
<tr class="even">
<td>4</td>
<td>Place element at index (handle collisions if needed)</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Collect or flatten buckets into sorted order</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-27" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-27">Tiny Code (Easy Versions)</h3>
<section id="c-simple-in-range-example" class="level4">
<h4 class="anchored" data-anchor-id="c-simple-in-range-example">C (Simple In-Range Example)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb59"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> address_calculation_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> min<span class="op">,</span> <span class="dt">int</span> max<span class="op">)</span> <span class="op">{</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> range <span class="op">=</span> max <span class="op">-</span> min <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>output <span class="op">=</span> calloc<span class="op">(</span>range<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>filled <span class="op">=</span> calloc<span class="op">(</span>range<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> idx <span class="op">=</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">-</span> min<span class="op">;</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>        output<span class="op">[</span>idx<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>        filled<span class="op">[</span>idx<span class="op">]</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> k <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> range<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>filled<span class="op">[</span>i<span class="op">])</span> arr<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> output<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a>    free<span class="op">(</span>output<span class="op">);</span></span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a>    free<span class="op">(</span>filled<span class="op">);</span></span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">3</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb59-26"><a href="#cb59-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb59-27"><a href="#cb59-27" aria-hidden="true" tabindex="-1"></a>    address_calculation_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb59-28"><a href="#cb59-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb59-29"><a href="#cb59-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb59-30"><a href="#cb59-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-24" class="level4">
<h4 class="anchored" data-anchor-id="python-24">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> address_calculation_sort(arr, f<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> arr:</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> arr</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> f <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>        f <span class="op">=</span> <span class="kw">lambda</span> x: x  <span class="co"># identity mapping</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>    min_val, max_val <span class="op">=</span> <span class="bu">min</span>(arr), <span class="bu">max</span>(arr)</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>    size <span class="op">=</span> max_val <span class="op">-</span> min_val <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>    slots <span class="op">=</span> [[] <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(size)]</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> x <span class="kw">in</span> arr:</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>        idx <span class="op">=</span> f(x) <span class="op">-</span> min_val</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>        slots[idx].append(x)</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Flatten buckets</span></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []</span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> bucket <span class="kw">in</span> slots:</span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a>        result.extend(<span class="bu">sorted</span>(bucket))  <span class="co"># local sort if needed</span></span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">2</span>]</span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(address_calculation_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$0, 1, 2, 3, 4]</code></pre>
</section>
</section>
<section id="why-it-matters-28" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-28">Why It Matters</h3>
<ul>
<li>Direct computation of sorted positions</li>
<li>Linear time for predictable distributions</li>
<li>Combines hashing and sorting</li>
<li>Forms basis of bucket, radix, and flash sort</li>
</ul>
<p>It’s a great way to see how functions can replace comparisons.</p>
</section>
<section id="a-gentle-proof-why-it-works-28" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-28">A Gentle Proof (Why It Works)</h3>
<p>If <span class="math inline">\(f(x)\)</span> maps each key uniquely to its sorted index, the result is already sorted by construction.</p>
<p>Even with collisions, sorting small local buckets is fast.</p>
<p>Total time: <span class="math display">\[
T(n) = O(n + k)
\]</span> where <span class="math inline">\(k\)</span> = number of buckets = range size.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Work</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Compute addresses</td>
<td>O(n)</td>
<td>One per element</td>
</tr>
<tr class="even">
<td>Bucket insertions</td>
<td>O(n)</td>
<td>Constant time each</td>
</tr>
<tr class="odd">
<td>Local sort</td>
<td>O(k)</td>
<td>Small groups</td>
</tr>
<tr class="even">
<td>Flatten</td>
<td>O(n + k)</td>
<td>Read back</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-28" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-28">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[3, 1, 4, 0, 2]</code> with <code>f(x)=x</code>.</li>
<li>Change mapping to <code>f(x)=2*x</code>, note gaps.</li>
<li>Add duplicates <code>[1,1,2,2,3]</code>, use buckets.</li>
<li>Try floats with <code>f(x)=int(x*10)</code> for <code>[0.1,0.2,0.3]</code>.</li>
<li>Sort strings by ASCII sum: <code>f(s)=sum(map(ord,s))</code>.</li>
<li>Compare with Counting Sort (no explicit storage).</li>
<li>Handle negative numbers by offsetting min.</li>
<li>Visualize mapping table.</li>
<li>Test range gaps (e.g., <code>[10, 20, 30]</code>).</li>
<li>Experiment with custom hash functions.</li>
</ol>
</section>
<section id="test-cases-28" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-28">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3,1,4,0,2]</td>
<td>[0,1,2,3,4]</td>
<td>Perfect mapping</td>
</tr>
<tr class="even">
<td>[10,20,30]</td>
<td>[10,20,30]</td>
<td>Sparse mapping</td>
</tr>
<tr class="odd">
<td>[1,1,2,2]</td>
<td>[1,1,2,2]</td>
<td>Duplicates</td>
</tr>
<tr class="even">
<td>[0.1,0.3,0.2]</td>
<td>[0.1,0.2,0.3]</td>
<td>Float mapping</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-28" class="level3">
<h3 class="anchored" data-anchor-id="complexity-28">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(n + k)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n + k)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes (with buckets)</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Range-sensitive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Address Calculation Sort turns sorting into placement, each value finds its home by formula, not fight. When the range is clear and collisions are rare, it’s lightning-fast and elegantly simple.</p>
</section>
<section id="spread-sort" class="level3">
<h3 class="anchored" data-anchor-id="spread-sort">130 Spread Sort</h3>
<p>Spread Sort is a hybrid distribution sort that blends ideas from radix sort, bucket sort, and comparison sorting. It distributes elements into buckets using their most significant bits (MSB) or value ranges, then recursively sorts buckets (like radix/MSD) or switches to a comparison sort (like Quick Sort) when buckets are small.</p>
<p>It’s cache-friendly, adaptive, and often faster than Quick Sort on uniformly distributed data. In fact, it’s used in some high-performance libraries such as Boost C++ Spreadsort.</p>
</section>
<section id="what-problem-are-we-solving-29" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-29">What Problem Are We Solving?</h3>
<p>Traditional comparison sorts (like Quick Sort) have <span class="math inline">\(O(n \log n)\)</span> complexity, while pure radix-based sorts can be inefficient on small or skewed datasets. Spread Sort solves this by adapting dynamically:</p>
<ul>
<li>Distribute like radix sort when data is wide and random</li>
<li>Compare like Quick Sort when data is clustered or buckets are small</li>
</ul>
<p>It “spreads” data across buckets, then sorts each bucket intelligently.</p>
<p>Perfect for:</p>
<ul>
<li>Integers, floats, and strings</li>
<li>Large datasets</li>
<li>Wide value ranges</li>
</ul>
<section id="example-29" class="level4">
<h4 class="anchored" data-anchor-id="example-29">Example</h4>
<p>Sort <code>[43, 12, 89, 27, 55, 31, 70]</code></p>
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 49%">
<col style="width: 45%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Find min = 12, max = 89</td>
<td>range = 77</td>
</tr>
<tr class="even">
<td>2</td>
<td>Choose bucket count (e.g.&nbsp;4)</td>
<td>bucket size ≈ 19</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Distribute by bucket index = (val - min)/19</td>
<td>Buckets: [12], [27,31], [43,55], [70,89]</td>
</tr>
<tr class="even">
<td>4</td>
<td>Recursively sort each bucket</td>
<td>[12], [27,31], [43,55], [70,89]</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Merge buckets</td>
<td>[12,27,31,43,55,70,89]</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-29" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-29">How Does It Work (Plain Language)?</h3>
<p>Imagine sorting mail by first letter (distribution), then alphabetizing each pile (comparison). If a pile is still big, spread it again by the next letter. If a pile is small, just sort it directly.</p>
<p>Spread Sort uses:</p>
<ul>
<li>Distribution when the data range is wide</li>
<li>Comparison sort when buckets are narrow or small</li>
</ul>
<p>This flexibility gives it strong real-world performance.</p>
<section id="step-by-step-process-28" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-28">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Find min and max values</td>
</tr>
<tr class="even">
<td>2</td>
<td>Compute spread = max - min</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Choose bucket count (based on n or spread)</td>
</tr>
<tr class="even">
<td>4</td>
<td>Distribute elements into buckets by value range</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Recursively apply spread sort to large buckets</td>
</tr>
<tr class="even">
<td>6</td>
<td>Apply comparison sort to small buckets</td>
</tr>
<tr class="odd">
<td>7</td>
<td>Concatenate results</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-28" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-28">Tiny Code (Easy Versions)</h3>
<section id="c-integer-example" class="level4">
<h4 class="anchored" data-anchor-id="c-integer-example">C (Integer Example)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb62"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> compare<span class="op">(</span><span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(*(</span><span class="dt">int</span><span class="op">*)</span>a <span class="op">-</span> <span class="op">*(</span><span class="dt">int</span><span class="op">*)</span>b<span class="op">);</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> spread_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">16</span><span class="op">)</span> <span class="op">{</span> <span class="co">// threshold for small buckets</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>        qsort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">),</span> compare<span class="op">);</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> min <span class="op">=</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">],</span> max <span class="op">=</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> min<span class="op">)</span> min <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> max<span class="op">)</span> max <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bucket_count <span class="op">=</span> n <span class="op">/</span> <span class="dv">4</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> range <span class="op">=</span> max <span class="op">-</span> min <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb62-22"><a href="#cb62-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bucket_size <span class="op">=</span> range <span class="op">/</span> bucket_count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb62-23"><a href="#cb62-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-24"><a href="#cb62-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>counts <span class="op">=</span> calloc<span class="op">(</span>bucket_count<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb62-25"><a href="#cb62-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> buckets <span class="op">=</span> malloc<span class="op">(</span>bucket_count <span class="op">*</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">*));</span></span>
<span id="cb62-26"><a href="#cb62-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> bucket_count<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb62-27"><a href="#cb62-27" aria-hidden="true" tabindex="-1"></a>        buckets<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> malloc<span class="op">(</span>n <span class="op">*</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb62-28"><a href="#cb62-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-29"><a href="#cb62-29" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Distribution</span></span>
<span id="cb62-30"><a href="#cb62-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb62-31"><a href="#cb62-31" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> idx <span class="op">=</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">-</span> min<span class="op">)</span> <span class="op">/</span> bucket_size<span class="op">;</span></span>
<span id="cb62-32"><a href="#cb62-32" aria-hidden="true" tabindex="-1"></a>        buckets<span class="op">[</span>idx<span class="op">][</span>counts<span class="op">[</span>idx<span class="op">]++]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb62-33"><a href="#cb62-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb62-34"><a href="#cb62-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-35"><a href="#cb62-35" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Recursive sort</span></span>
<span id="cb62-36"><a href="#cb62-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> k <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb62-37"><a href="#cb62-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> bucket_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb62-38"><a href="#cb62-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>counts<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb62-39"><a href="#cb62-39" aria-hidden="true" tabindex="-1"></a>            spread_sort<span class="op">(</span>buckets<span class="op">[</span>i<span class="op">],</span> counts<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb62-40"><a href="#cb62-40" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> counts<span class="op">[</span>i<span class="op">];</span> j<span class="op">++)</span></span>
<span id="cb62-41"><a href="#cb62-41" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> buckets<span class="op">[</span>i<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb62-42"><a href="#cb62-42" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb62-43"><a href="#cb62-43" aria-hidden="true" tabindex="-1"></a>        free<span class="op">(</span>buckets<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb62-44"><a href="#cb62-44" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb62-45"><a href="#cb62-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-46"><a href="#cb62-46" aria-hidden="true" tabindex="-1"></a>    free<span class="op">(</span>buckets<span class="op">);</span></span>
<span id="cb62-47"><a href="#cb62-47" aria-hidden="true" tabindex="-1"></a>    free<span class="op">(</span>counts<span class="op">);</span></span>
<span id="cb62-48"><a href="#cb62-48" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb62-49"><a href="#cb62-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-50"><a href="#cb62-50" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb62-51"><a href="#cb62-51" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">43</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">89</span><span class="op">,</span> <span class="dv">27</span><span class="op">,</span> <span class="dv">55</span><span class="op">,</span> <span class="dv">31</span><span class="op">,</span> <span class="dv">70</span><span class="op">};</span></span>
<span id="cb62-52"><a href="#cb62-52" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb62-53"><a href="#cb62-53" aria-hidden="true" tabindex="-1"></a>    spread_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb62-54"><a href="#cb62-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb62-55"><a href="#cb62-55" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb62-56"><a href="#cb62-56" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-25" class="level4">
<h4 class="anchored" data-anchor-id="python-25">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> spread_sort(arr, threshold<span class="op">=</span><span class="dv">16</span>):</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(arr) <span class="op">&lt;=</span> threshold:</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">sorted</span>(arr)</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>    min_val, max_val <span class="op">=</span> <span class="bu">min</span>(arr), <span class="bu">max</span>(arr)</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> min_val <span class="op">==</span> max_val:</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> arr[:]</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>    bucket_count <span class="op">=</span> n <span class="op">//</span> <span class="dv">4</span> <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>    spread <span class="op">=</span> max_val <span class="op">-</span> min_val <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>    bucket_size <span class="op">=</span> spread <span class="op">//</span> bucket_count <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>    buckets <span class="op">=</span> [[] <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(bucket_count)]</span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> x <span class="kw">in</span> arr:</span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>        idx <span class="op">=</span> (x <span class="op">-</span> min_val) <span class="op">//</span> bucket_size</span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a>        buckets[idx].append(x)</span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []</span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> b <span class="kw">in</span> buckets:</span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(b) <span class="op">&gt;</span> threshold:</span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a>            result.extend(spread_sort(b, threshold))</span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a>            result.extend(<span class="bu">sorted</span>(b))</span>
<span id="cb63-25"><a href="#cb63-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span>
<span id="cb63-26"><a href="#cb63-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-27"><a href="#cb63-27" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">43</span>, <span class="dv">12</span>, <span class="dv">89</span>, <span class="dv">27</span>, <span class="dv">55</span>, <span class="dv">31</span>, <span class="dv">70</span>]</span>
<span id="cb63-28"><a href="#cb63-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(spread_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-29" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-29">Why It Matters</h3>
<ul>
<li>Linear-time on uniform data</li>
<li>Adaptive to distribution and size</li>
<li>Combines bucket and comparison power</li>
<li>Great for large numeric datasets</li>
</ul>
<p>Used in Boost C++, it’s a real-world performant hybrid.</p>
</section>
<section id="a-gentle-proof-why-it-works-29" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-29">A Gentle Proof (Why It Works)</h3>
<p>Spread Sort’s cost depends on:</p>
<ul>
<li>Distribution pass: <span class="math inline">\(O(n)\)</span><br>
</li>
<li>Recursion depth: small (logarithmic for uniform data)<br>
</li>
<li>Local sorts: small and fast (often <span class="math inline">\(O(1)\)</span> or <span class="math inline">\(O(n \log n)\)</span> on small buckets)</li>
</ul>
<p>For <span class="math inline">\(n\)</span> elements and <span class="math inline">\(b\)</span> buckets:</p>
<p><span class="math display">\[
T(n) = O(n + \sum_{i=1}^{b} T_i)
\]</span> If average bucket size is constant or small: <span class="math display">\[
T(n) \approx O(n)
\]</span></p>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 46%">
<col style="width: 32%">
</colgroup>
<thead>
<tr class="header">
<th>Phase</th>
<th>Work</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Distribution</td>
<td><span class="math inline">\(O(n)\)</span></td>
<td>One pass</td>
</tr>
<tr class="even">
<td>Local Sorts</td>
<td><span class="math inline">\(O(n \log m)\)</span></td>
<td><span class="math inline">\(m =\)</span> average bucket size</td>
</tr>
<tr class="odd">
<td>Total</td>
<td><span class="math inline">\(O(n)\)</span> average, <span class="math inline">\(O(n \log n)\)</span> worst</td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-29" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-29">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[43,12,89,27,55,31,70]</code>.</li>
<li>Try <code>[5,4,3,2,1]</code> (non-uniform).</li>
<li>Adjust bucket threshold.</li>
<li>Visualize recursive buckets.</li>
<li>Mix large and small values (e.g., <code>[1, 10, 1000, 2, 20, 2000]</code>).</li>
<li>Compare runtime with Quick Sort.</li>
<li>Implement float version.</li>
<li>Measure distribution imbalance.</li>
<li>Tune bucket size formula.</li>
<li>Sort strings by ord(char).</li>
</ol>
</section>
<section id="test-cases-29" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-29">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[43,12,89,27,55,31,70]</td>
<td>[12,27,31,43,55,70,89]</td>
<td>Uniform</td>
</tr>
<tr class="even">
<td>[5,4,3,2,1]</td>
<td>[1,2,3,4,5]</td>
<td>Reverse</td>
</tr>
<tr class="odd">
<td>[100,10,1,1000]</td>
<td>[1,10,100,1000]</td>
<td>Wide range</td>
</tr>
<tr class="even">
<td>[5,5,5]</td>
<td>[5,5,5]</td>
<td>Duplicates</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-29" class="level3">
<h3 class="anchored" data-anchor-id="complexity-29">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes (if local sort is stable)</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Spread Sort spreads elements like seeds, each finds fertile ground in its range, then blossoms into order through local sorting. It’s the smart hybrid that brings the best of radix and comparison worlds together.</p>
</section>
</section>
<section id="section-14.-hybrid-sorts" class="level2">
<h2 class="anchored" data-anchor-id="section-14.-hybrid-sorts">Section 14. Hybrid sorts</h2>
<section id="introsort" class="level3">
<h3 class="anchored" data-anchor-id="introsort">131 IntroSort</h3>
<p>IntroSort (short for <em>Introspective Sort</em>) is a hybrid sorting algorithm that combines the best features of Quick Sort, Heap Sort, and Insertion Sort. It begins with Quick Sort for speed, but if recursion goes too deep (indicating unbalanced partitions), it switches to Heap Sort to guarantee worst-case <span class="math inline">\(O(n \log n)\)</span> performance. For small partitions, it often uses Insertion Sort for efficiency.</p>
<p>It was introduced by David Musser (1997) and is the default sorting algorithm in C++ STL (<code>std::sort</code>), fast, adaptive, and safe.</p>
</section>
<section id="what-problem-are-we-solving-30" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-30">What Problem Are We Solving?</h3>
<p>Pure Quick Sort is fast on average but can degrade to <span class="math inline">\(O(n^2)\)</span> in the worst case (for example, sorted input with bad pivots).<br>
Heap Sort guarantees <span class="math inline">\(O(n \log n)\)</span> but has worse constants.</p>
<p>IntroSort combines them, using Quick Sort <em>until danger</em>, then switching to Heap Sort for safety.</p>
<p>Perfect for:</p>
<ul>
<li>General-purpose sorting (numeric, string, object)</li>
<li>Performance-critical libraries</li>
<li>Mixed data with unknown distribution</li>
</ul>
<section id="example-30" class="level4">
<h4 class="anchored" data-anchor-id="example-30">Example</h4>
<p>Sort <code>[9, 3, 1, 7, 5, 4, 6, 2, 8]</code></p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 67%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Start Quick Sort (depth = 0)</td>
<td>pivot = 5</td>
</tr>
<tr class="even">
<td>2</td>
<td>Partition → <code>[3,1,2,4] [5] [9,7,6,8]</code></td>
<td>depth = 1</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Recurse left + right</td>
<td></td>
</tr>
<tr class="even">
<td>4</td>
<td>If depth &gt; 2 × log₂(n), switch to Heap Sort</td>
<td>prevents (O(n^2))</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Use Insertion Sort on small segments</td>
<td></td>
</tr>
</tbody>
</table>
<p>Final sorted array: <code>[1,2,3,4,5,6,7,8,9]</code></p>
</section>
</section>
<section id="how-does-it-work-plain-language-30" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-30">How Does It Work (Plain Language)?</h3>
<p>It’s like a careful driver:</p>
<ul>
<li>Start fast on the highway (Quick Sort)</li>
<li>If road gets tricky (too many turns = recursion depth), switch to 4-wheel drive (Heap Sort)</li>
<li>For small parking spots (tiny arrays), use a nimble bike (Insertion Sort)</li>
</ul>
<p>IntroSort keeps average speed high but avoids worst-case crashes.</p>
<section id="step-by-step-process-29" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-29">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Start Quick Sort recursively</td>
</tr>
<tr class="even">
<td>2</td>
<td>Track recursion depth</td>
</tr>
<tr class="odd">
<td>3</td>
<td>If depth exceeds threshold (2 × log₂ n), switch to Heap Sort</td>
</tr>
<tr class="even">
<td>4</td>
<td>Use Insertion Sort for small subarrays (size &lt; threshold)</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Combine results for final sorted array</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-29" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-29">Tiny Code (Easy Versions)</h3>
<section id="c-simplified-implementation" class="level4">
<h4 class="anchored" data-anchor-id="c-simplified-implementation">C (Simplified Implementation)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb64"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define THRESHOLD </span><span class="dv">16</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> insertion_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> key <span class="op">=</span> arr<span class="op">[</span>i<span class="op">],</span> j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>j <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&gt;</span> key<span class="op">)</span> arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j<span class="op">--];</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> heapify<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> largest <span class="op">=</span> i<span class="op">,</span> l <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> r <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>i <span class="op">+</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>l <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[</span>l<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>largest<span class="op">])</span> largest <span class="op">=</span> l<span class="op">;</span></span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>r <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[</span>r<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>largest<span class="op">])</span> largest <span class="op">=</span> r<span class="op">;</span></span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>largest <span class="op">!=</span> i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> tmp <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>largest<span class="op">];</span> arr<span class="op">[</span>largest<span class="op">]</span> <span class="op">=</span> tmp<span class="op">;</span></span>
<span id="cb64-21"><a href="#cb64-21" aria-hidden="true" tabindex="-1"></a>        heapify<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> largest<span class="op">);</span></span>
<span id="cb64-22"><a href="#cb64-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb64-23"><a href="#cb64-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb64-24"><a href="#cb64-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-25"><a href="#cb64-25" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> heap_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-26"><a href="#cb64-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> n<span class="op">/</span><span class="dv">2</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--)</span> heapify<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> i<span class="op">);</span></span>
<span id="cb64-27"><a href="#cb64-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--)</span> <span class="op">{</span></span>
<span id="cb64-28"><a href="#cb64-28" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> tmp <span class="op">=</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">];</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> tmp<span class="op">;</span></span>
<span id="cb64-29"><a href="#cb64-29" aria-hidden="true" tabindex="-1"></a>        heapify<span class="op">(</span>arr<span class="op">,</span> i<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb64-30"><a href="#cb64-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb64-31"><a href="#cb64-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb64-32"><a href="#cb64-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-33"><a href="#cb64-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> partition<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-34"><a href="#cb64-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pivot <span class="op">=</span> arr<span class="op">[</span>high<span class="op">],</span> i <span class="op">=</span> low <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb64-35"><a href="#cb64-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> low<span class="op">;</span> j <span class="op">&lt;</span> high<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb64-36"><a href="#cb64-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&lt;=</span> pivot<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-37"><a href="#cb64-37" aria-hidden="true" tabindex="-1"></a>            i<span class="op">++;</span></span>
<span id="cb64-38"><a href="#cb64-38" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> tmp <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span> arr<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> tmp<span class="op">;</span></span>
<span id="cb64-39"><a href="#cb64-39" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb64-40"><a href="#cb64-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb64-41"><a href="#cb64-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> tmp <span class="op">=</span> arr<span class="op">[</span>i<span class="op">+</span><span class="dv">1</span><span class="op">];</span> arr<span class="op">[</span>i<span class="op">+</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>high<span class="op">];</span> arr<span class="op">[</span>high<span class="op">]</span> <span class="op">=</span> tmp<span class="op">;</span></span>
<span id="cb64-42"><a href="#cb64-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb64-43"><a href="#cb64-43" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb64-44"><a href="#cb64-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-45"><a href="#cb64-45" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> introsort_rec<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">,</span> <span class="dt">int</span> depth_limit<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-46"><a href="#cb64-46" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> high <span class="op">-</span> low <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb64-47"><a href="#cb64-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> THRESHOLD<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-48"><a href="#cb64-48" aria-hidden="true" tabindex="-1"></a>        insertion_sort<span class="op">(</span>arr <span class="op">+</span> low<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb64-49"><a href="#cb64-49" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb64-50"><a href="#cb64-50" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb64-51"><a href="#cb64-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>depth_limit <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-52"><a href="#cb64-52" aria-hidden="true" tabindex="-1"></a>        heap_sort<span class="op">(</span>arr <span class="op">+</span> low<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb64-53"><a href="#cb64-53" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb64-54"><a href="#cb64-54" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb64-55"><a href="#cb64-55" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> p <span class="op">=</span> partition<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> high<span class="op">);</span></span>
<span id="cb64-56"><a href="#cb64-56" aria-hidden="true" tabindex="-1"></a>    introsort_rec<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> p <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> depth_limit <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb64-57"><a href="#cb64-57" aria-hidden="true" tabindex="-1"></a>    introsort_rec<span class="op">(</span>arr<span class="op">,</span> p <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> high<span class="op">,</span> depth_limit <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb64-58"><a href="#cb64-58" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb64-59"><a href="#cb64-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-60"><a href="#cb64-60" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> introsort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-61"><a href="#cb64-61" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> depth_limit <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> log<span class="op">(</span>n<span class="op">);</span></span>
<span id="cb64-62"><a href="#cb64-62" aria-hidden="true" tabindex="-1"></a>    introsort_rec<span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> depth_limit<span class="op">);</span></span>
<span id="cb64-63"><a href="#cb64-63" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb64-64"><a href="#cb64-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-65"><a href="#cb64-65" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-66"><a href="#cb64-66" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">9</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">7</span><span class="op">,</span><span class="dv">5</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">6</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">8</span><span class="op">};</span></span>
<span id="cb64-67"><a href="#cb64-67" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb64-68"><a href="#cb64-68" aria-hidden="true" tabindex="-1"></a>    introsort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb64-69"><a href="#cb64-69" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb64-70"><a href="#cb64-70" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb64-71"><a href="#cb64-71" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-conceptual-demo" class="level4">
<h4 class="anchored" data-anchor-id="python-conceptual-demo">Python (Conceptual Demo)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> insertion_sort(a):</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(a)):</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> a[i]</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>        j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&gt;=</span> <span class="dv">0</span> <span class="kw">and</span> a[j] <span class="op">&gt;</span> key:</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>            a[j <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> a[j]</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>            j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>        a[j <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> key</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> heapify(a, n, i):</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>    largest <span class="op">=</span> i</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>    l, r <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>i<span class="op">+</span><span class="dv">1</span>, <span class="dv">2</span><span class="op">*</span>i<span class="op">+</span><span class="dv">2</span></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> l <span class="op">&lt;</span> n <span class="kw">and</span> a[l] <span class="op">&gt;</span> a[largest]:</span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>        largest <span class="op">=</span> l</span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> r <span class="op">&lt;</span> n <span class="kw">and</span> a[r] <span class="op">&gt;</span> a[largest]:</span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>        largest <span class="op">=</span> r</span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> largest <span class="op">!=</span> i:</span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>        a[i], a[largest] <span class="op">=</span> a[largest], a[i]</span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>        heapify(a, n, largest)</span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> heap_sort(a):</span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(a)</span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n<span class="op">//</span><span class="dv">2</span><span class="op">-</span><span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a>        heapify(a, n, i)</span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n<span class="op">-</span><span class="dv">1</span>, <span class="dv">0</span>, <span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb65-28"><a href="#cb65-28" aria-hidden="true" tabindex="-1"></a>        a[<span class="dv">0</span>], a[i] <span class="op">=</span> a[i], a[<span class="dv">0</span>]</span>
<span id="cb65-29"><a href="#cb65-29" aria-hidden="true" tabindex="-1"></a>        heapify(a, i, <span class="dv">0</span>)</span>
<span id="cb65-30"><a href="#cb65-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-31"><a href="#cb65-31" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> introsort(a, depth_limit<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb65-32"><a href="#cb65-32" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(a)</span>
<span id="cb65-33"><a href="#cb65-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> n <span class="op">&lt;=</span> <span class="dv">16</span>:</span>
<span id="cb65-34"><a href="#cb65-34" aria-hidden="true" tabindex="-1"></a>        insertion_sort(a)</span>
<span id="cb65-35"><a href="#cb65-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> a</span>
<span id="cb65-36"><a href="#cb65-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> depth_limit <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb65-37"><a href="#cb65-37" aria-hidden="true" tabindex="-1"></a>        depth_limit <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> <span class="bu">int</span>(math.log2(n))</span>
<span id="cb65-38"><a href="#cb65-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> depth_limit <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb65-39"><a href="#cb65-39" aria-hidden="true" tabindex="-1"></a>        heap_sort(a)</span>
<span id="cb65-40"><a href="#cb65-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> a</span>
<span id="cb65-41"><a href="#cb65-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-42"><a href="#cb65-42" aria-hidden="true" tabindex="-1"></a>    pivot <span class="op">=</span> a[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb65-43"><a href="#cb65-43" aria-hidden="true" tabindex="-1"></a>    left <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> a[:<span class="op">-</span><span class="dv">1</span>] <span class="cf">if</span> x <span class="op">&lt;=</span> pivot]</span>
<span id="cb65-44"><a href="#cb65-44" aria-hidden="true" tabindex="-1"></a>    right <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> a[:<span class="op">-</span><span class="dv">1</span>] <span class="cf">if</span> x <span class="op">&gt;</span> pivot]</span>
<span id="cb65-45"><a href="#cb65-45" aria-hidden="true" tabindex="-1"></a>    introsort(left, depth_limit <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb65-46"><a href="#cb65-46" aria-hidden="true" tabindex="-1"></a>    introsort(right, depth_limit <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb65-47"><a href="#cb65-47" aria-hidden="true" tabindex="-1"></a>    a[:] <span class="op">=</span> left <span class="op">+</span> [pivot] <span class="op">+</span> right</span>
<span id="cb65-48"><a href="#cb65-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a</span>
<span id="cb65-49"><a href="#cb65-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-50"><a href="#cb65-50" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">9</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">7</span>,<span class="dv">5</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">8</span>]</span>
<span id="cb65-51"><a href="#cb65-51" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(introsort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-30" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-30">Why It Matters</h3>
<ul>
<li>Default in C++ STL, fast and reliable</li>
<li>Guaranteed worst-case <span class="math inline">\(O(n \log n)\)</span></li>
<li>Optimized for cache and small data</li>
<li>Adaptive, uses best method for current scenario</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-30" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-30">A Gentle Proof (Why It Works)</h3>
<p>Quick Sort dominates until recursion depth = <span class="math inline">\(2 \log_2 n\)</span>. At that point, worst-case risk appears → switch to Heap Sort (safe fallback). Small subarrays are handled by Insertion Sort for low overhead.</p>
<p>So overall: <span class="math display">\[
T(n) = O(n \log n)
\]</span> Always bounded by Heap Sort’s worst case, but often near Quick Sort’s best.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Method</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Partitioning</td>
<td>Quick Sort</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Deep recursion</td>
<td>Heap Sort</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Small arrays</td>
<td>Insertion Sort</td>
<td>O(n²) local, negligible</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-30" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-30">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[9,3,1,7,5,4,6,2,8]</code>.</li>
<li>Track recursion depth, switch to Heap Sort when <span class="math inline">\(&gt; 2 \log_2 n\)</span>.</li>
<li>Replace threshold = 16 with 8, 32, measure effect.</li>
<li>Test with already sorted array, confirm Heap fallback.</li>
<li>Compare timing with Quick Sort and Heap Sort.</li>
<li>Print method used at each stage.</li>
<li>Test large array (10⁵ elements).</li>
<li>Verify worst-case safety on sorted input.</li>
<li>Try string sorting with custom comparator.</li>
<li>Implement generic version using templates or lambdas.</li>
</ol>
</section>
<section id="test-cases-30" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-30">Test Cases</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 26%">
<col style="width: 26%">
<col style="width: 46%">
</colgroup>
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[9,3,1,7,5,4,6,2,8]</td>
<td>[1,2,3,4,5,6,7,8,9]</td>
<td>Balanced partitions</td>
</tr>
<tr class="even">
<td>[1,2,3,4,5]</td>
<td>[1,2,3,4,5]</td>
<td>Sorted input (Heap Sort fallback)</td>
</tr>
<tr class="odd">
<td>[5,5,5,5]</td>
<td>[5,5,5,5]</td>
<td>Equal elements</td>
</tr>
<tr class="even">
<td>[9,8,7,6,5,4,3,2,1]</td>
<td>[1,2,3,4,5,6,7,8,9]</td>
<td>Worst-case Quick Sort avoided</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-30" class="level3">
<h3 class="anchored" data-anchor-id="complexity-30">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(log n)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>IntroSort is the strategist’s algorithm, it starts bold (Quick Sort), defends wisely (Heap Sort), and finishes gracefully (Insertion Sort). A perfect balance of speed, safety, and adaptability.</p>
</section>
<section id="timsort" class="level3">
<h3 class="anchored" data-anchor-id="timsort">132 TimSort</h3>
<p>TimSort is a hybrid sorting algorithm combining Merge Sort and Insertion Sort, designed for real-world data that often contains partially ordered runs. It was invented by Tim Peters in 2002 and is the default sorting algorithm in Python (<code>sorted()</code>, <code>.sort()</code>) and Java (<code>Arrays.sort()</code> for objects).</p>
<p>TimSort’s superpower is that it detects natural runs in data, sorts them with Insertion Sort if small, and merges them smartly using a stack-based strategy to ensure efficiency.</p>
</section>
<section id="what-problem-are-we-solving-31" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-31">What Problem Are We Solving?</h3>
<p>In practice, many datasets aren’t random, they already contain sorted segments (like logs, names, timestamps). TimSort exploits this by:</p>
<ul>
<li>Detecting ascending/descending runs</li>
<li>Sorting small runs via Insertion Sort</li>
<li>Merging runs using adaptive Merge Sort</li>
</ul>
<p>This yields O(n) performance on already-sorted or nearly-sorted data, far better than standard <span class="math inline">\(O(n \log n)\)</span> sorts in such cases.</p>
<p>Perfect for:</p>
<ul>
<li>Partially sorted lists</li>
<li>Real-world data (time series, strings, logs)</li>
<li>Stable sorting (preserve order of equals)</li>
</ul>
<section id="example-31" class="level4">
<h4 class="anchored" data-anchor-id="example-31">Example</h4>
<p>Sort <code>[5, 6, 7, 1, 2, 3, 8, 9]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Detect runs</td>
<td>[5,6,7], [1,2,3], [8,9]</td>
</tr>
<tr class="even">
<td>2</td>
<td>Sort small runs if needed</td>
<td>[5,6,7], [1,2,3], [8,9]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Merge runs pairwise</td>
<td>[1,2,3,5,6,7,8,9]</td>
</tr>
</tbody>
</table>
<p>TimSort leverages order already present, fewer merges, faster finish.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-31" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-31">How Does It Work (Plain Language)?</h3>
<p>Think of TimSort as a smart librarian:</p>
<ul>
<li>Sees which shelves (runs) are already sorted</li>
<li>Tidies up small messy shelves (Insertion Sort)</li>
<li>Merges shelves together efficiently (Merge Sort)</li>
<li>Uses stack rules to decide merge timing for balance</li>
</ul>
<p>It’s adaptive, stable, and real-world optimized.</p>
<section id="step-by-step-process-30" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-30">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Scan the array to find runs (ascending or descending)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Reverse descending runs</td>
</tr>
<tr class="odd">
<td>3</td>
<td>If run length &lt; <code>minrun</code>, extend using Insertion Sort</td>
</tr>
<tr class="even">
<td>4</td>
<td>Push runs onto stack</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Merge runs when stack size conditions are violated</td>
</tr>
<tr class="even">
<td>6</td>
<td>Continue until one run remains (fully sorted)</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-30" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-30">Tiny Code (Easy Versions)</h3>
<section id="python-simplified-simulation" class="level4">
<h4 class="anchored" data-anchor-id="python-simplified-simulation">Python (Simplified Simulation)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> insertion_sort(arr, left, right):</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(left <span class="op">+</span> <span class="dv">1</span>, right <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> arr[i]</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>        j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&gt;=</span> left <span class="kw">and</span> arr[j] <span class="op">&gt;</span> key:</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>            arr[j <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> arr[j]</span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>            j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>        arr[j <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> key</span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> merge(arr, left, mid, right):</span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>    left_part <span class="op">=</span> arr[left:mid<span class="op">+</span><span class="dv">1</span>]</span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>    right_part <span class="op">=</span> arr[mid<span class="op">+</span><span class="dv">1</span>:right<span class="op">+</span><span class="dv">1</span>]</span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> j <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>    k <span class="op">=</span> left</span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(left_part) <span class="kw">and</span> j <span class="op">&lt;</span> <span class="bu">len</span>(right_part):</span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> left_part[i] <span class="op">&lt;=</span> right_part[j]:</span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a>            arr[k] <span class="op">=</span> left_part[i]</span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb66-19"><a href="#cb66-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb66-20"><a href="#cb66-20" aria-hidden="true" tabindex="-1"></a>            arr[k] <span class="op">=</span> right_part[j]</span>
<span id="cb66-21"><a href="#cb66-21" aria-hidden="true" tabindex="-1"></a>            j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb66-22"><a href="#cb66-22" aria-hidden="true" tabindex="-1"></a>        k <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb66-23"><a href="#cb66-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(left_part):</span>
<span id="cb66-24"><a href="#cb66-24" aria-hidden="true" tabindex="-1"></a>        arr[k] <span class="op">=</span> left_part[i]<span class="op">;</span> i <span class="op">+=</span> <span class="dv">1</span><span class="op">;</span> k <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb66-25"><a href="#cb66-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> j <span class="op">&lt;</span> <span class="bu">len</span>(right_part):</span>
<span id="cb66-26"><a href="#cb66-26" aria-hidden="true" tabindex="-1"></a>        arr[k] <span class="op">=</span> right_part[j]<span class="op">;</span> j <span class="op">+=</span> <span class="dv">1</span><span class="op">;</span> k <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb66-27"><a href="#cb66-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-28"><a href="#cb66-28" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> timsort(arr):</span>
<span id="cb66-29"><a href="#cb66-29" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb66-30"><a href="#cb66-30" aria-hidden="true" tabindex="-1"></a>    minrun <span class="op">=</span> <span class="dv">32</span></span>
<span id="cb66-31"><a href="#cb66-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-32"><a href="#cb66-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sort small runs using insertion sort</span></span>
<span id="cb66-33"><a href="#cb66-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> start <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, n, minrun):</span>
<span id="cb66-34"><a href="#cb66-34" aria-hidden="true" tabindex="-1"></a>        end <span class="op">=</span> <span class="bu">min</span>(start <span class="op">+</span> minrun <span class="op">-</span> <span class="dv">1</span>, n <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb66-35"><a href="#cb66-35" aria-hidden="true" tabindex="-1"></a>        insertion_sort(arr, start, end)</span>
<span id="cb66-36"><a href="#cb66-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-37"><a href="#cb66-37" aria-hidden="true" tabindex="-1"></a>    size <span class="op">=</span> minrun</span>
<span id="cb66-38"><a href="#cb66-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> size <span class="op">&lt;</span> n:</span>
<span id="cb66-39"><a href="#cb66-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> left <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, n, <span class="dv">2</span> <span class="op">*</span> size):</span>
<span id="cb66-40"><a href="#cb66-40" aria-hidden="true" tabindex="-1"></a>            mid <span class="op">=</span> <span class="bu">min</span>(n <span class="op">-</span> <span class="dv">1</span>, left <span class="op">+</span> size <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb66-41"><a href="#cb66-41" aria-hidden="true" tabindex="-1"></a>            right <span class="op">=</span> <span class="bu">min</span>(n <span class="op">-</span> <span class="dv">1</span>, left <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> size <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb66-42"><a href="#cb66-42" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> mid <span class="op">&lt;</span> right:</span>
<span id="cb66-43"><a href="#cb66-43" aria-hidden="true" tabindex="-1"></a>                merge(arr, left, mid, right)</span>
<span id="cb66-44"><a href="#cb66-44" aria-hidden="true" tabindex="-1"></a>        size <span class="op">*=</span> <span class="dv">2</span></span>
<span id="cb66-45"><a href="#cb66-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-46"><a href="#cb66-46" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">8</span>,<span class="dv">9</span>]</span>
<span id="cb66-47"><a href="#cb66-47" aria-hidden="true" tabindex="-1"></a>timsort(arr)</span>
<span id="cb66-48"><a href="#cb66-48" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$1, 2, 3, 5, 6, 7, 8, 9]</code></pre>
</section>
<section id="c-conceptual-version" class="level4">
<h4 class="anchored" data-anchor-id="c-conceptual-version">C (Conceptual Version)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb68"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MINRUN </span><span class="dv">32</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> insertion_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> left<span class="op">,</span> <span class="dt">int</span> right<span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> left <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> right<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> key <span class="op">=</span> arr<span class="op">[</span>i<span class="op">],</span> j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>j <span class="op">&gt;=</span> left <span class="op">&amp;&amp;</span> arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&gt;</span> key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>            j<span class="op">--;</span></span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> merge<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> l<span class="op">,</span> <span class="dt">int</span> m<span class="op">,</span> <span class="dt">int</span> r<span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n1 <span class="op">=</span> m <span class="op">-</span> l <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> n2 <span class="op">=</span> r <span class="op">-</span> m<span class="op">;</span></span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>L <span class="op">=</span> malloc<span class="op">(</span>n1 <span class="op">*</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">)),</span> <span class="op">*</span>R <span class="op">=</span> malloc<span class="op">(</span>n2 <span class="op">*</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n1<span class="op">;</span> i<span class="op">++)</span> L<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>l <span class="op">+</span> i<span class="op">];</span></span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> n2<span class="op">;</span> j<span class="op">++)</span> R<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>m <span class="op">+</span> <span class="dv">1</span> <span class="op">+</span> j<span class="op">];</span></span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> k <span class="op">=</span> l<span class="op">;</span></span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n1 <span class="op">&amp;&amp;</span> j <span class="op">&lt;</span> n2<span class="op">)</span> arr<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> <span class="op">(</span>L<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;=</span> R<span class="op">[</span>j<span class="op">])</span> <span class="op">?</span> L<span class="op">[</span>i<span class="op">++]</span> <span class="op">:</span> R<span class="op">[</span>j<span class="op">++];</span></span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n1<span class="op">)</span> arr<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> L<span class="op">[</span>i<span class="op">++];</span></span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>j <span class="op">&lt;</span> n2<span class="op">)</span> arr<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> R<span class="op">[</span>j<span class="op">++];</span></span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a>    free<span class="op">(</span>L<span class="op">);</span> free<span class="op">(</span>R<span class="op">);</span></span>
<span id="cb68-27"><a href="#cb68-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb68-28"><a href="#cb68-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-29"><a href="#cb68-29" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> timsort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-30"><a href="#cb68-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i <span class="op">+=</span> MINRUN<span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-31"><a href="#cb68-31" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> end <span class="op">=</span> <span class="op">(</span>i <span class="op">+</span> MINRUN <span class="op">-</span> <span class="dv">1</span> <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">?</span> <span class="op">(</span>i <span class="op">+</span> MINRUN <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">:</span> <span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb68-32"><a href="#cb68-32" aria-hidden="true" tabindex="-1"></a>        insertion_sort<span class="op">(</span>arr<span class="op">,</span> i<span class="op">,</span> end<span class="op">);</span></span>
<span id="cb68-33"><a href="#cb68-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb68-34"><a href="#cb68-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> size <span class="op">=</span> MINRUN<span class="op">;</span> size <span class="op">&lt;</span> n<span class="op">;</span> size <span class="op">*=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-35"><a href="#cb68-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> left <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> left <span class="op">&lt;</span> n<span class="op">;</span> left <span class="op">+=</span> <span class="dv">2</span> <span class="op">*</span> size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-36"><a href="#cb68-36" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> mid <span class="op">=</span> <span class="op">(</span>left <span class="op">+</span> size <span class="op">-</span> <span class="dv">1</span> <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">?</span> <span class="op">(</span>left <span class="op">+</span> size <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">:</span> <span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb68-37"><a href="#cb68-37" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> right <span class="op">=</span> <span class="op">(</span>left <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> size <span class="op">-</span> <span class="dv">1</span> <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">?</span> <span class="op">(</span>left <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> size <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">:</span> <span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb68-38"><a href="#cb68-38" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>mid <span class="op">&lt;</span> right<span class="op">)</span> merge<span class="op">(</span>arr<span class="op">,</span> left<span class="op">,</span> mid<span class="op">,</span> right<span class="op">);</span></span>
<span id="cb68-39"><a href="#cb68-39" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb68-40"><a href="#cb68-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb68-41"><a href="#cb68-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb68-42"><a href="#cb68-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-43"><a href="#cb68-43" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-44"><a href="#cb68-44" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span><span class="dv">6</span><span class="op">,</span><span class="dv">7</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">8</span><span class="op">,</span><span class="dv">9</span><span class="op">};</span></span>
<span id="cb68-45"><a href="#cb68-45" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb68-46"><a href="#cb68-46" aria-hidden="true" tabindex="-1"></a>    timsort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb68-47"><a href="#cb68-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb68-48"><a href="#cb68-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb68-49"><a href="#cb68-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-31" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-31">Why It Matters</h3>
<ul>
<li>Default sort in Python &amp; Java</li>
<li>Stable and adaptive</li>
<li>O(n) on sorted data</li>
<li>O(n log n) worst case</li>
<li>Handles real-world inputs gracefully</li>
</ul>
<p>It’s the perfect sort when you don’t know the data shape, it <em>adapts itself</em>.</p>
</section>
<section id="a-gentle-proof-why-it-works-31" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-31">A Gentle Proof (Why It Works)</h3>
<p>If data already contains sorted runs of average length <span class="math inline">\(r\)</span>:</p>
<ul>
<li>Insertion Sort: <span class="math inline">\(O(r^2)\)</span> per run (tiny)<br>
</li>
<li>Merging <span class="math inline">\((n / r)\)</span> runs: <span class="math inline">\(O(n \log (n / r))\)</span></li>
</ul>
<p>Overall: <span class="math display">\[
T(n) = O(n + n \log (n/r))
\]</span> For <span class="math inline">\(r \approx n\)</span>: <span class="math inline">\(O(n)\)</span><br>
For <span class="math inline">\(r = 1\)</span>: <span class="math inline">\(O(n \log n)\)</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Work</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Run Detection</td>
<td><span class="math inline">\(O(n)\)</span></td>
<td>One pass</td>
</tr>
<tr class="even">
<td>Local Sorting</td>
<td><span class="math inline">\(O(r^2)\)</span> per run</td>
<td>Tiny runs</td>
</tr>
<tr class="odd">
<td>Merge Phase</td>
<td><span class="math inline">\(O(n \log n)\)</span></td>
<td>Balanced merges</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-31" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-31">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[5,6,7,1,2,3,8,9]</code> step by step.</li>
<li>Detect natural runs manually.</li>
<li>Reverse descending runs before merge.</li>
<li>Adjust <code>minrun = 16</code>, see difference.</li>
<li>Test <code>[1,2,3,4,5]</code>, should take O(n).</li>
<li>Add random noise to partially sorted list.</li>
<li>Track stack of runs, when to merge?</li>
<li>Compare performance with Merge Sort.</li>
<li>Visualize merge order tree.</li>
<li>Check stability with duplicate keys.</li>
</ol>
</section>
<section id="test-cases-31" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-31">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[5,6,7,1,2,3,8,9]</td>
<td>[1,2,3,5,6,7,8,9]</td>
<td>Mixed runs</td>
</tr>
<tr class="even">
<td>[1,2,3,4,5]</td>
<td>[1,2,3,4,5]</td>
<td>Already sorted</td>
</tr>
<tr class="odd">
<td>[9,8,7,6]</td>
<td>[6,7,8,9]</td>
<td>Reverse run</td>
</tr>
<tr class="even">
<td>[5,5,5,5]</td>
<td>[5,5,5,5]</td>
<td>Stability test</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-31" class="level3">
<h3 class="anchored" data-anchor-id="complexity-31">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>TimSort is the real-world champion, it watches your data, adapts instantly, and sorts smarter, not harder. It’s the kind of algorithm that doesn’t just run fast, it <em>thinks</em> fast.</p>
</section>
<section id="dual-pivot-quicksort" class="level3">
<h3 class="anchored" data-anchor-id="dual-pivot-quicksort">133 Dual-Pivot QuickSort</h3>
<p>Dual-Pivot QuickSort is an enhanced variant of QuickSort that uses two pivots instead of one to partition the array into three regions:</p>
<ul>
<li>Elements less than pivot1,</li>
<li>Elements between pivot1 and pivot2,</li>
<li>Elements greater than pivot2.</li>
</ul>
<p>This approach often reduces comparisons and improves cache efficiency. It was popularized by Vladimir Yaroslavskiy and became the default sorting algorithm in Java (from Java 7) for primitive types.</p>
</section>
<section id="what-problem-are-we-solving-32" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-32">What Problem Are We Solving?</h3>
<p>Standard QuickSort splits the array into two parts using one pivot. Dual-Pivot QuickSort splits into three, reducing recursion depth and overhead.</p>
<p>It’s optimized for:</p>
<ul>
<li>Large arrays of primitives (integers, floats)</li>
<li>Random and uniform data</li>
<li>Modern CPUs with deep pipelines and caches</li>
</ul>
<p>It offers better real-world performance than classic QuickSort, even if asymptotic complexity remains <span class="math inline">\(O(n \log n)\)</span>.</p>
<section id="example-32" class="level4">
<h4 class="anchored" data-anchor-id="example-32">Example</h4>
<p>Sort <code>[9, 3, 1, 7, 5, 4, 6, 2, 8]</code></p>
<p>Choose pivots (<span class="math inline">\(p_1 = 3\)</span>, <span class="math inline">\(p_2 = 7\)</span>):</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Region</th>
<th>Condition</th>
<th>Elements</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Left</td>
<td><span class="math inline">\(x &lt; 3\)</span></td>
<td>[1, 2]</td>
</tr>
<tr class="even">
<td>Middle</td>
<td><span class="math inline">\(3 \le x \le 7\)</span></td>
<td>[3, 4, 5, 6, 7]</td>
</tr>
<tr class="odd">
<td>Right</td>
<td><span class="math inline">\(x &gt; 7\)</span></td>
<td>[8, 9]</td>
</tr>
</tbody>
</table>
<p>Recurse on each region.<br>
Final result: <code>[1, 2, 3, 4, 5, 6, 7, 8, 9]</code>.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-32" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-32">How Does It Work (Plain Language)?</h3>
<p>Imagine sorting shoes by size with two markers:</p>
<ul>
<li>Small shelf for sizes less than 7</li>
<li>Middle shelf for 7–9</li>
<li>Big shelf for 10+</li>
</ul>
<p>You walk through once, placing each shoe in the right group, then sort each shelf individually.</p>
<p>Dual-Pivot QuickSort does exactly that: partition into three zones in one pass, then recurse.</p>
<section id="step-by-step-process-31" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-31">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Choose two pivots (<span class="math inline">\(p_1\)</span>, <span class="math inline">\(p_2\)</span>), ensuring <span class="math inline">\(p_1 &lt; p_2\)</span></td>
</tr>
<tr class="even">
<td>2</td>
<td>Partition array into 3 parts: <code>&lt; p₁</code>, <code>p₁..p₂</code>, <code>&gt; p₂</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Recursively sort each part</td>
</tr>
<tr class="even">
<td>4</td>
<td>Combine results in order</td>
</tr>
</tbody>
</table>
<p>If <span class="math inline">\(p_1 &gt; p_2\)</span>, swap them first.</p>
</section>
</section>
<section id="tiny-code-easy-versions-31" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-31">Tiny Code (Easy Versions)</h3>
<section id="c-22" class="level4">
<h4 class="anchored" data-anchor-id="c-22">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb69"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> tmp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span> <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span> <span class="op">*</span>b <span class="op">=</span> tmp<span class="op">;</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> dual_pivot_quicksort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>low <span class="op">&gt;=</span> high<span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>low<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>high<span class="op">])</span> swap<span class="op">(&amp;</span>arr<span class="op">[</span>low<span class="op">],</span> <span class="op">&amp;</span>arr<span class="op">[</span>high<span class="op">]);</span></span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> p1 <span class="op">=</span> arr<span class="op">[</span>low<span class="op">],</span> p2 <span class="op">=</span> arr<span class="op">[</span>high<span class="op">];</span></span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> lt <span class="op">=</span> low <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> gt <span class="op">=</span> high <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> i <span class="op">=</span> low <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;=</span> gt<span class="op">)</span> <span class="op">{</span></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> p1<span class="op">)</span> <span class="op">{</span></span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a>            swap<span class="op">(&amp;</span>arr<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>arr<span class="op">[</span>lt<span class="op">]);</span></span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a>            lt<span class="op">++;</span> i<span class="op">++;</span></span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> p2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true" tabindex="-1"></a>            swap<span class="op">(&amp;</span>arr<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>arr<span class="op">[</span>gt<span class="op">]);</span></span>
<span id="cb69-21"><a href="#cb69-21" aria-hidden="true" tabindex="-1"></a>            gt<span class="op">--;</span></span>
<span id="cb69-22"><a href="#cb69-22" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb69-23"><a href="#cb69-23" aria-hidden="true" tabindex="-1"></a>            i<span class="op">++;</span></span>
<span id="cb69-24"><a href="#cb69-24" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb69-25"><a href="#cb69-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb69-26"><a href="#cb69-26" aria-hidden="true" tabindex="-1"></a>    lt<span class="op">--;</span> gt<span class="op">++;</span></span>
<span id="cb69-27"><a href="#cb69-27" aria-hidden="true" tabindex="-1"></a>    swap<span class="op">(&amp;</span>arr<span class="op">[</span>low<span class="op">],</span> <span class="op">&amp;</span>arr<span class="op">[</span>lt<span class="op">]);</span></span>
<span id="cb69-28"><a href="#cb69-28" aria-hidden="true" tabindex="-1"></a>    swap<span class="op">(&amp;</span>arr<span class="op">[</span>high<span class="op">],</span> <span class="op">&amp;</span>arr<span class="op">[</span>gt<span class="op">]);</span></span>
<span id="cb69-29"><a href="#cb69-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-30"><a href="#cb69-30" aria-hidden="true" tabindex="-1"></a>    dual_pivot_quicksort<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> lt <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb69-31"><a href="#cb69-31" aria-hidden="true" tabindex="-1"></a>    dual_pivot_quicksort<span class="op">(</span>arr<span class="op">,</span> lt <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> gt <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb69-32"><a href="#cb69-32" aria-hidden="true" tabindex="-1"></a>    dual_pivot_quicksort<span class="op">(</span>arr<span class="op">,</span> gt <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> high<span class="op">);</span></span>
<span id="cb69-33"><a href="#cb69-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb69-34"><a href="#cb69-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-35"><a href="#cb69-35" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb69-36"><a href="#cb69-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">9</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">7</span><span class="op">,</span><span class="dv">5</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">6</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">8</span><span class="op">};</span></span>
<span id="cb69-37"><a href="#cb69-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb69-38"><a href="#cb69-38" aria-hidden="true" tabindex="-1"></a>    dual_pivot_quicksort<span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n<span class="op">-</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb69-39"><a href="#cb69-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb69-40"><a href="#cb69-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb69-41"><a href="#cb69-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="python-26" class="level4">
<h4 class="anchored" data-anchor-id="python-26">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> dual_pivot_quicksort(arr):</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> sort(low, high):</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> low <span class="op">&gt;=</span> high:</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[low] <span class="op">&gt;</span> arr[high]:</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>            arr[low], arr[high] <span class="op">=</span> arr[high], arr[low]</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>        p1, p2 <span class="op">=</span> arr[low], arr[high]</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>        lt, gt, i <span class="op">=</span> low <span class="op">+</span> <span class="dv">1</span>, high <span class="op">-</span> <span class="dv">1</span>, low <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> i <span class="op">&lt;=</span> gt:</span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> arr[i] <span class="op">&lt;</span> p1:</span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>                arr[i], arr[lt] <span class="op">=</span> arr[lt], arr[i]</span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>                lt <span class="op">+=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> arr[i] <span class="op">&gt;</span> p2:</span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>                arr[i], arr[gt] <span class="op">=</span> arr[gt], arr[i]</span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>                gt <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a>                i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a>        lt <span class="op">-=</span> <span class="dv">1</span><span class="op">;</span> gt <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a>        arr[low], arr[lt] <span class="op">=</span> arr[lt], arr[low]</span>
<span id="cb70-20"><a href="#cb70-20" aria-hidden="true" tabindex="-1"></a>        arr[high], arr[gt] <span class="op">=</span> arr[gt], arr[high]</span>
<span id="cb70-21"><a href="#cb70-21" aria-hidden="true" tabindex="-1"></a>        sort(low, lt <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb70-22"><a href="#cb70-22" aria-hidden="true" tabindex="-1"></a>        sort(lt <span class="op">+</span> <span class="dv">1</span>, gt <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb70-23"><a href="#cb70-23" aria-hidden="true" tabindex="-1"></a>        sort(gt <span class="op">+</span> <span class="dv">1</span>, high)</span>
<span id="cb70-24"><a href="#cb70-24" aria-hidden="true" tabindex="-1"></a>    sort(<span class="dv">0</span>, <span class="bu">len</span>(arr) <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb70-25"><a href="#cb70-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr</span>
<span id="cb70-26"><a href="#cb70-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-27"><a href="#cb70-27" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">9</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">7</span>,<span class="dv">5</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">8</span>]</span>
<span id="cb70-28"><a href="#cb70-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dual_pivot_quicksort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-32" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-32">Why It Matters</h3>
<ul>
<li>Default in Java for primitives</li>
<li>Fewer comparisons than single-pivot QuickSort</li>
<li>Cache-friendly (less branching)</li>
<li>Stable recursion depth with three partitions</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-32" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-32">A Gentle Proof (Why It Works)</h3>
<p>Each partitioning step processes all elements once, <span class="math inline">\(O(n)\)</span>. Recursion on three smaller subarrays yields total cost:</p>
<p><span class="math display">\[
T(n) = T(k_1) + T(k_2) + T(k_3) + O(n)
\]</span> On average, partitions are balanced → <span class="math inline">\(T(n) = O(n \log n)\)</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Operation</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Partitioning</td>
<td><span class="math inline">\(O(n)\)</span></td>
<td>One pass</td>
</tr>
<tr class="even">
<td>Recursion</td>
<td>3 subarrays</td>
<td>Balanced depth</td>
</tr>
<tr class="odd">
<td>Total</td>
<td><span class="math inline">\(O(n \log n)\)</span></td>
<td>Average / Worst</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-32" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-32">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[9,3,1,7,5,4,6,2,8]</code> step by step.</li>
<li>Choose pivots manually: smallest and largest.</li>
<li>Trace index movements (lt, gt, i).</li>
<li>Compare with classic QuickSort partition count.</li>
<li>Use reversed array, observe stability.</li>
<li>Add duplicates <code>[5,5,5,5]</code>, see middle zone effect.</li>
<li>Measure comparisons vs single pivot.</li>
<li>Try large input (10⁶) and time it.</li>
<li>Visualize three partitions recursively.</li>
<li>Implement tail recursion optimization.</li>
</ol>
</section>
<section id="test-cases-32" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-32">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[9,3,1,7,5,4,6,2,8]</td>
<td>[1,2,3,4,5,6,7,8,9]</td>
<td>Example</td>
</tr>
<tr class="even">
<td>[1,2,3,4]</td>
<td>[1,2,3,4]</td>
<td>Already sorted</td>
</tr>
<tr class="odd">
<td>[9,8,7,6,5]</td>
<td>[5,6,7,8,9]</td>
<td>Reverse</td>
</tr>
<tr class="even">
<td>[5,5,5,5]</td>
<td>[5,5,5,5]</td>
<td>Duplicates</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-32" class="level3">
<h3 class="anchored" data-anchor-id="complexity-32">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(log n)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Dual-Pivot QuickSort slices data with two blades instead of one, making each cut smaller, shallower, and more balanced. A sharper, smarter evolution of a timeless classic.</p>
</section>
<section id="smoothsort" class="level3">
<h3 class="anchored" data-anchor-id="smoothsort">134 SmoothSort</h3>
<p>SmoothSort is an adaptive comparison-based sorting algorithm invented by Edsger Dijkstra. It’s similar in spirit to Heap Sort, but smarter, it runs in O(n) time on already sorted data and O(n log n) in the worst case.</p>
<p>The key idea is to build a special heap structure (Leonardo heap) that adapts to existing order in the data. When the array is nearly sorted, it finishes quickly. When not, it gracefully falls back to heap-like performance.</p>
</section>
<section id="what-problem-are-we-solving-33" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-33">What Problem Are We Solving?</h3>
<p>Heap Sort always works in <span class="math inline">\(O(n \log n)\)</span>, even when the input is already sorted. SmoothSort improves on this by being adaptive, the more ordered the input, the faster it gets.</p>
<p>It’s ideal for:</p>
<ul>
<li>Nearly sorted arrays</li>
<li>Situations requiring guaranteed upper bounds</li>
<li>Memory-constrained environments (in-place sort)</li>
</ul>
<section id="example-33" class="level4">
<h4 class="anchored" data-anchor-id="example-33">Example</h4>
<p>Sort <code>[1, 2, 4, 3, 5]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Build initial heap (Leonardo structure)</td>
<td>[1,2,4,3,5]</td>
</tr>
<tr class="even">
<td>2</td>
<td>Detect small disorder (4,3)</td>
<td>Swap</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Restore heap property</td>
<td>[1,2,3,4,5]</td>
</tr>
<tr class="even">
<td>4</td>
<td>Sorted early, no full rebuild needed</td>
<td>Done</td>
</tr>
</tbody>
</table>
<p>Result: finished early since only minor disorder existed.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-33" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-33">How Does It Work (Plain Language)?</h3>
<p>Imagine a stack of heaps, each representing a Fibonacci-like sequence (Leonardo numbers). You grow this structure as you read the array, maintaining order locally. When disorder appears, you fix only where needed, not everywhere.</p>
<p>So SmoothSort is like a gentle gardener: it only trims where weeds grow, not the whole garden.</p>
<section id="step-by-step-process-32" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-32">Step-by-Step Process</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 93%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Represent the array as a series of Leonardo heaps</td>
</tr>
<tr class="even">
<td>2</td>
<td>Add elements one by one, updating the heap sequence</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Maintain heap property with minimal swaps</td>
</tr>
<tr class="even">
<td>4</td>
<td>When finished, repeatedly extract the maximum (like Heap Sort)</td>
</tr>
<tr class="odd">
<td>5</td>
<td>During extraction, merge smaller heaps as needed</td>
</tr>
</tbody>
</table>
<p>Leonardo numbers guide heap sizes: ( L(0)=1, L(1)=1, L(n)=L(n-1)+L(n-2)+1 )</p>
</section>
</section>
<section id="tiny-code-easy-versions-32" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-32">Tiny Code (Easy Versions)</h3>
<section id="python-simplified-adaptive-sort" class="level4">
<h4 class="anchored" data-anchor-id="python-simplified-adaptive-sort">Python (Simplified Adaptive Sort)</h4>
<p>This is a simplified version to show adaptiveness, not a full Leonardo heap implementation.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> smoothsort(arr):</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simplified: detect sorted runs, fix only where needed</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n):</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>        j <span class="op">=</span> i</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&gt;</span> <span class="dv">0</span> <span class="kw">and</span> arr[j] <span class="op">&lt;</span> arr[j <span class="op">-</span> <span class="dv">1</span>]:</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>            arr[j], arr[j <span class="op">-</span> <span class="dv">1</span>] <span class="op">=</span> arr[j <span class="op">-</span> <span class="dv">1</span>], arr[j]</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>            j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr</span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">5</span>]</span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(smoothsort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$1, 2, 3, 4, 5]</code></pre>
<p><em>(Note: Real SmoothSort uses Leonardo heaps, complex but in-place and efficient.)</em></p>
</section>
<section id="c-conceptual-heap-approach" class="level4">
<h4 class="anchored" data-anchor-id="c-conceptual-heap-approach">C (Conceptual Heap Approach)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb73"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> insertion_like_fix<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>j <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&lt;</span> arr<span class="op">[</span>j <span class="op">-</span> <span class="dv">1</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> tmp <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j <span class="op">-</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>j <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> tmp<span class="op">;</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>            j<span class="op">--;</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">5</span><span class="op">};</span></span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a>    insertion_like_fix<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This mimics SmoothSort’s adaptiveness: fix locally, not globally.</p>
</section>
</section>
<section id="why-it-matters-33" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-33">Why It Matters</h3>
<ul>
<li>Adaptive: faster on nearly sorted data</li>
<li>In-place: no extra memory</li>
<li>Guaranteed bound: never worse than <span class="math inline">\(O(n \log n)\)</span></li>
<li>Historical gem: Dijkstra’s innovation in sorting theory</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-33" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-33">A Gentle Proof (Why It Works)</h3>
<p>For sorted input:</p>
<ul>
<li>Each insertion requires no swaps → <span class="math inline">\(O(n)\)</span></li>
</ul>
<p>For random input:</p>
<ul>
<li>Heap restorations per insertion → <span class="math inline">\(O(\log n)\)</span><br>
</li>
<li>Total cost: <span class="math inline">\(O(n \log n)\)</span></li>
</ul>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Case</th>
<th>Behavior</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Best (Sorted)</td>
<td>Minimal swaps</td>
<td><span class="math inline">\(O(n)\)</span></td>
</tr>
<tr class="even">
<td>Average</td>
<td>Moderate reheapify</td>
<td><span class="math inline">\(O(n \log n)\)</span></td>
</tr>
<tr class="odd">
<td>Worst</td>
<td>Full heap rebuilds</td>
<td><span class="math inline">\(O(n \log n)\)</span></td>
</tr>
</tbody>
</table>
<p>SmoothSort adapts between these seamlessly.</p>
</section>
<section id="try-it-yourself-33" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-33">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[1, 2, 4, 3, 5]</code> step by step.</li>
<li>Try <code>[1, 2, 3, 4, 5]</code>, measure comparisons.</li>
<li>Try <code>[5, 4, 3, 2, 1]</code>, full workload.</li>
<li>Count swaps in each case.</li>
<li>Compare to Heap Sort.</li>
<li>Visualize heap sizes as Leonardo sequence.</li>
<li>Implement run detection.</li>
<li>Experiment with large partially sorted arrays.</li>
<li>Track adaptive speedup.</li>
<li>Write Leonardo heap builder.</li>
</ol>
</section>
<section id="test-cases-33" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-33">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[1,2,4,3,5]</td>
<td>[1,2,3,4,5]</td>
<td>Minor disorder</td>
</tr>
<tr class="even">
<td>[1,2,3,4,5]</td>
<td>[1,2,3,4,5]</td>
<td>Already sorted</td>
</tr>
<tr class="odd">
<td>[5,4,3,2,1]</td>
<td>[1,2,3,4,5]</td>
<td>Full rebuild</td>
</tr>
<tr class="even">
<td>[2,1,3,5,4]</td>
<td>[1,2,3,4,5]</td>
<td>Mixed case</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-33" class="level3">
<h3 class="anchored" data-anchor-id="complexity-33">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>SmoothSort glides gracefully across the array, fixing only what’s broken. It’s sorting that <em>listens</em> to your data, quiet, clever, and precise.</p>
</section>
<section id="block-merge-sort" class="level3">
<h3 class="anchored" data-anchor-id="block-merge-sort">135 Block Merge Sort</h3>
<p>Block Merge Sort is a cache-efficient, stable sorting algorithm that merges data using small fixed-size blocks instead of large temporary arrays. It improves on standard Merge Sort by reducing memory usage and enhancing locality of reference, making it a great choice for modern hardware and large datasets.</p>
<p>It’s designed to keep data cache-friendly, in-place (or nearly), and stable, making it a practical choice for systems with limited memory bandwidth or tight memory constraints.</p>
</section>
<section id="what-problem-are-we-solving-34" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-34">What Problem Are We Solving?</h3>
<p>Classic Merge Sort is stable and O(n log n), but it needs O(n) extra space. Block Merge Sort solves this by using blocks of fixed size (often √n) as temporary buffers for merging.</p>
<p>It aims to:</p>
<ul>
<li>Keep stability</li>
<li>Use limited extra memory</li>
<li>Maximize cache reuse</li>
<li>Maintain predictable access patterns</li>
</ul>
<p>Ideal for:</p>
<ul>
<li>Large arrays</li>
<li>External memory sorting</li>
<li>Systems with cache hierarchies</li>
</ul>
<section id="example-34" class="level4">
<h4 class="anchored" data-anchor-id="example-34">Example</h4>
<p>Sort <code>[8, 3, 5, 1, 6, 2, 7, 4]</code></p>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 59%">
<col style="width: 35%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Divide into sorted runs (via insertion sort)</td>
<td>[3,8], [1,5], [2,6], [4,7]</td>
</tr>
<tr class="even">
<td>2</td>
<td>Merge adjacent blocks using buffer</td>
<td>[1,3,5,8], [2,4,6,7]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Merge merged blocks with block buffer</td>
<td>[1,2,3,4,5,6,7,8]</td>
</tr>
</tbody>
</table>
<p>Instead of full arrays, it uses small block buffers, fewer cache misses, less extra space.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-34" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-34">How Does It Work (Plain Language)?</h3>
<p>Think of merging two sorted shelves in a library, but instead of taking all books off, you move a small block at a time, swapping them in place with a small temporary cart.</p>
<p>You slide the buffer along the shelves, merge gradually, efficiently, with minimal movement.</p>
<section id="step-by-step-process-33" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-33">Step-by-Step Process</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 94%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Divide input into runs (sorted subarrays)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Use insertion sort or binary insertion to sort each run</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Allocate small buffer (block)</td>
</tr>
<tr class="even">
<td>4</td>
<td>Merge runs pairwise using the block buffer</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Repeat until one sorted array remains</td>
</tr>
</tbody>
</table>
<p>Block merges rely on rotations and buffer swapping to minimize extra space.</p>
</section>
</section>
<section id="tiny-code-easy-versions-33" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-33">Tiny Code (Easy Versions)</h3>
<section id="python-simplified-version" class="level4">
<h4 class="anchored" data-anchor-id="python-simplified-version">Python (Simplified Version)</h4>
<p>This version simulates block merging using chunks.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> insertion_sort(arr, start, end):</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(start <span class="op">+</span> <span class="dv">1</span>, end):</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> arr[i]</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>        j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&gt;=</span> start <span class="kw">and</span> arr[j] <span class="op">&gt;</span> key:</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>            arr[j <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> arr[j]</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>            j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>        arr[j <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> key</span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> merge(arr, left, mid, right):</span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>    left_part <span class="op">=</span> arr[left:mid]</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>    right_part <span class="op">=</span> arr[mid:right]</span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> j <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>    k <span class="op">=</span> left</span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(left_part) <span class="kw">and</span> j <span class="op">&lt;</span> <span class="bu">len</span>(right_part):</span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> left_part[i] <span class="op">&lt;=</span> right_part[j]:</span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a>            arr[k] <span class="op">=</span> left_part[i]<span class="op">;</span> i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb74-19"><a href="#cb74-19" aria-hidden="true" tabindex="-1"></a>            arr[k] <span class="op">=</span> right_part[j]<span class="op">;</span> j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb74-20"><a href="#cb74-20" aria-hidden="true" tabindex="-1"></a>        k <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb74-21"><a href="#cb74-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(left_part):</span>
<span id="cb74-22"><a href="#cb74-22" aria-hidden="true" tabindex="-1"></a>        arr[k] <span class="op">=</span> left_part[i]<span class="op">;</span> i <span class="op">+=</span> <span class="dv">1</span><span class="op">;</span> k <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb74-23"><a href="#cb74-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> j <span class="op">&lt;</span> <span class="bu">len</span>(right_part):</span>
<span id="cb74-24"><a href="#cb74-24" aria-hidden="true" tabindex="-1"></a>        arr[k] <span class="op">=</span> right_part[j]<span class="op">;</span> j <span class="op">+=</span> <span class="dv">1</span><span class="op">;</span> k <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb74-25"><a href="#cb74-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-26"><a href="#cb74-26" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> block_merge_sort(arr, block_size<span class="op">=</span><span class="dv">32</span>):</span>
<span id="cb74-27"><a href="#cb74-27" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb74-28"><a href="#cb74-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 1: sort small blocks</span></span>
<span id="cb74-29"><a href="#cb74-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> start <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, n, block_size):</span>
<span id="cb74-30"><a href="#cb74-30" aria-hidden="true" tabindex="-1"></a>        end <span class="op">=</span> <span class="bu">min</span>(start <span class="op">+</span> block_size, n)</span>
<span id="cb74-31"><a href="#cb74-31" aria-hidden="true" tabindex="-1"></a>        insertion_sort(arr, start, end)</span>
<span id="cb74-32"><a href="#cb74-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-33"><a href="#cb74-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 2: merge adjacent blocks</span></span>
<span id="cb74-34"><a href="#cb74-34" aria-hidden="true" tabindex="-1"></a>    size <span class="op">=</span> block_size</span>
<span id="cb74-35"><a href="#cb74-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> size <span class="op">&lt;</span> n:</span>
<span id="cb74-36"><a href="#cb74-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> left <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, n, <span class="dv">2</span> <span class="op">*</span> size):</span>
<span id="cb74-37"><a href="#cb74-37" aria-hidden="true" tabindex="-1"></a>            mid <span class="op">=</span> <span class="bu">min</span>(left <span class="op">+</span> size, n)</span>
<span id="cb74-38"><a href="#cb74-38" aria-hidden="true" tabindex="-1"></a>            right <span class="op">=</span> <span class="bu">min</span>(left <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> size, n)</span>
<span id="cb74-39"><a href="#cb74-39" aria-hidden="true" tabindex="-1"></a>            merge(arr, left, mid, right)</span>
<span id="cb74-40"><a href="#cb74-40" aria-hidden="true" tabindex="-1"></a>        size <span class="op">*=</span> <span class="dv">2</span></span>
<span id="cb74-41"><a href="#cb74-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr</span>
<span id="cb74-42"><a href="#cb74-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-43"><a href="#cb74-43" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">4</span>]</span>
<span id="cb74-44"><a href="#cb74-44" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(block_merge_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$1, 2, 3, 4, 5, 6, 7, 8]</code></pre>
</section>
<section id="c-simplified-concept" class="level4">
<h4 class="anchored" data-anchor-id="c-simplified-concept">C (Simplified Concept)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb76"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> insertion_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> left<span class="op">,</span> <span class="dt">int</span> right<span class="op">)</span> <span class="op">{</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> left <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> right<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> key <span class="op">=</span> arr<span class="op">[</span>i<span class="op">],</span> j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>j <span class="op">&gt;=</span> left <span class="op">&amp;&amp;</span> arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&gt;</span> key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>            j<span class="op">--;</span></span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> merge<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> left<span class="op">,</span> <span class="dt">int</span> mid<span class="op">,</span> <span class="dt">int</span> right<span class="op">)</span> <span class="op">{</span></span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n1 <span class="op">=</span> mid <span class="op">-</span> left<span class="op">,</span> n2 <span class="op">=</span> right <span class="op">-</span> mid<span class="op">;</span></span>
<span id="cb76-16"><a href="#cb76-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> L<span class="op">[</span>n1<span class="op">],</span> R<span class="op">[</span>n2<span class="op">];</span></span>
<span id="cb76-17"><a href="#cb76-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n1<span class="op">;</span> i<span class="op">++)</span> L<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>left <span class="op">+</span> i<span class="op">];</span></span>
<span id="cb76-18"><a href="#cb76-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> n2<span class="op">;</span> j<span class="op">++)</span> R<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>mid <span class="op">+</span> j<span class="op">];</span></span>
<span id="cb76-19"><a href="#cb76-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-20"><a href="#cb76-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> k <span class="op">=</span> left<span class="op">;</span></span>
<span id="cb76-21"><a href="#cb76-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n1 <span class="op">&amp;&amp;</span> j <span class="op">&lt;</span> n2<span class="op">)</span> arr<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> <span class="op">(</span>L<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;=</span> R<span class="op">[</span>j<span class="op">])</span> <span class="op">?</span> L<span class="op">[</span>i<span class="op">++]</span> <span class="op">:</span> R<span class="op">[</span>j<span class="op">++];</span></span>
<span id="cb76-22"><a href="#cb76-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n1<span class="op">)</span> arr<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> L<span class="op">[</span>i<span class="op">++];</span></span>
<span id="cb76-23"><a href="#cb76-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>j <span class="op">&lt;</span> n2<span class="op">)</span> arr<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> R<span class="op">[</span>j<span class="op">++];</span></span>
<span id="cb76-24"><a href="#cb76-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb76-25"><a href="#cb76-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-26"><a href="#cb76-26" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> block_merge_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> block_size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb76-27"><a href="#cb76-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i <span class="op">+=</span> block_size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb76-28"><a href="#cb76-28" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> end <span class="op">=</span> <span class="op">(</span>i <span class="op">+</span> block_size <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">?</span> i <span class="op">+</span> block_size <span class="op">:</span> n<span class="op">;</span></span>
<span id="cb76-29"><a href="#cb76-29" aria-hidden="true" tabindex="-1"></a>        insertion_sort<span class="op">(</span>arr<span class="op">,</span> i<span class="op">,</span> end<span class="op">);</span></span>
<span id="cb76-30"><a href="#cb76-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb76-31"><a href="#cb76-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> size <span class="op">=</span> block_size<span class="op">;</span> size <span class="op">&lt;</span> n<span class="op">;</span> size <span class="op">*=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb76-32"><a href="#cb76-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> left <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> left <span class="op">&lt;</span> n<span class="op">;</span> left <span class="op">+=</span> <span class="dv">2</span> <span class="op">*</span> size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb76-33"><a href="#cb76-33" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> mid <span class="op">=</span> <span class="op">(</span>left <span class="op">+</span> size <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">?</span> left <span class="op">+</span> size <span class="op">:</span> n<span class="op">;</span></span>
<span id="cb76-34"><a href="#cb76-34" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> right <span class="op">=</span> <span class="op">(</span>left <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> size <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">?</span> left <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> size <span class="op">:</span> n<span class="op">;</span></span>
<span id="cb76-35"><a href="#cb76-35" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>mid <span class="op">&lt;</span> right<span class="op">)</span> merge<span class="op">(</span>arr<span class="op">,</span> left<span class="op">,</span> mid<span class="op">,</span> right<span class="op">);</span></span>
<span id="cb76-36"><a href="#cb76-36" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb76-37"><a href="#cb76-37" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb76-38"><a href="#cb76-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb76-39"><a href="#cb76-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-40"><a href="#cb76-40" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb76-41"><a href="#cb76-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">8</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">5</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">6</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">7</span><span class="op">,</span><span class="dv">4</span><span class="op">};</span></span>
<span id="cb76-42"><a href="#cb76-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb76-43"><a href="#cb76-43" aria-hidden="true" tabindex="-1"></a>    block_merge_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb76-44"><a href="#cb76-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb76-45"><a href="#cb76-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb76-46"><a href="#cb76-46" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-34" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-34">Why It Matters</h3>
<ul>
<li>Stable like Merge Sort</li>
<li>In-place or low-space variant</li>
<li>Cache-efficient due to block locality</li>
<li>Practical for large arrays or external sorting</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-34" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-34">A Gentle Proof (Why It Works)</h3>
<p>Each merge level processes <span class="math inline">\(n\)</span> elements: <span class="math inline">\(O(n)\)</span>.<br>
Number of levels = <span class="math inline">\(\log_2 (n / b)\)</span>, where <span class="math inline">\(b\)</span> is the block size.</p>
<p>So total: <span class="math display">\[
T(n) = O(n \log (n / b))
\]</span></p>
<p>When <span class="math inline">\(b\)</span> is large (like <span class="math inline">\(\sqrt{n}\)</span>), space and time balance nicely.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Operation</th>
<th>Cost</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Block sorting</td>
<td><span class="math inline">\(\frac{n}{b} \times b^2\)</span></td>
<td><span class="math inline">\(O(nb)\)</span></td>
</tr>
<tr class="even">
<td>Merging</td>
<td><span class="math inline">\(\log (n / b) \times n\)</span></td>
<td><span class="math inline">\(O(n \log n)\)</span></td>
</tr>
</tbody>
</table>
<p>For typical settings, it’s near <span class="math inline">\(O(n \log n)\)</span> but cache-optimized.</p>
</section>
<section id="try-it-yourself-34" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-34">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[8,3,5,1,6,2,7,4]</code> with block size 2.</li>
<li>Increase block size to 4, compare steps.</li>
<li>Track number of merges.</li>
<li>Check stability with duplicates.</li>
<li>Compare with standard Merge Sort.</li>
<li>Time on sorted input (adaptive check).</li>
<li>Measure cache misses (simulated).</li>
<li>Try large array (10000+) for memory gain.</li>
<li>Mix ascending and descending runs.</li>
<li>Implement block buffer rotation manually.</li>
</ol>
</section>
<section id="test-cases-34" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-34">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[8,3,5,1,6,2,7,4]</td>
<td>[1,2,3,4,5,6,7,8]</td>
<td>Classic</td>
</tr>
<tr class="even">
<td>[5,5,3,3,1]</td>
<td>[1,3,3,5,5]</td>
<td>Stable</td>
</tr>
<tr class="odd">
<td>[1,2,3,4]</td>
<td>[1,2,3,4]</td>
<td>Sorted</td>
</tr>
<tr class="even">
<td>[9,8,7]</td>
<td>[7,8,9]</td>
<td>Reverse order</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-34" class="level3">
<h3 class="anchored" data-anchor-id="complexity-34">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(b)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Partially</td>
</tr>
</tbody>
</table>
<p>Block Merge Sort is the engineer’s Merge Sort, same elegance, less memory, smarter on hardware. It merges not by brute force, but by careful block juggling, balancing speed, space, and stability.</p>
</section>
<section id="adaptive-merge-sort" class="level3">
<h3 class="anchored" data-anchor-id="adaptive-merge-sort">136 Adaptive Merge Sort</h3>
<p>Adaptive Merge Sort is a stable, comparison-based sorting algorithm that adapts to existing order in the input data. It builds on the idea that real-world datasets are often partially sorted, so by detecting runs (already sorted sequences) and merging them intelligently, it can achieve O(n) time on nearly sorted data while retaining O(n log n) in the worst case.</p>
<p>It’s a family of algorithms, including Natural Merge Sort, TimSort, and GrailSort, that all share one key insight: work less when less work is needed.</p>
</section>
<section id="what-problem-are-we-solving-35" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-35">What Problem Are We Solving?</h3>
<p>Standard Merge Sort treats every input the same, even if it’s already sorted. Adaptive Merge Sort improves this by:</p>
<ul>
<li>Detecting sorted runs (ascending or descending)</li>
<li>Merging runs instead of single elements</li>
<li>Achieving linear time on sorted or partially sorted data</li>
</ul>
<p>This makes it perfect for:</p>
<ul>
<li>Time series data</li>
<li>Sorted or semi-sorted logs</li>
<li>Incrementally updated lists</li>
</ul>
<section id="example-35" class="level4">
<h4 class="anchored" data-anchor-id="example-35">Example</h4>
<p>Sort <code>[1, 2, 5, 3, 4, 6]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Detect runs: [1,2,5], [3,4,6]</td>
<td>Found 2 runs</td>
</tr>
<tr class="even">
<td>2</td>
<td>Merge runs</td>
<td>[1,2,3,4,5,6]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Done</td>
<td>Sorted</td>
</tr>
</tbody>
</table>
<p>Only one merge needed, input was nearly sorted, so runtime is close to O(n).</p>
</section>
</section>
<section id="how-does-it-work-plain-language-35" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-35">How Does It Work (Plain Language)?</h3>
<p>Imagine you’re sorting a shelf of books that’s mostly organized — you don’t pull all the books off; you just spot where order breaks, and fix those parts.</p>
<p>Adaptive Merge Sort does exactly this:</p>
<ul>
<li>Scan once to find sorted parts</li>
<li>Merge runs using a stable merge procedure</li>
</ul>
<p>It’s lazy where it can be, efficient where it must be.</p>
<section id="step-by-step-process-34" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-34">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Scan input to find runs (ascending or descending)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Reverse descending runs</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Push runs onto a stack</td>
</tr>
<tr class="even">
<td>4</td>
<td>Merge runs when stack conditions are violated (size or order)</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Continue until one sorted run remains</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-34" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-34">Tiny Code (Easy Versions)</h3>
<section id="python-natural-merge-sort" class="level4">
<h4 class="anchored" data-anchor-id="python-natural-merge-sort">Python (Natural Merge Sort)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> natural_merge_sort(arr):</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>    runs <span class="op">=</span> []</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 1: Detect sorted runs</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> n:</span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>        start <span class="op">=</span> i</span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>        i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> i <span class="op">&lt;</span> n <span class="kw">and</span> arr[i] <span class="op">&gt;=</span> arr[i <span class="op">-</span> <span class="dv">1</span>]:</span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a>        runs.append(arr[start:i])</span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 2: Merge runs pairwise</span></span>
<span id="cb77-13"><a href="#cb77-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="bu">len</span>(runs) <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb77-14"><a href="#cb77-14" aria-hidden="true" tabindex="-1"></a>        new_runs <span class="op">=</span> []</span>
<span id="cb77-15"><a href="#cb77-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(runs), <span class="dv">2</span>):</span>
<span id="cb77-16"><a href="#cb77-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> j <span class="op">+</span> <span class="dv">1</span> <span class="op">&lt;</span> <span class="bu">len</span>(runs):</span>
<span id="cb77-17"><a href="#cb77-17" aria-hidden="true" tabindex="-1"></a>                new_runs.append(merge(runs[j], runs[j<span class="op">+</span><span class="dv">1</span>]))</span>
<span id="cb77-18"><a href="#cb77-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb77-19"><a href="#cb77-19" aria-hidden="true" tabindex="-1"></a>                new_runs.append(runs[j])</span>
<span id="cb77-20"><a href="#cb77-20" aria-hidden="true" tabindex="-1"></a>        runs <span class="op">=</span> new_runs</span>
<span id="cb77-21"><a href="#cb77-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> runs[<span class="dv">0</span>]</span>
<span id="cb77-22"><a href="#cb77-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-23"><a href="#cb77-23" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> merge(left, right):</span>
<span id="cb77-24"><a href="#cb77-24" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> j <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb77-25"><a href="#cb77-25" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []</span>
<span id="cb77-26"><a href="#cb77-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(left) <span class="kw">and</span> j <span class="op">&lt;</span> <span class="bu">len</span>(right):</span>
<span id="cb77-27"><a href="#cb77-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> left[i] <span class="op">&lt;=</span> right[j]:</span>
<span id="cb77-28"><a href="#cb77-28" aria-hidden="true" tabindex="-1"></a>            result.append(left[i])<span class="op">;</span> i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb77-29"><a href="#cb77-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb77-30"><a href="#cb77-30" aria-hidden="true" tabindex="-1"></a>            result.append(right[j])<span class="op">;</span> j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb77-31"><a href="#cb77-31" aria-hidden="true" tabindex="-1"></a>    result.extend(left[i:])</span>
<span id="cb77-32"><a href="#cb77-32" aria-hidden="true" tabindex="-1"></a>    result.extend(right[j:])</span>
<span id="cb77-33"><a href="#cb77-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span>
<span id="cb77-34"><a href="#cb77-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-35"><a href="#cb77-35" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">6</span>]</span>
<span id="cb77-36"><a href="#cb77-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(natural_merge_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$1, 2, 3, 4, 5, 6]</code></pre>
</section>
<section id="c-simplified-conceptual" class="level4">
<h4 class="anchored" data-anchor-id="c-simplified-conceptual">C (Simplified Conceptual)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb79"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> merge<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> l<span class="op">,</span> <span class="dt">int</span> m<span class="op">,</span> <span class="dt">int</span> r<span class="op">)</span> <span class="op">{</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n1 <span class="op">=</span> m <span class="op">-</span> l <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> n2 <span class="op">=</span> r <span class="op">-</span> m<span class="op">;</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> L<span class="op">[</span>n1<span class="op">],</span> R<span class="op">[</span>n2<span class="op">];</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n1<span class="op">;</span> i<span class="op">++)</span> L<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>l <span class="op">+</span> i<span class="op">];</span></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> n2<span class="op">;</span> j<span class="op">++)</span> R<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>m <span class="op">+</span> <span class="dv">1</span> <span class="op">+</span> j<span class="op">];</span></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> k <span class="op">=</span> l<span class="op">;</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n1 <span class="op">&amp;&amp;</span> j <span class="op">&lt;</span> n2<span class="op">)</span> arr<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> <span class="op">(</span>L<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;=</span> R<span class="op">[</span>j<span class="op">])</span> <span class="op">?</span> L<span class="op">[</span>i<span class="op">++]</span> <span class="op">:</span> R<span class="op">[</span>j<span class="op">++];</span></span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n1<span class="op">)</span> arr<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> L<span class="op">[</span>i<span class="op">++];</span></span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>j <span class="op">&lt;</span> n2<span class="op">)</span> arr<span class="op">[</span>k<span class="op">++]</span> <span class="op">=</span> R<span class="op">[</span>j<span class="op">++];</span></span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> adaptive_merge_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> start <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>start <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> start<span class="op">;</span></span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>mid <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">&lt;=</span> arr<span class="op">[</span>mid <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> mid<span class="op">++;</span></span>
<span id="cb79-20"><a href="#cb79-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> end <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb79-21"><a href="#cb79-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>end <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> arr<span class="op">[</span>end<span class="op">]</span> <span class="op">&lt;=</span> arr<span class="op">[</span>end <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> end<span class="op">++;</span></span>
<span id="cb79-22"><a href="#cb79-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>end <span class="op">&lt;</span> n<span class="op">)</span> merge<span class="op">(</span>arr<span class="op">,</span> start<span class="op">,</span> mid<span class="op">,</span> end<span class="op">);</span></span>
<span id="cb79-23"><a href="#cb79-23" aria-hidden="true" tabindex="-1"></a>        start <span class="op">=</span> end <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb79-24"><a href="#cb79-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb79-25"><a href="#cb79-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb79-26"><a href="#cb79-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-27"><a href="#cb79-27" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb79-28"><a href="#cb79-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">};</span></span>
<span id="cb79-29"><a href="#cb79-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb79-30"><a href="#cb79-30" aria-hidden="true" tabindex="-1"></a>    adaptive_merge_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb79-31"><a href="#cb79-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb79-32"><a href="#cb79-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb79-33"><a href="#cb79-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-35" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-35">Why It Matters</h3>
<ul>
<li>Stable and adaptive</li>
<li>Linear time on nearly sorted data</li>
<li>Works well for real-world sequences</li>
<li>Forms the core idea behind TimSort</li>
<li>Requires no extra knowledge about data</li>
</ul>
<p>It’s the sorting algorithm that notices your data’s effort and rewards it.</p>
</section>
<section id="a-gentle-proof-why-it-works-35" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-35">A Gentle Proof (Why It Works)</h3>
<p>Let average run length = <span class="math inline">\(r\)</span>.<br>
Then number of runs ≈ <span class="math inline">\(n / r\)</span>.<br>
Each merge = <span class="math inline">\(O(n)\)</span> per level.<br>
Depth = <span class="math inline">\(O(\log (n / r))\)</span>.</p>
<p>So total cost: <span class="math display">\[
T(n) = O(n \log (n / r))
\]</span></p>
<p>If <span class="math inline">\(r = n\)</span> (already sorted): <span class="math inline">\(O(n)\)</span>.<br>
If <span class="math inline">\(r = 1\)</span>: <span class="math inline">\(O(n \log n)\)</span>.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Case</th>
<th>Run Length</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Sorted</td>
<td><span class="math inline">\(r = n\)</span></td>
<td><span class="math inline">\(O(n)\)</span></td>
</tr>
<tr class="even">
<td>Nearly sorted</td>
<td><span class="math inline">\(r\)</span> large</td>
<td><span class="math inline">\(O(n \log (n / r))\)</span></td>
</tr>
<tr class="odd">
<td>Random</td>
<td><span class="math inline">\(r\)</span> small</td>
<td><span class="math inline">\(O(n \log n)\)</span></td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-35" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-35">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[1, 2, 5, 3, 4, 6]</code> step by step.</li>
<li>Try <code>[1, 2, 3, 4, 5]</code>, should detect 1 run.</li>
<li>Reverse a section, see new runs.</li>
<li>Merge runs manually using table.</li>
<li>Compare performance to Merge Sort.</li>
<li>Add duplicates, check stability.</li>
<li>Use 10k sorted elements, time the run.</li>
<li>Mix ascending and descending subarrays.</li>
<li>Visualize run detection.</li>
<li>Implement descending-run reversal.</li>
</ol>
</section>
<section id="test-cases-35" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-35">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[1,2,5,3,4,6]</td>
<td>[1,2,3,4,5,6]</td>
<td>Two runs</td>
</tr>
<tr class="even">
<td>[1,2,3,4,5]</td>
<td>[1,2,3,4,5]</td>
<td>Already sorted</td>
</tr>
<tr class="odd">
<td>[5,4,3,2,1]</td>
<td>[1,2,3,4,5]</td>
<td>Reverse (many runs)</td>
</tr>
<tr class="even">
<td>[2,2,1,1]</td>
<td>[1,1,2,2]</td>
<td>Stable</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-35" class="level3">
<h3 class="anchored" data-anchor-id="complexity-35">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Adaptive Merge Sort is like a thoughtful sorter, it looks before it leaps. If your data’s halfway there, it’ll meet it in the middle.</p>
</section>
<section id="pdqsort-pattern-defeating-quicksort" class="level3">
<h3 class="anchored" data-anchor-id="pdqsort-pattern-defeating-quicksort">137 PDQSort (Pattern-Defeating QuickSort)</h3>
<p>PDQSort is a modern, adaptive, in-place sorting algorithm that extends QuickSort with pattern detection, branchless partitioning, and fallback mechanisms to guarantee <span class="math inline">\(O(n \log n)\)</span> performance even on adversarial inputs.</p>
<p>Invented by Orson Peters, it’s used in C++’s <code>std::sort()</code> (since C++17) and often outperforms traditional QuickSort and IntroSort in real-world scenarios due to better cache behavior, branch prediction, and adaptive pivoting.</p>
</section>
<section id="what-problem-are-we-solving-36" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-36">What Problem Are We Solving?</h3>
<p>Classic QuickSort performs well <em>on average</em> but can degrade to (O(n^2)) on structured or repetitive data. PDQSort solves this by:</p>
<ul>
<li>Detecting bad patterns (e.g., sorted input)</li>
<li>Switching strategy (to heap sort or insertion sort)</li>
<li>Branchless partitioning for modern CPUs</li>
<li>Adaptive pivot selection (median-of-3, Tukey ninther)</li>
</ul>
<p>It keeps speed, stability of performance, and cache-friendliness.</p>
<p>Perfect for:</p>
<ul>
<li>Large unsorted datasets</li>
<li>Partially sorted data</li>
<li>Real-world data with patterns</li>
</ul>
<section id="example-36" class="level4">
<h4 class="anchored" data-anchor-id="example-36">Example</h4>
<p>Sort <code>[1, 2, 3, 4, 5]</code> (already sorted)</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Detect sorted pattern</td>
<td>Pattern found</td>
</tr>
<tr class="even">
<td>2</td>
<td>Switch to Insertion Sort</td>
<td>Efficient handling</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Output sorted</td>
<td>[1,2,3,4,5]</td>
</tr>
</tbody>
</table>
<p>Instead of recursive QuickSort calls, PDQSort defeats the pattern by adapting.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-36" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-36">How Does It Work (Plain Language)?</h3>
<p>PDQSort is like a smart chef:</p>
<ul>
<li>It tastes the input first (checks pattern)</li>
<li>Chooses a recipe (pivot rule, sorting fallback)</li>
<li>Adjusts to the kitchen conditions (CPU caching, branching)</li>
</ul>
<p>It never wastes effort, detecting when recursion or comparisons are unnecessary.</p>
<section id="step-by-step-process-35" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-35">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Pick pivot adaptively (median-of-3, ninther)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Partition elements into <code>&lt; pivot</code> and <code>&gt; pivot</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Detect bad patterns (sorted, reversed, many equal elements)</td>
</tr>
<tr class="even">
<td>4</td>
<td>Apply branchless partitioning to reduce CPU mispredictions</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Recurse or switch to heap/insertion sort if needed</td>
</tr>
<tr class="even">
<td>6</td>
<td>Use tail recursion elimination</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-35" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-35">Tiny Code (Easy Versions)</h3>
<section id="python-conceptual-simplified-pdqsort" class="level4">
<h4 class="anchored" data-anchor-id="python-conceptual-simplified-pdqsort">Python (Conceptual Simplified PDQSort)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> pdqsort(arr):</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> insertion_sort(a, lo, hi):</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(lo <span class="op">+</span> <span class="dv">1</span>, hi):</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>            key <span class="op">=</span> a[i]</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>            j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span> j <span class="op">&gt;=</span> lo <span class="kw">and</span> a[j] <span class="op">&gt;</span> key:</span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>                a[j <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> a[j]</span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>                j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>            a[j <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> key</span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> partition(a, lo, hi):</span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a>        pivot <span class="op">=</span> a[(lo <span class="op">+</span> hi) <span class="op">//</span> <span class="dv">2</span>]</span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a>        i, j <span class="op">=</span> lo, hi <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span> a[i] <span class="op">&lt;</span> pivot: i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span> a[j] <span class="op">&gt;</span> pivot: j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb80-17"><a href="#cb80-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> i <span class="op">&gt;=</span> j: <span class="cf">return</span> j</span>
<span id="cb80-18"><a href="#cb80-18" aria-hidden="true" tabindex="-1"></a>            a[i], a[j] <span class="op">=</span> a[j], a[i]</span>
<span id="cb80-19"><a href="#cb80-19" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb80-20"><a href="#cb80-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-21"><a href="#cb80-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> _pdqsort(a, lo, hi, depth):</span>
<span id="cb80-22"><a href="#cb80-22" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> hi <span class="op">-</span> lo</span>
<span id="cb80-23"><a href="#cb80-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> n <span class="op">&lt;=</span> <span class="dv">16</span>:</span>
<span id="cb80-24"><a href="#cb80-24" aria-hidden="true" tabindex="-1"></a>            insertion_sort(a, lo, hi)</span>
<span id="cb80-25"><a href="#cb80-25" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb80-26"><a href="#cb80-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> depth <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb80-27"><a href="#cb80-27" aria-hidden="true" tabindex="-1"></a>            a[lo:hi] <span class="op">=</span> <span class="bu">sorted</span>(a[lo:hi])  <span class="co"># heap fallback</span></span>
<span id="cb80-28"><a href="#cb80-28" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb80-29"><a href="#cb80-29" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> partition(a, lo, hi)</span>
<span id="cb80-30"><a href="#cb80-30" aria-hidden="true" tabindex="-1"></a>        _pdqsort(a, lo, mid <span class="op">+</span> <span class="dv">1</span>, depth <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb80-31"><a href="#cb80-31" aria-hidden="true" tabindex="-1"></a>        _pdqsort(a, mid <span class="op">+</span> <span class="dv">1</span>, hi, depth <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb80-32"><a href="#cb80-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-33"><a href="#cb80-33" aria-hidden="true" tabindex="-1"></a>    _pdqsort(arr, <span class="dv">0</span>, <span class="bu">len</span>(arr), <span class="bu">len</span>(arr).bit_length() <span class="op">*</span> <span class="dv">2</span>)</span>
<span id="cb80-34"><a href="#cb80-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr</span>
<span id="cb80-35"><a href="#cb80-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-36"><a href="#cb80-36" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>]</span>
<span id="cb80-37"><a href="#cb80-37" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pdqsort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$1, 2, 3, 4, 5]</code></pre>
</section>
<section id="c-simplified-pdq-style" class="level4">
<h4 class="anchored" data-anchor-id="c-simplified-pdq-style">C (Simplified PDQ-Style)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb82"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> insertion_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> lo<span class="op">,</span> <span class="dt">int</span> hi<span class="op">)</span> <span class="op">{</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> lo <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> hi<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> key <span class="op">=</span> arr<span class="op">[</span>i<span class="op">],</span> j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>j <span class="op">&gt;=</span> lo <span class="op">&amp;&amp;</span> arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&gt;</span> key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a>            j<span class="op">--;</span></span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb82-13"><a href="#cb82-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb82-14"><a href="#cb82-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-15"><a href="#cb82-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> partition<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> lo<span class="op">,</span> <span class="dt">int</span> hi<span class="op">)</span> <span class="op">{</span></span>
<span id="cb82-16"><a href="#cb82-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pivot <span class="op">=</span> arr<span class="op">[(</span>lo <span class="op">+</span> hi<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">];</span></span>
<span id="cb82-17"><a href="#cb82-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> lo<span class="op">,</span> j <span class="op">=</span> hi <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb82-18"><a href="#cb82-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb82-19"><a href="#cb82-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> pivot<span class="op">)</span> i<span class="op">++;</span></span>
<span id="cb82-20"><a href="#cb82-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&gt;</span> pivot<span class="op">)</span> j<span class="op">--;</span></span>
<span id="cb82-21"><a href="#cb82-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">&gt;=</span> j<span class="op">)</span> <span class="cf">return</span> j<span class="op">;</span></span>
<span id="cb82-22"><a href="#cb82-22" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> tmp <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span> arr<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> tmp<span class="op">;</span></span>
<span id="cb82-23"><a href="#cb82-23" aria-hidden="true" tabindex="-1"></a>        i<span class="op">++;</span> j<span class="op">--;</span></span>
<span id="cb82-24"><a href="#cb82-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb82-25"><a href="#cb82-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb82-26"><a href="#cb82-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-27"><a href="#cb82-27" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> pdqsort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> lo<span class="op">,</span> <span class="dt">int</span> hi<span class="op">,</span> <span class="dt">int</span> depth<span class="op">)</span> <span class="op">{</span></span>
<span id="cb82-28"><a href="#cb82-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> hi <span class="op">-</span> lo<span class="op">;</span></span>
<span id="cb82-29"><a href="#cb82-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">16</span><span class="op">)</span> <span class="op">{</span> insertion_sort<span class="op">(</span>arr<span class="op">,</span> lo<span class="op">,</span> hi<span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb82-30"><a href="#cb82-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>depth <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> qsort<span class="op">(</span>arr <span class="op">+</span> lo<span class="op">,</span> n<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">),</span> <span class="op">(</span>__compar_fn_t<span class="op">)</span>strcmp<span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb82-31"><a href="#cb82-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> mid <span class="op">=</span> partition<span class="op">(</span>arr<span class="op">,</span> lo<span class="op">,</span> hi<span class="op">);</span></span>
<span id="cb82-32"><a href="#cb82-32" aria-hidden="true" tabindex="-1"></a>    pdqsort<span class="op">(</span>arr<span class="op">,</span> lo<span class="op">,</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> depth <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb82-33"><a href="#cb82-33" aria-hidden="true" tabindex="-1"></a>    pdqsort<span class="op">(</span>arr<span class="op">,</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> hi<span class="op">,</span> depth <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb82-34"><a href="#cb82-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb82-35"><a href="#cb82-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-36"><a href="#cb82-36" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb82-37"><a href="#cb82-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb82-38"><a href="#cb82-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb82-39"><a href="#cb82-39" aria-hidden="true" tabindex="-1"></a>    pdqsort<span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n<span class="op">,</span> <span class="dv">2</span> <span class="op">*</span> <span class="dv">32</span><span class="op">);</span></span>
<span id="cb82-40"><a href="#cb82-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb82-41"><a href="#cb82-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb82-42"><a href="#cb82-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-36" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-36">Why It Matters</h3>
<ul>
<li>Modern default for high-performance sorting</li>
<li>Pattern detection avoids worst cases</li>
<li>Branchless partitioning → fewer CPU stalls</li>
<li>Heap fallback ensures <span class="math inline">\(O(n \log n)\)</span> bound</li>
<li>Adaptive like TimSort, but in-place</li>
</ul>
<p>PDQSort combines speed, safety, and hardware awareness.</p>
</section>
<section id="a-gentle-proof-why-it-works-36" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-36">A Gentle Proof (Why It Works)</h3>
<p>PDQSort adds mechanisms to defeat QuickSort’s pitfalls:</p>
<ol type="1">
<li>Bad pattern detection → early fallback</li>
<li>Balanced pivoting → near-equal splits</li>
<li>Branchless operations → efficient execution</li>
</ol>
<p>So overall: <span class="math display">\[
T(n) = O(n \log n)
\]</span> Best case (sorted): near O(n), thanks to early detection.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Case</th>
<th>Behavior</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Best</td>
<td>Sorted or nearly sorted</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Average</td>
<td>Random</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Worst</td>
<td>Adversarial</td>
<td>O(n log n)</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-36" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-36">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[1,2,3,4,5]</code> → detect sorted input.</li>
<li>Try <code>[5,4,3,2,1]</code> → reversed.</li>
<li>Random input of 1000 numbers.</li>
<li>Duplicate-heavy <code>[5,5,5,5]</code>.</li>
<li>Patterned input <code>[1,3,2,4,3,5,4]</code>.</li>
<li>Compare with QuickSort and HeapSort.</li>
<li>Count recursion depth.</li>
<li>Benchmark branchless vs classic partition.</li>
<li>Visualize fallback triggers.</li>
<li>Measure comparisons per element.</li>
</ol>
</section>
<section id="test-cases-36" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-36">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[1,5,3,4,2]</td>
<td>[1,2,3,4,5]</td>
<td>Random</td>
</tr>
<tr class="even">
<td>[1,2,3,4,5]</td>
<td>[1,2,3,4,5]</td>
<td>Sorted</td>
</tr>
<tr class="odd">
<td>[5,4,3,2,1]</td>
<td>[1,2,3,4,5]</td>
<td>Reversed</td>
</tr>
<tr class="even">
<td>[5,5,5,5]</td>
<td>[5,5,5,5]</td>
<td>Duplicates</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-36" class="level3">
<h3 class="anchored" data-anchor-id="complexity-36">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(log n)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>PDQSort is the ninja of sorting, lightning fast, pattern-aware, and always one step ahead of your data. It doesn’t just sort, it <em>outsmarts</em> the input.</p>
</section>
<section id="wikisort" class="level3">
<h3 class="anchored" data-anchor-id="wikisort">138 WikiSort</h3>
<p>WikiSort is a stable, in-place merge sort created by Mike Day, designed to combine the stability of Merge Sort with the low memory usage of in-place algorithms. It achieves O(n log n) performance and uses only O(1) extra memory, making it one of the most space-efficient stable sorts available.</p>
<p>Unlike classic Merge Sort, which allocates a full-size temporary array, WikiSort performs block merges with rotation operations, merging sorted regions directly within the array.</p>
</section>
<section id="what-problem-are-we-solving-37" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-37">What Problem Are We Solving?</h3>
<p>Most stable sorting algorithms (like Merge Sort) need O(n) extra space. WikiSort solves this by performing stable merges in place, using:</p>
<ul>
<li>Block rotations instead of large buffers</li>
<li>Adaptive merging when possible</li>
<li>Small local buffers reused efficiently</li>
</ul>
<p>Perfect for:</p>
<ul>
<li>Memory-constrained environments</li>
<li>Sorting large arrays in embedded systems</li>
<li>Stable sorts without heavy allocation</li>
</ul>
<section id="example-37" class="level4">
<h4 class="anchored" data-anchor-id="example-37">Example</h4>
<p>Sort <code>[3, 5, 1, 2, 4]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Divide into sorted runs</td>
<td>[3,5], [1,2,4]</td>
</tr>
<tr class="even">
<td>2</td>
<td>Merge using block rotations</td>
<td>[1,2,3,4,5]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Done, stable and in-place</td>
<td>Final sorted array</td>
</tr>
</tbody>
</table>
<p>Result: <code>[1,2,3,4,5]</code>, sorted, stable, and minimal extra space.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-37" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-37">How Does It Work (Plain Language)?</h3>
<p>Think of two sorted shelves of books, instead of moving all books to a table, you rotate sections in place so the shelves merge seamlessly.</p>
<p>WikiSort keeps a small local buffer (like a tray), uses it to move small chunks, then rotates segments of the array into place. It never needs a second full array.</p>
<section id="step-by-step-process-36" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-36">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Split array into sorted runs</td>
</tr>
<tr class="even">
<td>2</td>
<td>Allocate small buffer (≈ √n elements)</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Merge adjacent runs using buffer</td>
</tr>
<tr class="even">
<td>4</td>
<td>Rotate blocks to maintain stability</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Repeat until one sorted region remains</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-36" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-36">Tiny Code (Easy Versions)</h3>
<section id="python-simplified-in-place-stable-merge" class="level4">
<h4 class="anchored" data-anchor-id="python-simplified-in-place-stable-merge">Python (Simplified In-Place Stable Merge)</h4>
<p>This is a conceptual demonstration of stable in-place merging.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rotate(arr, start, mid, end):</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>    arr[start:end] <span class="op">=</span> arr[mid:end] <span class="op">+</span> arr[start:mid]</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> merge_in_place(arr, start, mid, end):</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>    left <span class="op">=</span> arr[start:mid]</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>    i, j, k <span class="op">=</span> <span class="dv">0</span>, mid, start</span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(left) <span class="kw">and</span> j <span class="op">&lt;</span> end:</span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> left[i] <span class="op">&lt;=</span> arr[j]:</span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>            arr[k] <span class="op">=</span> left[i]<span class="op">;</span> i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>            val <span class="op">=</span> arr[j]</span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a>            rotate(arr, i <span class="op">+</span> start, j, j <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a>            arr[k] <span class="op">=</span> val</span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a>            j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true" tabindex="-1"></a>        k <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb83-16"><a href="#cb83-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(left):</span>
<span id="cb83-17"><a href="#cb83-17" aria-hidden="true" tabindex="-1"></a>        arr[k] <span class="op">=</span> left[i]<span class="op">;</span> i <span class="op">+=</span> <span class="dv">1</span><span class="op">;</span> k <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb83-18"><a href="#cb83-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-19"><a href="#cb83-19" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> wiki_sort(arr):</span>
<span id="cb83-20"><a href="#cb83-20" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb83-21"><a href="#cb83-21" aria-hidden="true" tabindex="-1"></a>    size <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb83-22"><a href="#cb83-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> size <span class="op">&lt;</span> n:</span>
<span id="cb83-23"><a href="#cb83-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> start <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, n, <span class="dv">2</span> <span class="op">*</span> size):</span>
<span id="cb83-24"><a href="#cb83-24" aria-hidden="true" tabindex="-1"></a>            mid <span class="op">=</span> <span class="bu">min</span>(start <span class="op">+</span> size, n)</span>
<span id="cb83-25"><a href="#cb83-25" aria-hidden="true" tabindex="-1"></a>            end <span class="op">=</span> <span class="bu">min</span>(start <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> size, n)</span>
<span id="cb83-26"><a href="#cb83-26" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> mid <span class="op">&lt;</span> end:</span>
<span id="cb83-27"><a href="#cb83-27" aria-hidden="true" tabindex="-1"></a>                merge_in_place(arr, start, mid, end)</span>
<span id="cb83-28"><a href="#cb83-28" aria-hidden="true" tabindex="-1"></a>        size <span class="op">*=</span> <span class="dv">2</span></span>
<span id="cb83-29"><a href="#cb83-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr</span>
<span id="cb83-30"><a href="#cb83-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-31"><a href="#cb83-31" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>]</span>
<span id="cb83-32"><a href="#cb83-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(wiki_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$1, 2, 3, 4, 5]</code></pre>
</section>
<section id="c-simplified-conceptual-version" class="level4">
<h4 class="anchored" data-anchor-id="c-simplified-conceptual-version">C (Simplified Conceptual Version)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb85"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> rotate<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> start<span class="op">,</span> <span class="dt">int</span> mid<span class="op">,</span> <span class="dt">int</span> end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp<span class="op">[</span>end <span class="op">-</span> start<span class="op">];</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> mid<span class="op">;</span> i <span class="op">&lt;</span> end<span class="op">;</span> i<span class="op">++)</span> temp<span class="op">[</span>idx<span class="op">++]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> start<span class="op">;</span> i <span class="op">&lt;</span> mid<span class="op">;</span> i<span class="op">++)</span> temp<span class="op">[</span>idx<span class="op">++]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> end <span class="op">-</span> start<span class="op">;</span> i<span class="op">++)</span> arr<span class="op">[</span>start <span class="op">+</span> i<span class="op">]</span> <span class="op">=</span> temp<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> merge_in_place<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> start<span class="op">,</span> <span class="dt">int</span> mid<span class="op">,</span> <span class="dt">int</span> end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> start<span class="op">,</span> j <span class="op">=</span> mid<span class="op">;</span></span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> j <span class="op">&amp;&amp;</span> j <span class="op">&lt;</span> end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb85-14"><a href="#cb85-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;=</span> arr<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span></span>
<span id="cb85-15"><a href="#cb85-15" aria-hidden="true" tabindex="-1"></a>            i<span class="op">++;</span></span>
<span id="cb85-16"><a href="#cb85-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb85-17"><a href="#cb85-17" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> value <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb85-18"><a href="#cb85-18" aria-hidden="true" tabindex="-1"></a>            rotate<span class="op">(</span>arr<span class="op">,</span> i<span class="op">,</span> j<span class="op">,</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb85-19"><a href="#cb85-19" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb85-20"><a href="#cb85-20" aria-hidden="true" tabindex="-1"></a>            i<span class="op">++;</span> j<span class="op">++;</span></span>
<span id="cb85-21"><a href="#cb85-21" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb85-22"><a href="#cb85-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb85-23"><a href="#cb85-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb85-24"><a href="#cb85-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-25"><a href="#cb85-25" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> wiki_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb85-26"><a href="#cb85-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> size <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> size <span class="op">&lt;</span> n<span class="op">;</span> size <span class="op">*=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb85-27"><a href="#cb85-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> start <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> start <span class="op">&lt;</span> n<span class="op">;</span> start <span class="op">+=</span> <span class="dv">2</span> <span class="op">*</span> size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb85-28"><a href="#cb85-28" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> mid <span class="op">=</span> <span class="op">(</span>start <span class="op">+</span> size <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">?</span> start <span class="op">+</span> size <span class="op">:</span> n<span class="op">;</span></span>
<span id="cb85-29"><a href="#cb85-29" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> end <span class="op">=</span> <span class="op">(</span>start <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> size <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">?</span> start <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> size <span class="op">:</span> n<span class="op">;</span></span>
<span id="cb85-30"><a href="#cb85-30" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>mid <span class="op">&lt;</span> end<span class="op">)</span> merge_in_place<span class="op">(</span>arr<span class="op">,</span> start<span class="op">,</span> mid<span class="op">,</span> end<span class="op">);</span></span>
<span id="cb85-31"><a href="#cb85-31" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb85-32"><a href="#cb85-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb85-33"><a href="#cb85-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb85-34"><a href="#cb85-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-35"><a href="#cb85-35" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb85-36"><a href="#cb85-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">3</span><span class="op">,</span><span class="dv">5</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">4</span><span class="op">};</span></span>
<span id="cb85-37"><a href="#cb85-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb85-38"><a href="#cb85-38" aria-hidden="true" tabindex="-1"></a>    wiki_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb85-39"><a href="#cb85-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb85-40"><a href="#cb85-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb85-41"><a href="#cb85-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-37" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-37">Why It Matters</h3>
<ul>
<li>Stable and in-place (O(1) extra space)</li>
<li>Practical for memory-limited systems</li>
<li>Predictable performance</li>
<li>Cache-friendly merges</li>
<li>Great balance of theory and practice</li>
</ul>
<p>It brings the best of Merge Sort (stability) and in-place algorithms (low memory).</p>
</section>
<section id="a-gentle-proof-why-it-works-37" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-37">A Gentle Proof (Why It Works)</h3>
<p>Each merge takes <span class="math inline">\(O(n)\)</span>, and there are <span class="math inline">\(O(\log n)\)</span> levels of merging:</p>
<p><span class="math display">\[
T(n) = O(n \log n)
\]</span></p>
<p>Extra memory = small buffer (<span class="math inline">\(O(\sqrt{n})\)</span>) or even constant space.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Operation</th>
<th>Cost</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Block detection</td>
<td>Scan runs</td>
<td><span class="math inline">\(O(n)\)</span></td>
</tr>
<tr class="even">
<td>Merging</td>
<td>Rotation-based merge</td>
<td><span class="math inline">\(O(n \log n)\)</span></td>
</tr>
<tr class="odd">
<td>Space</td>
<td>Fixed buffer</td>
<td><span class="math inline">\(O(1)\)</span></td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-37" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-37">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[3,5,1,2,4]</code> step by step.</li>
<li>Visualize rotations during merge.</li>
<li>Add duplicates <code>[2,2,3,1]</code>, verify stability.</li>
<li>Increase size to 16, track buffer reuse.</li>
<li>Compare with Merge Sort memory usage.</li>
<li>Measure swaps vs Merge Sort.</li>
<li>Try <code>[1,2,3,4]</code>, minimal rotations.</li>
<li>Reverse <code>[5,4,3,2,1]</code>, max work.</li>
<li>Implement block rotation helper.</li>
<li>Measure runtime on sorted input.</li>
</ol>
</section>
<section id="test-cases-37" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-37">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3,5,1,2,4]</td>
<td>[1,2,3,4,5]</td>
<td>Basic</td>
</tr>
<tr class="even">
<td>[5,4,3,2,1]</td>
<td>[1,2,3,4,5]</td>
<td>Worst case</td>
</tr>
<tr class="odd">
<td>[1,2,3,4]</td>
<td>[1,2,3,4]</td>
<td>Already sorted</td>
</tr>
<tr class="even">
<td>[2,2,3,1]</td>
<td>[1,2,2,3]</td>
<td>Stable behavior</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-37" class="level3">
<h3 class="anchored" data-anchor-id="complexity-37">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>WikiSort is the minimalist’s Merge Sort, stable, elegant, and almost memory-free. It merges not by copying, but by rotating, smooth, steady, and space-savvy.</p>
</section>
<section id="grailsort" class="level3">
<h3 class="anchored" data-anchor-id="grailsort">139 GrailSort</h3>
<p>GrailSort (short for “Greedy Adaptive In-place stable Sort”) is a stable, in-place, comparison-based sorting algorithm that merges sorted subarrays using block merging and local buffers.</p>
<p>Created by Michał Oryńczak, GrailSort combines the stability and adaptiveness of Merge Sort with in-place operation, needing only a tiny internal buffer (often <span class="math inline">\(O(\sqrt{n})\)</span>) or even no extra memory in its pure variant.</p>
<p>It’s designed for practical stable sorting when memory is tight, achieving <span class="math inline">\(O(n \log n)\)</span> worst-case time.</p>
</section>
<section id="what-problem-are-we-solving-38" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-38">What Problem Are We Solving?</h3>
<p>Typical stable sorting algorithms (like Merge Sort) require O(n) extra space. GrailSort solves this by:</p>
<ul>
<li>Using small local buffers instead of large arrays</li>
<li>Performing in-place stable merges</li>
<li>Detecting and reusing natural runs (adaptive behavior)</li>
</ul>
<p>Perfect for:</p>
<ul>
<li>Memory-constrained systems</li>
<li>Embedded devices</li>
<li>Large stable sorts on limited RAM</li>
</ul>
<section id="example-38" class="level4">
<h4 class="anchored" data-anchor-id="example-38">Example</h4>
<p>Sort <code>[4, 1, 3, 2, 5]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Detect short runs</td>
<td>[4,1], [3,2], [5]</td>
</tr>
<tr class="even">
<td>2</td>
<td>Sort each run</td>
<td>[1,4], [2,3], [5]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Merge runs using block rotation</td>
<td>[1,2,3,4,5]</td>
</tr>
<tr class="even">
<td>4</td>
<td>Stable order preserved</td>
<td>Done</td>
</tr>
</tbody>
</table>
<p>All merges are done in-place, with a small reusable buffer.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-38" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-38">How Does It Work (Plain Language)?</h3>
<p>Think of GrailSort like a clever librarian with a tiny desk (the buffer). Instead of taking all books off the shelf, they:</p>
<ul>
<li>Divide shelves into small sorted groups,</li>
<li>Keep a few aside as a helper buffer,</li>
<li>Merge shelves directly on the rack by rotating sections in place.</li>
</ul>
<p>It’s stable, in-place, and adaptive, a rare combination.</p>
<section id="step-by-step-process-37" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-37">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Detect and sort small runs (Insertion Sort)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Choose small buffer (e.g., √n elements)</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Merge runs pairwise using buffer and rotation</td>
</tr>
<tr class="even">
<td>4</td>
<td>Gradually increase block size (1, 2, 4, 8, …)</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Continue merging until fully sorted</td>
</tr>
</tbody>
</table>
<p>The algorithm’s structure mirrors Merge Sort but uses block rotation to avoid copying large chunks.</p>
</section>
</section>
<section id="tiny-code-easy-versions-37" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-37">Tiny Code (Easy Versions)</h3>
<section id="python-simplified-concept" class="level4">
<h4 class="anchored" data-anchor-id="python-simplified-concept">Python (Simplified Concept)</h4>
<p>Below is a simplified stable block-merge inspired by GrailSort’s principles.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rotate(arr, start, mid, end):</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>    arr[start:end] <span class="op">=</span> arr[mid:end] <span class="op">+</span> arr[start:mid]</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> merge_in_place(arr, left, mid, right):</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>    i, j <span class="op">=</span> left, mid</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> j <span class="kw">and</span> j <span class="op">&lt;</span> right:</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[i] <span class="op">&lt;=</span> arr[j]:</span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>            val <span class="op">=</span> arr[j]</span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>            rotate(arr, i, j, j <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a>            arr[i] <span class="op">=</span> val</span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb86-14"><a href="#cb86-14" aria-hidden="true" tabindex="-1"></a>            j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb86-15"><a href="#cb86-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-16"><a href="#cb86-16" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> grailsort(arr):</span>
<span id="cb86-17"><a href="#cb86-17" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb86-18"><a href="#cb86-18" aria-hidden="true" tabindex="-1"></a>    size <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb86-19"><a href="#cb86-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> size <span class="op">&lt;</span> n:</span>
<span id="cb86-20"><a href="#cb86-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> start <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, n, <span class="dv">2</span> <span class="op">*</span> size):</span>
<span id="cb86-21"><a href="#cb86-21" aria-hidden="true" tabindex="-1"></a>            mid <span class="op">=</span> <span class="bu">min</span>(start <span class="op">+</span> size, n)</span>
<span id="cb86-22"><a href="#cb86-22" aria-hidden="true" tabindex="-1"></a>            end <span class="op">=</span> <span class="bu">min</span>(start <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> size, n)</span>
<span id="cb86-23"><a href="#cb86-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> mid <span class="op">&lt;</span> end:</span>
<span id="cb86-24"><a href="#cb86-24" aria-hidden="true" tabindex="-1"></a>                merge_in_place(arr, start, mid, end)</span>
<span id="cb86-25"><a href="#cb86-25" aria-hidden="true" tabindex="-1"></a>        size <span class="op">*=</span> <span class="dv">2</span></span>
<span id="cb86-26"><a href="#cb86-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr</span>
<span id="cb86-27"><a href="#cb86-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-28"><a href="#cb86-28" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">5</span>]</span>
<span id="cb86-29"><a href="#cb86-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(grailsort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$1, 2, 3, 4, 5]</code></pre>
</section>
<section id="c-simplified-idea" class="level4">
<h4 class="anchored" data-anchor-id="c-simplified-idea">C (Simplified Idea)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb88"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> rotate<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> start<span class="op">,</span> <span class="dt">int</span> mid<span class="op">,</span> <span class="dt">int</span> end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp<span class="op">[</span>end <span class="op">-</span> start<span class="op">];</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> mid<span class="op">;</span> i <span class="op">&lt;</span> end<span class="op">;</span> i<span class="op">++)</span> temp<span class="op">[</span>idx<span class="op">++]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> start<span class="op">;</span> i <span class="op">&lt;</span> mid<span class="op">;</span> i<span class="op">++)</span> temp<span class="op">[</span>idx<span class="op">++]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> end <span class="op">-</span> start<span class="op">;</span> i<span class="op">++)</span> arr<span class="op">[</span>start <span class="op">+</span> i<span class="op">]</span> <span class="op">=</span> temp<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> merge_in_place<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> start<span class="op">,</span> <span class="dt">int</span> mid<span class="op">,</span> <span class="dt">int</span> end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> start<span class="op">,</span> j <span class="op">=</span> mid<span class="op">;</span></span>
<span id="cb88-13"><a href="#cb88-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> j <span class="op">&amp;&amp;</span> j <span class="op">&lt;</span> end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb88-14"><a href="#cb88-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;=</span> arr<span class="op">[</span>j<span class="op">])</span> i<span class="op">++;</span></span>
<span id="cb88-15"><a href="#cb88-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb88-16"><a href="#cb88-16" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> val <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb88-17"><a href="#cb88-17" aria-hidden="true" tabindex="-1"></a>            rotate<span class="op">(</span>arr<span class="op">,</span> i<span class="op">,</span> j<span class="op">,</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb88-18"><a href="#cb88-18" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> val<span class="op">;</span></span>
<span id="cb88-19"><a href="#cb88-19" aria-hidden="true" tabindex="-1"></a>            i<span class="op">++;</span> j<span class="op">++;</span></span>
<span id="cb88-20"><a href="#cb88-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb88-21"><a href="#cb88-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb88-22"><a href="#cb88-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb88-23"><a href="#cb88-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-24"><a href="#cb88-24" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> grailsort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb88-25"><a href="#cb88-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> size <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> size <span class="op">&lt;</span> n<span class="op">;</span> size <span class="op">*=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb88-26"><a href="#cb88-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> start <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> start <span class="op">&lt;</span> n<span class="op">;</span> start <span class="op">+=</span> <span class="dv">2</span> <span class="op">*</span> size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb88-27"><a href="#cb88-27" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> mid <span class="op">=</span> <span class="op">(</span>start <span class="op">+</span> size <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">?</span> start <span class="op">+</span> size <span class="op">:</span> n<span class="op">;</span></span>
<span id="cb88-28"><a href="#cb88-28" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> end <span class="op">=</span> <span class="op">(</span>start <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> size <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">?</span> start <span class="op">+</span> <span class="dv">2</span> <span class="op">*</span> size <span class="op">:</span> n<span class="op">;</span></span>
<span id="cb88-29"><a href="#cb88-29" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>mid <span class="op">&lt;</span> end<span class="op">)</span> merge_in_place<span class="op">(</span>arr<span class="op">,</span> start<span class="op">,</span> mid<span class="op">,</span> end<span class="op">);</span></span>
<span id="cb88-30"><a href="#cb88-30" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb88-31"><a href="#cb88-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb88-32"><a href="#cb88-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb88-33"><a href="#cb88-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-34"><a href="#cb88-34" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb88-35"><a href="#cb88-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">4</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">5</span><span class="op">};</span></span>
<span id="cb88-36"><a href="#cb88-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb88-37"><a href="#cb88-37" aria-hidden="true" tabindex="-1"></a>    grailsort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb88-38"><a href="#cb88-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb88-39"><a href="#cb88-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb88-40"><a href="#cb88-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-38" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-38">Why It Matters</h3>
<ul>
<li>Stable and in-place (only small buffer)</li>
<li>Adaptive, faster on partially sorted data</li>
<li>Predictable performance</li>
<li>Ideal for limited memory systems</li>
<li>Used in practical sorting libraries and research</li>
</ul>
<p>It’s the gold standard for stable, low-space sorts.</p>
</section>
<section id="a-gentle-proof-why-it-works-38" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-38">A Gentle Proof (Why It Works)</h3>
<p>Each merge level processes <span class="math inline">\(O(n)\)</span> elements.<br>
There are <span class="math inline">\(O(\log n)\)</span> merge levels.<br>
Thus:</p>
<p><span class="math display">\[
T(n) = O(n \log n)
\]</span></p>
<p>A small buffer (<span class="math inline">\(O(\sqrt{n})\)</span>) is reused, yielding in-place stability.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Operation</th>
<th>Cost</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Run sorting</td>
<td>Insertion Sort</td>
<td><span class="math inline">\(O(n)\)</span></td>
</tr>
<tr class="even">
<td>Block merges</td>
<td>Rotation-based</td>
<td><span class="math inline">\(O(n \log n)\)</span></td>
</tr>
<tr class="odd">
<td>Space</td>
<td>Local buffer</td>
<td><span class="math inline">\(O(1)\)</span> or <span class="math inline">\(O(\sqrt{n})\)</span></td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-38" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-38">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[4,1,3,2,5]</code> step by step.</li>
<li>Try <code>[1,2,3,4,5]</code>, no merges needed.</li>
<li>Check duplicates <code>[2,2,1,1]</code>, verify stability.</li>
<li>Experiment with <code>[10,9,8,7,6,5]</code>.</li>
<li>Visualize rotations during merge.</li>
<li>Change block size, observe performance.</li>
<li>Implement √n buffer manually.</li>
<li>Compare with Merge Sort (space).</li>
<li>Measure time vs WikiSort.</li>
<li>Try large array (10k elements).</li>
</ol>
</section>
<section id="test-cases-38" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-38">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[4,1,3,2,5]</td>
<td>[1,2,3,4,5]</td>
<td>Basic test</td>
</tr>
<tr class="even">
<td>[1,2,3,4]</td>
<td>[1,2,3,4]</td>
<td>Already sorted</td>
</tr>
<tr class="odd">
<td>[5,4,3,2,1]</td>
<td>[1,2,3,4,5]</td>
<td>Reverse</td>
</tr>
<tr class="even">
<td>[2,2,1,1]</td>
<td>[1,1,2,2]</td>
<td>Stable</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-38" class="level3">
<h3 class="anchored" data-anchor-id="complexity-38">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1) to O(√n)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>GrailSort is the gentle engineer of sorting, steady, stable, and space-wise. It doesn’t rush; it rearranges with precision, merging order from within.</p>
</section>
<section id="adaptive-hybrid-sort" class="level3">
<h3 class="anchored" data-anchor-id="adaptive-hybrid-sort">140 Adaptive Hybrid Sort</h3>
<p>Adaptive Hybrid Sort is a meta-sorting algorithm that dynamically combines multiple sorting strategies, such as QuickSort, Merge Sort, Insertion Sort, and Heap Sort, depending on the data characteristics and runtime patterns it detects.</p>
<p>It adapts in real-time, switching between methods based on factors like array size, degree of pre-sortedness, data distribution, and recursion depth. This makes it a universal, practical sorter optimized for diverse workloads.</p>
</section>
<section id="what-problem-are-we-solving-39" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-39">What Problem Are We Solving?</h3>
<p>No single sorting algorithm is best for all situations:</p>
<ul>
<li>QuickSort is fast on random data but unstable and bad in worst case.</li>
<li>Merge Sort is stable but memory-hungry.</li>
<li>Insertion Sort is great for small or nearly sorted arrays.</li>
<li>Heap Sort guarantees O(n log n) but has poor locality.</li>
</ul>
<p>Adaptive Hybrid Sort solves this by blending algorithms:</p>
<ol type="1">
<li>Start with QuickSort for speed.</li>
<li>Detect sorted or small regions → switch to Insertion Sort.</li>
<li>Detect bad pivot patterns → switch to Heap Sort.</li>
<li>Detect stability needs or patterns → use Merge Sort.</li>
</ol>
<p>It’s a unified, self-tuning sorting system.</p>
<section id="example-39" class="level4">
<h4 class="anchored" data-anchor-id="example-39">Example</h4>
<p>Sort <code>[2, 3, 5, 4, 6, 7, 8, 1]</code></p>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 43%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Detection</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Mostly sorted except last few</td>
<td>Switch to Insertion Sort</td>
</tr>
<tr class="even">
<td>2</td>
<td>Sort locally</td>
<td>[1,2,3,4,5,6,7,8]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Done</td>
<td>Adaptive path chosen automatically</td>
</tr>
</tbody>
</table>
<p>If input were random, it would stay with QuickSort. If adversarial, it would pivot to Heap Sort.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-39" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-39">How Does It Work (Plain Language)?</h3>
<p>Imagine a skilled chef with many tools, knives, mixers, ovens. When slicing carrots (small data), they use a paring knife (Insertion Sort). When breaking a tough root (unsorted array), they grab a heavy cleaver (QuickSort). When something’s too complex, they use machinery (Merge Sort).</p>
<p>Adaptive Hybrid Sort works the same way, choosing the right tool at the right time.</p>
<section id="step-by-step-process-38" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-38">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Start with QuickSort (good average case)</td>
</tr>
<tr class="even">
<td>2</td>
<td>If recursion depth too high → switch to Heap Sort</td>
</tr>
<tr class="odd">
<td>3</td>
<td>If subarray small (≤ threshold) → use Insertion Sort</td>
</tr>
<tr class="even">
<td>4</td>
<td>If stable sorting required → use Merge Sort</td>
</tr>
<tr class="odd">
<td>5</td>
<td>If data partially sorted → use TimSort-like merge</td>
</tr>
<tr class="even">
<td>6</td>
<td>Combine results for final sorted output</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-38" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-38">Tiny Code (Easy Versions)</h3>
<section id="python-simplified-hybrid-sort" class="level4">
<h4 class="anchored" data-anchor-id="python-simplified-hybrid-sort">Python (Simplified Hybrid Sort)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> insertion_sort(arr, left, right):</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(left <span class="op">+</span> <span class="dv">1</span>, right):</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> arr[i]</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>        j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&gt;=</span> left <span class="kw">and</span> arr[j] <span class="op">&gt;</span> key:</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>            arr[j <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> arr[j]</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>            j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>        arr[j <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> key</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> heapify(arr, n, i):</span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>    largest <span class="op">=</span> i</span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a>    l <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>i <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>i <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb89-14"><a href="#cb89-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> l <span class="op">&lt;</span> n <span class="kw">and</span> arr[l] <span class="op">&gt;</span> arr[largest]:</span>
<span id="cb89-15"><a href="#cb89-15" aria-hidden="true" tabindex="-1"></a>        largest <span class="op">=</span> l</span>
<span id="cb89-16"><a href="#cb89-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> r <span class="op">&lt;</span> n <span class="kw">and</span> arr[r] <span class="op">&gt;</span> arr[largest]:</span>
<span id="cb89-17"><a href="#cb89-17" aria-hidden="true" tabindex="-1"></a>        largest <span class="op">=</span> r</span>
<span id="cb89-18"><a href="#cb89-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> largest <span class="op">!=</span> i:</span>
<span id="cb89-19"><a href="#cb89-19" aria-hidden="true" tabindex="-1"></a>        arr[i], arr[largest] <span class="op">=</span> arr[largest], arr[i]</span>
<span id="cb89-20"><a href="#cb89-20" aria-hidden="true" tabindex="-1"></a>        heapify(arr, n, largest)</span>
<span id="cb89-21"><a href="#cb89-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-22"><a href="#cb89-22" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> heap_sort(arr):</span>
<span id="cb89-23"><a href="#cb89-23" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb89-24"><a href="#cb89-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n<span class="op">//</span><span class="dv">2</span> <span class="op">-</span> <span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb89-25"><a href="#cb89-25" aria-hidden="true" tabindex="-1"></a>        heapify(arr, n, i)</span>
<span id="cb89-26"><a href="#cb89-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n <span class="op">-</span> <span class="dv">1</span>, <span class="dv">0</span>, <span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb89-27"><a href="#cb89-27" aria-hidden="true" tabindex="-1"></a>        arr[<span class="dv">0</span>], arr[i] <span class="op">=</span> arr[i], arr[<span class="dv">0</span>]</span>
<span id="cb89-28"><a href="#cb89-28" aria-hidden="true" tabindex="-1"></a>        heapify(arr, i, <span class="dv">0</span>)</span>
<span id="cb89-29"><a href="#cb89-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-30"><a href="#cb89-30" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> partition(arr, low, high):</span>
<span id="cb89-31"><a href="#cb89-31" aria-hidden="true" tabindex="-1"></a>    pivot <span class="op">=</span> arr[(low <span class="op">+</span> high) <span class="op">//</span> <span class="dv">2</span>]</span>
<span id="cb89-32"><a href="#cb89-32" aria-hidden="true" tabindex="-1"></a>    i, j <span class="op">=</span> low, high</span>
<span id="cb89-33"><a href="#cb89-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;=</span> j:</span>
<span id="cb89-34"><a href="#cb89-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> arr[i] <span class="op">&lt;</span> pivot: i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb89-35"><a href="#cb89-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> arr[j] <span class="op">&gt;</span> pivot: j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb89-36"><a href="#cb89-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> i <span class="op">&lt;=</span> j:</span>
<span id="cb89-37"><a href="#cb89-37" aria-hidden="true" tabindex="-1"></a>            arr[i], arr[j] <span class="op">=</span> arr[j], arr[i]</span>
<span id="cb89-38"><a href="#cb89-38" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb89-39"><a href="#cb89-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i</span>
<span id="cb89-40"><a href="#cb89-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-41"><a href="#cb89-41" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hybrid_sort(arr, low<span class="op">=</span><span class="dv">0</span>, high<span class="op">=</span><span class="va">None</span>, depth_limit<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb89-42"><a href="#cb89-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> high <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb89-43"><a href="#cb89-43" aria-hidden="true" tabindex="-1"></a>        high <span class="op">=</span> <span class="bu">len</span>(arr) <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb89-44"><a href="#cb89-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> depth_limit <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb89-45"><a href="#cb89-45" aria-hidden="true" tabindex="-1"></a>        <span class="im">import</span> math</span>
<span id="cb89-46"><a href="#cb89-46" aria-hidden="true" tabindex="-1"></a>        depth_limit <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> math.floor(math.log2(<span class="bu">len</span>(arr) <span class="op">+</span> <span class="dv">1</span>))</span>
<span id="cb89-47"><a href="#cb89-47" aria-hidden="true" tabindex="-1"></a>    size <span class="op">=</span> high <span class="op">-</span> low <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb89-48"><a href="#cb89-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> size <span class="op">&lt;=</span> <span class="dv">16</span>:</span>
<span id="cb89-49"><a href="#cb89-49" aria-hidden="true" tabindex="-1"></a>        insertion_sort(arr, low, high <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb89-50"><a href="#cb89-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb89-51"><a href="#cb89-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> depth_limit <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb89-52"><a href="#cb89-52" aria-hidden="true" tabindex="-1"></a>        sub <span class="op">=</span> arr[low:high <span class="op">+</span> <span class="dv">1</span>]</span>
<span id="cb89-53"><a href="#cb89-53" aria-hidden="true" tabindex="-1"></a>        heap_sort(sub)</span>
<span id="cb89-54"><a href="#cb89-54" aria-hidden="true" tabindex="-1"></a>        arr[low:high <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> sub</span>
<span id="cb89-55"><a href="#cb89-55" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb89-56"><a href="#cb89-56" aria-hidden="true" tabindex="-1"></a>    pivot_index <span class="op">=</span> partition(arr, low, high)</span>
<span id="cb89-57"><a href="#cb89-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> low <span class="op">&lt;</span> pivot_index <span class="op">-</span> <span class="dv">1</span>:</span>
<span id="cb89-58"><a href="#cb89-58" aria-hidden="true" tabindex="-1"></a>        hybrid_sort(arr, low, pivot_index <span class="op">-</span> <span class="dv">1</span>, depth_limit <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb89-59"><a href="#cb89-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> pivot_index <span class="op">&lt;</span> high:</span>
<span id="cb89-60"><a href="#cb89-60" aria-hidden="true" tabindex="-1"></a>        hybrid_sort(arr, pivot_index, high, depth_limit <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb89-61"><a href="#cb89-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-62"><a href="#cb89-62" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">1</span>]</span>
<span id="cb89-63"><a href="#cb89-63" aria-hidden="true" tabindex="-1"></a>hybrid_sort(arr)</span>
<span id="cb89-64"><a href="#cb89-64" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$1, 2, 3, 4, 5, 6, 7, 8]</code></pre>
</section>
<section id="c-conceptual-hybrid-sort" class="level4">
<h4 class="anchored" data-anchor-id="c-conceptual-hybrid-sort">C (Conceptual Hybrid Sort)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb91"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> insertion_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> left<span class="op">,</span> <span class="dt">int</span> right<span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> left <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> right<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> key <span class="op">=</span> arr<span class="op">[</span>i<span class="op">],</span> j <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>j <span class="op">&gt;=</span> left <span class="op">&amp;&amp;</span> arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&gt;</span> key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>            j<span class="op">--;</span></span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb91-13"><a href="#cb91-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb91-14"><a href="#cb91-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-15"><a href="#cb91-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> heapify<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-16"><a href="#cb91-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> largest <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb91-17"><a href="#cb91-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> l <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> r <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>i <span class="op">+</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb91-18"><a href="#cb91-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>l <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[</span>l<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>largest<span class="op">])</span> largest <span class="op">=</span> l<span class="op">;</span></span>
<span id="cb91-19"><a href="#cb91-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>r <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[</span>r<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>largest<span class="op">])</span> largest <span class="op">=</span> r<span class="op">;</span></span>
<span id="cb91-20"><a href="#cb91-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>largest <span class="op">!=</span> i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-21"><a href="#cb91-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> tmp <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>largest<span class="op">];</span> arr<span class="op">[</span>largest<span class="op">]</span> <span class="op">=</span> tmp<span class="op">;</span></span>
<span id="cb91-22"><a href="#cb91-22" aria-hidden="true" tabindex="-1"></a>        heapify<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> largest<span class="op">);</span></span>
<span id="cb91-23"><a href="#cb91-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb91-24"><a href="#cb91-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb91-25"><a href="#cb91-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-26"><a href="#cb91-26" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> heap_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-27"><a href="#cb91-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> n<span class="op">/</span><span class="dv">2</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--)</span> heapify<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> i<span class="op">);</span></span>
<span id="cb91-28"><a href="#cb91-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--)</span> <span class="op">{</span></span>
<span id="cb91-29"><a href="#cb91-29" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> tmp <span class="op">=</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">];</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> tmp<span class="op">;</span></span>
<span id="cb91-30"><a href="#cb91-30" aria-hidden="true" tabindex="-1"></a>        heapify<span class="op">(</span>arr<span class="op">,</span> i<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb91-31"><a href="#cb91-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb91-32"><a href="#cb91-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb91-33"><a href="#cb91-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-34"><a href="#cb91-34" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> partition<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-35"><a href="#cb91-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pivot <span class="op">=</span> arr<span class="op">[(</span>low <span class="op">+</span> high<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">];</span></span>
<span id="cb91-36"><a href="#cb91-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> low<span class="op">,</span> j <span class="op">=</span> high<span class="op">;</span></span>
<span id="cb91-37"><a href="#cb91-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;=</span> j<span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-38"><a href="#cb91-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> pivot<span class="op">)</span> i<span class="op">++;</span></span>
<span id="cb91-39"><a href="#cb91-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&gt;</span> pivot<span class="op">)</span> j<span class="op">--;</span></span>
<span id="cb91-40"><a href="#cb91-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">&lt;=</span> j<span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-41"><a href="#cb91-41" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> tmp <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span> arr<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> tmp<span class="op">;</span></span>
<span id="cb91-42"><a href="#cb91-42" aria-hidden="true" tabindex="-1"></a>            i<span class="op">++;</span> j<span class="op">--;</span></span>
<span id="cb91-43"><a href="#cb91-43" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb91-44"><a href="#cb91-44" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb91-45"><a href="#cb91-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i<span class="op">;</span></span>
<span id="cb91-46"><a href="#cb91-46" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb91-47"><a href="#cb91-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-48"><a href="#cb91-48" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> hybrid_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">,</span> <span class="dt">int</span> depth_limit<span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-49"><a href="#cb91-49" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> high <span class="op">-</span> low <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb91-50"><a href="#cb91-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>size <span class="op">&lt;=</span> <span class="dv">16</span><span class="op">)</span> <span class="op">{</span> insertion_sort<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> high <span class="op">+</span> <span class="dv">1</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb91-51"><a href="#cb91-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>depth_limit <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> heap_sort<span class="op">(</span>arr <span class="op">+</span> low<span class="op">,</span> size<span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb91-52"><a href="#cb91-52" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> p <span class="op">=</span> partition<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> high<span class="op">);</span></span>
<span id="cb91-53"><a href="#cb91-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>low <span class="op">&lt;</span> p <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> hybrid_sort<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> p <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> depth_limit <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb91-54"><a href="#cb91-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>p <span class="op">&lt;</span> high<span class="op">)</span> hybrid_sort<span class="op">(</span>arr<span class="op">,</span> p<span class="op">,</span> high<span class="op">,</span> depth_limit <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb91-55"><a href="#cb91-55" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb91-56"><a href="#cb91-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-57"><a href="#cb91-57" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-58"><a href="#cb91-58" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">5</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">6</span><span class="op">,</span><span class="dv">7</span><span class="op">,</span><span class="dv">8</span><span class="op">,</span><span class="dv">1</span><span class="op">};</span></span>
<span id="cb91-59"><a href="#cb91-59" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb91-60"><a href="#cb91-60" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> depth_limit <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> log2<span class="op">(</span>n<span class="op">);</span></span>
<span id="cb91-61"><a href="#cb91-61" aria-hidden="true" tabindex="-1"></a>    hybrid_sort<span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> depth_limit<span class="op">);</span></span>
<span id="cb91-62"><a href="#cb91-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb91-63"><a href="#cb91-63" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb91-64"><a href="#cb91-64" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-39" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-39">Why It Matters</h3>
<ul>
<li>Adaptive to input shape</li>
<li>Hybrid = flexibility + safety</li>
<li>Stable runtime across data types</li>
<li>Real-world robust for mixed data</li>
<li>Balances speed, memory, stability, and predictability</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-39" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-39">A Gentle Proof (Why It Works)</h3>
<p>Let <span class="math inline">\(T(n)\)</span> be the runtime.<br>
Each phase is <span class="math inline">\(O(n)\)</span>, and recursion depth is <span class="math inline">\(O(\log n)\)</span>.<br>
Adaptive switching ensures no pathological behavior.</p>
<p><span class="math display">\[
T(n) = O(n \log n)
\]</span></p>
<p>Best case (sorted): Insertion Sort runs in <span class="math inline">\(O(n)\)</span>.<br>
Worst case (adversarial): Heap fallback → <span class="math inline">\(O(n \log n)\)</span>.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Case</th>
<th>Behavior</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Sorted</td>
<td>Insertion Sort</td>
<td><span class="math inline">\(O(n)\)</span></td>
</tr>
<tr class="even">
<td>Random</td>
<td>QuickSort</td>
<td><span class="math inline">\(O(n \log n)\)</span></td>
</tr>
<tr class="odd">
<td>Adversarial</td>
<td>Heap Sort</td>
<td><span class="math inline">\(O(n \log n)\)</span></td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-39" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-39">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[2,3,5,4,6,7,8,1]</code>.</li>
<li>Try <code>[1,2,3,4,5,6]</code> → insertion path.</li>
<li>Reverse <code>[9,8,7,6,5]</code> → heap path.</li>
<li>Mix sorted + random halves.</li>
<li>Measure recursion depth.</li>
<li>Increase threshold to 32.</li>
<li>Add duplicates → observe stability.</li>
<li>Compare with IntroSort, TimSort.</li>
<li>Benchmark on large random data.</li>
<li>Visualize switch decisions.</li>
</ol>
</section>
<section id="test-cases-39" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-39">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[2,3,5,4,6,7,8,1]</td>
<td>[1,2,3,4,5,6,7,8]</td>
<td>Random</td>
</tr>
<tr class="even">
<td>[1,2,3,4,5]</td>
<td>[1,2,3,4,5]</td>
<td>Sorted</td>
</tr>
<tr class="odd">
<td>[5,4,3,2,1]</td>
<td>[1,2,3,4,5]</td>
<td>Reverse</td>
</tr>
<tr class="even">
<td>[10,10,9,9,8]</td>
<td>[8,9,9,10,10]</td>
<td>Duplicates</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-39" class="level3">
<h3 class="anchored" data-anchor-id="complexity-39">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(log n)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Adaptive Hybrid Sort is the chameleon of sorting, it watches the data, reads the room, and chooses the perfect move. Fast when it can be, safe when it must be.</p>
</section>
</section>
<section id="section-15.-special-sorts" class="level2">
<h2 class="anchored" data-anchor-id="section-15.-special-sorts">Section 15. Special sorts</h2>
<section id="cycle-sort" class="level3">
<h3 class="anchored" data-anchor-id="cycle-sort">141 Cycle Sort</h3>
<p>Cycle Sort is a comparison-based sorting algorithm designed to minimize the number of writes. It’s ideal when writing to memory or storage is expensive (like EEPROM or flash memory), since each element is written exactly once into its final position.</p>
<p>It achieves O(n²) comparisons but performs the minimal possible number of writes, making it unique among sorting algorithms.</p>
</section>
<section id="what-problem-are-we-solving-40" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-40">What Problem Are We Solving?</h3>
<p>Most sorting algorithms (like QuickSort or Merge Sort) swap elements multiple times before they reach their final position. If each write is costly (e.g., embedded systems or flash memory), that’s wasteful.</p>
<p>Cycle Sort asks: “How can we put each element <em>directly</em> where it belongs, in one cycle, with as few writes as possible?”</p>
<section id="example-40" class="level4">
<h4 class="anchored" data-anchor-id="example-40">Example</h4>
<p>Sort <code>[3, 1, 2]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Element</th>
<th>Correct Position</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>3</td>
<td>Index 2</td>
<td>Swap 3 → position 2</td>
</tr>
<tr class="even">
<td>2</td>
<td>2</td>
<td>Index 1</td>
<td>Swap 2 → position 1</td>
</tr>
<tr class="odd">
<td>3</td>
<td>1</td>
<td>Index 0</td>
<td>Done</td>
</tr>
<tr class="even">
<td>Final</td>
<td>[1, 2, 3]</td>
<td>Sorted</td>
<td>✅ Minimal writes</td>
</tr>
</tbody>
</table>
<p>Each element cycles into place once.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-40" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-40">How Does It Work (Plain Language)?</h3>
<p>Think of it like putting books on a shelf:</p>
<ul>
<li>You pick one book (element),</li>
<li>Figure out where it belongs,</li>
<li>Put it there, swapping with whatever’s currently there,</li>
<li>Repeat until every book is in the right spot.</li>
</ul>
<p>Each cycle ensures every element reaches its final position exactly once.</p>
<section id="step-by-step-process-39" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-39">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Loop through array positions</td>
</tr>
<tr class="even">
<td>2</td>
<td>For each position, count how many elements are smaller</td>
</tr>
<tr class="odd">
<td>3</td>
<td>That count = final position</td>
</tr>
<tr class="even">
<td>4</td>
<td>If not already correct, cycle the element to its right place</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Continue cycling until original element returns to start</td>
</tr>
<tr class="even">
<td>6</td>
<td>Move to next position and repeat</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-39" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-39">Tiny Code (Easy Versions)</h3>
<section id="python-27" class="level4">
<h4 class="anchored" data-anchor-id="python-27">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cycle_sort(arr):</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>    writes <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> cycle_start <span class="kw">in</span> <span class="bu">range</span>(n <span class="op">-</span> <span class="dv">1</span>):</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>        item <span class="op">=</span> arr[cycle_start]</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> cycle_start</span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(cycle_start <span class="op">+</span> <span class="dv">1</span>, n):</span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> arr[i] <span class="op">&lt;</span> item:</span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>                pos <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> pos <span class="op">==</span> cycle_start:</span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> item <span class="op">==</span> arr[pos]:</span>
<span id="cb92-13"><a href="#cb92-13" aria-hidden="true" tabindex="-1"></a>            pos <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb92-14"><a href="#cb92-14" aria-hidden="true" tabindex="-1"></a>        arr[pos], item <span class="op">=</span> item, arr[pos]</span>
<span id="cb92-15"><a href="#cb92-15" aria-hidden="true" tabindex="-1"></a>        writes <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb92-16"><a href="#cb92-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> pos <span class="op">!=</span> cycle_start:</span>
<span id="cb92-17"><a href="#cb92-17" aria-hidden="true" tabindex="-1"></a>            pos <span class="op">=</span> cycle_start</span>
<span id="cb92-18"><a href="#cb92-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(cycle_start <span class="op">+</span> <span class="dv">1</span>, n):</span>
<span id="cb92-19"><a href="#cb92-19" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> arr[i] <span class="op">&lt;</span> item:</span>
<span id="cb92-20"><a href="#cb92-20" aria-hidden="true" tabindex="-1"></a>                    pos <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb92-21"><a href="#cb92-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span> item <span class="op">==</span> arr[pos]:</span>
<span id="cb92-22"><a href="#cb92-22" aria-hidden="true" tabindex="-1"></a>                pos <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb92-23"><a href="#cb92-23" aria-hidden="true" tabindex="-1"></a>            arr[pos], item <span class="op">=</span> item, arr[pos]</span>
<span id="cb92-24"><a href="#cb92-24" aria-hidden="true" tabindex="-1"></a>            writes <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb92-25"><a href="#cb92-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Total writes:"</span>, writes)</span>
<span id="cb92-26"><a href="#cb92-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr</span>
<span id="cb92-27"><a href="#cb92-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-28"><a href="#cb92-28" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>]</span>
<span id="cb92-29"><a href="#cb92-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cycle_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Total writes: 3
$$1, 2, 3, 4]</code></pre>
</section>
<section id="c-23" class="level4">
<h4 class="anchored" data-anchor-id="c-23">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb94"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> cycle_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> writes <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> cycle_start <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> cycle_start <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> cycle_start<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> item <span class="op">=</span> arr<span class="op">[</span>cycle_start<span class="op">];</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> pos <span class="op">=</span> cycle_start<span class="op">;</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> cycle_start <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> item<span class="op">)</span></span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>                pos<span class="op">++;</span></span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>pos <span class="op">==</span> cycle_start<span class="op">)</span> <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>item <span class="op">==</span> arr<span class="op">[</span>pos<span class="op">])</span> pos<span class="op">++;</span></span>
<span id="cb94-16"><a href="#cb94-16" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> temp <span class="op">=</span> arr<span class="op">[</span>pos<span class="op">];</span> arr<span class="op">[</span>pos<span class="op">]</span> <span class="op">=</span> item<span class="op">;</span> item <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb94-17"><a href="#cb94-17" aria-hidden="true" tabindex="-1"></a>        writes<span class="op">++;</span></span>
<span id="cb94-18"><a href="#cb94-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-19"><a href="#cb94-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>pos <span class="op">!=</span> cycle_start<span class="op">)</span> <span class="op">{</span></span>
<span id="cb94-20"><a href="#cb94-20" aria-hidden="true" tabindex="-1"></a>            pos <span class="op">=</span> cycle_start<span class="op">;</span></span>
<span id="cb94-21"><a href="#cb94-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> cycle_start <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb94-22"><a href="#cb94-22" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> item<span class="op">)</span></span>
<span id="cb94-23"><a href="#cb94-23" aria-hidden="true" tabindex="-1"></a>                    pos<span class="op">++;</span></span>
<span id="cb94-24"><a href="#cb94-24" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span> <span class="op">(</span>item <span class="op">==</span> arr<span class="op">[</span>pos<span class="op">])</span> pos<span class="op">++;</span></span>
<span id="cb94-25"><a href="#cb94-25" aria-hidden="true" tabindex="-1"></a>            temp <span class="op">=</span> arr<span class="op">[</span>pos<span class="op">];</span> arr<span class="op">[</span>pos<span class="op">]</span> <span class="op">=</span> item<span class="op">;</span> item <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb94-26"><a href="#cb94-26" aria-hidden="true" tabindex="-1"></a>            writes<span class="op">++;</span></span>
<span id="cb94-27"><a href="#cb94-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb94-28"><a href="#cb94-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb94-29"><a href="#cb94-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Total writes: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> writes<span class="op">);</span></span>
<span id="cb94-30"><a href="#cb94-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb94-31"><a href="#cb94-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-32"><a href="#cb94-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb94-33"><a href="#cb94-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">3</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">4</span><span class="op">};</span></span>
<span id="cb94-34"><a href="#cb94-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb94-35"><a href="#cb94-35" aria-hidden="true" tabindex="-1"></a>    cycle_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb94-36"><a href="#cb94-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb94-37"><a href="#cb94-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb94-38"><a href="#cb94-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Total writes: 3  
1 2 3 4</code></pre>
</section>
</section>
<section id="why-it-matters-40" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-40">Why It Matters</h3>
<ul>
<li>Minimizes writes (useful for flash memory, EEPROMs)</li>
<li>In-place</li>
<li>Deterministic writes = fewer wear cycles</li>
<li>Educational example of permutation cycles in sorting</li>
</ul>
<p>Not fast, but <em>frugal</em>, every move counts.</p>
</section>
<section id="a-gentle-proof-why-it-works-40" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-40">A Gentle Proof (Why It Works)</h3>
<p>Each element moves to its correct position once.<br>
If array size is <span class="math inline">\(n\)</span>, total writes <span class="math inline">\(\le n\)</span>.</p>
<p>Counting smaller elements ensures correctness: <span class="math display">\[
\text{pos}(x) = |{y \mid y &lt; x}|
\]</span></p>
<p>Each cycle resolves one permutation cycle of misplaced elements. Thus, algorithm terminates with all items placed exactly once.</p>
</section>
<section id="try-it-yourself-40" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-40">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[3, 1, 2]</code> step by step.</li>
<li>Count how many writes you perform.</li>
<li>Try <code>[4, 3, 2, 1]</code>, maximum cycles.</li>
<li>Try <code>[1, 2, 3, 4]</code>, no writes.</li>
<li>Test duplicates <code>[3, 1, 2, 3]</code>.</li>
<li>Implement a version counting cycles.</li>
<li>Compare write count with Selection Sort.</li>
<li>Benchmark on 1000 random elements.</li>
<li>Measure wear-leveling benefit for flash.</li>
<li>Visualize cycles as arrows in permutation graph.</li>
</ol>
</section>
<section id="test-cases-40" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-40">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Writes</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3,1,2,4]</td>
<td>[1,2,3,4]</td>
<td>3</td>
<td>3 cycles</td>
</tr>
<tr class="even">
<td>[1,2,3]</td>
<td>[1,2,3]</td>
<td>0</td>
<td>Already sorted</td>
</tr>
<tr class="odd">
<td>[4,3,2,1]</td>
<td>[1,2,3,4]</td>
<td>4</td>
<td>Max writes</td>
</tr>
<tr class="even">
<td>[3,1,2,3]</td>
<td>[1,2,3,3]</td>
<td>3</td>
<td>Handles duplicates</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-40" class="level3">
<h3 class="anchored" data-anchor-id="complexity-40">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Writes</td>
<td>≤ n</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Cycle Sort is the minimalist’s sorter, every write is intentional, every move meaningful. It may not be fast, but it’s <em>precisely efficient</em>.</p>
</section>
<section id="comb-sort" class="level3">
<h3 class="anchored" data-anchor-id="comb-sort">142 Comb Sort</h3>
<p>Comb Sort is an improved version of Bubble Sort that eliminates small elements (often called “turtles”) faster by comparing elements far apart first, using a shrinking gap strategy.</p>
<p>It starts with a large gap (e.g.&nbsp;array length) and reduces it each pass until it reaches 1, where it behaves like a regular Bubble Sort. The result is fewer comparisons and faster convergence.</p>
</section>
<section id="what-problem-are-we-solving-41" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-41">What Problem Are We Solving?</h3>
<p>Bubble Sort is simple but slow, mainly because:</p>
<ul>
<li>It swaps only adjacent elements.</li>
<li>Small elements crawl slowly to the front.</li>
</ul>
<p>Comb Sort fixes this by using a gap to leap over elements, allowing “turtles” to move quickly forward.</p>
<p>It’s like sorting with a comb, wide teeth first (large gap), then finer ones (small gap).</p>
<section id="example-41" class="level4">
<h4 class="anchored" data-anchor-id="example-41">Example</h4>
<p>Sort <code>[8, 4, 1, 3, 7]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Gap</th>
<th>Pass Result</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>5 / 1.3 ≈ 3</td>
<td>[3, 4, 1, 8, 7]</td>
<td>Compare 8↔︎3</td>
</tr>
<tr class="even">
<td>2</td>
<td>3 / 1.3 ≈ 2</td>
<td>[1, 4, 3, 8, 7]</td>
<td>Compare 3↔︎1</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2 / 1.3 ≈ 1</td>
<td>[1, 3, 4, 7, 8]</td>
<td>Bubble finish</td>
</tr>
<tr class="even">
<td>Done</td>
<td>,</td>
<td>[1, 3, 4, 7, 8]</td>
<td>Sorted</td>
</tr>
</tbody>
</table>
<p>Turtles (1, 3) jump forward earlier, speeding up convergence.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-41" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-41">How Does It Work (Plain Language)?</h3>
<p>Think of it like shrinking a jump rope, at first, you make big jumps to cover ground fast, then smaller ones to fine-tune.</p>
<p>You start with a gap, compare and swap elements that far apart, shrink the gap each round, and stop when the gap reaches 1 <em>and no swaps happen</em>.</p>
<section id="step-by-step-process-40" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-40">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Initialize <code>gap = n</code> and <code>shrink = 1.3</code></td>
</tr>
<tr class="even">
<td>2</td>
<td>Repeat until <code>gap == 1</code> and no swaps</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Divide <code>gap</code> by shrink factor each pass</td>
</tr>
<tr class="even">
<td>4</td>
<td>Compare elements at distance <code>gap</code></td>
</tr>
<tr class="odd">
<td>5</td>
<td>Swap if out of order</td>
</tr>
<tr class="even">
<td>6</td>
<td>Continue until sorted</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-40" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-40">Tiny Code (Easy Versions)</h3>
<section id="python-28" class="level4">
<h4 class="anchored" data-anchor-id="python-28">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> comb_sort(arr):</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>    gap <span class="op">=</span> n</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>    shrink <span class="op">=</span> <span class="fl">1.3</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    swapped <span class="op">=</span> <span class="va">True</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> gap <span class="op">&gt;</span> <span class="dv">1</span> <span class="kw">or</span> swapped:</span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>        gap <span class="op">=</span> <span class="bu">int</span>(gap <span class="op">/</span> shrink)</span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> gap <span class="op">&lt;</span> <span class="dv">1</span>:</span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>            gap <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a>        swapped <span class="op">=</span> <span class="va">False</span></span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n <span class="op">-</span> gap):</span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> arr[i] <span class="op">&gt;</span> arr[i <span class="op">+</span> gap]:</span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a>                arr[i], arr[i <span class="op">+</span> gap] <span class="op">=</span> arr[i <span class="op">+</span> gap], arr[i]</span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a>                swapped <span class="op">=</span> <span class="va">True</span></span>
<span id="cb96-16"><a href="#cb96-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr</span>
<span id="cb96-17"><a href="#cb96-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-18"><a href="#cb96-18" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">8</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">7</span>]</span>
<span id="cb96-19"><a href="#cb96-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(comb_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$1, 3, 4, 7, 8]</code></pre>
</section>
<section id="c-24" class="level4">
<h4 class="anchored" data-anchor-id="c-24">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb98"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> comb_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> gap <span class="op">=</span> n<span class="op">;</span></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">float</span> shrink <span class="op">=</span> <span class="fl">1.3</span><span class="op">;</span></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> swapped <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>gap <span class="op">&gt;</span> <span class="dv">1</span> <span class="op">||</span> swapped<span class="op">)</span> <span class="op">{</span></span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a>        gap <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)(</span>gap <span class="op">/</span> shrink<span class="op">);</span></span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>gap <span class="op">&lt;</span> <span class="dv">1</span><span class="op">)</span> gap <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb98-11"><a href="#cb98-11" aria-hidden="true" tabindex="-1"></a>        swapped <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb98-12"><a href="#cb98-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">+</span> gap <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb98-13"><a href="#cb98-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>i <span class="op">+</span> gap<span class="op">])</span> <span class="op">{</span></span>
<span id="cb98-14"><a href="#cb98-14" aria-hidden="true" tabindex="-1"></a>                <span class="dt">int</span> tmp <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb98-15"><a href="#cb98-15" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>i <span class="op">+</span> gap<span class="op">];</span></span>
<span id="cb98-16"><a href="#cb98-16" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>i <span class="op">+</span> gap<span class="op">]</span> <span class="op">=</span> tmp<span class="op">;</span></span>
<span id="cb98-17"><a href="#cb98-17" aria-hidden="true" tabindex="-1"></a>                swapped <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb98-18"><a href="#cb98-18" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb98-19"><a href="#cb98-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb98-20"><a href="#cb98-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb98-21"><a href="#cb98-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb98-22"><a href="#cb98-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-23"><a href="#cb98-23" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb98-24"><a href="#cb98-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">8</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">7</span><span class="op">};</span></span>
<span id="cb98-25"><a href="#cb98-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb98-26"><a href="#cb98-26" aria-hidden="true" tabindex="-1"></a>    comb_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb98-27"><a href="#cb98-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb98-28"><a href="#cb98-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb98-29"><a href="#cb98-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>1 3 4 7 8</code></pre>
</section>
</section>
<section id="why-it-matters-41" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-41">Why It Matters</h3>
<ul>
<li>Faster than Bubble Sort</li>
<li>Simple implementation</li>
<li>In-place and adaptive</li>
<li>Efficient for small datasets or nearly sorted arrays</li>
</ul>
<p>A stepping stone toward more efficient algorithms like Shell Sort.</p>
</section>
<section id="a-gentle-proof-why-it-works-41" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-41">A Gentle Proof (Why It Works)</h3>
<p>The shrink factor ensures gap reduction converges to 1 in <span class="math inline">\(O(\log n)\)</span> steps.<br>
Each pass fixes distant inversions early, reducing total swaps.</p>
<p>Total cost is dominated by local passes when gap = 1 (Bubble Sort).<br>
Hence, average complexity ≈ <span class="math inline">\(O(n \log n)\)</span> for random data, <span class="math inline">\(O(n^2)\)</span> worst case.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Phase</th>
<th>Description</th>
<th>Cost</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Large gap passes</td>
<td>Move turtles forward</td>
<td><span class="math inline">\(O(n \log n)\)</span></td>
</tr>
<tr class="even">
<td>Small gap passes</td>
<td>Final fine-tuning</td>
<td><span class="math inline">\(O(n^2)\)</span> worst</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-41" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-41">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[8, 4, 1, 3, 7]</code> step by step.</li>
<li>Try <code>[1, 2, 3, 4, 5]</code>, minimal passes.</li>
<li>Try <code>[5, 4, 3, 2, 1]</code>, observe gap shrinking.</li>
<li>Change shrink factor (1.5, 1.2).</li>
<li>Measure swaps per iteration.</li>
<li>Compare with Bubble Sort.</li>
<li>Visualize movement of smallest element.</li>
<li>Benchmark large random array.</li>
<li>Track gap evolution over time.</li>
<li>Implement early-stop optimization.</li>
</ol>
</section>
<section id="test-cases-41" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-41">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[8,4,1,3,7]</td>
<td>[1,3,4,7,8]</td>
<td>Basic test</td>
</tr>
<tr class="even">
<td>[1,2,3,4,5]</td>
<td>[1,2,3,4,5]</td>
<td>Already sorted</td>
</tr>
<tr class="odd">
<td>[5,4,3,2,1]</td>
<td>[1,2,3,4,5]</td>
<td>Reverse order</td>
</tr>
<tr class="even">
<td>[4,1,3,2]</td>
<td>[1,2,3,4]</td>
<td>Short array</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-41" class="level3">
<h3 class="anchored" data-anchor-id="complexity-41">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n log n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Comb Sort sweeps through data like a comb through tangled hair, wide strokes first, fine ones later, until everything’s smooth and ordered.</p>
</section>
<section id="gnome-sort-1" class="level3">
<h3 class="anchored" data-anchor-id="gnome-sort-1">143 Gnome Sort</h3>
<p>Gnome Sort is a simple comparison-based sorting algorithm that works like a garden gnome arranging flower pots, it looks at two adjacent elements and swaps them if they’re out of order, then steps backward to check the previous pair again.</p>
<p>It’s conceptually similar to Insertion Sort, but implemented with a single loop and no nested structure, making it elegant and intuitive for learners.</p>
</section>
<section id="what-problem-are-we-solving-42" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-42">What Problem Are We Solving?</h3>
<p>Insertion Sort requires nested loops or recursion, which can be tricky to visualize. Gnome Sort offers the same logic using a simple forward–backward walk:</p>
<ul>
<li>Move forward if elements are ordered.</li>
<li>Move back and swap if they’re not.</li>
</ul>
<p>This creates a human-like sorting routine, step forward, fix, step back, repeat.</p>
<section id="example-42" class="level4">
<h4 class="anchored" data-anchor-id="example-42">Example</h4>
<p>Sort <code>[5, 3, 4, 2]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Index</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>5 &gt; 3 → swap</td>
<td>[3, 5, 4, 2]</td>
</tr>
<tr class="even">
<td>2</td>
<td>0</td>
<td>At start → move forward</td>
<td>[3, 5, 4, 2]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2</td>
<td>5 &gt; 4 → swap</td>
<td>[3, 4, 5, 2]</td>
</tr>
<tr class="even">
<td>4</td>
<td>1</td>
<td>3 &lt; 4 → forward</td>
<td>[3, 4, 5, 2]</td>
</tr>
<tr class="odd">
<td>5</td>
<td>3</td>
<td>5 &gt; 2 → swap</td>
<td>[3, 4, 2, 5]</td>
</tr>
<tr class="even">
<td>6</td>
<td>2</td>
<td>4 &gt; 2 → swap</td>
<td>[3, 2, 4, 5]</td>
</tr>
<tr class="odd">
<td>7</td>
<td>1</td>
<td>3 &gt; 2 → swap</td>
<td>[2, 3, 4, 5]</td>
</tr>
<tr class="even">
<td>8</td>
<td>0</td>
<td>Done</td>
<td>[2, 3, 4, 5]</td>
</tr>
</tbody>
</table>
<p>Sorted with local fixes, no explicit nested loops.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-42" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-42">How Does It Work (Plain Language)?</h3>
<p>Imagine a gnome walking down a row of flower pots:</p>
<ul>
<li>If the two pots are in order, step forward.</li>
<li>If not, swap them and step back.</li>
<li>If you reach the start, just move forward again.</li>
</ul>
<p>Keep walking until you reach the end, the garden (array) is sorted.</p>
<section id="step-by-step-process-41" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-41">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Start at index 1</td>
</tr>
<tr class="even">
<td>2</td>
<td>Compare arr[i] with arr[i-1]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>If arr[i] &gt;= arr[i-1], move forward (i++)</td>
</tr>
<tr class="even">
<td>4</td>
<td>Else, swap arr[i] and arr[i-1], move back (i–)</td>
</tr>
<tr class="odd">
<td>5</td>
<td>If i == 0, move to i = 1</td>
</tr>
<tr class="even">
<td>6</td>
<td>Repeat until i reaches n</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-41" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-41">Tiny Code (Easy Versions)</h3>
<section id="python-29" class="level4">
<h4 class="anchored" data-anchor-id="python-29">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> gnome_sort(arr):</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> n:</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> i <span class="op">==</span> <span class="dv">0</span> <span class="kw">or</span> arr[i] <span class="op">&gt;=</span> arr[i <span class="op">-</span> <span class="dv">1</span>]:</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>            arr[i], arr[i <span class="op">-</span> <span class="dv">1</span>] <span class="op">=</span> arr[i <span class="op">-</span> <span class="dv">1</span>], arr[i]</span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>            i <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr</span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>]</span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(gnome_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$2, 3, 4, 5]</code></pre>
</section>
<section id="c-25" class="level4">
<h4 class="anchored" data-anchor-id="c-25">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb102"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> gnome_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;=</span> arr<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>            i<span class="op">++;</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> tmp <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> tmp<span class="op">;</span></span>
<span id="cb102-12"><a href="#cb102-12" aria-hidden="true" tabindex="-1"></a>            i<span class="op">--;</span></span>
<span id="cb102-13"><a href="#cb102-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb102-14"><a href="#cb102-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb102-15"><a href="#cb102-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb102-16"><a href="#cb102-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-17"><a href="#cb102-17" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb102-18"><a href="#cb102-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb102-19"><a href="#cb102-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb102-20"><a href="#cb102-20" aria-hidden="true" tabindex="-1"></a>    gnome_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb102-21"><a href="#cb102-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb102-22"><a href="#cb102-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb102-23"><a href="#cb102-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>2 3 4 5</code></pre>
</section>
</section>
<section id="why-it-matters-42" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-42">Why It Matters</h3>
<ul>
<li>Simple mental model, easy to understand.</li>
<li>No nested loops, clean control flow.</li>
<li>In-place, no extra space.</li>
<li>Demonstrates local correction in sorting.</li>
</ul>
<p>It’s slower than advanced algorithms but ideal for educational purposes.</p>
</section>
<section id="a-gentle-proof-why-it-works-42" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-42">A Gentle Proof (Why It Works)</h3>
<p>Each swap moves an element closer to its correct position. Whenever a swap happens, the gnome steps back to ensure local order.</p>
<p>Since every inversion is eventually corrected, the algorithm terminates with a sorted array.</p>
<p>Number of swaps proportional to number of inversions → <span class="math inline">\(O(n^2)\)</span>.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Case</th>
<th>Behavior</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Sorted</td>
<td>Linear scan</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Random</td>
<td>Frequent swaps</td>
<td>O(n²)</td>
</tr>
<tr class="odd">
<td>Reverse</td>
<td>Max swaps</td>
<td>O(n²)</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-42" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-42">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[5,3,4,2]</code> manually step by step.</li>
<li>Try <code>[1,2,3,4]</code>, minimal steps.</li>
<li>Try <code>[4,3,2,1]</code>, worst case.</li>
<li>Count number of swaps.</li>
<li>Compare with Insertion Sort.</li>
<li>Track index changes after each swap.</li>
<li>Implement visual animation (pointer walk).</li>
<li>Try duplicates <code>[2,1,2,1]</code>.</li>
<li>Measure time for n = 1000.</li>
<li>Add early-exit optimization.</li>
</ol>
</section>
<section id="test-cases-42" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-42">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[5,3,4,2]</td>
<td>[2,3,4,5]</td>
<td>Basic</td>
</tr>
<tr class="even">
<td>[1,2,3,4]</td>
<td>[1,2,3,4]</td>
<td>Already sorted</td>
</tr>
<tr class="odd">
<td>[4,3,2,1]</td>
<td>[1,2,3,4]</td>
<td>Reverse</td>
</tr>
<tr class="even">
<td>[2,1,2,1]</td>
<td>[1,1,2,2]</td>
<td>Duplicates</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-42" class="level3">
<h3 class="anchored" data-anchor-id="complexity-42">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n²)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Gnome Sort is a friendly, step-by-step sorter, it doesn’t rush, just tidies things one pot at a time until the whole row is in order.</p>
</section>
<section id="cocktail-sort" class="level3">
<h3 class="anchored" data-anchor-id="cocktail-sort">144 Cocktail Sort</h3>
<p>Cocktail Sort (also known as Bidirectional Bubble Sort or Shaker Sort) is a simple variation of Bubble Sort that sorts the list in both directions alternately, forward then backward, during each pass.</p>
<p>This bidirectional movement helps small elements (“turtles”) bubble up faster from the end, fixing one of Bubble Sort’s main weaknesses.</p>
</section>
<section id="what-problem-are-we-solving-43" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-43">What Problem Are We Solving?</h3>
<p>Bubble Sort only moves elements in one direction, large ones float to the end, but small ones crawl slowly to the start.</p>
<p>Cocktail Sort solves this by shaking the list:</p>
<ul>
<li>Forward pass: moves large items right</li>
<li>Backward pass: moves small items left</li>
</ul>
<p>This makes it more efficient on nearly sorted arrays or when both ends need cleaning.</p>
<section id="example-43" class="level4">
<h4 class="anchored" data-anchor-id="example-43">Example</h4>
<p>Sort <code>[4, 3, 1, 2]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Direction</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Forward</td>
<td>Compare &amp; swap 4↔︎3, 3↔︎1, 4↔︎2</td>
<td>[3,1,2,4]</td>
</tr>
<tr class="even">
<td>2</td>
<td>Backward</td>
<td>Compare &amp; swap 2↔︎1, 3↔︎1</td>
<td>[1,3,2,4]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Forward</td>
<td>Compare &amp; swap 3↔︎2</td>
<td>[1,2,3,4]</td>
</tr>
<tr class="even">
<td>Done</td>
<td>,</td>
<td>Sorted</td>
<td>✅</td>
</tr>
</tbody>
</table>
<p>Fewer passes than Bubble Sort.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-43" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-43">How Does It Work (Plain Language)?</h3>
<p>Think of a bartender shaking a cocktail shaker back and forth, each shake moves ingredients (elements) closer to the right place from both sides.</p>
<p>You traverse the array:</p>
<ul>
<li>Left to right: push largest elements to the end</li>
<li>Right to left: push smallest elements to the start</li>
</ul>
<p>Stop when no swaps occur, the array is sorted.</p>
<section id="step-by-step-process-42" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-42">Step-by-Step Process</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 70%">
<col style="width: 29%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Initialize <code>swapped = True</code></td>
</tr>
<tr class="even">
<td>2</td>
<td>While swapped:</td>
</tr>
<tr class="odd">
<td>  a. Set swapped = False</td>
<td></td>
</tr>
<tr class="even">
<td>  b. Forward pass (i = start → end): swap if arr[i] &gt; arr[i+1]</td>
<td></td>
</tr>
<tr class="odd">
<td>  c.&nbsp;If swapped == False: break (sorted)</td>
<td></td>
</tr>
<tr class="even">
<td>  d.&nbsp;Backward pass (i = end-1 → start): swap if arr[i] &gt; arr[i+1]</td>
<td></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Repeat until sorted</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-42" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-42">Tiny Code (Easy Versions)</h3>
<section id="python-30" class="level4">
<h4 class="anchored" data-anchor-id="python-30">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cocktail_sort(arr):</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>    swapped <span class="op">=</span> <span class="va">True</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> n <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> swapped:</span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>        swapped <span class="op">=</span> <span class="va">False</span></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Forward pass</span></span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(start, end):</span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> arr[i] <span class="op">&gt;</span> arr[i <span class="op">+</span> <span class="dv">1</span>]:</span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a>                arr[i], arr[i <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> arr[i <span class="op">+</span> <span class="dv">1</span>], arr[i]</span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a>                swapped <span class="op">=</span> <span class="va">True</span></span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> swapped:</span>
<span id="cb104-15"><a href="#cb104-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb104-16"><a href="#cb104-16" aria-hidden="true" tabindex="-1"></a>        swapped <span class="op">=</span> <span class="va">False</span></span>
<span id="cb104-17"><a href="#cb104-17" aria-hidden="true" tabindex="-1"></a>        end <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb104-18"><a href="#cb104-18" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Backward pass</span></span>
<span id="cb104-19"><a href="#cb104-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(end <span class="op">-</span> <span class="dv">1</span>, start <span class="op">-</span> <span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb104-20"><a href="#cb104-20" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> arr[i] <span class="op">&gt;</span> arr[i <span class="op">+</span> <span class="dv">1</span>]:</span>
<span id="cb104-21"><a href="#cb104-21" aria-hidden="true" tabindex="-1"></a>                arr[i], arr[i <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> arr[i <span class="op">+</span> <span class="dv">1</span>], arr[i]</span>
<span id="cb104-22"><a href="#cb104-22" aria-hidden="true" tabindex="-1"></a>                swapped <span class="op">=</span> <span class="va">True</span></span>
<span id="cb104-23"><a href="#cb104-23" aria-hidden="true" tabindex="-1"></a>        start <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb104-24"><a href="#cb104-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr</span>
<span id="cb104-25"><a href="#cb104-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-26"><a href="#cb104-26" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb104-27"><a href="#cb104-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cocktail_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$1, 2, 3, 4]</code></pre>
</section>
<section id="c-26" class="level4">
<h4 class="anchored" data-anchor-id="c-26">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb106"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> cocktail_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> start <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> end <span class="op">=</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> swapped <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>swapped<span class="op">)</span> <span class="op">{</span></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>        swapped <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Forward pass</span></span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> start<span class="op">;</span> i <span class="op">&lt;</span> end<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a>                <span class="dt">int</span> tmp <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb106-11"><a href="#cb106-11" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb106-12"><a href="#cb106-12" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> tmp<span class="op">;</span></span>
<span id="cb106-13"><a href="#cb106-13" aria-hidden="true" tabindex="-1"></a>                swapped <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb106-14"><a href="#cb106-14" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb106-15"><a href="#cb106-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb106-16"><a href="#cb106-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(!</span>swapped<span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb106-17"><a href="#cb106-17" aria-hidden="true" tabindex="-1"></a>        swapped <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb106-18"><a href="#cb106-18" aria-hidden="true" tabindex="-1"></a>        end<span class="op">--;</span></span>
<span id="cb106-19"><a href="#cb106-19" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Backward pass</span></span>
<span id="cb106-20"><a href="#cb106-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> end <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;=</span> start<span class="op">;</span> i<span class="op">--)</span> <span class="op">{</span></span>
<span id="cb106-21"><a href="#cb106-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb106-22"><a href="#cb106-22" aria-hidden="true" tabindex="-1"></a>                <span class="dt">int</span> tmp <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb106-23"><a href="#cb106-23" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb106-24"><a href="#cb106-24" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> tmp<span class="op">;</span></span>
<span id="cb106-25"><a href="#cb106-25" aria-hidden="true" tabindex="-1"></a>                swapped <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb106-26"><a href="#cb106-26" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb106-27"><a href="#cb106-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb106-28"><a href="#cb106-28" aria-hidden="true" tabindex="-1"></a>        start<span class="op">++;</span></span>
<span id="cb106-29"><a href="#cb106-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb106-30"><a href="#cb106-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb106-31"><a href="#cb106-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-32"><a href="#cb106-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb106-33"><a href="#cb106-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">4</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb106-34"><a href="#cb106-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb106-35"><a href="#cb106-35" aria-hidden="true" tabindex="-1"></a>    cocktail_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb106-36"><a href="#cb106-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb106-37"><a href="#cb106-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb106-38"><a href="#cb106-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>1 2 3 4</code></pre>
</section>
</section>
<section id="why-it-matters-43" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-43">Why It Matters</h3>
<ul>
<li>Bidirectional improvement on Bubble Sort</li>
<li>In-place and simple</li>
<li>Performs well on nearly sorted data</li>
<li>Adaptive, stops early when sorted</li>
</ul>
<p>Great educational bridge to understanding bidirectional scans and adaptive sorting.</p>
</section>
<section id="a-gentle-proof-why-it-works-43" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-43">A Gentle Proof (Why It Works)</h3>
<p>Each forward pass pushes the largest element to the right. Each backward pass pushes the smallest element to the left.</p>
<p>After each full cycle, the sorted region expands from both ends. The algorithm stops when no swaps occur (sorted).</p>
<p>Total operations depend on number of inversions: <span class="math display">\[
O(n^2) \text{ worst}, \quad O(n) \text{ best (sorted input)}
\]</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Case</th>
<th>Behavior</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Sorted</td>
<td>One bidirectional scan</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Random</td>
<td>Many swaps</td>
<td>O(n²)</td>
</tr>
<tr class="odd">
<td>Reverse</td>
<td>Max passes</td>
<td>O(n²)</td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-43" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-43">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[4,3,1,2]</code> manually step by step.</li>
<li>Try <code>[1,2,3,4]</code>, should stop early.</li>
<li>Try <code>[5,4,3,2,1]</code>, observe shaking effect.</li>
<li>Count swaps each pass.</li>
<li>Compare passes with Bubble Sort.</li>
<li>Visualize forward/backward movement.</li>
<li>Add “swap counter” variable.</li>
<li>Test duplicates <code>[3,1,3,2,1]</code>.</li>
<li>Measure performance on nearly sorted data.</li>
<li>Modify shrink window size.</li>
</ol>
</section>
<section id="test-cases-43" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-43">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[4,3,1,2]</td>
<td>[1,2,3,4]</td>
<td>Basic</td>
</tr>
<tr class="even">
<td>[1,2,3,4]</td>
<td>[1,2,3,4]</td>
<td>Already sorted</td>
</tr>
<tr class="odd">
<td>[5,4,3,2,1]</td>
<td>[1,2,3,4,5]</td>
<td>Reverse</td>
</tr>
<tr class="even">
<td>[3,1,3,2,1]</td>
<td>[1,1,2,3,3]</td>
<td>Duplicates</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-43" class="level3">
<h3 class="anchored" data-anchor-id="complexity-43">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n²)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Cocktail Sort is the sorter that doesn’t just bubble, it <em>shakes</em> the data into order, making sure both ends get attention every round.</p>
</section>
<section id="pancake-sort" class="level3">
<h3 class="anchored" data-anchor-id="pancake-sort">145 Pancake Sort</h3>
<p>Pancake Sort is a whimsical and educational sorting algorithm inspired by flipping pancakes on a plate, at each step, you bring the largest unsorted pancake to the top, then flip the stack to move it to its correct position.</p>
<p>It’s not practical for large datasets, but it’s a brilliant way to illustrate prefix reversals, maximum selection, and in-place transformations.</p>
</section>
<section id="what-problem-are-we-solving-44" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-44">What Problem Are We Solving?</h3>
<p>Standard selection sort swaps elements pairwise. Pancake Sort instead uses prefix reversals, flipping a whole section of the array, to move the largest item into place.</p>
<p>It’s a thought experiment in restricted operations: What if the only thing you could do is <em>flip</em>?</p>
<section id="example-44" class="level4">
<h4 class="anchored" data-anchor-id="example-44">Example</h4>
<p>Sort <code>[3, 6, 1, 5, 2, 4]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Find max (6) → index 1, flip first 2</td>
<td>[6, 3, 1, 5, 2, 4]</td>
</tr>
<tr class="even">
<td>2</td>
<td>Flip first 6</td>
<td>[4, 2, 5, 1, 3, 6]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Find max (5) → index 2, flip first 3</td>
<td>[5, 2, 4, 1, 3, 6]</td>
</tr>
<tr class="even">
<td>4</td>
<td>Flip first 5</td>
<td>[3, 1, 4, 2, 5, 6]</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Repeat for smaller prefixes</td>
<td>[1, 2, 3, 4, 5, 6]</td>
</tr>
</tbody>
</table>
<p>Sorted using flips only!</p>
</section>
</section>
<section id="how-does-it-work-plain-language-44" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-44">How Does It Work (Plain Language)?</h3>
<p>Imagine flipping a stack of pancakes:</p>
<ol type="1">
<li>Find the biggest one not yet placed.</li>
<li>Flip the stack to bring it to the top.</li>
<li>Flip again to move it into its final position.</li>
</ol>
<p>Repeat, each time excluding the sorted top portion.</p>
<section id="step-by-step-process-43" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-43">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Find index of largest unsorted element</td>
</tr>
<tr class="even">
<td>2</td>
<td>Flip subarray from start to that index</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Flip entire unsorted subarray to move it to end</td>
</tr>
<tr class="even">
<td>4</td>
<td>Reduce unsorted portion by one</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Repeat until sorted</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-43" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-43">Tiny Code (Easy Versions)</h3>
<section id="python-31" class="level4">
<h4 class="anchored" data-anchor-id="python-31">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb108"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> flip(arr, k):</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>    arr[:k<span class="op">+</span><span class="dv">1</span>] <span class="op">=</span> <span class="bu">reversed</span>(arr[:k<span class="op">+</span><span class="dv">1</span>])</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> pancake_sort(arr):</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> curr_size <span class="kw">in</span> <span class="bu">range</span>(n, <span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>        max_idx <span class="op">=</span> arr.index(<span class="bu">max</span>(arr[:curr_size]))</span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> max_idx <span class="op">!=</span> curr_size <span class="op">-</span> <span class="dv">1</span>:</span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a>            flip(arr, max_idx)</span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a>            flip(arr, curr_size <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr</span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-13"><a href="#cb108-13" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">4</span>]</span>
<span id="cb108-14"><a href="#cb108-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pancake_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$1, 2, 3, 4, 5, 6]</code></pre>
</section>
<section id="c-27" class="level4">
<h4 class="anchored" data-anchor-id="c-27">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb110"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> flip<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> k<span class="op">)</span> <span class="op">{</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> start <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>start <span class="op">&lt;</span> k<span class="op">)</span> <span class="op">{</span></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> temp <span class="op">=</span> arr<span class="op">[</span>start<span class="op">];</span></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>start<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>k<span class="op">];</span></span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>k<span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a>        start<span class="op">++;</span></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a>        k<span class="op">--;</span></span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb110-13"><a href="#cb110-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-14"><a href="#cb110-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> find_max<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb110-15"><a href="#cb110-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max_idx <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb110-16"><a href="#cb110-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb110-17"><a href="#cb110-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>max_idx<span class="op">])</span></span>
<span id="cb110-18"><a href="#cb110-18" aria-hidden="true" tabindex="-1"></a>            max_idx <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb110-19"><a href="#cb110-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max_idx<span class="op">;</span></span>
<span id="cb110-20"><a href="#cb110-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb110-21"><a href="#cb110-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-22"><a href="#cb110-22" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> pancake_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb110-23"><a href="#cb110-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> size <span class="op">=</span> n<span class="op">;</span> size <span class="op">&gt;</span> <span class="dv">1</span><span class="op">;</span> size<span class="op">--)</span> <span class="op">{</span></span>
<span id="cb110-24"><a href="#cb110-24" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> max_idx <span class="op">=</span> find_max<span class="op">(</span>arr<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb110-25"><a href="#cb110-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>max_idx <span class="op">!=</span> size <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb110-26"><a href="#cb110-26" aria-hidden="true" tabindex="-1"></a>            flip<span class="op">(</span>arr<span class="op">,</span> max_idx<span class="op">);</span></span>
<span id="cb110-27"><a href="#cb110-27" aria-hidden="true" tabindex="-1"></a>            flip<span class="op">(</span>arr<span class="op">,</span> size <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb110-28"><a href="#cb110-28" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb110-29"><a href="#cb110-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb110-30"><a href="#cb110-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb110-31"><a href="#cb110-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-32"><a href="#cb110-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb110-33"><a href="#cb110-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">3</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">4</span><span class="op">};</span></span>
<span id="cb110-34"><a href="#cb110-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb110-35"><a href="#cb110-35" aria-hidden="true" tabindex="-1"></a>    pancake_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb110-36"><a href="#cb110-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb110-37"><a href="#cb110-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb110-38"><a href="#cb110-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>1 2 3 4 5 6</code></pre>
</section>
</section>
<section id="why-it-matters-44" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-44">Why It Matters</h3>
<ul>
<li>Fun demonstration of prefix operations</li>
<li>In-place and simple</li>
<li>Shows how restricted operations can still sort</li>
<li>Theoretical interest, base for pancake networks</li>
<li>Used in bioinformatics (genome rearrangements)</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-44" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-44">A Gentle Proof (Why It Works)</h3>
<p>Each iteration places the largest remaining element at its final index. Two flips per iteration (worst case). At most ( 2(n - 1) ) flips total.</p>
<p>Correctness follows from:</p>
<ul>
<li>Flipping is a reversal, which preserves order except within flipped segment.</li>
<li>Each largest element is locked at the end after placement.</li>
</ul>
<p><span class="math display">\[
T(n) = O(n^2)
\]</span> because each <code>max()</code> and <code>flip()</code> operation is O(n).</p>
</section>
<section id="try-it-yourself-44" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-44">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[3,6,1,5,2,4]</code> manually.</li>
<li>Trace each flip visually.</li>
<li>Try <code>[1,2,3,4]</code>, no flips needed.</li>
<li>Reverse <code>[4,3,2,1]</code>, observe maximum flips.</li>
<li>Count flips per iteration.</li>
<li>Implement flip visualization.</li>
<li>Replace <code>max()</code> with manual search.</li>
<li>Print intermediate arrays.</li>
<li>Analyze flip count for random input.</li>
<li>Challenge: implement recursive version.</li>
</ol>
</section>
<section id="test-cases-44" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-44">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Flips</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3,6,1,5,2,4]</td>
<td>[1,2,3,4,5,6]</td>
<td>8</td>
<td>Classic</td>
</tr>
<tr class="even">
<td>[1,2,3,4]</td>
<td>[1,2,3,4]</td>
<td>0</td>
<td>Already sorted</td>
</tr>
<tr class="odd">
<td>[4,3,2,1]</td>
<td>[1,2,3,4]</td>
<td>6</td>
<td>Worst case</td>
</tr>
<tr class="even">
<td>[2,1,3]</td>
<td>[1,2,3]</td>
<td>3</td>
<td>Small array</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-44" class="level3">
<h3 class="anchored" data-anchor-id="complexity-44">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="even">
<td>Time (Average)</td>
<td>O(n²)</td>
</tr>
<tr class="odd">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Pancake Sort flips its way to victory, a charming example of ingenuity under constraint. You don’t need fancy tools, just a good spatula and some patience.</p>
</section>
<section id="bitonic-sort" class="level3">
<h3 class="anchored" data-anchor-id="bitonic-sort">146 Bitonic Sort</h3>
<p>Bitonic Sort is a parallel sorting algorithm designed for sorting networks. It works by constructing and merging bitonic sequences, sequences that first increase, then decrease (or vice versa).</p>
<p>It’s especially powerful on hardware, GPUs, and parallel processors, where multiple comparisons can happen at once.</p>
</section>
<section id="what-problem-are-we-solving-45" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-45">What Problem Are We Solving?</h3>
<p>Most standard algorithms (QuickSort, MergeSort) are data-dependent, their flow changes depending on comparisons. That’s a problem for hardware or parallel systems.</p>
<p>Bitonic Sort fixes this by having a fixed comparison pattern, perfect for parallel execution.</p>
<p>It answers the question:</p>
<blockquote class="blockquote">
<p>“How do we sort in parallel using predictable, fixed circuits?”</p>
</blockquote>
<section id="example-45" class="level4">
<h4 class="anchored" data-anchor-id="example-45">Example</h4>
<p>Sort <code>[3, 7, 4, 8, 6, 2, 1, 5]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Build bitonic sequence ↑↓</td>
<td>[3,7,4,8, 6,2,1,5]</td>
</tr>
<tr class="even">
<td>2</td>
<td>Compare &amp; swap pairs</td>
<td>[3,2,1,5, 6,7,4,8]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Merge halves recursively</td>
<td>[1,2,3,4, 5,6,7,8]</td>
</tr>
</tbody>
</table>
<p>Each phase doubles sorted subsequences until the full array is sorted.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-45" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-45">How Does It Work (Plain Language)?</h3>
<p>Imagine you’re sorting cards but you can only compare pairs at fixed positions, no adaptive decisions.</p>
<p>You first build a bitonic sequence (up then down), then merge it into a sorted list using bitonic merge steps, repeatedly compare-and-swap mirrored elements.</p>
<section id="step-by-step-process-44" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-44">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Split array into halves</td>
</tr>
<tr class="even">
<td>2</td>
<td>Sort first half ascending, second half descending</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Combine them into a bitonic sequence</td>
</tr>
<tr class="even">
<td>4</td>
<td>Run bitonic merge: recursively compare-swap pairs</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Repeat until sequence size = 1</td>
</tr>
</tbody>
</table>
<p>Works best when n = 2^k (power of two).</p>
</section>
</section>
<section id="tiny-code-easy-versions-44" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-44">Tiny Code (Easy Versions)</h3>
<section id="python-32" class="level4">
<h4 class="anchored" data-anchor-id="python-32">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb112"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bitonic_merge(arr, low, cnt, direction):</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> cnt <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>        k <span class="op">=</span> cnt <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(low, low <span class="op">+</span> k):</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (direction <span class="kw">and</span> arr[i] <span class="op">&gt;</span> arr[i <span class="op">+</span> k]) <span class="kw">or</span> (<span class="kw">not</span> direction <span class="kw">and</span> arr[i] <span class="op">&lt;</span> arr[i <span class="op">+</span> k]):</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>                arr[i], arr[i <span class="op">+</span> k] <span class="op">=</span> arr[i <span class="op">+</span> k], arr[i]</span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>        bitonic_merge(arr, low, k, direction)</span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>        bitonic_merge(arr, low <span class="op">+</span> k, k, direction)</span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bitonic_sort(arr, low<span class="op">=</span><span class="dv">0</span>, cnt<span class="op">=</span><span class="va">None</span>, direction<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> cnt <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb112-12"><a href="#cb112-12" aria-hidden="true" tabindex="-1"></a>        cnt <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb112-13"><a href="#cb112-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> cnt <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb112-14"><a href="#cb112-14" aria-hidden="true" tabindex="-1"></a>        k <span class="op">=</span> cnt <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb112-15"><a href="#cb112-15" aria-hidden="true" tabindex="-1"></a>        bitonic_sort(arr, low, k, <span class="va">True</span>)</span>
<span id="cb112-16"><a href="#cb112-16" aria-hidden="true" tabindex="-1"></a>        bitonic_sort(arr, low <span class="op">+</span> k, k, <span class="va">False</span>)</span>
<span id="cb112-17"><a href="#cb112-17" aria-hidden="true" tabindex="-1"></a>        bitonic_merge(arr, low, cnt, direction)</span>
<span id="cb112-18"><a href="#cb112-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-19"><a href="#cb112-19" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">6</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">5</span>]</span>
<span id="cb112-20"><a href="#cb112-20" aria-hidden="true" tabindex="-1"></a>bitonic_sort(arr)</span>
<span id="cb112-21"><a href="#cb112-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$1, 2, 3, 4, 5, 6, 7, 8]</code></pre>
</section>
<section id="c-28" class="level4">
<h4 class="anchored" data-anchor-id="c-28">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb114"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> t <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span> <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span> <span class="op">*</span>b <span class="op">=</span> t<span class="op">;</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> bitonic_merge<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> cnt<span class="op">,</span> <span class="dt">int</span> dir<span class="op">)</span> <span class="op">{</span></span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>cnt <span class="op">&gt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> k <span class="op">=</span> cnt <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb114-10"><a href="#cb114-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> low<span class="op">;</span> i <span class="op">&lt;</span> low <span class="op">+</span> k<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb114-11"><a href="#cb114-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">((</span>dir <span class="op">&amp;&amp;</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>i <span class="op">+</span> k<span class="op">])</span> <span class="op">||</span> <span class="op">(!</span>dir <span class="op">&amp;&amp;</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> arr<span class="op">[</span>i <span class="op">+</span> k<span class="op">]))</span></span>
<span id="cb114-12"><a href="#cb114-12" aria-hidden="true" tabindex="-1"></a>                swap<span class="op">(&amp;</span>arr<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>arr<span class="op">[</span>i <span class="op">+</span> k<span class="op">]);</span></span>
<span id="cb114-13"><a href="#cb114-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb114-14"><a href="#cb114-14" aria-hidden="true" tabindex="-1"></a>        bitonic_merge<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> k<span class="op">,</span> dir<span class="op">);</span></span>
<span id="cb114-15"><a href="#cb114-15" aria-hidden="true" tabindex="-1"></a>        bitonic_merge<span class="op">(</span>arr<span class="op">,</span> low <span class="op">+</span> k<span class="op">,</span> k<span class="op">,</span> dir<span class="op">);</span></span>
<span id="cb114-16"><a href="#cb114-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb114-17"><a href="#cb114-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb114-18"><a href="#cb114-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-19"><a href="#cb114-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> bitonic_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> cnt<span class="op">,</span> <span class="dt">int</span> dir<span class="op">)</span> <span class="op">{</span></span>
<span id="cb114-20"><a href="#cb114-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>cnt <span class="op">&gt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb114-21"><a href="#cb114-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> k <span class="op">=</span> cnt <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb114-22"><a href="#cb114-22" aria-hidden="true" tabindex="-1"></a>        bitonic_sort<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> k<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb114-23"><a href="#cb114-23" aria-hidden="true" tabindex="-1"></a>        bitonic_sort<span class="op">(</span>arr<span class="op">,</span> low <span class="op">+</span> k<span class="op">,</span> k<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb114-24"><a href="#cb114-24" aria-hidden="true" tabindex="-1"></a>        bitonic_merge<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> cnt<span class="op">,</span> dir<span class="op">);</span></span>
<span id="cb114-25"><a href="#cb114-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb114-26"><a href="#cb114-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb114-27"><a href="#cb114-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-28"><a href="#cb114-28" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb114-29"><a href="#cb114-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">3</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb114-30"><a href="#cb114-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb114-31"><a href="#cb114-31" aria-hidden="true" tabindex="-1"></a>    bitonic_sort<span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb114-32"><a href="#cb114-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb114-33"><a href="#cb114-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb114-34"><a href="#cb114-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>1 2 3 4 5 6 7 8</code></pre>
</section>
</section>
<section id="why-it-matters-45" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-45">Why It Matters</h3>
<ul>
<li>Parallel-friendly (sorting networks)</li>
<li>Deterministic structure (no branches)</li>
<li>Perfect for hardware, GPUs, SIMD</li>
<li>Good educational model for divide and conquer + merging</li>
</ul>
<p>It’s not about runtime on CPUs, it’s about parallel depth.</p>
</section>
<section id="a-gentle-proof-why-it-works-45" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-45">A Gentle Proof (Why It Works)</h3>
<p><strong>Bitonic sequence:</strong><br>
A sequence that increases then decreases is bitonic.</p>
<p><strong>Merging rule:</strong><br>
Compare each element with its mirror; recursively merge halves.</p>
<p>At each merge stage, the array becomes more sorted.<br>
Recursion depth = <span class="math inline">\(\log n\)</span>, each level does <span class="math inline">\(O(n)\)</span> work → <span class="math inline">\(O(n \log^2 n)\)</span>.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Work</th>
<th>Levels</th>
<th>Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Merge</td>
<td><span class="math inline">\(O(n)\)</span></td>
<td><span class="math inline">\(\log n\)</span></td>
<td><span class="math inline">\(O(n \log^2 n)\)</span></td>
</tr>
</tbody>
</table>
</section>
<section id="try-it-yourself-45" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-45">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[3,7,4,8,6,2,1,5]</code> manually.</li>
<li>Identify bitonic sequences at each stage.</li>
<li>Try with 4 elements <code>[4,1,3,2]</code>.</li>
<li>Change direction flags (ascending/descending).</li>
<li>Draw comparison network graph.</li>
<li>Implement iterative version.</li>
<li>Run on power-of-two sizes.</li>
<li>Measure parallel steps vs QuickSort.</li>
<li>Experiment with GPU (Numba/CUDA).</li>
<li>Visualize recursive structure.</li>
</ol>
</section>
<section id="test-cases-45" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-45">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3,7,4,8,6,2,1,5]</td>
<td>[1,2,3,4,5,6,7,8]</td>
<td>Standard</td>
</tr>
<tr class="even">
<td>[4,1,3,2]</td>
<td>[1,2,3,4]</td>
<td>Small case</td>
</tr>
<tr class="odd">
<td>[5,4,3,2,1,0,9,8]</td>
<td>[0,1,2,3,4,5,8,9]</td>
<td>Reverse</td>
</tr>
<tr class="even">
<td>[8,4,2,1,3,6,5,7]</td>
<td>[1,2,3,4,5,6,7,8]</td>
<td>Random</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-45" class="level3">
<h3 class="anchored" data-anchor-id="complexity-45">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(n log² n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Parallel Depth</td>
<td>O(log² n)</td>
</tr>
</tbody>
</table>
<p>Bitonic Sort shines where parallelism rules, in GPUs, circuits, and sorting networks. Every comparison is planned, every move synchronized, a symphony of order in fixed rhythm.</p>
</section>
<section id="odd-even-merge-sort" class="level3">
<h3 class="anchored" data-anchor-id="odd-even-merge-sort">147 Odd-Even Merge Sort</h3>
<p>Odd-Even Merge Sort is a parallel sorting algorithm and a sorting network that merges two sorted sequences using a fixed pattern of comparisons between odd and even indexed elements.</p>
<p>It was introduced by Ken Batcher, and like Bitonic Sort, it’s designed for parallel hardware or SIMD processors, where predictable comparison patterns matter more than data-dependent branching.</p>
</section>
<section id="what-problem-are-we-solving-46" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-46">What Problem Are We Solving?</h3>
<p>Traditional merge algorithms rely on conditional branching, they decide at runtime which element to pick next. This is problematic in parallel or hardware implementations, where you need fixed, predictable sequences of comparisons.</p>
<p>Odd-Even Merge Sort solves this by using a static comparison network that merges sorted halves without branching.</p>
<p>It’s perfect when:</p>
<ul>
<li>You need deterministic behavior</li>
<li>You’re building parallel circuits or GPU kernels</li>
</ul>
<section id="example-46" class="level4">
<h4 class="anchored" data-anchor-id="example-46">Example</h4>
<p>Merge two sorted halves: <code>[1, 4, 7, 8]</code> and <code>[2, 3, 5, 6]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Merge odds <code>[1,7]</code> with <code>[2,5]</code></td>
<td>[1,2,5,7]</td>
</tr>
<tr class="even">
<td>2</td>
<td>Merge evens <code>[4,8]</code> with <code>[3,6]</code></td>
<td>[3,4,6,8]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Combine and compare adjacent</td>
<td>[1,2,3,4,5,6,7,8]</td>
</tr>
</tbody>
</table>
<p>Fixed pattern, no branching, merges completed in parallel.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-46" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-46">How Does It Work (Plain Language)?</h3>
<p>Imagine two zipper chains, one odd, one even. You weave them together in a fixed, interlocking pattern, comparing and swapping along the way. There’s no guessing, every element knows which neighbor to check.</p>
<section id="step-by-step-process-45" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-45">Step-by-Step Process</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 56%">
<col style="width: 43%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Split array into left and right halves</td>
</tr>
<tr class="even">
<td>2</td>
<td>Recursively sort each half</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Use odd-even merge to combine halves</td>
</tr>
<tr class="even">
<td>4</td>
<td>Odd-even merge:</td>
</tr>
<tr class="odd">
<td>  a. Recursively merge odd and even indexed elements</td>
<td></td>
</tr>
<tr class="even">
<td>  b. Compare and swap adjacent pairs</td>
<td></td>
</tr>
<tr class="odd">
<td>5</td>
<td>Continue until array sorted</td>
</tr>
</tbody>
</table>
<p>Works best when ( n = 2^k ).</p>
</section>
</section>
<section id="tiny-code-easy-versions-45" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-45">Tiny Code (Easy Versions)</h3>
<section id="python-33" class="level4">
<h4 class="anchored" data-anchor-id="python-33">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb116"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> odd_even_merge(arr, lo, n, direction):</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> n <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>        m <span class="op">=</span> n <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>        odd_even_merge(arr, lo, m, direction)</span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>        odd_even_merge(arr, lo <span class="op">+</span> m, m, direction)</span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(lo <span class="op">+</span> m, lo <span class="op">+</span> n <span class="op">-</span> m):</span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (arr[i] <span class="op">&gt;</span> arr[i <span class="op">+</span> m]) <span class="op">==</span> direction:</span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a>                arr[i], arr[i <span class="op">+</span> m] <span class="op">=</span> arr[i <span class="op">+</span> m], arr[i]</span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> odd_even_merge_sort(arr, lo<span class="op">=</span><span class="dv">0</span>, n<span class="op">=</span><span class="va">None</span>, direction<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> n <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb116-12"><a href="#cb116-12" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb116-13"><a href="#cb116-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> n <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb116-14"><a href="#cb116-14" aria-hidden="true" tabindex="-1"></a>        m <span class="op">=</span> n <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb116-15"><a href="#cb116-15" aria-hidden="true" tabindex="-1"></a>        odd_even_merge_sort(arr, lo, m, direction)</span>
<span id="cb116-16"><a href="#cb116-16" aria-hidden="true" tabindex="-1"></a>        odd_even_merge_sort(arr, lo <span class="op">+</span> m, m, direction)</span>
<span id="cb116-17"><a href="#cb116-17" aria-hidden="true" tabindex="-1"></a>        odd_even_merge(arr, lo, n, direction)</span>
<span id="cb116-18"><a href="#cb116-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-19"><a href="#cb116-19" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">1</span>]</span>
<span id="cb116-20"><a href="#cb116-20" aria-hidden="true" tabindex="-1"></a>odd_even_merge_sort(arr)</span>
<span id="cb116-21"><a href="#cb116-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$1, 2, 3, 4, 5, 6, 7, 8]</code></pre>
</section>
<section id="c-29" class="level4">
<h4 class="anchored" data-anchor-id="c-29">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb118"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> t <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span> <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span> <span class="op">*</span>b <span class="op">=</span> t<span class="op">;</span></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> odd_even_merge<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> lo<span class="op">,</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> dir<span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> m <span class="op">=</span> n <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a>        odd_even_merge<span class="op">(</span>arr<span class="op">,</span> lo<span class="op">,</span> m<span class="op">,</span> dir<span class="op">);</span></span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a>        odd_even_merge<span class="op">(</span>arr<span class="op">,</span> lo <span class="op">+</span> m<span class="op">,</span> m<span class="op">,</span> dir<span class="op">);</span></span>
<span id="cb118-12"><a href="#cb118-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> lo <span class="op">+</span> m<span class="op">;</span> i <span class="op">&lt;</span> lo <span class="op">+</span> n <span class="op">-</span> m<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb118-13"><a href="#cb118-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">((</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>i <span class="op">+</span> m<span class="op">])</span> <span class="op">==</span> dir<span class="op">)</span></span>
<span id="cb118-14"><a href="#cb118-14" aria-hidden="true" tabindex="-1"></a>                swap<span class="op">(&amp;</span>arr<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>arr<span class="op">[</span>i <span class="op">+</span> m<span class="op">]);</span></span>
<span id="cb118-15"><a href="#cb118-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb118-16"><a href="#cb118-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb118-17"><a href="#cb118-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb118-18"><a href="#cb118-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-19"><a href="#cb118-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> odd_even_merge_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> lo<span class="op">,</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> dir<span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-20"><a href="#cb118-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-21"><a href="#cb118-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> m <span class="op">=</span> n <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb118-22"><a href="#cb118-22" aria-hidden="true" tabindex="-1"></a>        odd_even_merge_sort<span class="op">(</span>arr<span class="op">,</span> lo<span class="op">,</span> m<span class="op">,</span> dir<span class="op">);</span></span>
<span id="cb118-23"><a href="#cb118-23" aria-hidden="true" tabindex="-1"></a>        odd_even_merge_sort<span class="op">(</span>arr<span class="op">,</span> lo <span class="op">+</span> m<span class="op">,</span> m<span class="op">,</span> dir<span class="op">);</span></span>
<span id="cb118-24"><a href="#cb118-24" aria-hidden="true" tabindex="-1"></a>        odd_even_merge<span class="op">(</span>arr<span class="op">,</span> lo<span class="op">,</span> n<span class="op">,</span> dir<span class="op">);</span></span>
<span id="cb118-25"><a href="#cb118-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb118-26"><a href="#cb118-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb118-27"><a href="#cb118-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-28"><a href="#cb118-28" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-29"><a href="#cb118-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">8</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">1</span><span class="op">};</span></span>
<span id="cb118-30"><a href="#cb118-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb118-31"><a href="#cb118-31" aria-hidden="true" tabindex="-1"></a>    odd_even_merge_sort<span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb118-32"><a href="#cb118-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb118-33"><a href="#cb118-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb118-34"><a href="#cb118-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>1 2 3 4 5 6 7 8</code></pre>
</section>
</section>
<section id="why-it-matters-46" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-46">Why It Matters</h3>
<ul>
<li>Fixed sequence, perfect for parallelism</li>
<li>No data-dependent branching</li>
<li>Used in hardware sorting networks</li>
<li>Theoretical foundation for parallel sorting</li>
</ul>
<p>When you need determinism and concurrency, this algorithm shines.</p>
</section>
<section id="a-gentle-proof-why-it-works-46" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-46">A Gentle Proof (Why It Works)</h3>
<p>Each odd-even merge merges two sorted sequences using fixed compare-swap operations. At each stage:</p>
<ul>
<li>Odd indices are merged separately</li>
<li>Even indices merged separately</li>
<li>Adjacent elements compared to restore global order</li>
</ul>
<p>Each level performs O(n) work, depth = O(log² n) → total complexity: <span class="math display">\[
T(n) = O(n \log^2 n)
\]</span></p>
</section>
<section id="try-it-yourself-46" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-46">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[8,3,2,7,4,6,5,1]</code> step by step.</li>
<li>Trace odd-index and even-index merges.</li>
<li>Draw merge network diagram.</li>
<li>Try smaller <code>[4,3,2,1]</code> for clarity.</li>
<li>Run on power-of-two lengths.</li>
<li>Measure comparisons.</li>
<li>Compare with Bitonic Sort.</li>
<li>Implement iterative version.</li>
<li>Visualize parallel depth.</li>
<li>Experiment with ascending/descending flags.</li>
</ol>
</section>
<section id="test-cases-46" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-46">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[8,3,2,7,4,6,5,1]</td>
<td>[1,2,3,4,5,6,7,8]</td>
<td>Classic</td>
</tr>
<tr class="even">
<td>[4,3,2,1]</td>
<td>[1,2,3,4]</td>
<td>Small</td>
</tr>
<tr class="odd">
<td>[9,7,5,3,1,2,4,6]</td>
<td>[1,2,3,4,5,6,7,9]</td>
<td>Mixed</td>
</tr>
<tr class="even">
<td>[5,4,3,2]</td>
<td>[2,3,4,5]</td>
<td>Reverse half</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-46" class="level3">
<h3 class="anchored" data-anchor-id="complexity-46">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(n log² n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Parallel Depth</td>
<td>O(log² n)</td>
</tr>
</tbody>
</table>
<p>Odd-Even Merge Sort weaves order from two halves like clockwork, steady, parallel, and predictable. Every comparison is planned, every merge synchronized, it’s sorting as architecture.</p>
</section>
<section id="sleep-sort" class="level3">
<h3 class="anchored" data-anchor-id="sleep-sort">148 Sleep Sort</h3>
<p>Sleep Sort is one of the most playful and unconventional algorithms ever invented, it sorts numbers by leveraging time delays. Each element is “slept” for a duration proportional to its value, and when the sleep ends, it prints the number.</p>
<p>In effect, time itself becomes the sorting mechanism.</p>
</section>
<section id="what-problem-are-we-solving-47" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-47">What Problem Are We Solving?</h3>
<p>While not practical, Sleep Sort offers a fun demonstration of parallelism and asynchronous timing, showing that even sorting can be expressed through temporal order rather than comparisons.</p>
<p>It’s often used as a thought experiment to teach concurrency, timing, and creative thinking about problem-solving.</p>
<section id="example-47" class="level4">
<h4 class="anchored" data-anchor-id="example-47">Example</h4>
<p>Sort <code>[3, 1, 4, 2]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Value</th>
<th>Sleep (seconds)</th>
<th>Print order</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>1s</td>
<td>1</td>
</tr>
<tr class="even">
<td>2</td>
<td>2</td>
<td>2s</td>
<td>2</td>
</tr>
<tr class="odd">
<td>3</td>
<td>3</td>
<td>3s</td>
<td>3</td>
</tr>
<tr class="even">
<td>4</td>
<td>4</td>
<td>4s</td>
<td>4</td>
</tr>
</tbody>
</table>
<p>Output (over time): <code>1 2 3 4</code></p>
<p>Sorted by time of completion!</p>
</section>
</section>
<section id="how-does-it-work-plain-language-47" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-47">How Does It Work (Plain Language)?</h3>
<p>Each number is given a timer equal to its value. All timers start simultaneously, and when a timer finishes, that number is output. Small numbers “wake up” first, so they’re printed earlier, creating a sorted sequence.</p>
<p>It’s like a race where each runner’s speed is inversely proportional to its size, smaller ones finish first.</p>
<section id="step-by-step-process-46" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-46">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>For each element <code>x</code>, create a thread or coroutine</td>
</tr>
<tr class="even">
<td>2</td>
<td>Each thread sleeps for <code>x</code> units of time</td>
</tr>
<tr class="odd">
<td>3</td>
<td>When sleep completes, print <code>x</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>Numbers appear in sorted order</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Optionally collect outputs into a list</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-46" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-46">Tiny Code (Easy Versions)</h3>
<section id="python-using-threads" class="level4">
<h4 class="anchored" data-anchor-id="python-using-threads">Python (Using Threads)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb120"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> threading</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sleeper(x):</span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>    time.sleep(x <span class="op">*</span> <span class="fl">0.1</span>)  <span class="co"># scale factor for speed</span></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x, end<span class="op">=</span><span class="st">' '</span>)</span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sleep_sort(arr):</span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a>    threads <span class="op">=</span> []</span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> x <span class="kw">in</span> arr:</span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> threading.Thread(target<span class="op">=</span>sleeper, args<span class="op">=</span>(x,))</span>
<span id="cb120-12"><a href="#cb120-12" aria-hidden="true" tabindex="-1"></a>        t.start()</span>
<span id="cb120-13"><a href="#cb120-13" aria-hidden="true" tabindex="-1"></a>        threads.append(t)</span>
<span id="cb120-14"><a href="#cb120-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> t <span class="kw">in</span> threads:</span>
<span id="cb120-15"><a href="#cb120-15" aria-hidden="true" tabindex="-1"></a>        t.join()</span>
<span id="cb120-16"><a href="#cb120-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-17"><a href="#cb120-17" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>]</span>
<span id="cb120-18"><a href="#cb120-18" aria-hidden="true" tabindex="-1"></a>sleep_sort(arr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output (timed):</p>
<pre><code>1 2 3 4</code></pre>
</section>
<section id="c-using-threads-and-sleep" class="level4">
<h4 class="anchored" data-anchor-id="c-using-threads-and-sleep">C (Using Threads and Sleep)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb122"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;pthread.h&gt;</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;unistd.h&gt;</span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span><span class="op">*</span> sleeper<span class="op">(</span><span class="dt">void</span><span class="op">*</span> arg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="op">*(</span><span class="dt">int</span><span class="op">*)</span>arg<span class="op">;</span></span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a>    usleep<span class="op">(</span>x <span class="op">*</span> <span class="dv">100000</span><span class="op">);</span> <span class="co">// scaled down</span></span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> x<span class="op">);</span></span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> sleep_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-14"><a href="#cb122-14" aria-hidden="true" tabindex="-1"></a>    pthread_t threads<span class="op">[</span>n<span class="op">];</span></span>
<span id="cb122-15"><a href="#cb122-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb122-16"><a href="#cb122-16" aria-hidden="true" tabindex="-1"></a>        pthread_create<span class="op">(&amp;</span>threads<span class="op">[</span>i<span class="op">],</span> NULL<span class="op">,</span> sleeper<span class="op">,</span> <span class="op">&amp;</span>arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb122-17"><a href="#cb122-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb122-18"><a href="#cb122-18" aria-hidden="true" tabindex="-1"></a>        pthread_join<span class="op">(</span>threads<span class="op">[</span>i<span class="op">],</span> NULL<span class="op">);</span></span>
<span id="cb122-19"><a href="#cb122-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb122-20"><a href="#cb122-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-21"><a href="#cb122-21" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-22"><a href="#cb122-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">3</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb122-23"><a href="#cb122-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb122-24"><a href="#cb122-24" aria-hidden="true" tabindex="-1"></a>    sleep_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb122-25"><a href="#cb122-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb122-26"><a href="#cb122-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output (timed):</p>
<pre><code>1 2 3 4</code></pre>
</section>
</section>
<section id="why-it-matters-47" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-47">Why It Matters</h3>
<ul>
<li>Creative demonstration of parallelism</li>
<li>Fun teaching tool for concurrency</li>
<li>Visually intuitive, sorting emerges naturally</li>
<li>Great reminder: algorithms ≠ just code, they’re processes</li>
</ul>
<p>It’s impractical, but delightfully educational.</p>
</section>
<section id="a-gentle-proof-why-it-works-47" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-47">A Gentle Proof (Why It Works)</h3>
<p>If all threads start simultaneously and sleep proportionally to their values, then:</p>
<ul>
<li>Smaller values finish earlier</li>
<li>No collisions (if distinct integers)</li>
<li>Output sequence = sorted list</li>
</ul>
<p>For duplicates, slight offsets may be added to maintain stability.</p>
<p>Limitations:</p>
<ul>
<li>Requires positive integers</li>
<li>Depends on accurate timers</li>
<li>Sensitive to scheduler latency</li>
</ul>
</section>
<section id="try-it-yourself-47" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-47">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[3,1,4,2]</code>, observe timing.</li>
<li>Try <code>[10,5,1,2]</code>, slower but clearer pattern.</li>
<li>Add duplicates <code>[2,2,1]</code>, test ordering.</li>
<li>Scale sleep time down (<code>x * 0.05</code>).</li>
<li>Run on multi-core CPU, observe concurrency.</li>
<li>Replace sleep with <code>await asyncio.sleep(x)</code> for async version.</li>
<li>Collect results in a list instead of print.</li>
<li>Use <code>multiprocessing</code> instead of threads.</li>
<li>Visualize time vs value graph.</li>
<li>Try fractional delays for floats.</li>
</ol>
</section>
<section id="test-cases-47" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-47">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3,1,4,2]</td>
<td>[1,2,3,4]</td>
<td>Classic example</td>
</tr>
<tr class="even">
<td>[1,2,3,4]</td>
<td>[1,2,3,4]</td>
<td>Already sorted</td>
</tr>
<tr class="odd">
<td>[4,3,2,1]</td>
<td>[1,2,3,4]</td>
<td>Reversed</td>
</tr>
<tr class="even">
<td>[2,2,1]</td>
<td>[1,2,2]</td>
<td>Handles duplicates</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-47" class="level3">
<h3 class="anchored" data-anchor-id="complexity-47">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Theoretical)</td>
<td>O(n) real-time (wall-clock)</td>
</tr>
<tr class="even">
<td>Time (CPU Work)</td>
<td>O(n) setup</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(n) threads</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>Yes (with offset)</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Sleep Sort is sorting reimagined, not by computation, but by patience. Every number simply waits its turn, no comparisons, no loops, just time.</p>
</section>
<section id="bead-sort" class="level3">
<h3 class="anchored" data-anchor-id="bead-sort">149 Bead Sort</h3>
<p>Bead Sort, also known as Gravity Sort, is a natural sorting algorithm inspired by how beads slide under gravity on parallel rods. Imagine an abacus turned on its side: heavier piles settle first, automatically sorting themselves.</p>
<p>It’s visual, parallel, and analog in spirit, more of a conceptual model than a practical tool, but brilliant for intuition.</p>
</section>
<section id="what-problem-are-we-solving-48" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-48">What Problem Are We Solving?</h3>
<p>Sorting algorithms usually rely on comparisons. Bead Sort instead uses physical simulation, items fall until they settle into order.</p>
<p>This approach helps visualize distribution sorting and natural computation, where sorting happens through physical laws rather than arithmetic operations.</p>
<section id="example-48" class="level4">
<h4 class="anchored" data-anchor-id="example-48">Example</h4>
<p>Sort <code>[5, 3, 1, 7, 4]</code>:</p>
<ol type="1">
<li>Represent each number as a row of beads.</li>
<li>Drop beads under gravity.</li>
<li>Count beads per column from bottom up.</li>
</ol>
<table class="caption-top table">
<colgroup>
<col style="width: 10%">
<col style="width: 59%">
<col style="width: 21%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Representation</th>
<th>After Gravity</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Initial</td>
<td>5●●●●●<br>3●●●<br>1●<br>7●●●●●●●<br>4●●●●</td>
<td>,</td>
<td>,</td>
</tr>
<tr class="even">
<td>Gravity</td>
<td>Columns fill from bottom</td>
<td>Rows shorten</td>
<td>,</td>
</tr>
<tr class="odd">
<td>Result</td>
<td>1●<br>3●●●<br>4●●●●<br>5●●●●●<br>7●●●●●●●</td>
<td>[1, 3, 4, 5, 7]</td>
<td></td>
</tr>
</tbody>
</table>
<p>The smallest number rises to top, largest sinks to bottom, sorted.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-48" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-48">How Does It Work (Plain Language)?</h3>
<p>Each number is a pile of beads. Beads “fall” downward until no empty space below. Since heavier rows push beads downward faster, larger numbers accumulate at the bottom. When gravity stops, reading row lengths from top to bottom yields sorted order.</p>
<p>It’s sorting by simulated gravity, no comparisons at all.</p>
<section id="step-by-step-process-47" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-47">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Represent each integer by beads on rods (1 bead per unit)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Let beads fall to the lowest empty position in each column</td>
</tr>
<tr class="odd">
<td>3</td>
<td>After settling, count beads per row (top-down)</td>
</tr>
<tr class="even">
<td>4</td>
<td>These counts form the sorted list</td>
</tr>
</tbody>
</table>
<p>Works only for non-negative integers.</p>
</section>
</section>
<section id="tiny-code-easy-versions-47" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-47">Tiny Code (Easy Versions)</h3>
<section id="python-34" class="level4">
<h4 class="anchored" data-anchor-id="python-34">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb124"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bead_sort(arr):</span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">any</span>(x <span class="op">&lt;</span> <span class="dv">0</span> <span class="cf">for</span> x <span class="kw">in</span> arr):</span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"Only non-negative integers allowed"</span>)</span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>    max_val <span class="op">=</span> <span class="bu">max</span>(arr)</span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> [[<span class="dv">1</span> <span class="cf">if</span> i <span class="op">&lt;</span> x <span class="cf">else</span> <span class="dv">0</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(max_val)] <span class="cf">for</span> x <span class="kw">in</span> arr]</span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> <span class="bu">range</span>(max_val):</span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a>        beads <span class="op">=</span> <span class="bu">sum</span>(row[col] <span class="cf">for</span> row <span class="kw">in</span> grid)</span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> row <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(arr)):</span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a>            grid[row][col] <span class="op">=</span> <span class="dv">1</span> <span class="cf">if</span> row <span class="op">&gt;=</span> <span class="bu">len</span>(arr) <span class="op">-</span> beads <span class="cf">else</span> <span class="dv">0</span></span>
<span id="cb124-10"><a href="#cb124-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="bu">sum</span>(row) <span class="cf">for</span> row <span class="kw">in</span> grid]</span>
<span id="cb124-11"><a href="#cb124-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-12"><a href="#cb124-12" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">7</span>, <span class="dv">4</span>]</span>
<span id="cb124-13"><a href="#cb124-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bead_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$1, 3, 4, 5, 7]</code></pre>
</section>
<section id="c-30" class="level4">
<h4 class="anchored" data-anchor-id="c-30">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb126"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> bead_sort<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> max<span class="op">)</span> max <span class="op">=</span> a<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">unsigned</span> <span class="dt">char</span> beads<span class="op">[</span>n<span class="op">][</span>max<span class="op">];</span></span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a>    memset<span class="op">(</span>beads<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">*</span> max<span class="op">);</span></span>
<span id="cb126-9"><a href="#cb126-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb126-10"><a href="#cb126-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> a<span class="op">[</span>i<span class="op">];</span> j<span class="op">++)</span></span>
<span id="cb126-11"><a href="#cb126-11" aria-hidden="true" tabindex="-1"></a>            beads<span class="op">[</span>i<span class="op">][</span>j<span class="op">]</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb126-12"><a href="#cb126-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-13"><a href="#cb126-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> max<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb126-14"><a href="#cb126-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb126-15"><a href="#cb126-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> sum <span class="op">+=</span> beads<span class="op">[</span>i<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb126-16"><a href="#cb126-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb126-17"><a href="#cb126-17" aria-hidden="true" tabindex="-1"></a>            beads<span class="op">[</span>i<span class="op">][</span>j<span class="op">]</span> <span class="op">=</span> <span class="op">(</span>i <span class="op">&gt;=</span> n <span class="op">-</span> sum<span class="op">)</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb126-18"><a href="#cb126-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb126-19"><a href="#cb126-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-20"><a href="#cb126-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb126-21"><a href="#cb126-21" aria-hidden="true" tabindex="-1"></a>        a<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb126-22"><a href="#cb126-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> max<span class="op">;</span> j<span class="op">++)</span></span>
<span id="cb126-23"><a href="#cb126-23" aria-hidden="true" tabindex="-1"></a>            a<span class="op">[</span>i<span class="op">]</span> <span class="op">+=</span> beads<span class="op">[</span>i<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb126-24"><a href="#cb126-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb126-25"><a href="#cb126-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb126-26"><a href="#cb126-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-27"><a href="#cb126-27" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb126-28"><a href="#cb126-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">4</span><span class="op">};</span></span>
<span id="cb126-29"><a href="#cb126-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb126-30"><a href="#cb126-30" aria-hidden="true" tabindex="-1"></a>    bead_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb126-31"><a href="#cb126-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb126-32"><a href="#cb126-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb126-33"><a href="#cb126-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>1 3 4 5 7</code></pre>
</section>
</section>
<section id="why-it-matters-48" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-48">Why It Matters</h3>
<ul>
<li>Demonstrates non-comparison-based sorting</li>
<li>Shows physical analogies for computation</li>
<li>Ideal for visual and educational purposes</li>
<li>Parallelizable (each column independent)</li>
</ul>
<p>Though impractical, it inspires biological and physics-inspired algorithm design.</p>
</section>
<section id="a-gentle-proof-why-it-works-48" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-48">A Gentle Proof (Why It Works)</h3>
<p>Each column acts like a gravity channel:</p>
<ul>
<li>Beads fall to fill lowest positions</li>
<li>Columns represent magnitudes across numbers</li>
<li>After settling, beads in each row = sorted value</li>
</ul>
<p>No two beads can occupy the same slot twice, ensuring correctness. Complexity: <span class="math display">\[
T(n) = O(S)
\]</span> where <span class="math inline">\(S = \sum a_i\)</span>, total bead count.</p>
<p>Efficient only when numbers are small.</p>
</section>
<section id="try-it-yourself-48" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-48">Try It Yourself</h3>
<ol type="1">
<li>Sort <code>[5,3,1,7,4]</code> by hand using dots.</li>
<li>Draw rods and let beads fall.</li>
<li>Try <code>[3,0,2,1]</code>, zeros stay top.</li>
<li>Experiment with duplicates <code>[2,2,3]</code>.</li>
<li>Use grid visualization in Python.</li>
<li>Compare with Counting Sort.</li>
<li>Extend for stable ordering.</li>
<li>Animate bead falling step by step.</li>
<li>Scale with numbers ≤ 10.</li>
<li>Reflect: what if gravity was sideways?</li>
</ol>
</section>
<section id="test-cases-48" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-48">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[5,3,1,7,4]</td>
<td>[1,3,4,5,7]</td>
<td>Classic example</td>
</tr>
<tr class="even">
<td>[3,0,2,1]</td>
<td>[0,1,2,3]</td>
<td>Handles zeros</td>
</tr>
<tr class="odd">
<td>[2,2,3]</td>
<td>[2,2,3]</td>
<td>Works with duplicates</td>
</tr>
<tr class="even">
<td>[1]</td>
<td>[1]</td>
<td>Single element</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-48" class="level3">
<h3 class="anchored" data-anchor-id="complexity-48">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(S), where S = sum of elements</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(S)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Bead Sort shows how even gravity can sort, numbers become beads, and time, motion, and matter do the work. It’s sorting you can <em>see</em>, not just compute.</p>
</section>
<section id="bogo-sort" class="level3">
<h3 class="anchored" data-anchor-id="bogo-sort">150 Bogo Sort</h3>
<p>Bogo Sort (also called Permutation Sort or Stupid Sort) is a deliberately absurd algorithm that repeatedly shuffles the array until it becomes sorted.</p>
<p>It’s the poster child of inefficiency, often used in classrooms as a comic counterexample, sorting by pure luck.</p>
</section>
<section id="what-problem-are-we-solving-49" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-49">What Problem Are We Solving?</h3>
<p>We’re not solving a problem so much as demonstrating futility. Bogo Sort asks, <em>“What if we just kept trying random orders until we got lucky?”</em></p>
<p>It’s a great teaching tool for:</p>
<ul>
<li>Understanding algorithmic inefficiency</li>
<li>Appreciating complexity bounds</li>
<li>Learning to recognize good vs.&nbsp;bad strategies</li>
</ul>
<section id="example-49" class="level4">
<h4 class="anchored" data-anchor-id="example-49">Example</h4>
<p>Sort <code>[3, 1, 2]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Attempt</th>
<th>Shuffle</th>
<th>Sorted?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>[3,1,2]</td>
<td>No</td>
</tr>
<tr class="even">
<td>2</td>
<td>[1,2,3]</td>
<td>Yes ✅</td>
</tr>
</tbody>
</table>
<p>Stop when lucky! (You could get lucky early… or never.)</p>
</section>
</section>
<section id="how-does-it-work-plain-language-49" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-49">How Does It Work (Plain Language)?</h3>
<p>The idea is painfully simple:</p>
<ol type="1">
<li>Check if the array is sorted.</li>
<li>If not, shuffle it randomly.</li>
<li>Repeat until sorted.</li>
</ol>
<p>It’s sorting by random chance, not logic. Each attempt has a tiny probability of being sorted, but given infinite time, it <em>will</em> finish (eventually).</p>
<section id="step-by-step-process-48" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-48">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Check if array is sorted</td>
</tr>
<tr class="even">
<td>2</td>
<td>If sorted, done</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Else, shuffle randomly</td>
</tr>
<tr class="even">
<td>4</td>
<td>Go back to step 1</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-48" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-48">Tiny Code (Easy Versions)</h3>
<section id="python-35" class="level4">
<h4 class="anchored" data-anchor-id="python-35">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb128"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_sorted(arr):</span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">all</span>(arr[i] <span class="op">&lt;=</span> arr[i<span class="op">+</span><span class="dv">1</span>] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(arr)<span class="op">-</span><span class="dv">1</span>))</span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bogo_sort(arr):</span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a>    attempts <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="kw">not</span> is_sorted(arr):</span>
<span id="cb128-9"><a href="#cb128-9" aria-hidden="true" tabindex="-1"></a>        random.shuffle(arr)</span>
<span id="cb128-10"><a href="#cb128-10" aria-hidden="true" tabindex="-1"></a>        attempts <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb128-11"><a href="#cb128-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Sorted in"</span>, attempts, <span class="st">"attempts"</span>)</span>
<span id="cb128-12"><a href="#cb128-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr</span>
<span id="cb128-13"><a href="#cb128-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-14"><a href="#cb128-14" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb128-15"><a href="#cb128-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bogo_sort(arr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output (random):</p>
<pre><code>Sorted in 7 attempts
$$1, 2, 3]</code></pre>
</section>
<section id="c-31" class="level4">
<h4 class="anchored" data-anchor-id="c-31">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb130"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;time.h&gt;</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_sorted<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-11"><a href="#cb130-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> shuffle<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb130-12"><a href="#cb130-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb130-13"><a href="#cb130-13" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> rand<span class="op">()</span> <span class="op">%</span> n<span class="op">;</span></span>
<span id="cb130-14"><a href="#cb130-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> temp <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb130-15"><a href="#cb130-15" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb130-16"><a href="#cb130-16" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb130-17"><a href="#cb130-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb130-18"><a href="#cb130-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb130-19"><a href="#cb130-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-20"><a href="#cb130-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> bogo_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb130-21"><a href="#cb130-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> attempts <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb130-22"><a href="#cb130-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(!</span>is_sorted<span class="op">(</span>arr<span class="op">,</span> n<span class="op">))</span> <span class="op">{</span></span>
<span id="cb130-23"><a href="#cb130-23" aria-hidden="true" tabindex="-1"></a>        shuffle<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb130-24"><a href="#cb130-24" aria-hidden="true" tabindex="-1"></a>        attempts<span class="op">++;</span></span>
<span id="cb130-25"><a href="#cb130-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb130-26"><a href="#cb130-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Sorted in </span><span class="sc">%d</span><span class="st"> attempts</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> attempts<span class="op">);</span></span>
<span id="cb130-27"><a href="#cb130-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb130-28"><a href="#cb130-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-29"><a href="#cb130-29" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb130-30"><a href="#cb130-30" aria-hidden="true" tabindex="-1"></a>    srand<span class="op">(</span>time<span class="op">(</span>NULL<span class="op">));</span></span>
<span id="cb130-31"><a href="#cb130-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">3</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb130-32"><a href="#cb130-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb130-33"><a href="#cb130-33" aria-hidden="true" tabindex="-1"></a>    bogo_sort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">);</span></span>
<span id="cb130-34"><a href="#cb130-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb130-35"><a href="#cb130-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb130-36"><a href="#cb130-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output (random):</p>
<pre><code>Sorted in 12 attempts  
1 2 3</code></pre>
</section>
</section>
<section id="why-it-matters-49" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-49">Why It Matters</h3>
<ul>
<li>Humorous cautionary tale, what <em>not</em> to do</li>
<li>Demonstrates expected runtime analysis</li>
<li>A good way to visualize randomness</li>
<li>Reinforces need for algorithmic reasoning</li>
</ul>
<p>It’s the algorithmic equivalent of <em>throwing dice until sorted</em>, mathematically silly, but conceptually rich.</p>
</section>
<section id="a-gentle-proof-why-it-works-49" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-49">A Gentle Proof (Why It Works)</h3>
<p>With <span class="math inline">\(n\)</span> elements, there are <span class="math inline">\(n!\)</span> permutations.<br>
Only one is sorted.</p>
<p>Probability of success = <span class="math inline">\(\frac{1}{n!}\)</span></p>
<p>Expected attempts: <span class="math display">\[
E(n) = n!
\]</span></p>
<p>Each check takes <span class="math inline">\(O(n)\)</span>, so total expected time: <span class="math display">\[
T(n) = O(n \times n!)
\]</span></p>
<p>Guaranteed termination (eventually), since the probability of not sorting forever <span class="math inline">\(\to 0\)</span>.</p>
</section>
<section id="try-it-yourself-49" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-49">Try It Yourself</h3>
<ol type="1">
<li>Run on <code>[3,1,2]</code> and count attempts.</li>
<li>Try <code>[1,2,3]</code>, instant success.</li>
<li>Test <code>[4,3,2,1]</code>, likely infinite patience required.</li>
<li>Replace random.shuffle with deterministic shuffle (see fail).</li>
<li>Add a timeout.</li>
<li>Visualize shuffles on screen.</li>
<li>Measure average attempts over 100 trials.</li>
<li>Compare with Bubble Sort.</li>
<li>Try “Bogobogosort” (recursive Bogo!).</li>
<li>Reflect: what’s the expected runtime for <code>n=5</code>?</li>
</ol>
</section>
<section id="test-cases-49" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-49">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3,1,2]</td>
<td>[1,2,3]</td>
<td>Classic</td>
</tr>
<tr class="even">
<td>[1,2,3]</td>
<td>[1,2,3]</td>
<td>Already sorted</td>
</tr>
<tr class="odd">
<td>[2,1]</td>
<td>[1,2]</td>
<td>Fast</td>
</tr>
<tr class="even">
<td>[4,3,2,1]</td>
<td>[1,2,3,4]</td>
<td>Possibly never terminates</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-49" class="level3">
<h3 class="anchored" data-anchor-id="complexity-49">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Expected)</td>
<td>O(n × n!)</td>
</tr>
<tr class="even">
<td>Time (Best)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Time (Worst)</td>
<td>Unbounded</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes (if shuffle stable)</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Bogo Sort is chaos pretending to be order, sorting by faith, not logic. It’s the universe’s reminder that hope isn’t a strategy, not even in algorithms.</p>
</section>
</section>
<section id="section-16.-linear-and-binary-search" class="level2">
<h2 class="anchored" data-anchor-id="section-16.-linear-and-binary-search">Section 16. Linear and Binary Search</h2>
<section id="linear-search" class="level3">
<h3 class="anchored" data-anchor-id="linear-search">151 Linear Search</h3>
<p>Linear Search (also known as Sequential Search) is the simplest and most intuitive searching algorithm. It scans through each element one by one until it finds the target, or reaches the end of the list.</p>
<p>It’s easy to understand, easy to implement, and works on both sorted and unsorted data.</p>
</section>
<section id="what-problem-are-we-solving-50" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-50">What Problem Are We Solving?</h3>
<p>Given a list and a target value, how can we check if the target is present, and if so, at which index?</p>
<p>Linear Search solves this by scanning each element in order until a match is found.</p>
<p>Perfect for:</p>
<ul>
<li>Small datasets</li>
<li>Unsorted arrays</li>
<li>Early learning of search principles</li>
</ul>
<section id="example-50" class="level4">
<h4 class="anchored" data-anchor-id="example-50">Example</h4>
<p>Find <code>7</code> in <code>[3, 5, 7, 2, 9]</code>:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Index</th>
<th>Value</th>
<th>Match?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0</td>
<td>3</td>
<td>No</td>
</tr>
<tr class="even">
<td>2</td>
<td>1</td>
<td>5</td>
<td>No</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2</td>
<td>7</td>
<td>✅ Yes</td>
</tr>
<tr class="even">
<td>4</td>
<td>Stop</td>
<td>,</td>
<td>Found at index 2</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-50" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-50">How Does It Work (Plain Language)?</h3>
<p>It’s like flipping through pages one by one looking for a word. No skipping, no guessing, just check everything in order.</p>
<p>If the list is <code>[a₀, a₁, a₂, ..., aₙ₋₁]</code>:</p>
<ol type="1">
<li>Start at index 0</li>
<li>Compare <code>a[i]</code> with the target</li>
<li>If equal → found</li>
<li>Else → move to next</li>
<li>Stop when found or end reached</li>
</ol>
<section id="step-by-step-process-49" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-49">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Start from index 0</td>
</tr>
<tr class="even">
<td>2</td>
<td>Compare current element with target</td>
</tr>
<tr class="odd">
<td>3</td>
<td>If equal, return index</td>
</tr>
<tr class="even">
<td>4</td>
<td>Else, increment index</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Repeat until end</td>
</tr>
<tr class="even">
<td>6</td>
<td>If not found, return -1</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-49" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-49">Tiny Code (Easy Versions)</h3>
<section id="python-36" class="level4">
<h4 class="anchored" data-anchor-id="python-36">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb132"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> linear_search(arr, target):</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, val <span class="kw">in</span> <span class="bu">enumerate</span>(arr):</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> val <span class="op">==</span> target:</span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">9</span>]</span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a>target <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true" tabindex="-1"></a>idx <span class="op">=</span> linear_search(arr, target)</span>
<span id="cb132-10"><a href="#cb132-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Found at index:"</span>, idx)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 2</code></pre>
</section>
<section id="c-32" class="level4">
<h4 class="anchored" data-anchor-id="c-32">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb134"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> linear_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span></span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i<span class="op">;</span></span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb134-8"><a href="#cb134-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb134-9"><a href="#cb134-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-10"><a href="#cb134-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb134-11"><a href="#cb134-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">9</span><span class="op">};</span></span>
<span id="cb134-12"><a href="#cb134-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb134-13"><a href="#cb134-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> target <span class="op">=</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb134-14"><a href="#cb134-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> linear_search<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> target<span class="op">);</span></span>
<span id="cb134-15"><a href="#cb134-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span></span>
<span id="cb134-16"><a href="#cb134-16" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"Found at index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb134-17"><a href="#cb134-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb134-18"><a href="#cb134-18" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"Not found</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb134-19"><a href="#cb134-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 2</code></pre>
</section>
</section>
<section id="why-it-matters-50" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-50">Why It Matters</h3>
<ul>
<li>Works on any list, sorted or unsorted</li>
<li>No preprocessing needed</li>
<li>Guaranteed to find (if present)</li>
<li>Great introduction to time complexity</li>
<li>Foundation for better search algorithms</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-50" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-50">A Gentle Proof (Why It Works)</h3>
<p>If the element exists, scanning each element ensures it will eventually be found.</p>
<p>For ( n ) elements:</p>
<ul>
<li>Best case: found at index 0 → O(1)</li>
<li>Worst case: not found or last → O(n)</li>
<li>Average case: half-way → O(n)</li>
</ul>
<p>Because there’s no faster way without structure.</p>
</section>
<section id="try-it-yourself-50" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-50">Try It Yourself</h3>
<ol type="1">
<li>Search <code>7</code> in <code>[3,5,7,2,9]</code></li>
<li>Search <code>10</code> (not in list)</li>
<li>Try <code>[1,2,3,4,5]</code> with <code>target=1</code> (best case)</li>
<li>Try <code>target=5</code> (worst case)</li>
<li>Count comparisons made</li>
<li>Print “Found” or “Not Found”</li>
<li>Try on unsorted vs sorted arrays</li>
<li>Modify to return all indices of target</li>
<li>Implement recursive version</li>
<li>Extend for string search in list of words</li>
</ol>
</section>
<section id="test-cases-50" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-50">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Target</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3,5,7,2,9]</td>
<td>7</td>
<td>2</td>
<td>Found</td>
</tr>
<tr class="even">
<td>[3,5,7,2,9]</td>
<td>10</td>
<td>-1</td>
<td>Not found</td>
</tr>
<tr class="odd">
<td>[1,2,3]</td>
<td>1</td>
<td>0</td>
<td>Best case</td>
</tr>
<tr class="even">
<td>[1,2,3]</td>
<td>3</td>
<td>2</td>
<td>Worst case</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-50" class="level3">
<h3 class="anchored" data-anchor-id="complexity-50">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Time (Worst)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Time (Average)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Linear Search is the simplest lens into algorithmic thinking, brute force but guaranteed. It’s your first step from guessing to reasoning.</p>
</section>
<section id="linear-search-sentinel" class="level3">
<h3 class="anchored" data-anchor-id="linear-search-sentinel">152 Linear Search (Sentinel)</h3>
<p>Sentinel Linear Search is a clever twist on the basic Linear Search. Instead of checking array bounds each time, we place a sentinel (a guard value) at the end of the array equal to the target.</p>
<p>This eliminates the need for explicit boundary checks inside the loop, making the search slightly faster and cleaner, especially in low-level languages like C.</p>
</section>
<section id="what-problem-are-we-solving-51" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-51">What Problem Are We Solving?</h3>
<p>In a standard linear search, each iteration checks both:</p>
<ol type="1">
<li>If the current element equals the target</li>
<li>If the index is still within bounds</li>
</ol>
<p>That second check adds overhead.</p>
<p>By placing a sentinel, we can guarantee the loop will always terminate, no bounds check needed.</p>
<p>This is useful in tight loops, embedded systems, and performance-critical code.</p>
<section id="example-51" class="level4">
<h4 class="anchored" data-anchor-id="example-51">Example</h4>
<p>Find <code>7</code> in <code>[3, 5, 7, 2, 9]</code>:</p>
<ol type="1">
<li>Append sentinel (duplicate target) → <code>[3, 5, 7, 2, 9, 7]</code></li>
<li>Scan until <code>7</code> is found</li>
<li>If index &lt; n, found in array</li>
<li>If index == n, only sentinel found → not in array</li>
</ol>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Index</th>
<th>Value</th>
<th>Match?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0</td>
<td>3</td>
<td>No</td>
</tr>
<tr class="even">
<td>2</td>
<td>1</td>
<td>5</td>
<td>No</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2</td>
<td>7</td>
<td>✅ Yes</td>
</tr>
<tr class="even">
<td>4</td>
<td>Stop, index &lt; n</td>
<td>Found at 2</td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-51" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-51">How Does It Work (Plain Language)?</h3>
<p>Think of the sentinel as a stop sign placed beyond the last element. You don’t have to look over your shoulder to check if you’ve gone too far, the sentinel will catch you.</p>
<p>It ensures you’ll always hit a match, but then you check whether it was a real match or the sentinel.</p>
<section id="step-by-step-process-50" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-50">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Save last element</td>
</tr>
<tr class="even">
<td>2</td>
<td>Place target at the end (sentinel)</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Loop until <code>arr[i] == target</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>Restore last element</td>
</tr>
<tr class="odd">
<td>5</td>
<td>If index &lt; n → found, else → not found</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-50" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-50">Tiny Code (Easy Versions)</h3>
<section id="c-33" class="level4">
<h4 class="anchored" data-anchor-id="c-33">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb136"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> sentinel_linear_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> last <span class="op">=</span> arr<span class="op">[</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> target<span class="op">;</span> <span class="co">// sentinel</span></span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> target<span class="op">)</span></span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a>        i<span class="op">++;</span></span>
<span id="cb136-9"><a href="#cb136-9" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> last<span class="op">;</span> <span class="co">// restore</span></span>
<span id="cb136-10"><a href="#cb136-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>i <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span> <span class="op">||</span> arr<span class="op">[</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">==</span> target<span class="op">)</span></span>
<span id="cb136-11"><a href="#cb136-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> i<span class="op">;</span></span>
<span id="cb136-12"><a href="#cb136-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb136-13"><a href="#cb136-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb136-14"><a href="#cb136-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-15"><a href="#cb136-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-16"><a href="#cb136-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">9</span><span class="op">};</span></span>
<span id="cb136-17"><a href="#cb136-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb136-18"><a href="#cb136-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> target <span class="op">=</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb136-19"><a href="#cb136-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> sentinel_linear_search<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> target<span class="op">);</span></span>
<span id="cb136-20"><a href="#cb136-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span></span>
<span id="cb136-21"><a href="#cb136-21" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"Found at index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb136-22"><a href="#cb136-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb136-23"><a href="#cb136-23" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"Not found</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb136-24"><a href="#cb136-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 2</code></pre>
</section>
<section id="python-simulated" class="level4">
<h4 class="anchored" data-anchor-id="python-simulated">Python (Simulated)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb138"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sentinel_linear_search(arr, target):</span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>    last <span class="op">=</span> arr[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>    arr[<span class="op">-</span><span class="dv">1</span>] <span class="op">=</span> target</span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> arr[i] <span class="op">!=</span> target:</span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a>        i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb138-8"><a href="#cb138-8" aria-hidden="true" tabindex="-1"></a>    arr[<span class="op">-</span><span class="dv">1</span>] <span class="op">=</span> last</span>
<span id="cb138-9"><a href="#cb138-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span> <span class="kw">or</span> arr[<span class="op">-</span><span class="dv">1</span>] <span class="op">==</span> target:</span>
<span id="cb138-10"><a href="#cb138-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> i</span>
<span id="cb138-11"><a href="#cb138-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb138-12"><a href="#cb138-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-13"><a href="#cb138-13" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">9</span>]</span>
<span id="cb138-14"><a href="#cb138-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sentinel_linear_search(arr, <span class="dv">7</span>))  <span class="co"># Output: 2</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-51" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-51">Why It Matters</h3>
<ul>
<li>Removes boundary check overhead</li>
<li>Slightly faster for large arrays</li>
<li>Classic example of sentinel optimization</li>
<li>Teaches loop invariants and guard conditions</li>
</ul>
<p>This is how you make a simple algorithm tight and elegant.</p>
</section>
<section id="a-gentle-proof-why-it-works-51" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-51">A Gentle Proof (Why It Works)</h3>
<p>By placing the target as the last element:</p>
<ul>
<li>Loop must terminate (guaranteed match)</li>
<li>Only after the loop do we check if it was sentinel or real match</li>
</ul>
<p>No wasted comparisons. Total comparisons ≤ n + 1 (vs 2n in naive version).</p>
<p><span class="math display">\[
T(n) = O(n)
\]</span></p>
</section>
<section id="try-it-yourself-51" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-51">Try It Yourself</h3>
<ol type="1">
<li>Search <code>7</code> in <code>[3,5,7,2,9]</code></li>
<li>Search <code>10</code> (not in list)</li>
<li>Track number of comparisons vs regular linear search</li>
<li>Implement in Python, Java, C++</li>
<li>Visualize sentinel placement</li>
<li>Use array of 1000 random elements, benchmark</li>
<li>Try replacing last element temporarily</li>
<li>Search first element, check best case</li>
<li>Search last element, check sentinel restore</li>
<li>Discuss when this optimization helps most</li>
</ol>
</section>
<section id="test-cases-51" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-51">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Target</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3,5,7,2,9]</td>
<td>7</td>
<td>2</td>
<td>Found</td>
</tr>
<tr class="even">
<td>[3,5,7,2,9]</td>
<td>10</td>
<td>-1</td>
<td>Not found</td>
</tr>
<tr class="odd">
<td>[1,2,3]</td>
<td>1</td>
<td>0</td>
<td>Best case</td>
</tr>
<tr class="even">
<td>[1,2,3]</td>
<td>3</td>
<td>2</td>
<td>Sentinel replaced last</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-51" class="level3">
<h3 class="anchored" data-anchor-id="complexity-51">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Time (Worst)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Time (Average)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Sentinel Linear Search is how you turn simplicity into elegance, one tiny guard makes the whole loop smarter.</p>
</section>
<section id="binary-search-iterative" class="level3">
<h3 class="anchored" data-anchor-id="binary-search-iterative">153 Binary Search (Iterative)</h3>
<p>Binary Search (Iterative) is one of the most elegant and efficient searching algorithms for sorted arrays. It repeatedly divides the search interval in half, eliminating half the remaining elements at each step.</p>
<p>This version uses a loop, avoiding recursion and keeping memory usage minimal.</p>
</section>
<section id="what-problem-are-we-solving-52" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-52">What Problem Are We Solving?</h3>
<p>When working with sorted data, a linear scan is wasteful. If you always know the list is ordered, you can use binary search to find your target in O(log n) time instead of O(n).</p>
<section id="example-52" class="level4">
<h4 class="anchored" data-anchor-id="example-52">Example</h4>
<p>Find <code>7</code> in <code>[1, 3, 5, 7, 9, 11]</code>:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Low</th>
<th>High</th>
<th>Mid</th>
<th>Value</th>
<th>Compare</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0</td>
<td>5</td>
<td>2</td>
<td>5</td>
<td>7 &gt; 5 → search right</td>
</tr>
<tr class="even">
<td>2</td>
<td>3</td>
<td>5</td>
<td>4</td>
<td>9</td>
<td>7 &lt; 9 → search left</td>
</tr>
<tr class="odd">
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>7</td>
<td>✅ Found</td>
</tr>
</tbody>
</table>
<p>Found at index 3.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-52" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-52">How Does It Work (Plain Language)?</h3>
<p>Binary Search is like guessing a number between 1 and 100:</p>
<ul>
<li>Always pick the midpoint.</li>
<li>If the number is too low, search the upper half.</li>
<li>If it’s too high, search the lower half.</li>
<li>Repeat until found or interval is empty.</li>
</ul>
<p>Each guess cuts the space in half, that’s why it’s so fast.</p>
<section id="step-by-step-process-51" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-51">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Start with <code>low = 0</code>, <code>high = n - 1</code></td>
</tr>
<tr class="even">
<td>2</td>
<td>While <code>low ≤ high</code>, find <code>mid = (low + high) // 2</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>If <code>arr[mid] == target</code> → return index</td>
</tr>
<tr class="even">
<td>4</td>
<td>If <code>arr[mid] &lt; target</code> → search right half (<code>low = mid + 1</code>)</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Else → search left half (<code>high = mid - 1</code>)</td>
</tr>
<tr class="even">
<td>6</td>
<td>If not found, return -1</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-51" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-51">Tiny Code (Easy Versions)</h3>
<section id="python-37" class="level4">
<h4 class="anchored" data-anchor-id="python-37">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb139"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> binary_search(arr, target):</span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>    low, high <span class="op">=</span> <span class="dv">0</span>, <span class="bu">len</span>(arr) <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> low <span class="op">&lt;=</span> high:</span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (low <span class="op">+</span> high) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[mid] <span class="op">==</span> target:</span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid</span>
<span id="cb139-7"><a href="#cb139-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> arr[mid] <span class="op">&lt;</span> target:</span>
<span id="cb139-8"><a href="#cb139-8" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb139-9"><a href="#cb139-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb139-10"><a href="#cb139-10" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb139-11"><a href="#cb139-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb139-12"><a href="#cb139-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-13"><a href="#cb139-13" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">11</span>]</span>
<span id="cb139-14"><a href="#cb139-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(binary_search(arr, <span class="dv">7</span>))  <span class="co"># Output: 3</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>3</code></pre>
</section>
<section id="c-34" class="level4">
<h4 class="anchored" data-anchor-id="c-34">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb141"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> binary_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> low <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> high <span class="op">=</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>low <span class="op">&lt;=</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> low <span class="op">+</span> <span class="op">(</span>high <span class="op">-</span> low<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// avoid overflow</span></span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span></span>
<span id="cb141-8"><a href="#cb141-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid<span class="op">;</span></span>
<span id="cb141-9"><a href="#cb141-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span></span>
<span id="cb141-10"><a href="#cb141-10" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-11"><a href="#cb141-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb141-12"><a href="#cb141-12" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-13"><a href="#cb141-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-14"><a href="#cb141-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-15"><a href="#cb141-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-16"><a href="#cb141-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-17"><a href="#cb141-17" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-18"><a href="#cb141-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">11</span><span class="op">};</span></span>
<span id="cb141-19"><a href="#cb141-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb141-20"><a href="#cb141-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> binary_search<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb141-21"><a href="#cb141-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span></span>
<span id="cb141-22"><a href="#cb141-22" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"Found at index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb141-23"><a href="#cb141-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb141-24"><a href="#cb141-24" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"Not found</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb141-25"><a href="#cb141-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 3</code></pre>
</section>
</section>
<section id="why-it-matters-52" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-52">Why It Matters</h3>
<ul>
<li>Fundamental divide-and-conquer algorithm</li>
<li>O(log n) time complexity</li>
<li>Used everywhere: search engines, databases, compilers</li>
<li>Builds intuition for binary decision trees</li>
</ul>
<p>This is the first truly efficient search most programmers learn.</p>
</section>
<section id="a-gentle-proof-why-it-works-52" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-52">A Gentle Proof (Why It Works)</h3>
<p>At each step, the search interval halves.<br>
After <span class="math inline">\(k\)</span> steps, remaining elements = <span class="math inline">\(\frac{n}{2^k}\)</span>.</p>
<p>Stop when <span class="math inline">\(\frac{n}{2^k} = 1\)</span><br>
⟹ <span class="math inline">\(k = \log_2 n\)</span></p>
<p>So, total comparisons: <span class="math display">\[
T(n) = O(\log n)
\]</span></p>
<p>Works only on sorted arrays.</p>
</section>
<section id="try-it-yourself-52" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-52">Try It Yourself</h3>
<ol type="1">
<li>Search <code>7</code> in <code>[1,3,5,7,9,11]</code></li>
<li>Search <code>2</code> (not found)</li>
<li>Trace values of <code>low</code>, <code>high</code>, <code>mid</code></li>
<li>Try on even-length array <code>[1,2,3,4,5,6]</code></li>
<li>Try on odd-length array <code>[1,2,3,4,5]</code></li>
<li>Compare iteration count with linear search</li>
<li>Implement recursive version</li>
<li>Use binary search to find insertion point</li>
<li>Add counter to measure steps</li>
<li>Explain why sorting is required</li>
</ol>
</section>
<section id="test-cases-52" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-52">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Target</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[1,3,5,7,9,11]</td>
<td>7</td>
<td>3</td>
<td>Found</td>
</tr>
<tr class="even">
<td>[1,3,5,7,9,11]</td>
<td>2</td>
<td>-1</td>
<td>Not found</td>
</tr>
<tr class="odd">
<td>[1,2,3,4,5]</td>
<td>1</td>
<td>0</td>
<td>First element</td>
</tr>
<tr class="even">
<td>[1,2,3,4,5]</td>
<td>5</td>
<td>4</td>
<td>Last element</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-52" class="level3">
<h3 class="anchored" data-anchor-id="complexity-52">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Time (Worst)</td>
<td>O(log n)</td>
</tr>
<tr class="odd">
<td>Time (Average)</td>
<td>O(log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Prerequisite</td>
<td>Sorted array</td>
</tr>
</tbody>
</table>
<p>Binary Search (Iterative) is the gold standard of efficiency, halving your problem at every step, one decision at a time.</p>
</section>
<section id="binary-search-recursive" class="level3">
<h3 class="anchored" data-anchor-id="binary-search-recursive">154 Binary Search (Recursive)</h3>
<p>Binary Search (Recursive) is the classic divide-and-conquer form of binary search. Instead of looping, it calls itself on smaller subarrays, each time halving the search space until the target is found or the interval becomes empty.</p>
<p>It’s a perfect demonstration of recursion in action, each call tackles a smaller slice of the problem.</p>
</section>
<section id="what-problem-are-we-solving-53" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-53">What Problem Are We Solving?</h3>
<p>Given a sorted array, we want to find a target value efficiently. Rather than scanning linearly, we repeatedly split the array in half, focusing only on the half that could contain the target.</p>
<p>This version expresses that logic through recursive calls.</p>
<section id="example-53" class="level4">
<h4 class="anchored" data-anchor-id="example-53">Example</h4>
<p>Find <code>7</code> in <code>[1, 3, 5, 7, 9, 11]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Low</th>
<th>High</th>
<th>Mid</th>
<th>Value</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0</td>
<td>5</td>
<td>2</td>
<td>5</td>
<td>7 &gt; 5 → search right half</td>
</tr>
<tr class="even">
<td>2</td>
<td>3</td>
<td>5</td>
<td>4</td>
<td>9</td>
<td>7 &lt; 9 → search left half</td>
</tr>
<tr class="odd">
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>7</td>
<td>✅ Found</td>
</tr>
</tbody>
</table>
<p>Recursive calls shrink the interval each time until match is found.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-53" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-53">How Does It Work (Plain Language)?</h3>
<p>Binary search says:</p>
<blockquote class="blockquote">
<p>“If the middle element isn’t what I want, I can ignore half the data.”</p>
</blockquote>
<p>In recursive form:</p>
<ol type="1">
<li>Check the midpoint.</li>
<li>If equal → found.</li>
<li>If smaller → recurse right.</li>
<li>If larger → recurse left.</li>
<li>Base case: if <code>low &gt; high</code>, element not found.</li>
</ol>
<p>Each call reduces the search space by half, logarithmic depth recursion.</p>
<section id="step-by-step-process-52" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-52">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Check base case: if <code>low &gt; high</code>, return -1</td>
</tr>
<tr class="even">
<td>2</td>
<td>Compute <code>mid = (low + high) // 2</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>If <code>arr[mid] == target</code>, return <code>mid</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>If <code>arr[mid] &gt; target</code>, recurse left half</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Else, recurse right half</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-52" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-52">Tiny Code (Easy Versions)</h3>
<section id="python-38" class="level4">
<h4 class="anchored" data-anchor-id="python-38">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb143"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> binary_search_recursive(arr, target, low, high):</span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> low <span class="op">&gt;</span> high:</span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>    mid <span class="op">=</span> (low <span class="op">+</span> high) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> arr[mid] <span class="op">==</span> target:</span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> mid</span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> arr[mid] <span class="op">&lt;</span> target:</span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> binary_search_recursive(arr, target, mid <span class="op">+</span> <span class="dv">1</span>, high)</span>
<span id="cb143-9"><a href="#cb143-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb143-10"><a href="#cb143-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> binary_search_recursive(arr, target, low, mid <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb143-11"><a href="#cb143-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-12"><a href="#cb143-12" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">11</span>]</span>
<span id="cb143-13"><a href="#cb143-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(binary_search_recursive(arr, <span class="dv">7</span>, <span class="dv">0</span>, <span class="bu">len</span>(arr)<span class="op">-</span><span class="dv">1</span>))  <span class="co"># Output: 3</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>3</code></pre>
</section>
<section id="c-35" class="level4">
<h4 class="anchored" data-anchor-id="c-35">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb145"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> binary_search_recursive<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>low <span class="op">&gt;</span> high<span class="op">)</span></span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> mid <span class="op">=</span> low <span class="op">+</span> <span class="op">(</span>high <span class="op">-</span> low<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb145-7"><a href="#cb145-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span></span>
<span id="cb145-8"><a href="#cb145-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> mid<span class="op">;</span></span>
<span id="cb145-9"><a href="#cb145-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span></span>
<span id="cb145-10"><a href="#cb145-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> binary_search_recursive<span class="op">(</span>arr<span class="op">,</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> high<span class="op">,</span> target<span class="op">);</span></span>
<span id="cb145-11"><a href="#cb145-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb145-12"><a href="#cb145-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> binary_search_recursive<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> mid <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> target<span class="op">);</span></span>
<span id="cb145-13"><a href="#cb145-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb145-14"><a href="#cb145-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-15"><a href="#cb145-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb145-16"><a href="#cb145-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">11</span><span class="op">};</span></span>
<span id="cb145-17"><a href="#cb145-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb145-18"><a href="#cb145-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> binary_search_recursive<span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb145-19"><a href="#cb145-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span></span>
<span id="cb145-20"><a href="#cb145-20" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"Found at index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb145-21"><a href="#cb145-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb145-22"><a href="#cb145-22" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"Not found</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb145-23"><a href="#cb145-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 3</code></pre>
</section>
</section>
<section id="why-it-matters-53" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-53">Why It Matters</h3>
<ul>
<li>Elegant divide-and-conquer demonstration</li>
<li>Shows recursion depth = log₂(n)</li>
<li>Same complexity as iterative version</li>
<li>Lays foundation for recursive algorithms (merge sort, quicksort)</li>
</ul>
<p>Recursion mirrors the mathematical idea of halving the interval, clean and intuitive.</p>
</section>
<section id="a-gentle-proof-why-it-works-53" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-53">A Gentle Proof (Why It Works)</h3>
<p>At each recursive call:</p>
<ul>
<li>Problem size halves: <span class="math inline">\(n \to n/2 \to n/4 \to \dots\)</span></li>
<li>Recursion stops after <span class="math inline">\(\log_2 n\)</span> levels</li>
</ul>
<p>Thus total complexity: <span class="math display">\[
T(n) = T(n/2) + O(1) = O(\log n)
\]</span></p>
<p>Correctness follows from:</p>
<ul>
<li>Sorted input ensures ordering decisions are valid<br>
</li>
<li>Base case ensures termination</li>
</ul>
</section>
<section id="try-it-yourself-53" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-53">Try It Yourself</h3>
<ol type="1">
<li>Search <code>7</code> in <code>[1,3,5,7,9,11]</code></li>
<li>Search <code>2</code> (not present)</li>
<li>Add print statements to trace recursion</li>
<li>Compare call count vs iterative version</li>
<li>Test base case with <code>low &gt; high</code></li>
<li>Search first and last element</li>
<li>Observe recursion depth for size 8 → 3 calls</li>
<li>Add memo of <code>(low, high)</code> per step</li>
<li>Implement tail-recursive variant</li>
<li>Reflect on stack vs loop tradeoffs</li>
</ol>
</section>
<section id="test-cases-53" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-53">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Target</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[1,3,5,7,9,11]</td>
<td>7</td>
<td>3</td>
<td>Found</td>
</tr>
<tr class="even">
<td>[1,3,5,7,9,11]</td>
<td>2</td>
<td>-1</td>
<td>Not found</td>
</tr>
<tr class="odd">
<td>[1,2,3,4,5]</td>
<td>1</td>
<td>0</td>
<td>First element</td>
</tr>
<tr class="even">
<td>[1,2,3,4,5]</td>
<td>5</td>
<td>4</td>
<td>Last element</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-53" class="level3">
<h3 class="anchored" data-anchor-id="complexity-53">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Best)</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Time (Worst)</td>
<td>O(log n)</td>
</tr>
<tr class="odd">
<td>Time (Average)</td>
<td>O(log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(log n) (recursion stack)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Prerequisite</td>
<td>Sorted array</td>
</tr>
</tbody>
</table>
<p>Binary Search (Recursive) is divide-and-conquer at its purest, halving the world each time, until the answer reveals itself.</p>
</section>
<section id="binary-search-lower-bound" class="level3">
<h3 class="anchored" data-anchor-id="binary-search-lower-bound">155 Binary Search (Lower Bound)</h3>
<p>Lower Bound Binary Search is a variant of binary search that finds the first position where a value could be inserted without breaking the sorted order. In other words, it returns the index of the first element greater than or equal to the target.</p>
<p>It’s used extensively in search engines, databases, range queries, and C++ STL (<code>std::lower_bound</code>).</p>
</section>
<section id="what-problem-are-we-solving-54" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-54">What Problem Are We Solving?</h3>
<p>In many cases, you don’t just want to know if an element exists — you want to know where it would go in a sorted structure.</p>
<ul>
<li>If the value exists, return its first occurrence.</li>
<li>If it doesn’t exist, return the position where it could be inserted to keep the array sorted.</li>
</ul>
<p>This is essential for insertion, frequency counting, and range boundaries.</p>
<section id="example-54" class="level4">
<h4 class="anchored" data-anchor-id="example-54">Example</h4>
<p>Find lower bound of <code>7</code> in <code>[1, 3, 5, 7, 7, 9, 11]</code>:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 7%">
<col style="width: 20%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 9%">
<col style="width: 24%">
<col style="width: 24%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Low</th>
<th>High</th>
<th>Mid</th>
<th>Value</th>
<th>Compare</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0</td>
<td>6</td>
<td>3</td>
<td>7</td>
<td>arr[mid] &gt;= 7</td>
<td>move high = 3</td>
</tr>
<tr class="even">
<td>2</td>
<td>0</td>
<td>2</td>
<td>1</td>
<td>3</td>
<td>arr[mid] &lt; 7</td>
<td>move low = 2</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2</td>
<td>3</td>
<td>2</td>
<td>5</td>
<td>arr[mid] &lt; 7</td>
<td>move low = 3</td>
</tr>
<tr class="even">
<td>4</td>
<td>low == high</td>
<td>,</td>
<td>,</td>
<td>,</td>
<td>Stop</td>
<td></td>
</tr>
</tbody>
</table>
<p>Result: Index 3 (first <code>7</code>)</p>
</section>
</section>
<section id="how-does-it-work-plain-language-54" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-54">How Does It Work (Plain Language)?</h3>
<p>Lower bound finds the leftmost slot where the target fits. It slides the search window until <code>low == high</code>, with <code>low</code> marking the first candidate ≥ target.</p>
<p>You can think of it as:</p>
<blockquote class="blockquote">
<p>“How far left can I go while still being ≥ target?”</p>
</blockquote>
<section id="step-by-step-process-53" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-53">Step-by-Step Process</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 47%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Set <code>low = 0</code>, <code>high = n</code> (note: <code>high</code> = n, not n-1)</td>
</tr>
<tr class="even">
<td>2</td>
<td>While <code>low &lt; high</code>:</td>
</tr>
<tr class="odd">
<td> a. <code>mid = (low + high) // 2</code></td>
<td></td>
</tr>
<tr class="even">
<td> b. If <code>arr[mid] &lt; target</code>, move <code>low = mid + 1</code></td>
<td></td>
</tr>
<tr class="odd">
<td> c.&nbsp;Else, move <code>high = mid</code></td>
<td></td>
</tr>
<tr class="even">
<td>3</td>
<td>When loop ends, <code>low</code> is the lower bound index</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-53" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-53">Tiny Code (Easy Versions)</h3>
<section id="python-39" class="level4">
<h4 class="anchored" data-anchor-id="python-39">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb147"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> lower_bound(arr, target):</span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>    low, high <span class="op">=</span> <span class="dv">0</span>, <span class="bu">len</span>(arr)</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> low <span class="op">&lt;</span> high:</span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (low <span class="op">+</span> high) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[mid] <span class="op">&lt;</span> target:</span>
<span id="cb147-6"><a href="#cb147-6" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb147-7"><a href="#cb147-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb147-8"><a href="#cb147-8" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid</span>
<span id="cb147-9"><a href="#cb147-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> low</span>
<span id="cb147-10"><a href="#cb147-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-11"><a href="#cb147-11" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">11</span>]</span>
<span id="cb147-12"><a href="#cb147-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(lower_bound(arr, <span class="dv">7</span>))  <span class="co"># Output: 3</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>3</code></pre>
</section>
<section id="c-36" class="level4">
<h4 class="anchored" data-anchor-id="c-36">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb149"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> lower_bound<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> low <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> high <span class="op">=</span> n<span class="op">;</span></span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>low <span class="op">&lt;</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb149-6"><a href="#cb149-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> low <span class="op">+</span> <span class="op">(</span>high <span class="op">-</span> low<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb149-7"><a href="#cb149-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span></span>
<span id="cb149-8"><a href="#cb149-8" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb149-9"><a href="#cb149-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb149-10"><a href="#cb149-10" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid<span class="op">;</span></span>
<span id="cb149-11"><a href="#cb149-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb149-12"><a href="#cb149-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> low<span class="op">;</span></span>
<span id="cb149-13"><a href="#cb149-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb149-14"><a href="#cb149-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-15"><a href="#cb149-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb149-16"><a href="#cb149-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">11</span><span class="op">};</span></span>
<span id="cb149-17"><a href="#cb149-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb149-18"><a href="#cb149-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> lower_bound<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb149-19"><a href="#cb149-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Lower bound index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb149-20"><a href="#cb149-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Lower bound index: 3</code></pre>
</section>
</section>
<section id="why-it-matters-54" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-54">Why It Matters</h3>
<ul>
<li>Finds insertion position for sorted arrays</li>
<li>Useful in binary search trees, maps, intervals</li>
<li>Core of range queries (like count of elements ≥ x)</li>
<li>Builds understanding of boundary binary search</li>
</ul>
<p>When you need more than yes/no, you need where, use lower bound.</p>
</section>
<section id="a-gentle-proof-why-it-works-54" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-54">A Gentle Proof (Why It Works)</h3>
<p>Invariant:</p>
<ul>
<li>All indices before <code>low</code> contain elements <code>&lt; target</code></li>
<li>All indices after <code>high</code> contain elements <code>≥ target</code></li>
</ul>
<p>Loop maintains invariant until convergence: <span class="math display">\[
low = high = \text{first index where arr[i] ≥ target}
\]</span></p>
<p>Complexity: <span class="math display">\[
T(n) = O(\log n)
\]</span></p>
</section>
<section id="try-it-yourself-54" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-54">Try It Yourself</h3>
<ol type="1">
<li><code>arr = [1,3,5,7,7,9]</code>, <code>target = 7</code> → 3</li>
<li><code>target = 6</code> → 3 (would insert before first 7)</li>
<li><code>target = 10</code> → 6 (end)</li>
<li><code>target = 0</code> → 0 (front)</li>
<li>Count elements ≥ 7: <code>len(arr) - lower_bound(arr, 7)</code></li>
<li>Compare with <code>bisect_left</code> in Python</li>
<li>Use to insert elements while keeping list sorted</li>
<li>Apply to sorted strings <code>["apple", "banana", "cherry"]</code></li>
<li>Visualize range [lower, upper) for duplicates</li>
<li>Benchmark vs linear scan for large n</li>
</ol>
</section>
<section id="test-cases-54" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-54">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Target</th>
<th>Output</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[1,3,5,7,7,9,11]</td>
<td>7</td>
<td>3</td>
<td>First 7</td>
</tr>
<tr class="even">
<td>[1,3,5,7,7,9,11]</td>
<td>6</td>
<td>3</td>
<td>Insert before 7</td>
</tr>
<tr class="odd">
<td>[1,3,5,7,7,9,11]</td>
<td>12</td>
<td>7</td>
<td>End position</td>
</tr>
<tr class="even">
<td>[1,3,5,7,7,9,11]</td>
<td>0</td>
<td>0</td>
<td>Front</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-54" class="level3">
<h3 class="anchored" data-anchor-id="complexity-54">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Prerequisite</td>
<td>Sorted array</td>
</tr>
</tbody>
</table>
<p>Binary Search (Lower Bound) is how algorithms learn <em>where</em> things belong, not just if they exist. It’s the precise edge of order.</p>
</section>
<section id="binary-search-upper-bound" class="level3">
<h3 class="anchored" data-anchor-id="binary-search-upper-bound">156 Binary Search (Upper Bound)</h3>
<p>Upper Bound Binary Search is a close cousin of Lower Bound, designed to find the first index where an element is greater than the target. It’s used to locate the right boundary of equal elements or the insertion point after duplicates.</p>
<p>In simpler words:</p>
<blockquote class="blockquote">
<p>It finds “the spot just after the last occurrence” of the target.</p>
</blockquote>
</section>
<section id="what-problem-are-we-solving-55" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-55">What Problem Are We Solving?</h3>
<p>Sometimes you need to know where to insert a value after existing duplicates. For example, in frequency counting or range queries, you might want the end of a block of identical elements.</p>
<p>Upper bound returns that exact position, the smallest index where <span class="math display">\[
\text{arr[i]} &gt; \text{target}
\]</span></p>
<section id="example-55" class="level4">
<h4 class="anchored" data-anchor-id="example-55">Example</h4>
<p>Find upper bound of <code>7</code> in <code>[1, 3, 5, 7, 7, 9, 11]</code>:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Low</th>
<th>High</th>
<th>Mid</th>
<th>Value</th>
<th>Compare</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0</td>
<td>7</td>
<td>3</td>
<td>7</td>
<td>7 ≤ 7</td>
<td>move low = 4</td>
</tr>
<tr class="even">
<td>2</td>
<td>4</td>
<td>7</td>
<td>5</td>
<td>9</td>
<td>9 &gt; 7</td>
<td>move high = 5</td>
</tr>
<tr class="odd">
<td>3</td>
<td>4</td>
<td>5</td>
<td>4</td>
<td>7</td>
<td>7 ≤ 7</td>
<td>move low = 5</td>
</tr>
<tr class="even">
<td>4</td>
<td>low == high</td>
<td>,</td>
<td>,</td>
<td>,</td>
<td>Stop</td>
<td></td>
</tr>
</tbody>
</table>
<p>Result: Index 5 → position after last <code>7</code>.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-55" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-55">How Does It Work (Plain Language)?</h3>
<p>If Lower Bound finds “the first ≥ target,” then Upper Bound finds “the first &gt; target.”</p>
<p>Together, they define equal ranges: <span class="math display">\[
\]</span>, ) $$ → all elements equal to the target.</p>
<section id="step-by-step-process-54" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-54">Step-by-Step Process</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 51%">
<col style="width: 48%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Set <code>low = 0</code>, <code>high = n</code></td>
</tr>
<tr class="even">
<td>2</td>
<td>While <code>low &lt; high</code>:</td>
</tr>
<tr class="odd">
<td> a. <code>mid = (low + high) // 2</code></td>
<td></td>
</tr>
<tr class="even">
<td> b. If <code>arr[mid] &lt;= target</code>, move <code>low = mid + 1</code></td>
<td></td>
</tr>
<tr class="odd">
<td> c.&nbsp;Else, move <code>high = mid</code></td>
<td></td>
</tr>
<tr class="even">
<td>3</td>
<td>When loop ends, <code>low</code> is the upper bound index</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-54" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-54">Tiny Code (Easy Versions)</h3>
<section id="python-40" class="level4">
<h4 class="anchored" data-anchor-id="python-40">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb151"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> upper_bound(arr, target):</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>    low, high <span class="op">=</span> <span class="dv">0</span>, <span class="bu">len</span>(arr)</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> low <span class="op">&lt;</span> high:</span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (low <span class="op">+</span> high) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[mid] <span class="op">&lt;=</span> target:</span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb151-7"><a href="#cb151-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb151-8"><a href="#cb151-8" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid</span>
<span id="cb151-9"><a href="#cb151-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> low</span>
<span id="cb151-10"><a href="#cb151-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-11"><a href="#cb151-11" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">11</span>]</span>
<span id="cb151-12"><a href="#cb151-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(upper_bound(arr, <span class="dv">7</span>))  <span class="co"># Output: 5</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>5</code></pre>
</section>
<section id="c-37" class="level4">
<h4 class="anchored" data-anchor-id="c-37">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb153"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> upper_bound<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> low <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> high <span class="op">=</span> n<span class="op">;</span></span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>low <span class="op">&lt;</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> low <span class="op">+</span> <span class="op">(</span>high <span class="op">-</span> low<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb153-7"><a href="#cb153-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">&lt;=</span> target<span class="op">)</span></span>
<span id="cb153-8"><a href="#cb153-8" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb153-9"><a href="#cb153-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb153-10"><a href="#cb153-10" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid<span class="op">;</span></span>
<span id="cb153-11"><a href="#cb153-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb153-12"><a href="#cb153-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> low<span class="op">;</span></span>
<span id="cb153-13"><a href="#cb153-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb153-14"><a href="#cb153-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-15"><a href="#cb153-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb153-16"><a href="#cb153-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">11</span><span class="op">};</span></span>
<span id="cb153-17"><a href="#cb153-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb153-18"><a href="#cb153-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> upper_bound<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb153-19"><a href="#cb153-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Upper bound index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb153-20"><a href="#cb153-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Upper bound index: 5</code></pre>
</section>
</section>
<section id="why-it-matters-55" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-55">Why It Matters</h3>
<ul>
<li>Locates end of duplicate block</li>
<li>Enables range counting:  count = <code>upper_bound - lower_bound</code></li>
<li>Used in maps, sets, STL containers</li>
<li>Key component in range queries and interval merging</li>
</ul>
<p>It’s the <em>right-hand anchor</em> of sorted intervals.</p>
</section>
<section id="a-gentle-proof-why-it-works-55" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-55">A Gentle Proof (Why It Works)</h3>
<p>Invariant:</p>
<ul>
<li>All indices before <code>low</code> contain <span class="math inline">\(\le\)</span> target<br>
</li>
<li>All indices after <code>high</code> contain <span class="math inline">\(&gt;\)</span> target</li>
</ul>
<p>When <code>low == high</code>, it’s the smallest index where <code>arr[i] &gt; target</code>.</p>
<p>Number of steps = <span class="math inline">\(\log_2 n\)</span><br>
→ Complexity: <span class="math display">\[
T(n) = O(\log n)
\]</span></p>
</section>
<section id="try-it-yourself-55" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-55">Try It Yourself</h3>
<ol type="1">
<li><code>arr = [1,3,5,7,7,9]</code>, <code>target=7</code> → 5</li>
<li><code>target=6</code> → 3 (insert after 5)</li>
<li><code>target=10</code> → 6 (end)</li>
<li><code>target=0</code> → 0 (front)</li>
<li>Count elements equal to 7 → <code>upper - lower</code></li>
<li>Compare with <code>bisect_right</code> in Python</li>
<li>Use to insert new element after duplicates</li>
<li>Combine with lower bound to find range</li>
<li>Visualize [lower, upper) range</li>
<li>Apply to floating point sorted list</li>
</ol>
</section>
<section id="test-cases-55" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-55">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Target</th>
<th>Output</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[1,3,5,7,7,9,11]</td>
<td>7</td>
<td>5</td>
<td>After last 7</td>
</tr>
<tr class="even">
<td>[1,3,5,7,7,9,11]</td>
<td>6</td>
<td>3</td>
<td>Insert after 5</td>
</tr>
<tr class="odd">
<td>[1,3,5,7,7,9,11]</td>
<td>12</td>
<td>7</td>
<td>End position</td>
</tr>
<tr class="even">
<td>[1,3,5,7,7,9,11]</td>
<td>0</td>
<td>0</td>
<td>Front</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-55" class="level3">
<h3 class="anchored" data-anchor-id="complexity-55">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Prerequisite</td>
<td>Sorted array</td>
</tr>
</tbody>
</table>
<p>Binary Search (Upper Bound) is how you find where “greater than” begins, the right edge of equality, the step beyond the last twin.</p>
</section>
<section id="exponential-search" class="level3">
<h3 class="anchored" data-anchor-id="exponential-search">157 Exponential Search</h3>
<p>Exponential Search is a hybrid search algorithm that quickly locates the range where a target might lie, then uses binary search inside that range.</p>
<p>It’s ideal when searching unbounded or very large sorted arrays, especially when the size is unknown or dynamic (like data streams or infinite arrays).</p>
</section>
<section id="what-problem-are-we-solving-56" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-56">What Problem Are We Solving?</h3>
<p>In a standard binary search, you need the array size. But what if the size is unknown, or huge?</p>
<p>Exponential Search solves this by:</p>
<ol type="1">
<li>Quickly finding an interval where the target could exist.</li>
<li>Performing binary search within that interval.</li>
</ol>
<p>This makes it great for:</p>
<ul>
<li>Infinite arrays (conceptual)</li>
<li>Streams</li>
<li>Linked structures with known order</li>
<li>Large sorted data where bounds are costly</li>
</ul>
<section id="example-56" class="level4">
<h4 class="anchored" data-anchor-id="example-56">Example</h4>
<p>Find <code>15</code> in <code>[1, 2, 4, 8, 16, 32, 64, 128]</code></p>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 19%">
<col style="width: 37%">
<col style="width: 29%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Range</th>
<th>Value</th>
<th>Compare</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>index 1</td>
<td>2</td>
<td>2 &lt; 15</td>
<td>expand</td>
</tr>
<tr class="even">
<td>2</td>
<td>index 2</td>
<td>4</td>
<td>4 &lt; 15</td>
<td>expand</td>
</tr>
<tr class="odd">
<td>3</td>
<td>index 4</td>
<td>16</td>
<td>16 ≥ 15</td>
<td>stop</td>
</tr>
<tr class="even">
<td>4</td>
<td>Range = [2, 4]</td>
<td>Binary Search in [4, 8, 16]</td>
<td>✅ Found 15 at index 4</td>
<td></td>
</tr>
</tbody>
</table>
<p>We doubled the bound each time (1, 2, 4, 8…) until we passed the target.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-56" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-56">How Does It Work (Plain Language)?</h3>
<p>Think of it like zooming in:</p>
<ul>
<li>Start small, double your step size until you overshoot the target.</li>
<li>Once you’ve bracketed it, zoom in with binary search.</li>
</ul>
<p>This avoids scanning linearly when the array could be massive.</p>
<section id="step-by-step-process-55" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-55">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Start with index 1</td>
</tr>
<tr class="even">
<td>2</td>
<td>While <code>i &lt; n</code> and <code>arr[i] &lt; target</code>, double <code>i</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Now target ∈ <code>[i/2, min(i, n-1)]</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>Apply binary search in that subrange</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Return found index or -1</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-55" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-55">Tiny Code (Easy Versions)</h3>
<section id="python-41" class="level4">
<h4 class="anchored" data-anchor-id="python-41">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb155"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> binary_search(arr, target, low, high):</span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> low <span class="op">&lt;=</span> high:</span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (low <span class="op">+</span> high) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[mid] <span class="op">==</span> target:</span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid</span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> arr[mid] <span class="op">&lt;</span> target:</span>
<span id="cb155-7"><a href="#cb155-7" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb155-8"><a href="#cb155-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb155-9"><a href="#cb155-9" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb155-10"><a href="#cb155-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb155-11"><a href="#cb155-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-12"><a href="#cb155-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> exponential_search(arr, target):</span>
<span id="cb155-13"><a href="#cb155-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> arr[<span class="dv">0</span>] <span class="op">==</span> target:</span>
<span id="cb155-14"><a href="#cb155-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb155-15"><a href="#cb155-15" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb155-16"><a href="#cb155-16" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb155-17"><a href="#cb155-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> n <span class="kw">and</span> arr[i] <span class="op">&lt;</span> target:</span>
<span id="cb155-18"><a href="#cb155-18" aria-hidden="true" tabindex="-1"></a>        i <span class="op">*=</span> <span class="dv">2</span></span>
<span id="cb155-19"><a href="#cb155-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> binary_search(arr, target, i <span class="op">//</span> <span class="dv">2</span>, <span class="bu">min</span>(i, n <span class="op">-</span> <span class="dv">1</span>))</span>
<span id="cb155-20"><a href="#cb155-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-21"><a href="#cb155-21" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">16</span>, <span class="dv">32</span>, <span class="dv">64</span>, <span class="dv">128</span>]</span>
<span id="cb155-22"><a href="#cb155-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(exponential_search(arr, <span class="dv">16</span>))  <span class="co"># Output: 4</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>4</code></pre>
</section>
<section id="c-38" class="level4">
<h4 class="anchored" data-anchor-id="c-38">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb157"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> binary_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>low <span class="op">&lt;=</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> low <span class="op">+</span> <span class="op">(</span>high <span class="op">-</span> low<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span></span>
<span id="cb157-7"><a href="#cb157-7" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid<span class="op">;</span></span>
<span id="cb157-8"><a href="#cb157-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span></span>
<span id="cb157-9"><a href="#cb157-9" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb157-10"><a href="#cb157-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb157-11"><a href="#cb157-11" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb157-12"><a href="#cb157-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb157-13"><a href="#cb157-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb157-14"><a href="#cb157-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb157-15"><a href="#cb157-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-16"><a href="#cb157-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> exponential_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb157-17"><a href="#cb157-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">==</span> target<span class="op">)</span></span>
<span id="cb157-18"><a href="#cb157-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb157-19"><a href="#cb157-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb157-20"><a href="#cb157-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span></span>
<span id="cb157-21"><a href="#cb157-21" aria-hidden="true" tabindex="-1"></a>        i <span class="op">*=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb157-22"><a href="#cb157-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> low <span class="op">=</span> i <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb157-23"><a href="#cb157-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> high <span class="op">=</span> <span class="op">(</span>i <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">?</span> i <span class="op">:</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb157-24"><a href="#cb157-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> binary_search<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> high<span class="op">,</span> target<span class="op">);</span></span>
<span id="cb157-25"><a href="#cb157-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb157-26"><a href="#cb157-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-27"><a href="#cb157-27" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb157-28"><a href="#cb157-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">16</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> <span class="dv">64</span><span class="op">,</span> <span class="dv">128</span><span class="op">};</span></span>
<span id="cb157-29"><a href="#cb157-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb157-30"><a href="#cb157-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> exponential_search<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="dv">16</span><span class="op">);</span></span>
<span id="cb157-31"><a href="#cb157-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Found at index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb157-32"><a href="#cb157-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 4</code></pre>
</section>
</section>
<section id="why-it-matters-56" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-56">Why It Matters</h3>
<ul>
<li>Works with unknown or infinite size arrays</li>
<li>Faster than linear scan for large <code>n</code></li>
<li>Combines doubling search and binary search</li>
<li>Used in streaming data structures, file systems, unbounded containers</li>
</ul>
<p>It’s the searcher’s flashlight, shine brighter until you see your target.</p>
</section>
<section id="a-gentle-proof-why-it-works-56" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-56">A Gentle Proof (Why It Works)</h3>
<p>Doubling creates at most <span class="math inline">\(\log_2 p\)</span> expansions,<br>
where <span class="math inline">\(p\)</span> is the position of the target.</p>
<p>Then binary search on a range of size <span class="math inline">\(O(p)\)</span> takes another <span class="math inline">\(O(\log p)\)</span>.</p>
<p>So total time: <span class="math display">\[
T(n) = O(\log p)
\]</span></p>
<p>Asymptotically equal to binary search when <span class="math inline">\(p \ll n\)</span>.</p>
</section>
<section id="try-it-yourself-56" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-56">Try It Yourself</h3>
<ol type="1">
<li>Search <code>16</code> in <code>[1,2,4,8,16,32,64,128]</code></li>
<li>Search <code>3</code> → not found</li>
<li>Trace expansions: 1,2,4,8…</li>
<li>Try <code>[10,20,30,40,50,60,70]</code> with <code>target=60</code></li>
<li>Modify doubling factor (try 3x)</li>
<li>Compare with simple binary search</li>
<li>Implement recursive exponential search</li>
<li>Use for unknown-size input stream</li>
<li>Measure expansion count</li>
<li>Visualize ranges on number line</li>
</ol>
</section>
<section id="test-cases-56" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-56">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Target</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[1,2,4,8,16,32,64]</td>
<td>16</td>
<td>4</td>
<td>Classic</td>
</tr>
<tr class="even">
<td>[1,2,4,8,16,32,64]</td>
<td>3</td>
<td>-1</td>
<td>Not found</td>
</tr>
<tr class="odd">
<td>[2,4,6,8]</td>
<td>2</td>
<td>0</td>
<td>First element</td>
</tr>
<tr class="even">
<td>[2,4,6,8]</td>
<td>10</td>
<td>-1</td>
<td>Out of range</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-56" class="level3">
<h3 class="anchored" data-anchor-id="complexity-56">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(log p), where p = position of target</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Partially</td>
</tr>
<tr class="odd">
<td>Prerequisite</td>
<td>Sorted array</td>
</tr>
</tbody>
</table>
<p>Exponential Search is how you find your way in the dark, double your reach, then look closely where the light lands.</p>
</section>
<section id="jump-search" class="level3">
<h3 class="anchored" data-anchor-id="jump-search">158 Jump Search</h3>
<p>Jump Search is a simple improvement over Linear Search, designed for sorted arrays. It works by jumping ahead in fixed-size steps instead of checking every element, then performing a linear scan within the block where the target might be.</p>
<p>It trades a bit of extra logic for a big win in speed, especially when data is sorted and random access is cheap.</p>
</section>
<section id="what-problem-are-we-solving-57" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-57">What Problem Are We Solving?</h3>
<p>Linear search checks each element one by one, slow for large arrays. Jump Search improves on this by “skipping ahead” in fixed jumps, so it makes fewer comparisons overall.</p>
<p>It’s great for:</p>
<ul>
<li>Sorted arrays</li>
<li>Fast random access (like arrays, not linked lists)</li>
<li>Simple, predictable search steps</li>
</ul>
<section id="example-57" class="level4">
<h4 class="anchored" data-anchor-id="example-57">Example</h4>
<p>Find <code>9</code> in <code>[1, 3, 5, 7, 9, 11, 13, 15]</code></p>
<p>Array size = 8 → Jump size = √8 = 2 or 3</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Jump to Index</th>
<th>Value</th>
<th>Compare</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2</td>
<td>5</td>
<td>5 &lt; 9</td>
<td>jump forward</td>
</tr>
<tr class="even">
<td>2</td>
<td>4</td>
<td>9</td>
<td>9 ≥ 9</td>
<td>stop jump</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Linear scan from 2</td>
<td>5, 7, 9</td>
<td>✅ found 9</td>
<td></td>
</tr>
</tbody>
</table>
<p>Found at index 4.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-57" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-57">How Does It Work (Plain Language)?</h3>
<p>Imagine you’re reading a sorted list of numbers. Instead of reading one number at a time, you skip ahead every few steps, like jumping stairs. Once you overshoot or match, you walk back linearly within that block.</p>
<p>Jump size ≈ √n gives a good balance between jumps and scans.</p>
<section id="step-by-step-process-56" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-56">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Choose jump size <code>step = √n</code></td>
</tr>
<tr class="even">
<td>2</td>
<td>Jump ahead while <code>arr[min(step, n)-1] &lt; target</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Once overshoot, do linear search in the previous block</td>
</tr>
<tr class="even">
<td>4</td>
<td>If found, return index, else -1</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-56" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-56">Tiny Code (Easy Versions)</h3>
<section id="python-42" class="level4">
<h4 class="anchored" data-anchor-id="python-42">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb159"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> jump_search(arr, target):</span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true" tabindex="-1"></a>    step <span class="op">=</span> <span class="bu">int</span>(math.sqrt(n))</span>
<span id="cb159-6"><a href="#cb159-6" aria-hidden="true" tabindex="-1"></a>    prev <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb159-7"><a href="#cb159-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-8"><a href="#cb159-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Jump ahead</span></span>
<span id="cb159-9"><a href="#cb159-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> prev <span class="op">&lt;</span> n <span class="kw">and</span> arr[<span class="bu">min</span>(step, n) <span class="op">-</span> <span class="dv">1</span>] <span class="op">&lt;</span> target:</span>
<span id="cb159-10"><a href="#cb159-10" aria-hidden="true" tabindex="-1"></a>        prev <span class="op">=</span> step</span>
<span id="cb159-11"><a href="#cb159-11" aria-hidden="true" tabindex="-1"></a>        step <span class="op">+=</span> <span class="bu">int</span>(math.sqrt(n))</span>
<span id="cb159-12"><a href="#cb159-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> prev <span class="op">&gt;=</span> n:</span>
<span id="cb159-13"><a href="#cb159-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb159-14"><a href="#cb159-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-15"><a href="#cb159-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Linear search within block</span></span>
<span id="cb159-16"><a href="#cb159-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(prev, <span class="bu">min</span>(step, n)):</span>
<span id="cb159-17"><a href="#cb159-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[i] <span class="op">==</span> target:</span>
<span id="cb159-18"><a href="#cb159-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i</span>
<span id="cb159-19"><a href="#cb159-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb159-20"><a href="#cb159-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-21"><a href="#cb159-21" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">11</span>, <span class="dv">13</span>, <span class="dv">15</span>]</span>
<span id="cb159-22"><a href="#cb159-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(jump_search(arr, <span class="dv">9</span>))  <span class="co"># Output: 4</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>4</code></pre>
</section>
<section id="c-39" class="level4">
<h4 class="anchored" data-anchor-id="c-39">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb161"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> jump_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> step <span class="op">=</span> sqrt<span class="op">(</span>n<span class="op">);</span></span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> prev <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb161-7"><a href="#cb161-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-8"><a href="#cb161-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>prev <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[(</span>step <span class="op">&lt;</span> n <span class="op">?</span> step <span class="op">:</span> n<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-9"><a href="#cb161-9" aria-hidden="true" tabindex="-1"></a>        prev <span class="op">=</span> step<span class="op">;</span></span>
<span id="cb161-10"><a href="#cb161-10" aria-hidden="true" tabindex="-1"></a>        step <span class="op">+=</span> sqrt<span class="op">(</span>n<span class="op">);</span></span>
<span id="cb161-11"><a href="#cb161-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>prev <span class="op">&gt;=</span> n<span class="op">)</span> <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb161-12"><a href="#cb161-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb161-13"><a href="#cb161-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-14"><a href="#cb161-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> prev<span class="op">;</span> i <span class="op">&lt;</span> <span class="op">(</span>step <span class="op">&lt;</span> n <span class="op">?</span> step <span class="op">:</span> n<span class="op">);</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb161-15"><a href="#cb161-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span> <span class="cf">return</span> i<span class="op">;</span></span>
<span id="cb161-16"><a href="#cb161-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb161-17"><a href="#cb161-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb161-18"><a href="#cb161-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb161-19"><a href="#cb161-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-20"><a href="#cb161-20" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-21"><a href="#cb161-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">13</span><span class="op">,</span> <span class="dv">15</span><span class="op">};</span></span>
<span id="cb161-22"><a href="#cb161-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb161-23"><a href="#cb161-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> jump_search<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="dv">9</span><span class="op">);</span></span>
<span id="cb161-24"><a href="#cb161-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Found at index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb161-25"><a href="#cb161-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 4</code></pre>
</section>
</section>
<section id="why-it-matters-57" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-57">Why It Matters</h3>
<ul>
<li>Faster than Linear Search for sorted arrays</li>
<li>Simpler to implement than Binary Search</li>
<li>Good for systems with non-random access penalties</li>
<li>Balance of jumps and scans minimizes comparisons</li>
</ul>
<p>Best of both worlds: quick leaps and gentle steps.</p>
</section>
<section id="a-gentle-proof-why-it-works-57" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-57">A Gentle Proof (Why It Works)</h3>
<p>Let jump size = <span class="math inline">\(m\)</span>.</p>
<p>We perform at most <span class="math inline">\(\frac{n}{m}\)</span> jumps and <span class="math inline">\(m\)</span> linear steps.<br>
Total cost: <span class="math display">\[
T(n) = O\left(\frac{n}{m} + m\right)
\]</span></p>
<p>Minimized when <span class="math inline">\(m = \sqrt{n}\)</span></p>
<p>Thus: <span class="math display">\[
T(n) = O(\sqrt{n})
\]</span></p>
</section>
<section id="try-it-yourself-57" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-57">Try It Yourself</h3>
<ol type="1">
<li>Search <code>11</code> in <code>[1,3,5,7,9,11,13,15]</code></li>
<li>Search <code>2</code> (not found)</li>
<li>Use step = 2, 3, 4 → compare jumps</li>
<li>Implement recursive version</li>
<li>Visualize jumps on paper</li>
<li>Try unsorted array (observe failure)</li>
<li>Search edge cases: first, last, middle</li>
<li>Use different step size formula</li>
<li>Combine with exponential jump</li>
<li>Compare with binary search for timing</li>
</ol>
</section>
<section id="test-cases-57" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-57">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Target</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[1,3,5,7,9,11,13,15]</td>
<td>9</td>
<td>4</td>
<td>Found</td>
</tr>
<tr class="even">
<td>[1,3,5,7,9,11,13,15]</td>
<td>2</td>
<td>-1</td>
<td>Not found</td>
</tr>
<tr class="odd">
<td>[2,4,6,8,10]</td>
<td>10</td>
<td>4</td>
<td>Last element</td>
</tr>
<tr class="even">
<td>[2,4,6,8,10]</td>
<td>2</td>
<td>0</td>
<td>First element</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-57" class="level3">
<h3 class="anchored" data-anchor-id="complexity-57">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(√n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Prerequisite</td>
<td>Sorted array</td>
</tr>
</tbody>
</table>
<p>Jump Search is like hopscotch on sorted ground, leap smartly, then step carefully once you’re close.</p>
</section>
<section id="fibonacci-search" class="level3">
<h3 class="anchored" data-anchor-id="fibonacci-search">159 Fibonacci Search</h3>
<p>Fibonacci Search is a divide-and-conquer search algorithm that uses Fibonacci numbers to determine probe positions, rather than midpoints like Binary Search. It’s especially efficient for sorted arrays stored in sequential memory, where element access cost grows with distance (for example, on magnetic tape or cache-sensitive systems).</p>
<p>It’s a clever twist on binary search, using Fibonacci numbers instead of powers of two.</p>
</section>
<section id="what-problem-are-we-solving-58" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-58">What Problem Are We Solving?</h3>
<p>In Binary Search, the midpoint splits the array evenly. In Fibonacci Search, we split using Fibonacci ratios, which keeps indices aligned to integer arithmetic, no division needed, and better cache locality in some hardware.</p>
<p>This is particularly useful when:</p>
<ul>
<li>Access cost depends on distance</li>
<li>Memory access is sequential or limited</li>
<li>We want to avoid division and floating-point math</li>
</ul>
<section id="example-58" class="level4">
<h4 class="anchored" data-anchor-id="example-58">Example</h4>
<p>Find <code>8</code> in <code>[1, 3, 5, 8, 13, 21, 34]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Fib(k)</th>
<th>Index Checked</th>
<th>Value</th>
<th>Compare</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>8</td>
<td>5</td>
<td>13</td>
<td>13 &gt; 8</td>
<td>move left</td>
</tr>
<tr class="even">
<td>2</td>
<td>5</td>
<td>2</td>
<td>5</td>
<td>5 &lt; 8</td>
<td>move right</td>
</tr>
<tr class="odd">
<td>3</td>
<td>3</td>
<td>3</td>
<td>8</td>
<td>8 = 8</td>
<td>✅ found</td>
</tr>
</tbody>
</table>
<p>Fibonacci numbers: 1, 2, 3, 5, 8, 13, … We reduce the search space using previous Fibonacci values, like Fibonacci decomposition.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-58" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-58">How Does It Work (Plain Language)?</h3>
<p>Think of Fibonacci Search as binary search guided by Fibonacci jumps. At each step:</p>
<ul>
<li>You compare the element at index <code>offset + Fib(k-2)</code></li>
<li>Depending on the result, you move left or right, using smaller Fibonacci numbers to define new intervals.</li>
</ul>
<p>You “walk down” the Fibonacci sequence until the range collapses.</p>
<section id="step-by-step-process-57" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-57">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Generate smallest Fibonacci number ≥ n</td>
</tr>
<tr class="even">
<td>2</td>
<td>Use Fib(k-2) as probe index</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Compare target with <code>arr[offset + Fib(k-2)]</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>If smaller, move left (reduce by Fib(k-2))</td>
</tr>
<tr class="odd">
<td>5</td>
<td>If larger, move right (increase offset, reduce by Fib(k-1))</td>
</tr>
<tr class="even">
<td>6</td>
<td>Continue until Fib(k) = 1</td>
</tr>
<tr class="odd">
<td>7</td>
<td>Check last element if needed</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-57" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-57">Tiny Code (Easy Versions)</h3>
<section id="python-43" class="level4">
<h4 class="anchored" data-anchor-id="python-43">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb163"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fibonacci_search(arr, target):</span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>    fibMMm2 <span class="op">=</span> <span class="dv">0</span>  <span class="co"># (m-2)'th Fibonacci</span></span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a>    fibMMm1 <span class="op">=</span> <span class="dv">1</span>  <span class="co"># (m-1)'th Fibonacci</span></span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a>    fibM <span class="op">=</span> fibMMm1 <span class="op">+</span> fibMMm2  <span class="co"># m'th Fibonacci</span></span>
<span id="cb163-6"><a href="#cb163-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-7"><a href="#cb163-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Find smallest Fibonacci &gt;= n</span></span>
<span id="cb163-8"><a href="#cb163-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> fibM <span class="op">&lt;</span> n:</span>
<span id="cb163-9"><a href="#cb163-9" aria-hidden="true" tabindex="-1"></a>        fibMMm2, fibMMm1 <span class="op">=</span> fibMMm1, fibM</span>
<span id="cb163-10"><a href="#cb163-10" aria-hidden="true" tabindex="-1"></a>        fibM <span class="op">=</span> fibMMm1 <span class="op">+</span> fibMMm2</span>
<span id="cb163-11"><a href="#cb163-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-12"><a href="#cb163-12" aria-hidden="true" tabindex="-1"></a>    offset <span class="op">=</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb163-13"><a href="#cb163-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-14"><a href="#cb163-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> fibM <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb163-15"><a href="#cb163-15" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> <span class="bu">min</span>(offset <span class="op">+</span> fibMMm2, n <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb163-16"><a href="#cb163-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-17"><a href="#cb163-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[i] <span class="op">&lt;</span> target:</span>
<span id="cb163-18"><a href="#cb163-18" aria-hidden="true" tabindex="-1"></a>            fibM <span class="op">=</span> fibMMm1</span>
<span id="cb163-19"><a href="#cb163-19" aria-hidden="true" tabindex="-1"></a>            fibMMm1 <span class="op">=</span> fibMMm2</span>
<span id="cb163-20"><a href="#cb163-20" aria-hidden="true" tabindex="-1"></a>            fibMMm2 <span class="op">=</span> fibM <span class="op">-</span> fibMMm1</span>
<span id="cb163-21"><a href="#cb163-21" aria-hidden="true" tabindex="-1"></a>            offset <span class="op">=</span> i</span>
<span id="cb163-22"><a href="#cb163-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> arr[i] <span class="op">&gt;</span> target:</span>
<span id="cb163-23"><a href="#cb163-23" aria-hidden="true" tabindex="-1"></a>            fibM <span class="op">=</span> fibMMm2</span>
<span id="cb163-24"><a href="#cb163-24" aria-hidden="true" tabindex="-1"></a>            fibMMm1 <span class="op">-=</span> fibMMm2</span>
<span id="cb163-25"><a href="#cb163-25" aria-hidden="true" tabindex="-1"></a>            fibMMm2 <span class="op">=</span> fibM <span class="op">-</span> fibMMm1</span>
<span id="cb163-26"><a href="#cb163-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb163-27"><a href="#cb163-27" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i</span>
<span id="cb163-28"><a href="#cb163-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-29"><a href="#cb163-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> fibMMm1 <span class="kw">and</span> offset <span class="op">+</span> <span class="dv">1</span> <span class="op">&lt;</span> n <span class="kw">and</span> arr[offset <span class="op">+</span> <span class="dv">1</span>] <span class="op">==</span> target:</span>
<span id="cb163-30"><a href="#cb163-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> offset <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb163-31"><a href="#cb163-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-32"><a href="#cb163-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb163-33"><a href="#cb163-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-34"><a href="#cb163-34" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">13</span>, <span class="dv">21</span>, <span class="dv">34</span>]</span>
<span id="cb163-35"><a href="#cb163-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fibonacci_search(arr, <span class="dv">8</span>))  <span class="co"># Output: 3</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>3</code></pre>
</section>
<section id="c-40" class="level4">
<h4 class="anchored" data-anchor-id="c-40">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb165"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> min<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> <span class="op">(</span>a <span class="op">&lt;</span> b<span class="op">)</span> <span class="op">?</span> a <span class="op">:</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fibonacci_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb165-6"><a href="#cb165-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> fibMMm2 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb165-7"><a href="#cb165-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> fibMMm1 <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb165-8"><a href="#cb165-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> fibM <span class="op">=</span> fibMMm1 <span class="op">+</span> fibMMm2<span class="op">;</span></span>
<span id="cb165-9"><a href="#cb165-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-10"><a href="#cb165-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>fibM <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb165-11"><a href="#cb165-11" aria-hidden="true" tabindex="-1"></a>        fibMMm2 <span class="op">=</span> fibMMm1<span class="op">;</span></span>
<span id="cb165-12"><a href="#cb165-12" aria-hidden="true" tabindex="-1"></a>        fibMMm1 <span class="op">=</span> fibM<span class="op">;</span></span>
<span id="cb165-13"><a href="#cb165-13" aria-hidden="true" tabindex="-1"></a>        fibM <span class="op">=</span> fibMMm1 <span class="op">+</span> fibMMm2<span class="op">;</span></span>
<span id="cb165-14"><a href="#cb165-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb165-15"><a href="#cb165-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-16"><a href="#cb165-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> offset <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb165-17"><a href="#cb165-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-18"><a href="#cb165-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>fibM <span class="op">&gt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb165-19"><a href="#cb165-19" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> i <span class="op">=</span> min<span class="op">(</span>offset <span class="op">+</span> fibMMm2<span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb165-20"><a href="#cb165-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-21"><a href="#cb165-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb165-22"><a href="#cb165-22" aria-hidden="true" tabindex="-1"></a>            fibM <span class="op">=</span> fibMMm1<span class="op">;</span></span>
<span id="cb165-23"><a href="#cb165-23" aria-hidden="true" tabindex="-1"></a>            fibMMm1 <span class="op">=</span> fibMMm2<span class="op">;</span></span>
<span id="cb165-24"><a href="#cb165-24" aria-hidden="true" tabindex="-1"></a>            fibMMm2 <span class="op">=</span> fibM <span class="op">-</span> fibMMm1<span class="op">;</span></span>
<span id="cb165-25"><a href="#cb165-25" aria-hidden="true" tabindex="-1"></a>            offset <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb165-26"><a href="#cb165-26" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb165-27"><a href="#cb165-27" aria-hidden="true" tabindex="-1"></a>            fibM <span class="op">=</span> fibMMm2<span class="op">;</span></span>
<span id="cb165-28"><a href="#cb165-28" aria-hidden="true" tabindex="-1"></a>            fibMMm1 <span class="op">-=</span> fibMMm2<span class="op">;</span></span>
<span id="cb165-29"><a href="#cb165-29" aria-hidden="true" tabindex="-1"></a>            fibMMm2 <span class="op">=</span> fibM <span class="op">-</span> fibMMm1<span class="op">;</span></span>
<span id="cb165-30"><a href="#cb165-30" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb165-31"><a href="#cb165-31" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i<span class="op">;</span></span>
<span id="cb165-32"><a href="#cb165-32" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb165-33"><a href="#cb165-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb165-34"><a href="#cb165-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-35"><a href="#cb165-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>fibMMm1 <span class="op">&amp;&amp;</span> offset <span class="op">+</span> <span class="dv">1</span> <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[</span>offset <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">==</span> target<span class="op">)</span></span>
<span id="cb165-36"><a href="#cb165-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> offset <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb165-37"><a href="#cb165-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-38"><a href="#cb165-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb165-39"><a href="#cb165-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb165-40"><a href="#cb165-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-41"><a href="#cb165-41" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb165-42"><a href="#cb165-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">13</span><span class="op">,</span> <span class="dv">21</span><span class="op">,</span> <span class="dv">34</span><span class="op">};</span></span>
<span id="cb165-43"><a href="#cb165-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb165-44"><a href="#cb165-44" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> fibonacci_search<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb165-45"><a href="#cb165-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Found at index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb165-46"><a href="#cb165-46" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 3</code></pre>
</section>
</section>
<section id="why-it-matters-58" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-58">Why It Matters</h3>
<ul>
<li>Uses only addition and subtraction, no division</li>
<li>Great for sequential access memory</li>
<li>Matches binary search performance (O(log n))</li>
<li>Offers better locality on some hardware</li>
</ul>
<p>It’s the search strategy built from nature’s own numbers.</p>
</section>
<section id="a-gentle-proof-why-it-works-58" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-58">A Gentle Proof (Why It Works)</h3>
<p>Each iteration reduces the search space by a Fibonacci ratio: <span class="math display">\[
F_k = F_{k-1} + F_{k-2}
\]</span></p>
<p>Hence, search depth ≈ Fibonacci index <span class="math inline">\(k \sim \log_\phi n\)</span>,<br>
where <span class="math inline">\(\phi\)</span> is the golden ratio (<span class="math inline">\(\approx 1.618\)</span>).</p>
<p>So total time: <span class="math display">\[
T(n) = O(\log n)
\]</span></p>
</section>
<section id="try-it-yourself-58" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-58">Try It Yourself</h3>
<ol type="1">
<li>Search <code>8</code> in <code>[1,3,5,8,13,21,34]</code></li>
<li>Search <code>21</code></li>
<li>Search <code>2</code> (not found)</li>
<li>Trace Fibonacci sequence steps</li>
<li>Compare probe indices with binary search</li>
<li>Try with <code>n=10</code> → Fibonacci 13 ≥ 10</li>
<li>Implement recursive version</li>
<li>Visualize probe intervals</li>
<li>Replace Fibonacci with powers of 2 (binary search)</li>
<li>Experiment with non-uniform arrays</li>
</ol>
</section>
<section id="test-cases-58" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-58">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Target</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[1,3,5,8,13,21,34]</td>
<td>8</td>
<td>3</td>
<td>Found</td>
</tr>
<tr class="even">
<td>[1,3,5,8,13,21,34]</td>
<td>2</td>
<td>-1</td>
<td>Not found</td>
</tr>
<tr class="odd">
<td>[1,3,5,8,13,21,34]</td>
<td>34</td>
<td>6</td>
<td>Last element</td>
</tr>
<tr class="even">
<td>[1,3,5,8,13,21,34]</td>
<td>1</td>
<td>0</td>
<td>First element</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-58" class="level3">
<h3 class="anchored" data-anchor-id="complexity-58">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Prerequisite</td>
<td>Sorted array</td>
</tr>
</tbody>
</table>
<p>Fibonacci Search is searching with nature’s rhythm, each step shaped by the golden ratio, balancing reach and precision.</p>
</section>
<section id="uniform-binary-search" class="level3">
<h3 class="anchored" data-anchor-id="uniform-binary-search">160 Uniform Binary Search</h3>
<p>Uniform Binary Search is an optimized form of Binary Search where the probe positions are precomputed. Instead of recalculating the midpoint at each step, it uses a lookup table of offsets to determine where to go next, making it faster in tight loops or hardware-limited systems.</p>
<p>It’s all about removing repetitive midpoint arithmetic and branching for consistent, uniform steps.</p>
</section>
<section id="what-problem-are-we-solving-59" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-59">What Problem Are We Solving?</h3>
<p>Standard binary search repeatedly computes:</p>
<p><span class="math display">\[
mid = low + \frac{high - low}{2}
\]</span></p>
<p>This is cheap on modern CPUs but expensive on:</p>
<ul>
<li>Early hardware</li>
<li>Embedded systems</li>
<li>Tight loops where division or shifting is costly</li>
</ul>
<p>Uniform Binary Search (UBS) replaces these computations with precomputed offsets for each step, giving predictable, uniform jumps.</p>
<section id="example-59" class="level4">
<h4 class="anchored" data-anchor-id="example-59">Example</h4>
<p>Search <code>25</code> in <code>[5, 10, 15, 20, 25, 30, 35, 40]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Offset</th>
<th>Index</th>
<th>Value</th>
<th>Compare</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>3</td>
<td>3</td>
<td>20</td>
<td>20 &lt; 25</td>
<td>move right</td>
</tr>
<tr class="even">
<td>2</td>
<td>1</td>
<td>5</td>
<td>30</td>
<td>30 &gt; 25</td>
<td>move left</td>
</tr>
<tr class="odd">
<td>3</td>
<td>0</td>
<td>4</td>
<td>25</td>
<td>25 = 25</td>
<td>✅ found</td>
</tr>
</tbody>
</table>
<p>Instead of recalculating midpoints, UBS uses offset table <code>[3, 1, 0]</code>.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-59" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-59">How Does It Work (Plain Language)?</h3>
<p>It’s binary search with a preplanned route. At each level:</p>
<ul>
<li>You jump by a fixed offset (from a table)</li>
<li>Compare</li>
<li>Move left or right, shrinking your window uniformly</li>
</ul>
<p>No divisions, no mid calculations, just jump and compare.</p>
<section id="step-by-step-process-58" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-58">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Precompute offset table based on array size</td>
</tr>
<tr class="even">
<td>2</td>
<td>Start at offset[0] from beginning</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Compare element with target</td>
</tr>
<tr class="even">
<td>4</td>
<td>Move left/right using next offset</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Stop when offset = 0 or found</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-58" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-58">Tiny Code (Easy Versions)</h3>
<section id="python-44" class="level4">
<h4 class="anchored" data-anchor-id="python-44">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb167"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> uniform_binary_search(arr, target):</span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Precompute offsets (powers of 2 less than n)</span></span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a>    offsets <span class="op">=</span> []</span>
<span id="cb167-5"><a href="#cb167-5" aria-hidden="true" tabindex="-1"></a>    k <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb167-6"><a href="#cb167-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> k <span class="op">&lt;</span> n:</span>
<span id="cb167-7"><a href="#cb167-7" aria-hidden="true" tabindex="-1"></a>        offsets.append(k)</span>
<span id="cb167-8"><a href="#cb167-8" aria-hidden="true" tabindex="-1"></a>        k <span class="op">*=</span> <span class="dv">2</span></span>
<span id="cb167-9"><a href="#cb167-9" aria-hidden="true" tabindex="-1"></a>    offsets.reverse()</span>
<span id="cb167-10"><a href="#cb167-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-11"><a href="#cb167-11" aria-hidden="true" tabindex="-1"></a>    low <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb167-12"><a href="#cb167-12" aria-hidden="true" tabindex="-1"></a>    idx <span class="op">=</span> offsets[<span class="dv">0</span>]</span>
<span id="cb167-13"><a href="#cb167-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-14"><a href="#cb167-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> offset <span class="kw">in</span> offsets:</span>
<span id="cb167-15"><a href="#cb167-15" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> low <span class="op">+</span> offset <span class="cf">if</span> low <span class="op">+</span> offset <span class="op">&lt;</span> n <span class="cf">else</span> n <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb167-16"><a href="#cb167-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[mid] <span class="op">==</span> target:</span>
<span id="cb167-17"><a href="#cb167-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid</span>
<span id="cb167-18"><a href="#cb167-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> arr[mid] <span class="op">&lt;</span> target:</span>
<span id="cb167-19"><a href="#cb167-19" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb167-20"><a href="#cb167-20" aria-hidden="true" tabindex="-1"></a>        <span class="co"># else move left (implicitly handled next iteration)</span></span>
<span id="cb167-21"><a href="#cb167-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-22"><a href="#cb167-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Final check</span></span>
<span id="cb167-23"><a href="#cb167-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> low <span class="op">&lt;</span> n <span class="kw">and</span> arr[low] <span class="op">==</span> target:</span>
<span id="cb167-24"><a href="#cb167-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> low</span>
<span id="cb167-25"><a href="#cb167-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb167-26"><a href="#cb167-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-27"><a href="#cb167-27" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">35</span>, <span class="dv">40</span>]</span>
<span id="cb167-28"><a href="#cb167-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(uniform_binary_search(arr, <span class="dv">25</span>))  <span class="co"># Output: 4</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>4</code></pre>
</section>
<section id="c-41" class="level4">
<h4 class="anchored" data-anchor-id="c-41">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb169"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> uniform_binary_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> k <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>k <span class="op">&lt;</span> n<span class="op">)</span> k <span class="op">&lt;&lt;=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb169-6"><a href="#cb169-6" aria-hidden="true" tabindex="-1"></a>    k <span class="op">&gt;&gt;=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb169-7"><a href="#cb169-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-8"><a href="#cb169-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> low <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb169-9"><a href="#cb169-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>k <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb169-10"><a href="#cb169-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> low <span class="op">+</span> k <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb169-11"><a href="#cb169-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>mid <span class="op">&gt;=</span> n<span class="op">)</span> mid <span class="op">=</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb169-12"><a href="#cb169-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-13"><a href="#cb169-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span></span>
<span id="cb169-14"><a href="#cb169-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid<span class="op">;</span></span>
<span id="cb169-15"><a href="#cb169-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span></span>
<span id="cb169-16"><a href="#cb169-16" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb169-17"><a href="#cb169-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-18"><a href="#cb169-18" aria-hidden="true" tabindex="-1"></a>        k <span class="op">&gt;&gt;=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// next smaller offset</span></span>
<span id="cb169-19"><a href="#cb169-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb169-20"><a href="#cb169-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-21"><a href="#cb169-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>low <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[</span>low<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span> <span class="op">?</span> low <span class="op">:</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb169-22"><a href="#cb169-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb169-23"><a href="#cb169-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-24"><a href="#cb169-24" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb169-25"><a href="#cb169-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">35</span><span class="op">,</span> <span class="dv">40</span><span class="op">};</span></span>
<span id="cb169-26"><a href="#cb169-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb169-27"><a href="#cb169-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> uniform_binary_search<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="dv">25</span><span class="op">);</span></span>
<span id="cb169-28"><a href="#cb169-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Found at index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb169-29"><a href="#cb169-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 4</code></pre>
</section>
</section>
<section id="why-it-matters-59" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-59">Why It Matters</h3>
<ul>
<li>Avoids recomputing midpoints</li>
<li>Ideal for hardware, firmware, microcontrollers</li>
<li>Ensures consistent runtime path</li>
<li>Fewer instructions → faster in tight loops</li>
</ul>
<p>Uniformity = predictability = performance.</p>
</section>
<section id="a-gentle-proof-why-it-works-59" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-59">A Gentle Proof (Why It Works)</h3>
<p>Precomputed offsets correspond to halving the search space. At each step, offset = floor(remaining_size / 2). After log₂(n) steps, we narrow down to a single element.</p>
<p>Total steps = ⌈log₂ n⌉ Each step = constant cost (no recomputation)</p>
<p>So: <span class="math display">\[
T(n) = O(\log n)
\]</span></p>
</section>
<section id="try-it-yourself-59" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-59">Try It Yourself</h3>
<ol type="1">
<li>Search <code>25</code> in <code>[5,10,15,20,25,30,35,40]</code></li>
<li>Search <code>35</code></li>
<li>Search <code>6</code> → not found</li>
<li>Precompute offset table for n=8</li>
<li>Compare steps with binary search</li>
<li>Implement for n=16</li>
<li>Use for microcontroller table lookup</li>
<li>Visualize jumps on paper</li>
<li>Measure comparisons</li>
<li>Implement recursive version</li>
</ol>
</section>
<section id="test-cases-59" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-59">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Target</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[5,10,15,20,25,30,35,40]</td>
<td>25</td>
<td>4</td>
<td>Found</td>
</tr>
<tr class="even">
<td>[5,10,15,20,25,30,35,40]</td>
<td>5</td>
<td>0</td>
<td>First element</td>
</tr>
<tr class="odd">
<td>[5,10,15,20,25,30,35,40]</td>
<td>50</td>
<td>-1</td>
<td>Not found</td>
</tr>
<tr class="even">
<td>[5,10,15,20,25,30,35,40]</td>
<td>40</td>
<td>7</td>
<td>Last element</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-59" class="level3">
<h3 class="anchored" data-anchor-id="complexity-59">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Prerequisite</td>
<td>Sorted array</td>
</tr>
</tbody>
</table>
<p>Uniform Binary Search is binary search with a map, no guesswork, no recalculations, just smooth, evenly spaced jumps to the answer.</p>
</section>
</section>
<section id="section-17.-interpolation-and-exponential-search" class="level2">
<h2 class="anchored" data-anchor-id="section-17.-interpolation-and-exponential-search">Section 17. Interpolation and exponential search</h2>
<section id="interpolation-search" class="level3">
<h3 class="anchored" data-anchor-id="interpolation-search">161 Interpolation Search</h3>
<p>Interpolation Search is a search algorithm for sorted arrays with uniformly distributed values. Unlike Binary Search, which always probes the middle, Interpolation Search estimates the position of the target using value interpolation, like finding where a number lies on a number line.</p>
<p>If Binary Search is “divide by index,” Interpolation Search is “divide by value.”</p>
</section>
<section id="what-problem-are-we-solving-60" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-60">What Problem Are We Solving?</h3>
<p>Binary Search assumes no relationship between index and value. But if the array values are uniformly spaced, we can do better by guessing where the target should be, not just the middle.</p>
<p>It’s ideal for:</p>
<ul>
<li>Uniformly distributed sorted data</li>
<li>Numeric keys (IDs, prices, timestamps)</li>
<li>Large arrays where value-based positioning matters</li>
</ul>
<section id="example-60" class="level4">
<h4 class="anchored" data-anchor-id="example-60">Example</h4>
<p>Find <code>70</code> in <code>[10, 20, 30, 40, 50, 60, 70, 80, 90]</code></p>
<p>Estimate position:</p>
<p><span class="math display">\[
pos = low + \frac{(target - arr[low]) \times (high - low)}{arr[high] - arr[low]}
\]</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Low</th>
<th>High</th>
<th>Pos</th>
<th>Value</th>
<th>Compare</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0</td>
<td>8</td>
<td>7</td>
<td>80</td>
<td>80 &gt; 70</td>
<td>move left</td>
</tr>
<tr class="even">
<td>2</td>
<td>0</td>
<td>6</td>
<td>6</td>
<td>70</td>
<td>70 = 70</td>
<td>✅ found</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-does-it-work-plain-language-60" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-60">How Does It Work (Plain Language)?</h3>
<p>Imagine the array as a number line. If your target is closer to the high end, start searching closer to the right. You <em>interpolate</em>, estimate the target’s index based on its value proportion between min and max.</p>
<p>So rather than halving blindly, you jump to the likely spot.</p>
<section id="step-by-step-process-59" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-59">Step-by-Step Process</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 51%">
<col style="width: 48%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Initialize <code>low = 0</code>, <code>high = n - 1</code></td>
</tr>
<tr class="even">
<td>2</td>
<td>While <code>low &lt;= high</code> and <code>target</code> is in range:</td>
</tr>
<tr class="odd">
<td>  Estimate position using interpolation formula</td>
<td></td>
</tr>
<tr class="even">
<td>3</td>
<td>Compare <code>arr[pos]</code> with <code>target</code></td>
</tr>
<tr class="odd">
<td>4</td>
<td>If equal → found</td>
</tr>
<tr class="even">
<td>5</td>
<td>If smaller → move <code>low = pos + 1</code></td>
</tr>
<tr class="odd">
<td>6</td>
<td>If larger → move <code>high = pos - 1</code></td>
</tr>
<tr class="even">
<td>7</td>
<td>Repeat until found or <code>low &gt; high</code></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-59" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-59">Tiny Code (Easy Versions)</h3>
<section id="python-45" class="level4">
<h4 class="anchored" data-anchor-id="python-45">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb171"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> interpolation_search(arr, target):</span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>    low, high <span class="op">=</span> <span class="dv">0</span>, <span class="bu">len</span>(arr) <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> low <span class="op">&lt;=</span> high <span class="kw">and</span> arr[low] <span class="op">&lt;=</span> target <span class="op">&lt;=</span> arr[high]:</span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[high] <span class="op">==</span> arr[low]:</span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> arr[low] <span class="op">==</span> target:</span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> low</span>
<span id="cb171-8"><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb171-9"><a href="#cb171-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-10"><a href="#cb171-10" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> low <span class="op">+</span> (target <span class="op">-</span> arr[low]) <span class="op">*</span> (high <span class="op">-</span> low) <span class="op">//</span> (arr[high] <span class="op">-</span> arr[low])</span>
<span id="cb171-11"><a href="#cb171-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-12"><a href="#cb171-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[pos] <span class="op">==</span> target:</span>
<span id="cb171-13"><a href="#cb171-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> pos</span>
<span id="cb171-14"><a href="#cb171-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> arr[pos] <span class="op">&lt;</span> target:</span>
<span id="cb171-15"><a href="#cb171-15" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb171-16"><a href="#cb171-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb171-17"><a href="#cb171-17" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> pos <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb171-18"><a href="#cb171-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-19"><a href="#cb171-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb171-20"><a href="#cb171-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-21"><a href="#cb171-21" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>, <span class="dv">90</span>]</span>
<span id="cb171-22"><a href="#cb171-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(interpolation_search(arr, <span class="dv">70</span>))  <span class="co"># Output: 6</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>6</code></pre>
</section>
<section id="c-42" class="level4">
<h4 class="anchored" data-anchor-id="c-42">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb173"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> interpolation_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> low <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> high <span class="op">=</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-6"><a href="#cb173-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>low <span class="op">&lt;=</span> high <span class="op">&amp;&amp;</span> target <span class="op">&gt;=</span> arr<span class="op">[</span>low<span class="op">]</span> <span class="op">&amp;&amp;</span> target <span class="op">&lt;=</span> arr<span class="op">[</span>high<span class="op">])</span> <span class="op">{</span></span>
<span id="cb173-7"><a href="#cb173-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>high<span class="op">]</span> <span class="op">==</span> arr<span class="op">[</span>low<span class="op">])</span> <span class="op">{</span></span>
<span id="cb173-8"><a href="#cb173-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>low<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span> <span class="cf">return</span> low<span class="op">;</span></span>
<span id="cb173-9"><a href="#cb173-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb173-10"><a href="#cb173-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb173-11"><a href="#cb173-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-12"><a href="#cb173-12" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> pos <span class="op">=</span> low <span class="op">+</span> <span class="op">(</span><span class="dt">double</span><span class="op">)(</span>high <span class="op">-</span> low<span class="op">)</span> <span class="op">*</span> <span class="op">(</span>target <span class="op">-</span> arr<span class="op">[</span>low<span class="op">])</span> <span class="op">/</span> <span class="op">(</span>arr<span class="op">[</span>high<span class="op">]</span> <span class="op">-</span> arr<span class="op">[</span>low<span class="op">]);</span></span>
<span id="cb173-13"><a href="#cb173-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-14"><a href="#cb173-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span></span>
<span id="cb173-15"><a href="#cb173-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> pos<span class="op">;</span></span>
<span id="cb173-16"><a href="#cb173-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>pos<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span></span>
<span id="cb173-17"><a href="#cb173-17" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb173-18"><a href="#cb173-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb173-19"><a href="#cb173-19" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> pos <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb173-20"><a href="#cb173-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb173-21"><a href="#cb173-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-22"><a href="#cb173-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb173-23"><a href="#cb173-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb173-24"><a href="#cb173-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-25"><a href="#cb173-25" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb173-26"><a href="#cb173-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span><span class="op">,</span> <span class="dv">60</span><span class="op">,</span> <span class="dv">70</span><span class="op">,</span> <span class="dv">80</span><span class="op">,</span> <span class="dv">90</span><span class="op">};</span></span>
<span id="cb173-27"><a href="#cb173-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb173-28"><a href="#cb173-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> interpolation_search<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="dv">70</span><span class="op">);</span></span>
<span id="cb173-29"><a href="#cb173-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Found at index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb173-30"><a href="#cb173-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 6</code></pre>
</section>
</section>
<section id="why-it-matters-60" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-60">Why It Matters</h3>
<ul>
<li>Faster than Binary Search for uniformly distributed data</li>
<li>Ideal for dense key spaces (like hash slots, ID ranges)</li>
<li>Can achieve O(log log n) average time</li>
<li>Preserves sorted order search logic</li>
</ul>
<p>It’s the value-aware cousin of Binary Search.</p>
</section>
<section id="a-gentle-proof-why-it-works-60" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-60">A Gentle Proof (Why It Works)</h3>
<p>If data is uniformly distributed, each probe halves value range logarithmically. Expected probes: <span class="math display">\[
T(n) = O(\log \log n)
\]</span> Worst case (non-uniform): <span class="math display">\[
T(n) = O(n)
\]</span></p>
<p>So it outperforms binary search only under uniform value distribution.</p>
</section>
<section id="try-it-yourself-60" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-60">Try It Yourself</h3>
<ol type="1">
<li>Search <code>70</code> in <code>[10,20,30,40,50,60,70,80,90]</code></li>
<li>Search <code>25</code> (not found)</li>
<li>Try <code>arr = [2,4,8,16,32,64]</code>, notice uneven distribution</li>
<li>Plot estimated positions</li>
<li>Compare steps with Binary Search</li>
<li>Use floating-point vs integer division</li>
<li>Implement recursive version</li>
<li>Search <code>10</code> (first element)</li>
<li>Search <code>90</code> (last element)</li>
<li>Measure iterations on uniform vs non-uniform data</li>
</ol>
</section>
<section id="test-cases-60" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-60">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Target</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[10,20,30,40,50,60,70,80,90]</td>
<td>70</td>
<td>6</td>
<td>Found</td>
</tr>
<tr class="even">
<td>[10,20,30,40,50,60,70,80,90]</td>
<td>25</td>
<td>-1</td>
<td>Not found</td>
</tr>
<tr class="odd">
<td>[10,20,30,40,50,60,70,80,90]</td>
<td>10</td>
<td>0</td>
<td>First</td>
</tr>
<tr class="even">
<td>[10,20,30,40,50,60,70,80,90]</td>
<td>90</td>
<td>8</td>
<td>Last</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-60" class="level3">
<h3 class="anchored" data-anchor-id="complexity-60">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (avg)</td>
<td>O(log log n)</td>
</tr>
<tr class="even">
<td>Time (worst)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Prerequisite</td>
<td>Sorted &amp; uniform array</td>
</tr>
</tbody>
</table>
<p>Interpolation Search is like a treasure map that scales by value, it doesn’t just guess the middle, it guesses where the gold really lies.</p>
</section>
<section id="recursive-interpolation-search" class="level3">
<h3 class="anchored" data-anchor-id="recursive-interpolation-search">162 Recursive Interpolation Search</h3>
<p>Recursive Interpolation Search is the recursive variant of the classic Interpolation Search. Instead of looping, it calls itself on smaller subranges, estimating the likely position using the same value-based interpolation formula.</p>
<p>It’s a natural way to express the algorithm for learners who think recursively, same logic, cleaner flow.</p>
</section>
<section id="what-problem-are-we-solving-61" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-61">What Problem Are We Solving?</h3>
<p>We’re taking the iterative interpolation search and expressing it recursively, to highlight the divide-and-conquer nature. The recursive form is often more intuitive and mathematically aligned with its interpolation logic.</p>
<p>You’ll use this when:</p>
<ul>
<li>Teaching or visualizing recursive logic</li>
<li>Writing clean, declarative search code</li>
<li>Practicing recursion-to-iteration transitions</li>
</ul>
<section id="example-61" class="level4">
<h4 class="anchored" data-anchor-id="example-61">Example</h4>
<p>Find <code>50</code> in <code>[10, 20, 30, 40, 50, 60, 70, 80, 90]</code></p>
<p>Step 1: low = 0, high = 8 pos = 0 + (50 - 10) × (8 - 0) / (90 - 10) = 4 arr[4] = 50 → ✅ found</p>
<p>Recursion stops immediately, one call, one success.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-61" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-61">How Does It Work (Plain Language)?</h3>
<p>Instead of looping, each recursive call zooms in to the subrange where the target might be. Each call computes an estimated index <code>pos</code> proportional to the target’s distance between <code>arr[low]</code> and <code>arr[high]</code>.</p>
<p>If value is higher → recurse right If lower → recurse left If equal → return index</p>
<section id="step-by-step-process-60" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-60">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Base case: if <code>low &gt; high</code> or target out of range → not found</td>
</tr>
<tr class="even">
<td>2</td>
<td>Compute position estimate using interpolation formula</td>
</tr>
<tr class="odd">
<td>3</td>
<td>If <code>arr[pos] == target</code> → return <code>pos</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>If <code>arr[pos] &lt; target</code> → recurse on right half</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Else recurse on left half</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-60" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-60">Tiny Code (Easy Versions)</h3>
<section id="python-46" class="level4">
<h4 class="anchored" data-anchor-id="python-46">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb175"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> interpolation_search_recursive(arr, low, high, target):</span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> low <span class="op">&gt;</span> high <span class="kw">or</span> target <span class="op">&lt;</span> arr[low] <span class="kw">or</span> target <span class="op">&gt;</span> arr[high]:</span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-5"><a href="#cb175-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> arr[high] <span class="op">==</span> arr[low]:</span>
<span id="cb175-6"><a href="#cb175-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> low <span class="cf">if</span> arr[low] <span class="op">==</span> target <span class="cf">else</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb175-7"><a href="#cb175-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-8"><a href="#cb175-8" aria-hidden="true" tabindex="-1"></a>    pos <span class="op">=</span> low <span class="op">+</span> (target <span class="op">-</span> arr[low]) <span class="op">*</span> (high <span class="op">-</span> low) <span class="op">//</span> (arr[high] <span class="op">-</span> arr[low])</span>
<span id="cb175-9"><a href="#cb175-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-10"><a href="#cb175-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> arr[pos] <span class="op">==</span> target:</span>
<span id="cb175-11"><a href="#cb175-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> pos</span>
<span id="cb175-12"><a href="#cb175-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> arr[pos] <span class="op">&lt;</span> target:</span>
<span id="cb175-13"><a href="#cb175-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> interpolation_search_recursive(arr, pos <span class="op">+</span> <span class="dv">1</span>, high, target)</span>
<span id="cb175-14"><a href="#cb175-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb175-15"><a href="#cb175-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> interpolation_search_recursive(arr, low, pos <span class="op">-</span> <span class="dv">1</span>, target)</span>
<span id="cb175-16"><a href="#cb175-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-17"><a href="#cb175-17" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>, <span class="dv">90</span>]</span>
<span id="cb175-18"><a href="#cb175-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(interpolation_search_recursive(arr, <span class="dv">0</span>, <span class="bu">len</span>(arr) <span class="op">-</span> <span class="dv">1</span>, <span class="dv">50</span>))  <span class="co"># Output: 4</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>4</code></pre>
</section>
<section id="c-43" class="level4">
<h4 class="anchored" data-anchor-id="c-43">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb177"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> interpolation_search_recursive<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>low <span class="op">&gt;</span> high <span class="op">||</span> target <span class="op">&lt;</span> arr<span class="op">[</span>low<span class="op">]</span> <span class="op">||</span> target <span class="op">&gt;</span> arr<span class="op">[</span>high<span class="op">])</span></span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb177-6"><a href="#cb177-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-7"><a href="#cb177-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>high<span class="op">]</span> <span class="op">==</span> arr<span class="op">[</span>low<span class="op">])</span></span>
<span id="cb177-8"><a href="#cb177-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">(</span>arr<span class="op">[</span>low<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span> <span class="op">?</span> low <span class="op">:</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb177-9"><a href="#cb177-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-10"><a href="#cb177-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pos <span class="op">=</span> low <span class="op">+</span> <span class="op">(</span><span class="dt">double</span><span class="op">)(</span>high <span class="op">-</span> low<span class="op">)</span> <span class="op">*</span> <span class="op">(</span>target <span class="op">-</span> arr<span class="op">[</span>low<span class="op">])</span> <span class="op">/</span> <span class="op">(</span>arr<span class="op">[</span>high<span class="op">]</span> <span class="op">-</span> arr<span class="op">[</span>low<span class="op">]);</span></span>
<span id="cb177-11"><a href="#cb177-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-12"><a href="#cb177-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span></span>
<span id="cb177-13"><a href="#cb177-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> pos<span class="op">;</span></span>
<span id="cb177-14"><a href="#cb177-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>pos<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span></span>
<span id="cb177-15"><a href="#cb177-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> interpolation_search_recursive<span class="op">(</span>arr<span class="op">,</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> high<span class="op">,</span> target<span class="op">);</span></span>
<span id="cb177-16"><a href="#cb177-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb177-17"><a href="#cb177-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> interpolation_search_recursive<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> pos <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> target<span class="op">);</span></span>
<span id="cb177-18"><a href="#cb177-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb177-19"><a href="#cb177-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-20"><a href="#cb177-20" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb177-21"><a href="#cb177-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span><span class="op">,</span> <span class="dv">60</span><span class="op">,</span> <span class="dv">70</span><span class="op">,</span> <span class="dv">80</span><span class="op">,</span> <span class="dv">90</span><span class="op">};</span></span>
<span id="cb177-22"><a href="#cb177-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb177-23"><a href="#cb177-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> interpolation_search_recursive<span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">50</span><span class="op">);</span></span>
<span id="cb177-24"><a href="#cb177-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Found at index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb177-25"><a href="#cb177-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 4</code></pre>
</section>
</section>
<section id="why-it-matters-61" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-61">Why It Matters</h3>
<ul>
<li>Shows the recursive nature of interpolation-based estimation</li>
<li>Clean, mathematical form for teaching and analysis</li>
<li>Demonstrates recursion depth proportional to search cost</li>
<li>Easier to reason about with divide-by-value intuition</li>
</ul>
<p>Think of it as binary search’s artistic cousin, elegant and value-aware.</p>
</section>
<section id="a-gentle-proof-why-it-works-61" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-61">A Gentle Proof (Why It Works)</h3>
<p>In uniform distributions, each recursive step shrinks the search space multiplicatively, not just by half.</p>
<p>If data is uniform: <span class="math display">\[
T(n) = T(n / f) + O(1)
\Rightarrow T(n) = O(\log \log n)
\]</span></p>
<p>If not uniform: <span class="math display">\[
T(n) = O(n)
\]</span></p>
<p>Recursion depth = number of interpolation refinements ≈ log log n.</p>
</section>
<section id="try-it-yourself-61" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-61">Try It Yourself</h3>
<ol type="1">
<li>Search <code>70</code> in <code>[10,20,30,40,50,60,70,80,90]</code></li>
<li>Search <code>25</code> (not found)</li>
<li>Trace recursive calls manually</li>
<li>Add print statements to watch low/high shrink</li>
<li>Compare depth with binary search</li>
<li>Try <code>[2,4,8,16,32,64]</code> (non-uniform)</li>
<li>Add guard for <code>arr[low] == arr[high]</code></li>
<li>Implement tail recursion optimization</li>
<li>Test base cases (first, last, single element)</li>
<li>Time comparison: iterative vs recursive</li>
</ol>
</section>
<section id="test-cases-61" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-61">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Target</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[10,20,30,40,50,60,70,80,90]</td>
<td>50</td>
<td>4</td>
<td>Found</td>
</tr>
<tr class="even">
<td>[10,20,30,40,50,60,70,80,90]</td>
<td>25</td>
<td>-1</td>
<td>Not found</td>
</tr>
<tr class="odd">
<td>[10,20,30,40,50,60,70,80,90]</td>
<td>10</td>
<td>0</td>
<td>First</td>
</tr>
<tr class="even">
<td>[10,20,30,40,50,60,70,80,90]</td>
<td>90</td>
<td>8</td>
<td>Last</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-61" class="level3">
<h3 class="anchored" data-anchor-id="complexity-61">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (avg)</td>
<td>O(log log n)</td>
</tr>
<tr class="even">
<td>Time (worst)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(log log n) (recursion)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Prerequisite</td>
<td>Sorted &amp; uniform array</td>
</tr>
</tbody>
</table>
<p>Recursive Interpolation Search is like zooming in with value-based intuition, each step a mathematical guess, each call a sharper focus.</p>
</section>
<section id="exponential-search-1" class="level3">
<h3 class="anchored" data-anchor-id="exponential-search-1">163 Exponential Search</h3>
<p>Exponential Search combines range expansion with binary search. It’s perfect when the array size is unknown or infinite, it first finds the range that might contain the target by doubling the index, then uses binary search within that range.</p>
<p>It’s the “zoom out, then zoom in” strategy for searching sorted data.</p>
</section>
<section id="what-problem-are-we-solving-62" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-62">What Problem Are We Solving?</h3>
<p>If you don’t know the length of your sorted array, you can’t directly apply binary search. You need to first bound the search space, so you know where to look.</p>
<p>Exponential Search does exactly that:</p>
<ul>
<li>It doubles the index (1, 2, 4, 8, 16…) until it overshoots.</li>
<li>Then it performs binary search in that bracket.</li>
</ul>
<p>Use it for:</p>
<ul>
<li>Infinite or dynamically sized sorted arrays</li>
<li>Streams</li>
<li>Unknown-length files or data structures</li>
</ul>
<section id="example-62" class="level4">
<h4 class="anchored" data-anchor-id="example-62">Example</h4>
<p>Find <code>19</code> in <code>[2, 4, 8, 16, 19, 23, 42, 64, 128]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Range</th>
<th>Value</th>
<th>Compare</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>4</td>
<td>4 &lt; 19</td>
<td>double index</td>
</tr>
<tr class="even">
<td>2</td>
<td>2</td>
<td>8</td>
<td>8 &lt; 19</td>
<td>double index</td>
</tr>
<tr class="odd">
<td>3</td>
<td>4</td>
<td>19</td>
<td>19 = 19</td>
<td>✅ found</td>
</tr>
</tbody>
</table>
<p>If it had overshot (say, target 23), we’d binary search between 4 and 8.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-62" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-62">How Does It Work (Plain Language)?</h3>
<p>Think of searching an endless bookshelf. You take steps of size 1, 2, 4, 8… until you pass the book number you want. Now you know which shelf section it’s on, then you check precisely using binary search.</p>
<p>Fast to expand, precise to finish.</p>
<section id="step-by-step-process-61" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-61">Step-by-Step Process</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 93%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Start at index 1</td>
</tr>
<tr class="even">
<td>2</td>
<td>While <code>i &lt; n</code> and <code>arr[i] &lt; target</code>, double <code>i</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>When overshoot → binary search between <code>i/2</code> and <code>min(i, n-1)</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>Return index if found, else -1</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-61" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-61">Tiny Code (Easy Versions)</h3>
<section id="python-47" class="level4">
<h4 class="anchored" data-anchor-id="python-47">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb179"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> binary_search(arr, low, high, target):</span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> low <span class="op">&lt;=</span> high:</span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (low <span class="op">+</span> high) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[mid] <span class="op">==</span> target:</span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid</span>
<span id="cb179-6"><a href="#cb179-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> arr[mid] <span class="op">&lt;</span> target:</span>
<span id="cb179-7"><a href="#cb179-7" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb179-8"><a href="#cb179-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb179-9"><a href="#cb179-9" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb179-10"><a href="#cb179-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb179-11"><a href="#cb179-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-12"><a href="#cb179-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> exponential_search(arr, target):</span>
<span id="cb179-13"><a href="#cb179-13" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb179-14"><a href="#cb179-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> n <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb179-15"><a href="#cb179-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb179-16"><a href="#cb179-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> arr[<span class="dv">0</span>] <span class="op">==</span> target:</span>
<span id="cb179-17"><a href="#cb179-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb179-18"><a href="#cb179-18" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb179-19"><a href="#cb179-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> n <span class="kw">and</span> arr[i] <span class="op">&lt;=</span> target:</span>
<span id="cb179-20"><a href="#cb179-20" aria-hidden="true" tabindex="-1"></a>        i <span class="op">*=</span> <span class="dv">2</span></span>
<span id="cb179-21"><a href="#cb179-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> binary_search(arr, i <span class="op">//</span> <span class="dv">2</span>, <span class="bu">min</span>(i, n <span class="op">-</span> <span class="dv">1</span>), target)</span>
<span id="cb179-22"><a href="#cb179-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-23"><a href="#cb179-23" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">16</span>, <span class="dv">19</span>, <span class="dv">23</span>, <span class="dv">42</span>, <span class="dv">64</span>, <span class="dv">128</span>]</span>
<span id="cb179-24"><a href="#cb179-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(exponential_search(arr, <span class="dv">19</span>))  <span class="co"># Output: 4</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>4</code></pre>
</section>
<section id="c-44" class="level4">
<h4 class="anchored" data-anchor-id="c-44">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb181"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> binary_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>low <span class="op">&lt;=</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> low <span class="op">+</span> <span class="op">(</span>high <span class="op">-</span> low<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb181-6"><a href="#cb181-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span></span>
<span id="cb181-7"><a href="#cb181-7" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid<span class="op">;</span></span>
<span id="cb181-8"><a href="#cb181-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span></span>
<span id="cb181-9"><a href="#cb181-9" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb181-10"><a href="#cb181-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb181-11"><a href="#cb181-11" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb181-12"><a href="#cb181-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb181-13"><a href="#cb181-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb181-14"><a href="#cb181-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb181-15"><a href="#cb181-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-16"><a href="#cb181-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> exponential_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb181-17"><a href="#cb181-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb181-18"><a href="#cb181-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">==</span> target<span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb181-19"><a href="#cb181-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-20"><a href="#cb181-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb181-21"><a href="#cb181-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;=</span> target<span class="op">)</span></span>
<span id="cb181-22"><a href="#cb181-22" aria-hidden="true" tabindex="-1"></a>        i <span class="op">*=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb181-23"><a href="#cb181-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-24"><a href="#cb181-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> low <span class="op">=</span> i <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb181-25"><a href="#cb181-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> high <span class="op">=</span> <span class="op">(</span>i <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">?</span> i <span class="op">:</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb181-26"><a href="#cb181-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> binary_search<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> high<span class="op">,</span> target<span class="op">);</span></span>
<span id="cb181-27"><a href="#cb181-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb181-28"><a href="#cb181-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-29"><a href="#cb181-29" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb181-30"><a href="#cb181-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">2</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">16</span><span class="op">,</span> <span class="dv">19</span><span class="op">,</span> <span class="dv">23</span><span class="op">,</span> <span class="dv">42</span><span class="op">,</span> <span class="dv">64</span><span class="op">,</span> <span class="dv">128</span><span class="op">};</span></span>
<span id="cb181-31"><a href="#cb181-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb181-32"><a href="#cb181-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> exponential_search<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="dv">19</span><span class="op">);</span></span>
<span id="cb181-33"><a href="#cb181-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Found at index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb181-34"><a href="#cb181-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 4</code></pre>
</section>
</section>
<section id="why-it-matters-62" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-62">Why It Matters</h3>
<ul>
<li>Handles unknown size arrays</li>
<li>Logarithmic search after expansion</li>
<li>Fewer comparisons for small targets</li>
<li>Common in unbounded search, streams, linked memory</li>
</ul>
<p>It’s the search that grows as needed, like zooming your scope until the target appears.</p>
</section>
<section id="a-gentle-proof-why-it-works-62" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-62">A Gentle Proof (Why It Works)</h3>
<p>Each iteration reduces the search space by a Fibonacci ratio: <span class="math display">\[
F_k = F_{k-1} + F_{k-2}
\]</span></p>
<p>Hence, search depth ≈ Fibonacci index <span class="math inline">\(k \sim \log_\phi n\)</span>,<br>
where <span class="math inline">\(\phi\)</span> is the golden ratio (<span class="math inline">\(\approx 1.618\)</span>).</p>
<p>So total time: <span class="math display">\[
T(n) = O(\log n)
\]</span></p>
</section>
<section id="try-it-yourself-62" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-62">Try It Yourself</h3>
<ol type="1">
<li>Search <code>19</code> in <code>[2,4,8,16,19,23,42,64,128]</code></li>
<li>Search <code>42</code></li>
<li>Search <code>1</code> (not found)</li>
<li>Trace expansion: 1, 2, 4, 8…</li>
<li>Compare expansion steps vs binary search calls</li>
<li>Try on huge array, small target</li>
<li>Try on dynamic-size list (simulate infinite)</li>
<li>Implement recursive version</li>
<li>Measure expansions vs comparisons</li>
<li>Combine with galloping search in TimSort</li>
</ol>
</section>
<section id="test-cases-62" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-62">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Target</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[2,4,8,16,19,23,42,64,128]</td>
<td>19</td>
<td>4</td>
<td>Found</td>
</tr>
<tr class="even">
<td>[2,4,8,16,19,23,42,64,128]</td>
<td>23</td>
<td>5</td>
<td>Found</td>
</tr>
<tr class="odd">
<td>[2,4,8,16,19,23,42,64,128]</td>
<td>1</td>
<td>-1</td>
<td>Not found</td>
</tr>
<tr class="even">
<td>[2,4,8,16,19,23,42,64,128]</td>
<td>128</td>
<td>8</td>
<td>Last element</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-62" class="level3">
<h3 class="anchored" data-anchor-id="complexity-62">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(log p)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Prerequisite</td>
<td>Sorted array</td>
</tr>
</tbody>
</table>
<p>Exponential Search is your wayfinder, it reaches out in powers of two, then narrows in precisely where the target hides.</p>
</section>
<section id="doubling-search" class="level3">
<h3 class="anchored" data-anchor-id="doubling-search">164 Doubling Search</h3>
<p>Doubling Search (also called Unbounded Search) is the general pattern behind Exponential Search. It’s used when the data size or range is unknown, and you need to quickly discover a search interval that contains the target before performing a precise search (like binary search) inside that interval.</p>
<p>Think of it as <em>“search by doubling until you find your bracket.”</em></p>
</section>
<section id="what-problem-are-we-solving-63" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-63">What Problem Are We Solving?</h3>
<p>In many real-world scenarios, you don’t know the array’s length or the bounds of your search domain. You can’t jump straight into binary search, you need an upper bound first.</p>
<p>Doubling Search gives you a strategy to find that bound quickly, in logarithmic time, by doubling your index or step size until you overshoot the target.</p>
<p>Perfect for:</p>
<ul>
<li>Infinite or streaming sequences</li>
<li>Functions or implicit arrays (not stored in memory)</li>
<li>Search domains defined by value, not length</li>
</ul>
<section id="example-63" class="level4">
<h4 class="anchored" data-anchor-id="example-63">Example</h4>
<p>Find <code>23</code> in <code>[2, 4, 8, 16, 19, 23, 42, 64, 128]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Range</th>
<th>Value</th>
<th>Compare</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>i = 1</td>
<td>4</td>
<td>4 &lt; 23</td>
<td>double i</td>
</tr>
<tr class="even">
<td>2</td>
<td>i = 2</td>
<td>8</td>
<td>8 &lt; 23</td>
<td>double i</td>
</tr>
<tr class="odd">
<td>3</td>
<td>i = 4</td>
<td>16</td>
<td>16 &lt; 23</td>
<td>double i</td>
</tr>
<tr class="even">
<td>4</td>
<td>i = 8</td>
<td>128</td>
<td>128 &gt; 23</td>
<td>stop</td>
</tr>
</tbody>
</table>
<p>Range found: <code>[4, 8]</code> Now run binary search within <code>[16, 19, 23, 42, 64, 128]</code> ✅ Found at index 5</p>
</section>
</section>
<section id="how-does-it-work-plain-language-63" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-63">How Does It Work (Plain Language)?</h3>
<p>Start small, test the first few steps. Every time you don’t find your target and the value is still less, double your index (1, 2, 4, 8, 16…). Once you pass your target, you’ve found your interval, then you search precisely.</p>
<p>It’s like walking in the dark and doubling your stride each time until you see the light, then stepping back carefully.</p>
<section id="step-by-step-process-62" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-62">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Start at index 1</td>
</tr>
<tr class="even">
<td>2</td>
<td>While <code>arr[i] &lt; target</code>, set <code>i = 2 × i</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>When overshoot, define range <code>[i/2, min(i, n-1)]</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>Apply binary search within range</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Return index or -1 if not found</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-62" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-62">Tiny Code (Easy Versions)</h3>
<section id="python-48" class="level4">
<h4 class="anchored" data-anchor-id="python-48">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb183"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> doubling_search(arr, target):</span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> n <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> arr[<span class="dv">0</span>] <span class="op">==</span> target:</span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb183-7"><a href="#cb183-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-8"><a href="#cb183-8" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb183-9"><a href="#cb183-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> n <span class="kw">and</span> arr[i] <span class="op">&lt;</span> target:</span>
<span id="cb183-10"><a href="#cb183-10" aria-hidden="true" tabindex="-1"></a>        i <span class="op">*=</span> <span class="dv">2</span></span>
<span id="cb183-11"><a href="#cb183-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-12"><a href="#cb183-12" aria-hidden="true" tabindex="-1"></a>    low <span class="op">=</span> i <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb183-13"><a href="#cb183-13" aria-hidden="true" tabindex="-1"></a>    high <span class="op">=</span> <span class="bu">min</span>(i, n <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb183-14"><a href="#cb183-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-15"><a href="#cb183-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># binary search</span></span>
<span id="cb183-16"><a href="#cb183-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> low <span class="op">&lt;=</span> high:</span>
<span id="cb183-17"><a href="#cb183-17" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (low <span class="op">+</span> high) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb183-18"><a href="#cb183-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[mid] <span class="op">==</span> target:</span>
<span id="cb183-19"><a href="#cb183-19" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid</span>
<span id="cb183-20"><a href="#cb183-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> arr[mid] <span class="op">&lt;</span> target:</span>
<span id="cb183-21"><a href="#cb183-21" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb183-22"><a href="#cb183-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb183-23"><a href="#cb183-23" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb183-24"><a href="#cb183-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-25"><a href="#cb183-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb183-26"><a href="#cb183-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-27"><a href="#cb183-27" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">16</span>, <span class="dv">19</span>, <span class="dv">23</span>, <span class="dv">42</span>, <span class="dv">64</span>, <span class="dv">128</span>]</span>
<span id="cb183-28"><a href="#cb183-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(doubling_search(arr, <span class="dv">23</span>))  <span class="co"># Output: 5</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>5</code></pre>
</section>
<section id="c-45" class="level4">
<h4 class="anchored" data-anchor-id="c-45">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb185"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> binary_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>low <span class="op">&lt;=</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> low <span class="op">+</span> <span class="op">(</span>high <span class="op">-</span> low<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span></span>
<span id="cb185-7"><a href="#cb185-7" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid<span class="op">;</span></span>
<span id="cb185-8"><a href="#cb185-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span></span>
<span id="cb185-9"><a href="#cb185-9" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb185-10"><a href="#cb185-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb185-11"><a href="#cb185-11" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb185-12"><a href="#cb185-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb185-13"><a href="#cb185-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb185-14"><a href="#cb185-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb185-15"><a href="#cb185-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-16"><a href="#cb185-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> doubling_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb185-17"><a href="#cb185-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb185-18"><a href="#cb185-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">==</span> target<span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb185-19"><a href="#cb185-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-20"><a href="#cb185-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb185-21"><a href="#cb185-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span></span>
<span id="cb185-22"><a href="#cb185-22" aria-hidden="true" tabindex="-1"></a>        i <span class="op">*=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb185-23"><a href="#cb185-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-24"><a href="#cb185-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> low <span class="op">=</span> i <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb185-25"><a href="#cb185-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> high <span class="op">=</span> <span class="op">(</span>i <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">?</span> i <span class="op">:</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb185-26"><a href="#cb185-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-27"><a href="#cb185-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> binary_search<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> high<span class="op">,</span> target<span class="op">);</span></span>
<span id="cb185-28"><a href="#cb185-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb185-29"><a href="#cb185-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-30"><a href="#cb185-30" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb185-31"><a href="#cb185-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">2</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">16</span><span class="op">,</span> <span class="dv">19</span><span class="op">,</span> <span class="dv">23</span><span class="op">,</span> <span class="dv">42</span><span class="op">,</span> <span class="dv">64</span><span class="op">,</span> <span class="dv">128</span><span class="op">};</span></span>
<span id="cb185-32"><a href="#cb185-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb185-33"><a href="#cb185-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> doubling_search<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="dv">23</span><span class="op">);</span></span>
<span id="cb185-34"><a href="#cb185-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Found at index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb185-35"><a href="#cb185-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 5</code></pre>
</section>
</section>
<section id="why-it-matters-63" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-63">Why It Matters</h3>
<ul>
<li>Allows binary search when size is unknown</li>
<li>Only O(log p) probes, where <code>p</code> is target index</li>
<li>Natural strategy for streaming, infinite, or lazy structures</li>
<li>Used in exponential, galloping, and tim-sort merges</li>
</ul>
<p>It’s the blueprint for all “expand then search” algorithms.</p>
</section>
<section id="a-gentle-proof-why-it-works-63" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-63">A Gentle Proof (Why It Works)</h3>
<p>Each doubling step multiplies range by 2, so number of expansions ≈ log₂(p) Then binary search inside a range of size ≤ p</p>
<p>Total time: <span class="math display">\[
T(n) = O(\log p)
\]</span></p>
<p>Still logarithmic in target position, not array size, efficient even for unbounded data.</p>
</section>
<section id="try-it-yourself-63" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-63">Try It Yourself</h3>
<ol type="1">
<li>Search <code>23</code> in <code>[2,4,8,16,19,23,42,64,128]</code></li>
<li>Search <code>42</code> (more jumps)</li>
<li>Search <code>1</code> (before first element)</li>
<li>Search <code>128</code> (last element)</li>
<li>Try doubling factor 3 instead of 2</li>
<li>Compare expansion steps with exponential search</li>
<li>Implement recursive version</li>
<li>Visualize on a number line</li>
<li>Simulate unknown-length array with a safe check</li>
<li>Measure steps for small vs large targets</li>
</ol>
</section>
<section id="test-cases-63" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-63">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Target</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[2,4,8,16,19,23,42,64,128]</td>
<td>23</td>
<td>5</td>
<td>Found</td>
</tr>
<tr class="even">
<td>[2,4,8,16,19,23,42,64,128]</td>
<td>4</td>
<td>1</td>
<td>Early</td>
</tr>
<tr class="odd">
<td>[2,4,8,16,19,23,42,64,128]</td>
<td>1</td>
<td>-1</td>
<td>Not found</td>
</tr>
<tr class="even">
<td>[2,4,8,16,19,23,42,64,128]</td>
<td>128</td>
<td>8</td>
<td>Last element</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-63" class="level3">
<h3 class="anchored" data-anchor-id="complexity-63">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(log p)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Prerequisite</td>
<td>Sorted array</td>
</tr>
</tbody>
</table>
<p>Doubling Search is how you explore the unknown, double your reach, find your bounds, then pinpoint your goal.</p>
</section>
<section id="galloping-search" class="level3">
<h3 class="anchored" data-anchor-id="galloping-search">165 Galloping Search</h3>
<p>Galloping Search (also called Exponential Gallop or Search by Doubling) is a hybrid search technique that quickly finds a range by <em>galloping forward exponentially</em>, then switches to binary search within that range.</p>
<p>It’s heavily used inside TimSort’s merge step, where it helps merge sorted runs efficiently by skipping over large stretches that don’t need detailed comparison.</p>
</section>
<section id="what-problem-are-we-solving-64" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-64">What Problem Are We Solving?</h3>
<p>When merging two sorted arrays (or searching in a sorted list), repeatedly comparing one by one is wasteful if elements differ by a large margin. Galloping Search “jumps ahead” quickly to find the region of interest, then finishes with a binary search to locate the exact boundary.</p>
<p>Used in:</p>
<ul>
<li>TimSort merges</li>
<li>Run merging in hybrid sorting</li>
<li>Searching in sorted blocks</li>
<li>Optimizing comparison-heavy algorithms</li>
</ul>
<section id="example-64" class="level4">
<h4 class="anchored" data-anchor-id="example-64">Example</h4>
<p>Find <code>25</code> in <code>[5, 10, 15, 20, 25, 30, 35, 40, 45]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Index</th>
<th>Value</th>
<th>Compare</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>10</td>
<td>10 &lt; 25</td>
<td>gallop (×2)</td>
</tr>
<tr class="even">
<td>2</td>
<td>2</td>
<td>15</td>
<td>15 &lt; 25</td>
<td>gallop</td>
</tr>
<tr class="odd">
<td>3</td>
<td>4</td>
<td>25</td>
<td>25 = 25</td>
<td>✅ found</td>
</tr>
</tbody>
</table>
<p>If we overshoot (say, search for <code>22</code>), we’d gallop past it (index 4), then perform binary search between the previous bound and current one.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-64" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-64">How Does It Work (Plain Language)?</h3>
<p>You start by leaping, checking 1, 2, 4, 8 steps away, until you pass the target or reach the end. Once you overshoot, you gallop back (binary search) in the last valid interval.</p>
<p>It’s like sprinting ahead to find the neighborhood, then walking house-to-house once you know the block.</p>
<section id="step-by-step-process-63" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-63">Step-by-Step Process</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 95%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Start at <code>start</code> index</td>
</tr>
<tr class="even">
<td>2</td>
<td>Gallop forward by powers of 2 (<code>1, 2, 4, 8, ...</code>) until <code>arr[start + k] &gt;= target</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Define range <code>[start + k/2, min(start + k, n-1)]</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>Apply binary search in that range</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Return index if found</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-63" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-63">Tiny Code (Easy Versions)</h3>
<section id="python-49" class="level4">
<h4 class="anchored" data-anchor-id="python-49">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb187"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> binary_search(arr, low, high, target):</span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> low <span class="op">&lt;=</span> high:</span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (low <span class="op">+</span> high) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[mid] <span class="op">==</span> target:</span>
<span id="cb187-5"><a href="#cb187-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid</span>
<span id="cb187-6"><a href="#cb187-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> arr[mid] <span class="op">&lt;</span> target:</span>
<span id="cb187-7"><a href="#cb187-7" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb187-8"><a href="#cb187-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb187-9"><a href="#cb187-9" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb187-10"><a href="#cb187-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb187-11"><a href="#cb187-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-12"><a href="#cb187-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> galloping_search(arr, start, target):</span>
<span id="cb187-13"><a href="#cb187-13" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb187-14"><a href="#cb187-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> start <span class="op">&gt;=</span> n:</span>
<span id="cb187-15"><a href="#cb187-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb187-16"><a href="#cb187-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> arr[start] <span class="op">==</span> target:</span>
<span id="cb187-17"><a href="#cb187-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> start</span>
<span id="cb187-18"><a href="#cb187-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-19"><a href="#cb187-19" aria-hidden="true" tabindex="-1"></a>    k <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb187-20"><a href="#cb187-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> start <span class="op">+</span> k <span class="op">&lt;</span> n <span class="kw">and</span> arr[start <span class="op">+</span> k] <span class="op">&lt;</span> target:</span>
<span id="cb187-21"><a href="#cb187-21" aria-hidden="true" tabindex="-1"></a>        k <span class="op">*=</span> <span class="dv">2</span></span>
<span id="cb187-22"><a href="#cb187-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-23"><a href="#cb187-23" aria-hidden="true" tabindex="-1"></a>    low <span class="op">=</span> start <span class="op">+</span> k <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb187-24"><a href="#cb187-24" aria-hidden="true" tabindex="-1"></a>    high <span class="op">=</span> <span class="bu">min</span>(start <span class="op">+</span> k, n <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb187-25"><a href="#cb187-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> binary_search(arr, low, high, target)</span>
<span id="cb187-26"><a href="#cb187-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-27"><a href="#cb187-27" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">35</span>, <span class="dv">40</span>, <span class="dv">45</span>]</span>
<span id="cb187-28"><a href="#cb187-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(galloping_search(arr, <span class="dv">0</span>, <span class="dv">25</span>))  <span class="co"># Output: 4</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>4</code></pre>
</section>
<section id="c-46" class="level4">
<h4 class="anchored" data-anchor-id="c-46">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb189"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> binary_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>low <span class="op">&lt;=</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> low <span class="op">+</span> <span class="op">(</span>high <span class="op">-</span> low<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb189-6"><a href="#cb189-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span></span>
<span id="cb189-7"><a href="#cb189-7" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid<span class="op">;</span></span>
<span id="cb189-8"><a href="#cb189-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span></span>
<span id="cb189-9"><a href="#cb189-9" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb189-10"><a href="#cb189-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb189-11"><a href="#cb189-11" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb189-12"><a href="#cb189-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb189-13"><a href="#cb189-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb189-14"><a href="#cb189-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb189-15"><a href="#cb189-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-16"><a href="#cb189-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> galloping_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> start<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb189-17"><a href="#cb189-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>start <span class="op">&gt;=</span> n<span class="op">)</span> <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb189-18"><a href="#cb189-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>start<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span> <span class="cf">return</span> start<span class="op">;</span></span>
<span id="cb189-19"><a href="#cb189-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-20"><a href="#cb189-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> k <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb189-21"><a href="#cb189-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>start <span class="op">+</span> k <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[</span>start <span class="op">+</span> k<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span></span>
<span id="cb189-22"><a href="#cb189-22" aria-hidden="true" tabindex="-1"></a>        k <span class="op">*=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb189-23"><a href="#cb189-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-24"><a href="#cb189-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> low <span class="op">=</span> start <span class="op">+</span> k <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb189-25"><a href="#cb189-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> high <span class="op">=</span> <span class="op">(</span>start <span class="op">+</span> k <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">?</span> start <span class="op">+</span> k <span class="op">:</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb189-26"><a href="#cb189-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-27"><a href="#cb189-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> binary_search<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> high<span class="op">,</span> target<span class="op">);</span></span>
<span id="cb189-28"><a href="#cb189-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb189-29"><a href="#cb189-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-30"><a href="#cb189-30" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb189-31"><a href="#cb189-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">35</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">45</span><span class="op">};</span></span>
<span id="cb189-32"><a href="#cb189-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb189-33"><a href="#cb189-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> galloping_search<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">25</span><span class="op">);</span></span>
<span id="cb189-34"><a href="#cb189-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Found at index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb189-35"><a href="#cb189-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 4</code></pre>
</section>
</section>
<section id="why-it-matters-64" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-64">Why It Matters</h3>
<ul>
<li>Accelerates merging in TimSort</li>
<li>Minimizes comparisons when merging large sorted runs</li>
<li>Great for adaptive sorting and range scans</li>
<li>Balances speed (gallop) and precision (binary)</li>
</ul>
<p>It’s a dynamic balance, gallop when far, tiptoe when close.</p>
</section>
<section id="a-gentle-proof-why-it-works-64" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-64">A Gentle Proof (Why It Works)</h3>
<p>Galloping phase:<br>
Takes <span class="math inline">\(O(\log p)\)</span> steps to reach the target vicinity (where <span class="math inline">\(p\)</span> is the distance from the start).</p>
<p>Binary phase:<br>
Another <span class="math inline">\(O(\log p)\)</span> for local search.</p>
<p>Total: <span class="math display">\[
T(n) = O(\log p)
\]</span></p>
<p>Faster than linear merging when runs differ greatly in length.</p>
</section>
<section id="try-it-yourself-64" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-64">Try It Yourself</h3>
<ol type="1">
<li>Search <code>25</code> in <code>[5,10,15,20,25,30,35,40,45]</code></li>
<li>Search <code>40</code> (larger gallop)</li>
<li>Search <code>3</code> (before first)</li>
<li>Try <code>start=2</code></li>
<li>Print gallop steps</li>
<li>Compare with pure binary search</li>
<li>Implement recursive gallop</li>
<li>Use for merging two sorted arrays</li>
<li>Count comparisons per search</li>
<li>Test on long list with early/late targets</li>
</ol>
</section>
<section id="test-cases-64" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-64">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Target</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[5,10,15,20,25,30,35,40,45]</td>
<td>25</td>
<td>4</td>
<td>Found</td>
</tr>
<tr class="even">
<td>[5,10,15,20,25,30,35,40,45]</td>
<td>40</td>
<td>7</td>
<td>Larger gallop</td>
</tr>
<tr class="odd">
<td>[5,10,15,20,25,30,35,40,45]</td>
<td>3</td>
<td>-1</td>
<td>Not found</td>
</tr>
<tr class="even">
<td>[5,10,15,20,25,30,35,40,45]</td>
<td>5</td>
<td>0</td>
<td>First element</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-64" class="level3">
<h3 class="anchored" data-anchor-id="complexity-64">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(log p)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Prerequisite</td>
<td>Sorted array</td>
</tr>
</tbody>
</table>
<p>Galloping Search is how TimSort runs ahead with confidence, sprint through big gaps, slow down only when precision counts.</p>
</section>
<section id="unbounded-binary-search" class="level3">
<h3 class="anchored" data-anchor-id="unbounded-binary-search">166 Unbounded Binary Search</h3>
<p>Unbounded Binary Search is a technique for finding a value in a sorted but unbounded (or infinite) sequence. You don’t know where the data ends, or even how large it is, but you know it’s sorted. So first, you find a search boundary, then perform a binary search within that discovered range.</p>
<p>It’s a direct application of doubling search followed by binary search, especially suited for monotonic functions or streams.</p>
</section>
<section id="what-problem-are-we-solving-65" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-65">What Problem Are We Solving?</h3>
<p>If you’re working with data that:</p>
<ul>
<li>Has no fixed size,</li>
<li>Comes as a stream,</li>
<li>Or is represented as a monotonic function (like f(x) increasing with x),</li>
</ul>
<p>then you can’t apply binary search immediately, because you don’t know <code>high</code>.</p>
<p>So you first need to find bounds [low, high] that contain the target, by expanding exponentially, and only then use binary search.</p>
<section id="example-65" class="level4">
<h4 class="anchored" data-anchor-id="example-65">Example</h4>
<p>Suppose you’re searching for <code>20</code> in a monotonic function:</p>
<pre><code>f(x) = 2x + 2</code></pre>
<p>You want the smallest <code>x</code> such that <code>f(x) ≥ 20</code>.</p>
<p>Step 1: Find bounds. Check x = 1 → f(1) = 4 Check x = 2 → f(2) = 6 Check x = 4 → f(4) = 10 Check x = 8 → f(8) = 18 Check x = 16 → f(16) = 34 (overshoot!)</p>
<p>Now you know target lies between x = 8 and x = 16.</p>
<p>Step 2: Perform binary search in [8, 16]. ✅ Found f(9) = 20</p>
</section>
</section>
<section id="how-does-it-work-plain-language-65" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-65">How Does It Work (Plain Language)?</h3>
<p>You start with a small step and double your reach each time until you go beyond the target. Once you’ve overshot, you know the search interval, and you can binary search inside it for precision.</p>
<p>It’s the go-to strategy when the array (or domain) has no clear end.</p>
<section id="step-by-step-process-64" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-64">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Initialize <code>low = 0</code>, <code>high = 1</code></td>
</tr>
<tr class="even">
<td>2</td>
<td>While <code>f(high) &lt; target</code>, set <code>low = high</code>, <code>high *= 2</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Once <code>f(high) &gt;= target</code>, binary search between <code>[low, high]</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>Return index (or value)</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-64" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-64">Tiny Code (Easy Versions)</h3>
<section id="python-50" class="level4">
<h4 class="anchored" data-anchor-id="python-50">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb192"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> unbounded_binary_search(f, target):</span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a>    low, high <span class="op">=</span> <span class="dv">0</span>, <span class="dv">1</span></span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 1: find bounds</span></span>
<span id="cb192-4"><a href="#cb192-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> f(high) <span class="op">&lt;</span> target:</span>
<span id="cb192-5"><a href="#cb192-5" aria-hidden="true" tabindex="-1"></a>        low <span class="op">=</span> high</span>
<span id="cb192-6"><a href="#cb192-6" aria-hidden="true" tabindex="-1"></a>        high <span class="op">*=</span> <span class="dv">2</span></span>
<span id="cb192-7"><a href="#cb192-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-8"><a href="#cb192-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 2: binary search in [low, high]</span></span>
<span id="cb192-9"><a href="#cb192-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> low <span class="op">&lt;=</span> high:</span>
<span id="cb192-10"><a href="#cb192-10" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (low <span class="op">+</span> high) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb192-11"><a href="#cb192-11" aria-hidden="true" tabindex="-1"></a>        val <span class="op">=</span> f(mid)</span>
<span id="cb192-12"><a href="#cb192-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> val <span class="op">==</span> target:</span>
<span id="cb192-13"><a href="#cb192-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid</span>
<span id="cb192-14"><a href="#cb192-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> val <span class="op">&lt;</span> target:</span>
<span id="cb192-15"><a href="#cb192-15" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb192-16"><a href="#cb192-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb192-17"><a href="#cb192-17" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb192-18"><a href="#cb192-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb192-19"><a href="#cb192-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-20"><a href="#cb192-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: f(x) = 2x + 2</span></span>
<span id="cb192-21"><a href="#cb192-21" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="kw">lambda</span> x: <span class="dv">2</span> <span class="op">*</span> x <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb192-22"><a href="#cb192-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(unbounded_binary_search(f, <span class="dv">20</span>))  <span class="co"># Output: 9</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>9</code></pre>
</section>
<section id="c-47" class="level4">
<h4 class="anchored" data-anchor-id="c-47">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb194"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> f<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span></span>
<span id="cb194-4"><a href="#cb194-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">2</span> <span class="op">*</span> x <span class="op">+</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb194-5"><a href="#cb194-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb194-6"><a href="#cb194-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-7"><a href="#cb194-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> binary_search<span class="op">(</span><span class="dt">int</span> <span class="op">(*</span>f<span class="op">)(</span><span class="dt">int</span><span class="op">),</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb194-8"><a href="#cb194-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>low <span class="op">&lt;=</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb194-9"><a href="#cb194-9" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> low <span class="op">+</span> <span class="op">(</span>high <span class="op">-</span> low<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb194-10"><a href="#cb194-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> val <span class="op">=</span> f<span class="op">(</span>mid<span class="op">);</span></span>
<span id="cb194-11"><a href="#cb194-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>val <span class="op">==</span> target<span class="op">)</span></span>
<span id="cb194-12"><a href="#cb194-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid<span class="op">;</span></span>
<span id="cb194-13"><a href="#cb194-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>val <span class="op">&lt;</span> target<span class="op">)</span></span>
<span id="cb194-14"><a href="#cb194-14" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb194-15"><a href="#cb194-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb194-16"><a href="#cb194-16" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb194-17"><a href="#cb194-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb194-18"><a href="#cb194-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb194-19"><a href="#cb194-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb194-20"><a href="#cb194-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-21"><a href="#cb194-21" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> unbounded_binary_search<span class="op">(</span><span class="dt">int</span> <span class="op">(*</span>f<span class="op">)(</span><span class="dt">int</span><span class="op">),</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb194-22"><a href="#cb194-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> low <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> high <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb194-23"><a href="#cb194-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>f<span class="op">(</span>high<span class="op">)</span> <span class="op">&lt;</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb194-24"><a href="#cb194-24" aria-hidden="true" tabindex="-1"></a>        low <span class="op">=</span> high<span class="op">;</span></span>
<span id="cb194-25"><a href="#cb194-25" aria-hidden="true" tabindex="-1"></a>        high <span class="op">*=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb194-26"><a href="#cb194-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb194-27"><a href="#cb194-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> binary_search<span class="op">(</span>f<span class="op">,</span> low<span class="op">,</span> high<span class="op">,</span> target<span class="op">);</span></span>
<span id="cb194-28"><a href="#cb194-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb194-29"><a href="#cb194-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-30"><a href="#cb194-30" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb194-31"><a href="#cb194-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> unbounded_binary_search<span class="op">(</span>f<span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb194-32"><a href="#cb194-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Found at x = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb194-33"><a href="#cb194-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at x = 9</code></pre>
</section>
</section>
<section id="why-it-matters-65" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-65">Why It Matters</h3>
<ul>
<li>Handles infinite sequences or unbounded domains</li>
<li>Perfect for monotonic functions (e.g.&nbsp;f(x) increasing)</li>
<li>Key in searching without array length</li>
<li>Used in root finding, binary lifting, streaming</li>
</ul>
<p>It’s the “expand, then refine” pattern, the explorer’s search.</p>
</section>
<section id="a-gentle-proof-why-it-works-65" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-65">A Gentle Proof (Why It Works)</h3>
<p>Expanding step: doubles index each time → <span class="math inline">\(O(\log p)\)</span>, where <code>p</code> is the position of the target.<br>
Binary search step: searches within a range of size ≤ p → another <span class="math inline">\(O(\log p)\)</span>.</p>
<p>Total complexity: <span class="math display">\[
T(n) = O(\log p)
\]</span></p>
<p>Independent of total domain size.</p>
</section>
<section id="try-it-yourself-65" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-65">Try It Yourself</h3>
<ol type="1">
<li><code>f(x) = 2x + 2</code>, target = 20 → 9</li>
<li><code>f(x) = x²</code>, target = 64 → 8</li>
<li>Search for non-existing value (e.g.&nbsp;7 in even series)</li>
<li>Modify f(x) to be exponential</li>
<li>Print bounds before binary search</li>
<li>Try with negative domain (guard with if)</li>
<li>Apply to sorted infinite list (simulate with f)</li>
<li>Use float function and tolerance check</li>
<li>Compare with linear probing</li>
<li>Use to find smallest x where f(x) ≥ target</li>
</ol>
</section>
<section id="test-cases-65" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-65">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Function</th>
<th>Target</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2x+2</td>
<td>20</td>
<td>9</td>
<td>f(9)=20</td>
</tr>
<tr class="even">
<td>x²</td>
<td>64</td>
<td>8</td>
<td>f(8)=64</td>
</tr>
<tr class="odd">
<td>2x+2</td>
<td>7</td>
<td>-1</td>
<td>Not found</td>
</tr>
<tr class="even">
<td>3x+1</td>
<td>31</td>
<td>10</td>
<td>f(10)=31</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-65" class="level3">
<h3 class="anchored" data-anchor-id="complexity-65">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(log p)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Adaptive</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Prerequisite</td>
<td>Monotonic function or sorted data</td>
</tr>
</tbody>
</table>
<p>Unbounded Binary Search is how you search the infinite, double your bounds, then zoom in on the truth.</p>
</section>
<section id="root-finding-bisection" class="level3">
<h3 class="anchored" data-anchor-id="root-finding-bisection">167 Root-Finding Bisection</h3>
<p>Root-Finding Bisection is a numerical search algorithm for locating the point where a continuous function crosses zero. It repeatedly halves an interval where the sign of the function changes, guaranteeing that a root exists within that range.</p>
<p>It’s the simplest, most reliable method for solving equations like f(x) = 0 when you only know that a solution exists somewhere between <code>a</code> and <code>b</code>.</p>
</section>
<section id="what-problem-are-we-solving-66" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-66">What Problem Are We Solving?</h3>
<p>When you have a function <span class="math inline">\(f(x)\)</span> and want to solve <span class="math inline">\(f(x) = 0\)</span>,<br>
but you can’t solve it algebraically, you can use the <strong>Bisection Method</strong>.</p>
<p>If <span class="math inline">\(f(a)\)</span> and <span class="math inline">\(f(b)\)</span> have opposite signs, then by the Intermediate Value Theorem,<br>
there is at least one root between <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span>.</p>
<p>Example:<br>
Find the root of <span class="math inline">\(f(x) = x^3 - x - 2\)</span> in <span class="math inline">\([1, 2]\)</span>.</p>
<ul>
<li><span class="math inline">\(f(1) = -2\)</span><br>
</li>
<li><span class="math inline">\(f(2) = 4\)</span><br>
Signs differ → there’s a root in <span class="math inline">\([1, 2]\)</span>.</li>
</ul>
</section>
<section id="how-does-it-work-plain-language-66" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-66">How Does It Work (Plain Language)?</h3>
<p>You start with an interval <span class="math inline">\([a, b]\)</span> where <span class="math inline">\(f(a)\)</span> and <span class="math inline">\(f(b)\)</span> have opposite signs.<br>
Then, at each step:</p>
<ol type="1">
<li>Find midpoint <span class="math inline">\(m = \frac{a + b}{2}\)</span><br>
</li>
<li>Evaluate <span class="math inline">\(f(m)\)</span><br>
</li>
<li>Replace either <code>a</code> or <code>b</code> so that signs at the ends still differ<br>
</li>
<li>Repeat until the interval is small enough</li>
</ol>
<p>You’re squeezing the interval tighter and tighter until it hugs the root.</p>
<section id="step-by-step-process-65" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-65">Step-by-Step Process</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 66%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Choose <code>a</code>, <code>b</code> with <code>f(a)</code> and <code>f(b)</code> of opposite signs</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>2</td>
<td>Compute midpoint <code>m = (a + b) / 2</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Evaluate <code>f(m)</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>4</td>
<td>If <code>f(m)</code> has same sign as <code>f(a)</code>, set <code>a = m</code>, else <code>b = m</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>5</td>
<td>Repeat until <code>| f(m) |</code>or<code>| b - a |</code> &lt; tolerance</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>6</td>
<td>Return <code>m</code> as root</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-65" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-65">Tiny Code (Easy Versions)</h3>
<section id="python-51" class="level4">
<h4 class="anchored" data-anchor-id="python-51">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb196"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f(x):</span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x3 <span class="op">-</span> x <span class="op">-</span> <span class="dv">2</span></span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bisection(f, a, b, tol<span class="op">=</span><span class="fl">1e-6</span>):</span>
<span id="cb196-5"><a href="#cb196-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> f(a) <span class="op">*</span> f(b) <span class="op">&gt;=</span> <span class="dv">0</span>:</span>
<span id="cb196-6"><a href="#cb196-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"No sign change: root not guaranteed"</span>)</span>
<span id="cb196-7"><a href="#cb196-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> (b <span class="op">-</span> a) <span class="op">/</span> <span class="dv">2</span> <span class="op">&gt;</span> tol:</span>
<span id="cb196-8"><a href="#cb196-8" aria-hidden="true" tabindex="-1"></a>        m <span class="op">=</span> (a <span class="op">+</span> b) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb196-9"><a href="#cb196-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> f(m) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb196-10"><a href="#cb196-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> m</span>
<span id="cb196-11"><a href="#cb196-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> f(a) <span class="op">*</span> f(m) <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb196-12"><a href="#cb196-12" aria-hidden="true" tabindex="-1"></a>            b <span class="op">=</span> m</span>
<span id="cb196-13"><a href="#cb196-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb196-14"><a href="#cb196-14" aria-hidden="true" tabindex="-1"></a>            a <span class="op">=</span> m</span>
<span id="cb196-15"><a href="#cb196-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (a <span class="op">+</span> b) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb196-16"><a href="#cb196-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-17"><a href="#cb196-17" aria-hidden="true" tabindex="-1"></a>root <span class="op">=</span> bisection(f, <span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb196-18"><a href="#cb196-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Approx root:"</span>, root)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Approx root: 1.52138</code></pre>
</section>
<section id="c-48" class="level4">
<h4 class="anchored" data-anchor-id="c-48">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb198"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> f<span class="op">(</span><span class="dt">double</span> x<span class="op">)</span> <span class="op">{</span></span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x<span class="op">*</span>x<span class="op">*</span>x <span class="op">-</span> x <span class="op">-</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb198-6"><a href="#cb198-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb198-7"><a href="#cb198-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-8"><a href="#cb198-8" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> bisection<span class="op">(</span><span class="dt">double</span> <span class="op">(*</span>f<span class="op">)(</span><span class="dt">double</span><span class="op">),</span> <span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">,</span> <span class="dt">double</span> tol<span class="op">)</span> <span class="op">{</span></span>
<span id="cb198-9"><a href="#cb198-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>f<span class="op">(</span>a<span class="op">)</span> <span class="op">*</span> f<span class="op">(</span>b<span class="op">)</span> <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb198-10"><a href="#cb198-10" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"No sign change. Root not guaranteed.</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb198-11"><a href="#cb198-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> NAN<span class="op">;</span></span>
<span id="cb198-12"><a href="#cb198-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb198-13"><a href="#cb198-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> m<span class="op">;</span></span>
<span id="cb198-14"><a href="#cb198-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">((</span>b <span class="op">-</span> a<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span> <span class="op">&gt;</span> tol<span class="op">)</span> <span class="op">{</span></span>
<span id="cb198-15"><a href="#cb198-15" aria-hidden="true" tabindex="-1"></a>        m <span class="op">=</span> <span class="op">(</span>a <span class="op">+</span> b<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb198-16"><a href="#cb198-16" aria-hidden="true" tabindex="-1"></a>        <span class="dt">double</span> fm <span class="op">=</span> f<span class="op">(</span>m<span class="op">);</span></span>
<span id="cb198-17"><a href="#cb198-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>fm <span class="op">==</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb198-18"><a href="#cb198-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> m<span class="op">;</span></span>
<span id="cb198-19"><a href="#cb198-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>f<span class="op">(</span>a<span class="op">)</span> <span class="op">*</span> fm <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb198-20"><a href="#cb198-20" aria-hidden="true" tabindex="-1"></a>            b <span class="op">=</span> m<span class="op">;</span></span>
<span id="cb198-21"><a href="#cb198-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb198-22"><a href="#cb198-22" aria-hidden="true" tabindex="-1"></a>            a <span class="op">=</span> m<span class="op">;</span></span>
<span id="cb198-23"><a href="#cb198-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb198-24"><a href="#cb198-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>a <span class="op">+</span> b<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb198-25"><a href="#cb198-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb198-26"><a href="#cb198-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-27"><a href="#cb198-27" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb198-28"><a href="#cb198-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> root <span class="op">=</span> bisection<span class="op">(</span>f<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="fl">1e-6</span><span class="op">);</span></span>
<span id="cb198-29"><a href="#cb198-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Approx root: </span><span class="sc">%.6f\n</span><span class="st">"</span><span class="op">,</span> root<span class="op">);</span></span>
<span id="cb198-30"><a href="#cb198-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Approx root: 1.521380</code></pre>
</section>
</section>
<section id="why-it-matters-66" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-66">Why It Matters</h3>
<ul>
<li>Guaranteed convergence if ( f ) is continuous and signs differ</li>
<li>Simple and robust</li>
<li>Works for nonlinear equations</li>
<li>Great starting point before more advanced methods (Newton, Secant)</li>
<li>Used in physics, finance, engineering for precise solving</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-66" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-66">A Gentle Proof (Why It Works)</h3>
<p>By the Intermediate Value Theorem:<br>
If <span class="math inline">\(f(a) \cdot f(b) &lt; 0\)</span>, then there exists <span class="math inline">\(c \in [a, b]\)</span> such that <span class="math inline">\(f(c) = 0\)</span>.</p>
<p>Each iteration halves the interval size, so after <span class="math inline">\(k\)</span> steps:</p>
<p><span class="math display">\[
b_k - a_k = \frac{b_0 - a_0}{2^k}
\]</span></p>
<p>To achieve tolerance <span class="math inline">\(\varepsilon\)</span>:</p>
<p><span class="math display">\[
k \approx \log_2\left(\frac{b_0 - a_0}{\varepsilon}\right)
\]</span></p>
<p>Thus, convergence is linear, but guaranteed.</p>
</section>
<section id="try-it-yourself-66" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-66">Try It Yourself</h3>
<ol type="1">
<li><span class="math inline">\(f(x) = x^2 - 2\)</span>, interval <span class="math inline">\([1, 2]\)</span> → <span class="math inline">\(\sqrt{2}\)</span><br>
</li>
<li><span class="math inline">\(f(x) = \cos x - x\)</span>, interval <span class="math inline">\([0, 1]\)</span><br>
</li>
<li><span class="math inline">\(f(x) = x^3 - 7\)</span>, interval <span class="math inline">\([1, 3]\)</span><br>
</li>
<li>Try tighter tolerances (<code>1e-3</code>, <code>1e-9</code>)</li>
<li>Count how many iterations needed</li>
<li>Print each midpoint</li>
<li>Compare with Newton’s method</li>
<li>Plot convergence curve</li>
<li>Modify to return both root and iterations</li>
<li>Test on function with multiple roots</li>
</ol>
</section>
<section id="test-cases-66" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-66">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Function</th>
<th>Interval</th>
<th>Root (Approx)</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(x^2 - 2\)</span></td>
<td><span class="math inline">\([1, 2]\)</span></td>
<td>1.4142</td>
<td><span class="math inline">\(\sqrt{2}\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(x^3 - x - 2\)</span></td>
<td><span class="math inline">\([1, 2]\)</span></td>
<td>1.5214</td>
<td>Classic example</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(\cos x - x\)</span></td>
<td><span class="math inline">\([0, 1]\)</span></td>
<td>0.7391</td>
<td>Fixed point root</td>
</tr>
<tr class="even">
<td><span class="math inline">\(x^3 - 7\)</span></td>
<td><span class="math inline">\([1, 3]\)</span></td>
<td>1.913</td>
<td>Cube root of 7</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-66" class="level3">
<h3 class="anchored" data-anchor-id="complexity-66">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(log((b−a)/tol))</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Convergence</td>
<td>Linear</td>
</tr>
<tr class="even">
<td>Stability</td>
<td>High</td>
</tr>
<tr class="odd">
<td>Requires continuity</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Bisection Method is your steady compass in numerical analysis, it never fails when a root is truly there.</p>
</section>
<section id="golden-section-search" class="level3">
<h3 class="anchored" data-anchor-id="golden-section-search">168 Golden Section Search</h3>
<p>Golden Section Search is a clever optimization algorithm for finding the minimum (or maximum) of a unimodal function on a closed interval ([a, b])—without derivatives. It’s a close cousin of binary search, but instead of splitting in half, it uses the golden ratio to minimize function evaluations.</p>
</section>
<section id="what-problem-are-we-solving-67" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-67">What Problem Are We Solving?</h3>
<p>You want to find the x that minimizes f(x) on an interval ([a, b]), but you can’t or don’t want to take derivatives (maybe f is noisy or discontinuous).</p>
<p>If f(x) is unimodal (has a single peak or trough), then the Golden Section Search gives you a guaranteed narrowing path to the optimum.</p>
<section id="example-66" class="level4">
<h4 class="anchored" data-anchor-id="example-66">Example</h4>
<p>Find the minimum of <span class="math display">\[
f(x) = (x-2)^2 + 1
\]</span> on ([0, 5])</p>
<p>Since (f(x)) is quadratic, its minimum is at (x = 2). The algorithm will zoom in around (2) by evaluating at golden-ratio points.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-67" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-67">How Does It Work (Plain Language)?</h3>
<p>Imagine slicing your search interval using the golden ratio (( )). By placing test points at those ratios, you can reuse past evaluations and eliminate one side of the interval every step.</p>
<p>Each iteration shrinks the search range while keeping the ratio intact — like a mathematically perfect zoom.</p>
<section id="step-by-step-process-66" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-66">Step-by-Step Process</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 3%">
<col style="width: 57%">
<col style="width: 19%">
<col style="width: 19%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
<th>Condition</th>
<th>Result / Note</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Choose initial interval <span class="math inline">\([a, b]\)</span></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>2</td>
<td>Compute golden ratio <span class="math inline">\(\phi = \frac{\sqrt{5} - 1}{2} \approx 0.618\)</span></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Set <span class="math inline">\(c = b - \phi(b - a)\)</span>, <span class="math inline">\(d = a + \phi(b - a)\)</span></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>4</td>
<td>Evaluate <span class="math inline">\(f(c)\)</span> and <span class="math inline">\(f(d)\)</span></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>5</td>
<td>If <span class="math inline">\(f(c) &lt; f(d)\)</span>, new interval = <span class="math inline">\([a, d]\)</span></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>6</td>
<td>Else, new interval = <span class="math inline">\([c, b]\)</span></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>7</td>
<td>Repeat until <span class="math inline">\(b - a &lt; \text{tolerance}\)</span></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>8</td>
<td>Return midpoint as best estimate</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-66" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-66">Tiny Code (Easy Versions)</h3>
<section id="python-52" class="level4">
<h4 class="anchored" data-anchor-id="python-52">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb200"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f(x):</span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (x <span class="op">-</span> <span class="dv">2</span>)<span class="dv">2</span> <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb200-5"><a href="#cb200-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-6"><a href="#cb200-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> golden_section_search(f, a, b, tol<span class="op">=</span><span class="fl">1e-5</span>):</span>
<span id="cb200-7"><a href="#cb200-7" aria-hidden="true" tabindex="-1"></a>    phi <span class="op">=</span> (math.sqrt(<span class="dv">5</span>) <span class="op">-</span> <span class="dv">1</span>) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb200-8"><a href="#cb200-8" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> b <span class="op">-</span> phi <span class="op">*</span> (b <span class="op">-</span> a)</span>
<span id="cb200-9"><a href="#cb200-9" aria-hidden="true" tabindex="-1"></a>    d <span class="op">=</span> a <span class="op">+</span> phi <span class="op">*</span> (b <span class="op">-</span> a)</span>
<span id="cb200-10"><a href="#cb200-10" aria-hidden="true" tabindex="-1"></a>    fc, fd <span class="op">=</span> f(c), f(d)</span>
<span id="cb200-11"><a href="#cb200-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb200-12"><a href="#cb200-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="bu">abs</span>(b <span class="op">-</span> a) <span class="op">&gt;</span> tol:</span>
<span id="cb200-13"><a href="#cb200-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> fc <span class="op">&lt;</span> fd:</span>
<span id="cb200-14"><a href="#cb200-14" aria-hidden="true" tabindex="-1"></a>            b, d, fd <span class="op">=</span> d, c, fc</span>
<span id="cb200-15"><a href="#cb200-15" aria-hidden="true" tabindex="-1"></a>            c <span class="op">=</span> b <span class="op">-</span> phi <span class="op">*</span> (b <span class="op">-</span> a)</span>
<span id="cb200-16"><a href="#cb200-16" aria-hidden="true" tabindex="-1"></a>            fc <span class="op">=</span> f(c)</span>
<span id="cb200-17"><a href="#cb200-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb200-18"><a href="#cb200-18" aria-hidden="true" tabindex="-1"></a>            a, c, fc <span class="op">=</span> c, d, fd</span>
<span id="cb200-19"><a href="#cb200-19" aria-hidden="true" tabindex="-1"></a>            d <span class="op">=</span> a <span class="op">+</span> phi <span class="op">*</span> (b <span class="op">-</span> a)</span>
<span id="cb200-20"><a href="#cb200-20" aria-hidden="true" tabindex="-1"></a>            fd <span class="op">=</span> f(d)</span>
<span id="cb200-21"><a href="#cb200-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (b <span class="op">+</span> a) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb200-22"><a href="#cb200-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-23"><a href="#cb200-23" aria-hidden="true" tabindex="-1"></a>root <span class="op">=</span> golden_section_search(f, <span class="dv">0</span>, <span class="dv">5</span>)</span>
<span id="cb200-24"><a href="#cb200-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Minimum near x ="</span>, root)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Minimum near x = 2.0000</code></pre>
</section>
<section id="c-49" class="level4">
<h4 class="anchored" data-anchor-id="c-49">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb202"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> f<span class="op">(</span><span class="dt">double</span> x<span class="op">)</span> <span class="op">{</span></span>
<span id="cb202-5"><a href="#cb202-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>x <span class="op">-</span> <span class="dv">2</span><span class="op">)*(</span>x <span class="op">-</span> <span class="dv">2</span><span class="op">)</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb202-6"><a href="#cb202-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb202-7"><a href="#cb202-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-8"><a href="#cb202-8" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> golden_section_search<span class="op">(</span><span class="dt">double</span> <span class="op">(*</span>f<span class="op">)(</span><span class="dt">double</span><span class="op">),</span> <span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">,</span> <span class="dt">double</span> tol<span class="op">)</span> <span class="op">{</span></span>
<span id="cb202-9"><a href="#cb202-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> phi <span class="op">=</span> <span class="op">(</span>sqrt<span class="op">(</span><span class="fl">5.0</span><span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb202-10"><a href="#cb202-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> c <span class="op">=</span> b <span class="op">-</span> phi <span class="op">*</span> <span class="op">(</span>b <span class="op">-</span> a<span class="op">);</span></span>
<span id="cb202-11"><a href="#cb202-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> d <span class="op">=</span> a <span class="op">+</span> phi <span class="op">*</span> <span class="op">(</span>b <span class="op">-</span> a<span class="op">);</span></span>
<span id="cb202-12"><a href="#cb202-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> fc <span class="op">=</span> f<span class="op">(</span>c<span class="op">),</span> fd <span class="op">=</span> f<span class="op">(</span>d<span class="op">);</span></span>
<span id="cb202-13"><a href="#cb202-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-14"><a href="#cb202-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>fabs<span class="op">(</span>b <span class="op">-</span> a<span class="op">)</span> <span class="op">&gt;</span> tol<span class="op">)</span> <span class="op">{</span></span>
<span id="cb202-15"><a href="#cb202-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>fc <span class="op">&lt;</span> fd<span class="op">)</span> <span class="op">{</span></span>
<span id="cb202-16"><a href="#cb202-16" aria-hidden="true" tabindex="-1"></a>            b <span class="op">=</span> d<span class="op">;</span></span>
<span id="cb202-17"><a href="#cb202-17" aria-hidden="true" tabindex="-1"></a>            d <span class="op">=</span> c<span class="op">;</span></span>
<span id="cb202-18"><a href="#cb202-18" aria-hidden="true" tabindex="-1"></a>            fd <span class="op">=</span> fc<span class="op">;</span></span>
<span id="cb202-19"><a href="#cb202-19" aria-hidden="true" tabindex="-1"></a>            c <span class="op">=</span> b <span class="op">-</span> phi <span class="op">*</span> <span class="op">(</span>b <span class="op">-</span> a<span class="op">);</span></span>
<span id="cb202-20"><a href="#cb202-20" aria-hidden="true" tabindex="-1"></a>            fc <span class="op">=</span> f<span class="op">(</span>c<span class="op">);</span></span>
<span id="cb202-21"><a href="#cb202-21" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb202-22"><a href="#cb202-22" aria-hidden="true" tabindex="-1"></a>            a <span class="op">=</span> c<span class="op">;</span></span>
<span id="cb202-23"><a href="#cb202-23" aria-hidden="true" tabindex="-1"></a>            c <span class="op">=</span> d<span class="op">;</span></span>
<span id="cb202-24"><a href="#cb202-24" aria-hidden="true" tabindex="-1"></a>            fc <span class="op">=</span> fd<span class="op">;</span></span>
<span id="cb202-25"><a href="#cb202-25" aria-hidden="true" tabindex="-1"></a>            d <span class="op">=</span> a <span class="op">+</span> phi <span class="op">*</span> <span class="op">(</span>b <span class="op">-</span> a<span class="op">);</span></span>
<span id="cb202-26"><a href="#cb202-26" aria-hidden="true" tabindex="-1"></a>            fd <span class="op">=</span> f<span class="op">(</span>d<span class="op">);</span></span>
<span id="cb202-27"><a href="#cb202-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb202-28"><a href="#cb202-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb202-29"><a href="#cb202-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>b <span class="op">+</span> a<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb202-30"><a href="#cb202-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb202-31"><a href="#cb202-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-32"><a href="#cb202-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb202-33"><a href="#cb202-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> x <span class="op">=</span> golden_section_search<span class="op">(</span>f<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="fl">1e-5</span><span class="op">);</span></span>
<span id="cb202-34"><a href="#cb202-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Minimum near x = </span><span class="sc">%.5f\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">);</span></span>
<span id="cb202-35"><a href="#cb202-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Minimum near x = 2.00000</code></pre>
</section>
</section>
<section id="why-it-matters-67" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-67">Why It Matters</h3>
<ul>
<li>No derivatives required</li>
<li>Fewer evaluations than simple binary search</li>
<li>Guaranteed convergence for unimodal functions</li>
<li>Used in numerical optimization, tuning, engineering design, hyperparameter search</li>
<li>The golden ratio ensures optimal reuse of computed points</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-67" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-67">A Gentle Proof (Why It Works)</h3>
<p>At each step, the interval length is multiplied by <span class="math inline">\(\phi \approx 0.618\)</span>.</p>
<p>So after <span class="math inline">\(k\)</span> steps: <span class="math display">\[
L_k = (b_0 - a_0) \times \phi^k
\]</span></p>
<p>To reach tolerance <span class="math inline">\(\varepsilon\)</span>: <span class="math display">\[
k = \frac{\log(\varepsilon / (b_0 - a_0))}{\log(\phi)}
\]</span></p>
<p>Thus, convergence is linear but efficient, and each iteration needs only one new evaluation.</p>
</section>
<section id="try-it-yourself-67" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-67">Try It Yourself</h3>
<ol type="1">
<li><span class="math inline">\(f(x) = (x - 3)^2\)</span>, interval <span class="math inline">\([0, 6]\)</span><br>
</li>
<li><span class="math inline">\(f(x) = x^4 - 10x^2 + 9\)</span>, interval <span class="math inline">\([-5, 5]\)</span><br>
</li>
<li><span class="math inline">\(f(x) = |x - 1|\)</span>, interval <span class="math inline">\([-2, 4]\)</span><br>
</li>
<li>Try changing tolerance to <code>1e-3</code>, <code>1e-9</code></li>
<li>Track number of iterations</li>
<li>Plot search intervals</li>
<li>Switch to maximizing (compare signs)</li>
<li>Test non-unimodal function (observe failure)</li>
<li>Modify to return f(x*) as well</li>
<li>Compare with ternary search</li>
</ol>
</section>
<section id="test-cases-67" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-67">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Function</th>
<th>Interval</th>
<th>Minimum <span class="math inline">\(x\)</span></th>
<th><span class="math inline">\(f(x)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\((x - 2)^2 + 1\)</span></td>
<td><span class="math inline">\([0, 5]\)</span></td>
<td>2.0000</td>
<td>1.0000</td>
</tr>
<tr class="even">
<td><span class="math inline">\((x - 3)^2\)</span></td>
<td><span class="math inline">\([0, 6]\)</span></td>
<td>3.0000</td>
<td>0.0000</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(x^2\)</span></td>
<td><span class="math inline">\([-3, 2]\)</span></td>
<td>0.0000</td>
<td>0.0000</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-67" class="level3">
<h3 class="anchored" data-anchor-id="complexity-67">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(log((b−a)/tol))</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Evaluations per step</td>
<td>1 new point</td>
</tr>
<tr class="even">
<td>Convergence</td>
<td>Linear</td>
</tr>
<tr class="odd">
<td>Requires unimodality</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Golden Section Search is optimization’s quiet craftsman, balancing precision and simplicity with the elegance of φ.</p>
</section>
<section id="fibonacci-search-optimum" class="level3">
<h3 class="anchored" data-anchor-id="fibonacci-search-optimum">169 Fibonacci Search (Optimum)</h3>
<p>Fibonacci Search is a divide-and-conquer algorithm that uses the Fibonacci sequence to determine probe positions when searching for a target in a sorted array. It’s similar to binary search but uses Fibonacci numbers instead of halving intervals, which makes it ideal for sequential access systems (like tapes or large memory arrays).</p>
<p>It shines where comparison count matters or when random access is expensive.</p>
</section>
<section id="what-problem-are-we-solving-68" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-68">What Problem Are We Solving?</h3>
<p>You want to search for an element in a sorted array efficiently, but instead of halving the interval (as in binary search), you want to use Fibonacci numbers to decide where to look — minimizing comparisons and taking advantage of arithmetic-friendly jumps.</p>
<section id="example-67" class="level4">
<h4 class="anchored" data-anchor-id="example-67">Example</h4>
<p>Let’s search for x = 55 in:</p>
<pre><code>arr = [10, 22, 35, 40, 45, 50, 80, 82, 85, 90, 100]</code></pre>
<ol type="1">
<li>Find smallest Fibonacci number ≥ length (11) → F(7) = 13</li>
<li>Use Fibonacci offsets to decide index jumps.</li>
<li>Check mid using fibM2 = 5 (F(5)=5 → index 4): arr[4] = 45 &lt; 55</li>
<li>Move window and repeat until found or narrowed.</li>
</ol>
</section>
</section>
<section id="how-does-it-work-plain-language-68" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-68">How Does It Work (Plain Language)?</h3>
<p>Instead of splitting in half like binary search, it splits using ratios of Fibonacci numbers, keeping subarray sizes close to golden ratio.</p>
<p>This approach reduces comparisons and works especially well when array size is known and access cost is linear or limited.</p>
<p>Think of it as a mathematically balanced jump search guided by Fibonacci spacing.</p>
<section id="step-by-step-process-67" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-67">Step-by-Step Process</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 94%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Compute smallest Fibonacci number Fm ≥ n</td>
</tr>
<tr class="even">
<td>2</td>
<td>Set offsets: Fm1 = Fm-1, Fm2 = Fm-2</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Compare target with arr[offset + Fm2]</td>
</tr>
<tr class="even">
<td>4</td>
<td>If smaller, search left subarray (shift Fm1, Fm2)</td>
</tr>
<tr class="odd">
<td>5</td>
<td>If larger, search right subarray (update offset, shift Fm1, Fm2)</td>
</tr>
<tr class="even">
<td>6</td>
<td>If equal, return index</td>
</tr>
<tr class="odd">
<td>7</td>
<td>Continue until Fm1 = 1</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-67" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-67">Tiny Code (Easy Versions)</h3>
<section id="python-53" class="level4">
<h4 class="anchored" data-anchor-id="python-53">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb205"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fibonacci_search(arr, x):</span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb205-3"><a href="#cb205-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb205-4"><a href="#cb205-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Initialize fibonacci numbers</span></span>
<span id="cb205-5"><a href="#cb205-5" aria-hidden="true" tabindex="-1"></a>    fibMMm2 <span class="op">=</span> <span class="dv">0</span>  <span class="co"># F(m-2)</span></span>
<span id="cb205-6"><a href="#cb205-6" aria-hidden="true" tabindex="-1"></a>    fibMMm1 <span class="op">=</span> <span class="dv">1</span>  <span class="co"># F(m-1)</span></span>
<span id="cb205-7"><a href="#cb205-7" aria-hidden="true" tabindex="-1"></a>    fibM <span class="op">=</span> fibMMm2 <span class="op">+</span> fibMMm1  <span class="co"># F(m)</span></span>
<span id="cb205-8"><a href="#cb205-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-9"><a href="#cb205-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Find smallest Fibonacci &gt;= n</span></span>
<span id="cb205-10"><a href="#cb205-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> fibM <span class="op">&lt;</span> n:</span>
<span id="cb205-11"><a href="#cb205-11" aria-hidden="true" tabindex="-1"></a>        fibMMm2 <span class="op">=</span> fibMMm1</span>
<span id="cb205-12"><a href="#cb205-12" aria-hidden="true" tabindex="-1"></a>        fibMMm1 <span class="op">=</span> fibM</span>
<span id="cb205-13"><a href="#cb205-13" aria-hidden="true" tabindex="-1"></a>        fibM <span class="op">=</span> fibMMm2 <span class="op">+</span> fibMMm1</span>
<span id="cb205-14"><a href="#cb205-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-15"><a href="#cb205-15" aria-hidden="true" tabindex="-1"></a>    offset <span class="op">=</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb205-16"><a href="#cb205-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-17"><a href="#cb205-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> fibM <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb205-18"><a href="#cb205-18" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> <span class="bu">min</span>(offset <span class="op">+</span> fibMMm2, n <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb205-19"><a href="#cb205-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-20"><a href="#cb205-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[i] <span class="op">&lt;</span> x:</span>
<span id="cb205-21"><a href="#cb205-21" aria-hidden="true" tabindex="-1"></a>            fibM <span class="op">=</span> fibMMm1</span>
<span id="cb205-22"><a href="#cb205-22" aria-hidden="true" tabindex="-1"></a>            fibMMm1 <span class="op">=</span> fibMMm2</span>
<span id="cb205-23"><a href="#cb205-23" aria-hidden="true" tabindex="-1"></a>            fibMMm2 <span class="op">=</span> fibM <span class="op">-</span> fibMMm1</span>
<span id="cb205-24"><a href="#cb205-24" aria-hidden="true" tabindex="-1"></a>            offset <span class="op">=</span> i</span>
<span id="cb205-25"><a href="#cb205-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> arr[i] <span class="op">&gt;</span> x:</span>
<span id="cb205-26"><a href="#cb205-26" aria-hidden="true" tabindex="-1"></a>            fibM <span class="op">=</span> fibMMm2</span>
<span id="cb205-27"><a href="#cb205-27" aria-hidden="true" tabindex="-1"></a>            fibMMm1 <span class="op">-=</span> fibMMm2</span>
<span id="cb205-28"><a href="#cb205-28" aria-hidden="true" tabindex="-1"></a>            fibMMm2 <span class="op">=</span> fibM <span class="op">-</span> fibMMm1</span>
<span id="cb205-29"><a href="#cb205-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb205-30"><a href="#cb205-30" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i</span>
<span id="cb205-31"><a href="#cb205-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-32"><a href="#cb205-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> fibMMm1 <span class="kw">and</span> offset <span class="op">+</span> <span class="dv">1</span> <span class="op">&lt;</span> n <span class="kw">and</span> arr[offset <span class="op">+</span> <span class="dv">1</span>] <span class="op">==</span> x:</span>
<span id="cb205-33"><a href="#cb205-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> offset <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb205-34"><a href="#cb205-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-35"><a href="#cb205-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb205-36"><a href="#cb205-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-37"><a href="#cb205-37" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">10</span>, <span class="dv">22</span>, <span class="dv">35</span>, <span class="dv">40</span>, <span class="dv">45</span>, <span class="dv">50</span>, <span class="dv">80</span>, <span class="dv">82</span>, <span class="dv">85</span>, <span class="dv">90</span>, <span class="dv">100</span>]</span>
<span id="cb205-38"><a href="#cb205-38" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Found at index:"</span>, fibonacci_search(arr, <span class="dv">55</span>))  <span class="co"># Output: -1</span></span>
<span id="cb205-39"><a href="#cb205-39" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Found at index:"</span>, fibonacci_search(arr, <span class="dv">85</span>))  <span class="co"># Output: 8</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: -1
Found at index: 8</code></pre>
</section>
<section id="c-50" class="level4">
<h4 class="anchored" data-anchor-id="c-50">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb207"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> min<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> <span class="op">(</span>a <span class="op">&lt;</span> b<span class="op">)</span> <span class="op">?</span> a <span class="op">:</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb207-4"><a href="#cb207-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-5"><a href="#cb207-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fibonacci_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span></span>
<span id="cb207-6"><a href="#cb207-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> fibMMm2 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>   <span class="co">// F(m-2)</span></span>
<span id="cb207-7"><a href="#cb207-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> fibMMm1 <span class="op">=</span> <span class="dv">1</span><span class="op">;</span>   <span class="co">// F(m-1)</span></span>
<span id="cb207-8"><a href="#cb207-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> fibM <span class="op">=</span> fibMMm2 <span class="op">+</span> fibMMm1<span class="op">;</span>  <span class="co">// F(m)</span></span>
<span id="cb207-9"><a href="#cb207-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-10"><a href="#cb207-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>fibM <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb207-11"><a href="#cb207-11" aria-hidden="true" tabindex="-1"></a>        fibMMm2 <span class="op">=</span> fibMMm1<span class="op">;</span></span>
<span id="cb207-12"><a href="#cb207-12" aria-hidden="true" tabindex="-1"></a>        fibMMm1 <span class="op">=</span> fibM<span class="op">;</span></span>
<span id="cb207-13"><a href="#cb207-13" aria-hidden="true" tabindex="-1"></a>        fibM <span class="op">=</span> fibMMm2 <span class="op">+</span> fibMMm1<span class="op">;</span></span>
<span id="cb207-14"><a href="#cb207-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb207-15"><a href="#cb207-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-16"><a href="#cb207-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> offset <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb207-17"><a href="#cb207-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-18"><a href="#cb207-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>fibM <span class="op">&gt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb207-19"><a href="#cb207-19" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> i <span class="op">=</span> min<span class="op">(</span>offset <span class="op">+</span> fibMMm2<span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb207-20"><a href="#cb207-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-21"><a href="#cb207-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> x<span class="op">)</span> <span class="op">{</span></span>
<span id="cb207-22"><a href="#cb207-22" aria-hidden="true" tabindex="-1"></a>            fibM <span class="op">=</span> fibMMm1<span class="op">;</span></span>
<span id="cb207-23"><a href="#cb207-23" aria-hidden="true" tabindex="-1"></a>            fibMMm1 <span class="op">=</span> fibMMm2<span class="op">;</span></span>
<span id="cb207-24"><a href="#cb207-24" aria-hidden="true" tabindex="-1"></a>            fibMMm2 <span class="op">=</span> fibM <span class="op">-</span> fibMMm1<span class="op">;</span></span>
<span id="cb207-25"><a href="#cb207-25" aria-hidden="true" tabindex="-1"></a>            offset <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb207-26"><a href="#cb207-26" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> x<span class="op">)</span> <span class="op">{</span></span>
<span id="cb207-27"><a href="#cb207-27" aria-hidden="true" tabindex="-1"></a>            fibM <span class="op">=</span> fibMMm2<span class="op">;</span></span>
<span id="cb207-28"><a href="#cb207-28" aria-hidden="true" tabindex="-1"></a>            fibMMm1 <span class="op">-=</span> fibMMm2<span class="op">;</span></span>
<span id="cb207-29"><a href="#cb207-29" aria-hidden="true" tabindex="-1"></a>            fibMMm2 <span class="op">=</span> fibM <span class="op">-</span> fibMMm1<span class="op">;</span></span>
<span id="cb207-30"><a href="#cb207-30" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb207-31"><a href="#cb207-31" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i<span class="op">;</span></span>
<span id="cb207-32"><a href="#cb207-32" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb207-33"><a href="#cb207-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb207-34"><a href="#cb207-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-35"><a href="#cb207-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>fibMMm1 <span class="op">&amp;&amp;</span> offset <span class="op">+</span> <span class="dv">1</span> <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[</span>offset <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">==</span> x<span class="op">)</span></span>
<span id="cb207-36"><a href="#cb207-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> offset <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb207-37"><a href="#cb207-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-38"><a href="#cb207-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb207-39"><a href="#cb207-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb207-40"><a href="#cb207-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-41"><a href="#cb207-41" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb207-42"><a href="#cb207-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">35</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">45</span><span class="op">,</span> <span class="dv">50</span><span class="op">,</span> <span class="dv">80</span><span class="op">,</span> <span class="dv">82</span><span class="op">,</span> <span class="dv">85</span><span class="op">,</span> <span class="dv">90</span><span class="op">,</span> <span class="dv">100</span><span class="op">};</span></span>
<span id="cb207-43"><a href="#cb207-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb207-44"><a href="#cb207-44" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">85</span><span class="op">;</span></span>
<span id="cb207-45"><a href="#cb207-45" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> fibonacci_search<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> x<span class="op">);</span></span>
<span id="cb207-46"><a href="#cb207-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span></span>
<span id="cb207-47"><a href="#cb207-47" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"Found at index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb207-48"><a href="#cb207-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb207-49"><a href="#cb207-49" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"Not found</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb207-50"><a href="#cb207-50" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 8</code></pre>
</section>
</section>
<section id="why-it-matters-68" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-68">Why It Matters</h3>
<ul>
<li>Uses Fibonacci numbers to reduce comparisons</li>
<li>Efficient for sorted arrays with sequential access</li>
<li>Avoids division (only addition/subtraction)</li>
<li>Inspired by golden ratio search (optimal probing)</li>
<li>Excellent teaching tool for divide-and-conquer logic</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-68" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-68">A Gentle Proof (Why It Works)</h3>
<p>The Fibonacci split maintains nearly golden ratio balance.<br>
At each step, one subproblem has size ≈ <span class="math inline">\(\frac{1}{\phi}\)</span> of the previous.</p>
<p>So total steps ≈ number of Fibonacci numbers <span class="math inline">\(\le n\)</span>,<br>
which grows as <span class="math inline">\(O(\log_\phi n) \approx O(\log n)\)</span>.</p>
<p>Thus, the time complexity is the same as binary search,<br>
but with fewer comparisons and more efficient arithmetic.</p>
</section>
<section id="try-it-yourself-68" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-68">Try It Yourself</h3>
<ol type="1">
<li>Search 45 in <code>[10, 22, 35, 40, 45, 50, 80, 82, 85, 90, 100]</code></li>
<li>Search 100 (last element)</li>
<li>Search 10 (first element)</li>
<li>Search value not in array</li>
<li>Count comparisons made</li>
<li>Compare with binary search</li>
<li>Try on length = Fibonacci number (e.g.&nbsp;13)</li>
<li>Visualize index jumps</li>
<li>Modify to print intervals</li>
<li>Apply to sorted strings (lex order)</li>
</ol>
</section>
<section id="test-cases-68" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-68">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Array</th>
<th>Target</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[10,22,35,40,45,50,80,82,85,90,100]</td>
<td>85</td>
<td>8</td>
<td>Found</td>
</tr>
<tr class="even">
<td>[10,22,35,40,45]</td>
<td>22</td>
<td>1</td>
<td>Found</td>
</tr>
<tr class="odd">
<td>[1,2,3,5,8,13,21]</td>
<td>21</td>
<td>6</td>
<td>Found</td>
</tr>
<tr class="even">
<td>[2,4,6,8,10]</td>
<td>7</td>
<td>-1</td>
<td>Not found</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-68" class="level3">
<h3 class="anchored" data-anchor-id="complexity-68">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Comparisons</td>
<td>≤ log₍φ₎(n)</td>
</tr>
<tr class="even">
<td>Access type</td>
<td>Sequential-friendly</td>
</tr>
<tr class="odd">
<td>Requires sorted input</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Fibonacci Search, a golden search for discrete worlds, where each step follows nature’s rhythm.</p>
</section>
<section id="jump-binary-hybrid" class="level3">
<h3 class="anchored" data-anchor-id="jump-binary-hybrid">170 Jump + Binary Hybrid</h3>
<p>Jump + Binary Hybrid Search blends the best of two worlds, Jump Search for fast skipping and Binary Search for precise refinement. It’s perfect when your data is sorted, and you want a balance between linear jumps and logarithmic probing within small subranges.</p>
</section>
<section id="what-problem-are-we-solving-69" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-69">What Problem Are We Solving?</h3>
<p>Binary search is powerful but needs random access (you can jump anywhere). Jump search works well for sequential data (like linked blocks or caches) but may overshoot.</p>
<p>This hybrid combines them:</p>
<ol type="1">
<li>Jump ahead in fixed steps to find the block.</li>
<li>Once you know the target range, switch to binary search inside it.</li>
</ol>
<p>It’s a practical approach for sorted datasets with limited random access (like disk blocks or database pages).</p>
<section id="example-68" class="level4">
<h4 class="anchored" data-anchor-id="example-68">Example</h4>
<p>Search for <code>45</code> in <code>[10, 22, 35, 40, 45, 50, 80, 82, 85, 90, 100]</code>.</p>
<p>Step 1: Jump by block size √n = 3</p>
<ul>
<li>Check <code>arr[2] = 35</code> → 35 &lt; 45</li>
<li>Check <code>arr[5] = 50</code> → 50 &gt; 45</li>
</ul>
<p>Now we know target is in <code>[35, 40, 45, 50)</code> → indices [3..5)</p>
<p>Step 2: Binary search within block [3..5)</p>
<ul>
<li>Mid = 4 → arr[4] = 45 ✅ Found!</li>
</ul>
</section>
</section>
<section id="how-does-it-work-plain-language-69" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-69">How Does It Work (Plain Language)?</h3>
<ol type="1">
<li>Choose block size <span class="math inline">\(m = \sqrt{n}\)</span>.<br>
</li>
<li>Jump ahead by <span class="math inline">\(m\)</span> until you pass or reach the target.<br>
</li>
<li>Once in the block, switch to binary search inside.</li>
</ol>
<p>Jumping narrows the search zone quickly, Binary search finishes it cleanly, fewer comparisons than either alone.</p>
<section id="step-by-step-process-68" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-68">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Compute block size <span class="math inline">\(m = \lfloor \sqrt{n} \rfloor\)</span></td>
</tr>
<tr class="even">
<td>2</td>
<td>Jump by <span class="math inline">\(m\)</span> until <code>arr[j] ≥ target</code> or end</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Determine block <span class="math inline">\([j - m, j)\)</span></td>
</tr>
<tr class="even">
<td>4</td>
<td>Run binary search inside that block</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Return index or -1 if not found</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-68" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-68">Tiny Code (Easy Versions)</h3>
<section id="python-54" class="level4">
<h4 class="anchored" data-anchor-id="python-54">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb209"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> jump_binary_search(arr, x):</span>
<span id="cb209-4"><a href="#cb209-4" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb209-5"><a href="#cb209-5" aria-hidden="true" tabindex="-1"></a>    step <span class="op">=</span> <span class="bu">int</span>(math.sqrt(n))</span>
<span id="cb209-6"><a href="#cb209-6" aria-hidden="true" tabindex="-1"></a>    prev <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb209-7"><a href="#cb209-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-8"><a href="#cb209-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Jump phase</span></span>
<span id="cb209-9"><a href="#cb209-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> prev <span class="op">&lt;</span> n <span class="kw">and</span> arr[<span class="bu">min</span>(step, n) <span class="op">-</span> <span class="dv">1</span>] <span class="op">&lt;</span> x:</span>
<span id="cb209-10"><a href="#cb209-10" aria-hidden="true" tabindex="-1"></a>        prev <span class="op">=</span> step</span>
<span id="cb209-11"><a href="#cb209-11" aria-hidden="true" tabindex="-1"></a>        step <span class="op">+=</span> <span class="bu">int</span>(math.sqrt(n))</span>
<span id="cb209-12"><a href="#cb209-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> prev <span class="op">&gt;=</span> n:</span>
<span id="cb209-13"><a href="#cb209-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb209-14"><a href="#cb209-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-15"><a href="#cb209-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Binary search in block</span></span>
<span id="cb209-16"><a href="#cb209-16" aria-hidden="true" tabindex="-1"></a>    low, high <span class="op">=</span> prev, <span class="bu">min</span>(step, n) <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb209-17"><a href="#cb209-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> low <span class="op">&lt;=</span> high:</span>
<span id="cb209-18"><a href="#cb209-18" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (low <span class="op">+</span> high) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb209-19"><a href="#cb209-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[mid] <span class="op">==</span> x:</span>
<span id="cb209-20"><a href="#cb209-20" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid</span>
<span id="cb209-21"><a href="#cb209-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> arr[mid] <span class="op">&lt;</span> x:</span>
<span id="cb209-22"><a href="#cb209-22" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb209-23"><a href="#cb209-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb209-24"><a href="#cb209-24" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb209-25"><a href="#cb209-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-26"><a href="#cb209-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb209-27"><a href="#cb209-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-28"><a href="#cb209-28" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">10</span>, <span class="dv">22</span>, <span class="dv">35</span>, <span class="dv">40</span>, <span class="dv">45</span>, <span class="dv">50</span>, <span class="dv">80</span>, <span class="dv">82</span>, <span class="dv">85</span>, <span class="dv">90</span>, <span class="dv">100</span>]</span>
<span id="cb209-29"><a href="#cb209-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Found at index:"</span>, jump_binary_search(arr, <span class="dv">45</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 4</code></pre>
</section>
<section id="c-51" class="level4">
<h4 class="anchored" data-anchor-id="c-51">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb211"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb211-3"><a href="#cb211-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-4"><a href="#cb211-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> jump_binary_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span></span>
<span id="cb211-5"><a href="#cb211-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> step <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span>sqrt<span class="op">(</span>n<span class="op">);</span></span>
<span id="cb211-6"><a href="#cb211-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> prev <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb211-7"><a href="#cb211-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-8"><a href="#cb211-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Jump phase</span></span>
<span id="cb211-9"><a href="#cb211-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>prev <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[(</span>step <span class="op">&lt;</span> n <span class="op">?</span> step <span class="op">:</span> n<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">&lt;</span> x<span class="op">)</span> <span class="op">{</span></span>
<span id="cb211-10"><a href="#cb211-10" aria-hidden="true" tabindex="-1"></a>        prev <span class="op">=</span> step<span class="op">;</span></span>
<span id="cb211-11"><a href="#cb211-11" aria-hidden="true" tabindex="-1"></a>        step <span class="op">+=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span>sqrt<span class="op">(</span>n<span class="op">);</span></span>
<span id="cb211-12"><a href="#cb211-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>prev <span class="op">&gt;=</span> n<span class="op">)</span></span>
<span id="cb211-13"><a href="#cb211-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb211-14"><a href="#cb211-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb211-15"><a href="#cb211-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-16"><a href="#cb211-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Binary search in block</span></span>
<span id="cb211-17"><a href="#cb211-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> low <span class="op">=</span> prev<span class="op">;</span></span>
<span id="cb211-18"><a href="#cb211-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> high <span class="op">=</span> <span class="op">(</span>step <span class="op">&lt;</span> n <span class="op">?</span> step <span class="op">:</span> n<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb211-19"><a href="#cb211-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-20"><a href="#cb211-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>low <span class="op">&lt;=</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb211-21"><a href="#cb211-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> low <span class="op">+</span> <span class="op">(</span>high <span class="op">-</span> low<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb211-22"><a href="#cb211-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">==</span> x<span class="op">)</span></span>
<span id="cb211-23"><a href="#cb211-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid<span class="op">;</span></span>
<span id="cb211-24"><a href="#cb211-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">&lt;</span> x<span class="op">)</span></span>
<span id="cb211-25"><a href="#cb211-25" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb211-26"><a href="#cb211-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb211-27"><a href="#cb211-27" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb211-28"><a href="#cb211-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb211-29"><a href="#cb211-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-30"><a href="#cb211-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb211-31"><a href="#cb211-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb211-32"><a href="#cb211-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-33"><a href="#cb211-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb211-34"><a href="#cb211-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">35</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">45</span><span class="op">,</span> <span class="dv">50</span><span class="op">,</span> <span class="dv">80</span><span class="op">,</span> <span class="dv">82</span><span class="op">,</span> <span class="dv">85</span><span class="op">,</span> <span class="dv">90</span><span class="op">,</span> <span class="dv">100</span><span class="op">};</span></span>
<span id="cb211-35"><a href="#cb211-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb211-36"><a href="#cb211-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> jump_binary_search<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="dv">45</span><span class="op">);</span></span>
<span id="cb211-37"><a href="#cb211-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span></span>
<span id="cb211-38"><a href="#cb211-38" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"Found at index: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb211-39"><a href="#cb211-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb211-40"><a href="#cb211-40" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"Not found</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb211-41"><a href="#cb211-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 4</code></pre>
</section>
</section>
<section id="why-it-matters-69" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-69">Why It Matters</h3>
<ul>
<li>Combines fast skipping (jump) and efficient narrowing (binary)</li>
<li>Works well on sorted lists with slow access</li>
<li>Reduces comparisons vs pure jump or linear</li>
<li>Great for block-based storage and database indexing</li>
<li>Demonstrates hybrid thinking in algorithm design</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-69" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-69">A Gentle Proof (Why It Works)</h3>
<p>Jump phase: <span class="math inline">\(O(\sqrt{n})\)</span> steps<br>
Binary phase: <span class="math inline">\(O(\log \sqrt{n}) = O(\log n)\)</span></p>
<p>Total: <span class="math display">\[
T(n) = O(\sqrt{n}) + O(\log n)
\]</span></p>
<p>For large <span class="math inline">\(n\)</span>, dominated by <span class="math inline">\(O(\sqrt{n})\)</span>, but faster in practice.</p>
</section>
<section id="try-it-yourself-69" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-69">Try It Yourself</h3>
<ol type="1">
<li>Search <code>80</code> in <code>[10,22,35,40,45,50,80,82,85,90,100]</code></li>
<li>Try <code>10</code> (first element)</li>
<li>Try <code>100</code> (last element)</li>
<li>Try value not in array</li>
<li>Compare comparisons with binary search</li>
<li>Change block size (try 2√n or n/4)</li>
<li>Print jumps and block</li>
<li>Run on array of length 100</li>
<li>Combine with exponential block discovery</li>
<li>Extend for descending arrays</li>
</ol>
</section>
<section id="test-cases-69" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-69">Test Cases</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 56%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 24%">
</colgroup>
<thead>
<tr class="header">
<th>Array</th>
<th>Target</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[10,22,35,40,45,50,80,82,85,90,100]</td>
<td>45</td>
<td>4</td>
<td>Found</td>
</tr>
<tr class="even">
<td>[10,22,35,40,45]</td>
<td>10</td>
<td>0</td>
<td>Found at start</td>
</tr>
<tr class="odd">
<td>[10,22,35,40,45]</td>
<td>100</td>
<td>-1</td>
<td>Not found</td>
</tr>
<tr class="even">
<td>[1,3,5,7,9,11,13]</td>
<td>7</td>
<td>3</td>
<td>Found in middle</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-69" class="level3">
<h3 class="anchored" data-anchor-id="complexity-69">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(√n + log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Requires sorted</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Adaptive</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Jump + Binary Hybrid, leap with purpose, then zero in. It’s how explorers search with both speed and focus.</p>
</section>
</section>
<section id="section-18.-selection-algorithms" class="level1">
<h1>Section 18. Selection Algorithms</h1>
<section id="quickselect" class="level3">
<h3 class="anchored" data-anchor-id="quickselect">171 Quickselect</h3>
<p>Quickselect is a selection algorithm to find the k-th smallest element in an unsorted array — faster on average than sorting the entire array.</p>
<p>It’s based on the same partitioning idea as Quicksort, but only recurses into the side that contains the desired element.</p>
<p>Average time complexity: O(n) Worst-case (rare): O(n²)</p>
</section>
<section id="what-problem-are-we-solving-70" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-70">What Problem Are We Solving?</h3>
<p>Suppose you have an unsorted list and you want:</p>
<ul>
<li>The median,</li>
<li>The k-th smallest, or</li>
<li>The k-th largest element,</li>
</ul>
<p>You don’t need to fully sort, you just need one order statistic.</p>
<p>Quickselect solves this by partitioning the array and narrowing focus to the relevant half only.</p>
<section id="example-69" class="level4">
<h4 class="anchored" data-anchor-id="example-69">Example</h4>
<p>Find 4th smallest element in: <code>[7, 2, 1, 6, 8, 5, 3, 4]</code></p>
<ol type="1">
<li>Choose pivot (e.g.&nbsp;4).</li>
<li>Partition → <code>[2, 1, 3] [4] [7, 6, 8, 5]</code></li>
<li>Pivot position = 3 (0-based)</li>
<li>k = 4 → pivot index 3 matches → 4 is 4th smallest ✅</li>
</ol>
<p>No need to sort the rest!</p>
</section>
</section>
<section id="how-does-it-work-plain-language-70" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-70">How Does It Work (Plain Language)?</h3>
<p>Quickselect picks a pivot, partitions the list into less-than and greater-than parts, and decides which side to recurse into based on the pivot’s index vs.&nbsp;target <code>k</code>.</p>
<p>It’s a divide and conquer search on positions, not order.</p>
<section id="step-by-step-process-69" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-69">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Pick pivot (random or last element)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Partition array around pivot</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Get pivot index <code>p</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>If <code>p == k</code>, return element</td>
</tr>
<tr class="odd">
<td>5</td>
<td>If <code>p &gt; k</code>, search left</td>
</tr>
<tr class="even">
<td>6</td>
<td>If <code>p &lt; k</code>, search right (adjust k)</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-69" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-69">Tiny Code (Easy Versions)</h3>
<section id="python-55" class="level4">
<h4 class="anchored" data-anchor-id="python-55">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb213"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-3"><a href="#cb213-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> partition(arr, low, high):</span>
<span id="cb213-4"><a href="#cb213-4" aria-hidden="true" tabindex="-1"></a>    pivot <span class="op">=</span> arr[high]</span>
<span id="cb213-5"><a href="#cb213-5" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> low</span>
<span id="cb213-6"><a href="#cb213-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(low, high):</span>
<span id="cb213-7"><a href="#cb213-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[j] <span class="op">&lt;</span> pivot:</span>
<span id="cb213-8"><a href="#cb213-8" aria-hidden="true" tabindex="-1"></a>            arr[i], arr[j] <span class="op">=</span> arr[j], arr[i]</span>
<span id="cb213-9"><a href="#cb213-9" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb213-10"><a href="#cb213-10" aria-hidden="true" tabindex="-1"></a>    arr[i], arr[high] <span class="op">=</span> arr[high], arr[i]</span>
<span id="cb213-11"><a href="#cb213-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i</span>
<span id="cb213-12"><a href="#cb213-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-13"><a href="#cb213-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> quickselect(arr, k):</span>
<span id="cb213-14"><a href="#cb213-14" aria-hidden="true" tabindex="-1"></a>    low, high <span class="op">=</span> <span class="dv">0</span>, <span class="bu">len</span>(arr) <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb213-15"><a href="#cb213-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> low <span class="op">&lt;=</span> high:</span>
<span id="cb213-16"><a href="#cb213-16" aria-hidden="true" tabindex="-1"></a>        pivot_index <span class="op">=</span> partition(arr, low, high)</span>
<span id="cb213-17"><a href="#cb213-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> pivot_index <span class="op">==</span> k:</span>
<span id="cb213-18"><a href="#cb213-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> arr[pivot_index]</span>
<span id="cb213-19"><a href="#cb213-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> pivot_index <span class="op">&gt;</span> k:</span>
<span id="cb213-20"><a href="#cb213-20" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> pivot_index <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb213-21"><a href="#cb213-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb213-22"><a href="#cb213-22" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> pivot_index <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb213-23"><a href="#cb213-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-24"><a href="#cb213-24" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>]</span>
<span id="cb213-25"><a href="#cb213-25" aria-hidden="true" tabindex="-1"></a>k <span class="op">=</span> <span class="dv">3</span>  <span class="co"># 0-based index: 4th smallest</span></span>
<span id="cb213-26"><a href="#cb213-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"4th smallest:"</span>, quickselect(arr, k))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>4th smallest: 4</code></pre>
</section>
<section id="c-52" class="level4">
<h4 class="anchored" data-anchor-id="c-52">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb215"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-3"><a href="#cb215-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb215-4"><a href="#cb215-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> t <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb215-5"><a href="#cb215-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb215-6"><a href="#cb215-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>b <span class="op">=</span> t<span class="op">;</span></span>
<span id="cb215-7"><a href="#cb215-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb215-8"><a href="#cb215-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-9"><a href="#cb215-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> partition<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb215-10"><a href="#cb215-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pivot <span class="op">=</span> arr<span class="op">[</span>high<span class="op">];</span></span>
<span id="cb215-11"><a href="#cb215-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> low<span class="op">;</span></span>
<span id="cb215-12"><a href="#cb215-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> low<span class="op">;</span> j <span class="op">&lt;</span> high<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb215-13"><a href="#cb215-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&lt;</span> pivot<span class="op">)</span> <span class="op">{</span></span>
<span id="cb215-14"><a href="#cb215-14" aria-hidden="true" tabindex="-1"></a>            swap<span class="op">(&amp;</span>arr<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>arr<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb215-15"><a href="#cb215-15" aria-hidden="true" tabindex="-1"></a>            i<span class="op">++;</span></span>
<span id="cb215-16"><a href="#cb215-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb215-17"><a href="#cb215-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb215-18"><a href="#cb215-18" aria-hidden="true" tabindex="-1"></a>    swap<span class="op">(&amp;</span>arr<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>arr<span class="op">[</span>high<span class="op">]);</span></span>
<span id="cb215-19"><a href="#cb215-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i<span class="op">;</span></span>
<span id="cb215-20"><a href="#cb215-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb215-21"><a href="#cb215-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-22"><a href="#cb215-22" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> quickselect<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">,</span> <span class="dt">int</span> k<span class="op">)</span> <span class="op">{</span></span>
<span id="cb215-23"><a href="#cb215-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>low <span class="op">&lt;=</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb215-24"><a href="#cb215-24" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> pi <span class="op">=</span> partition<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> high<span class="op">);</span></span>
<span id="cb215-25"><a href="#cb215-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>pi <span class="op">==</span> k<span class="op">)</span></span>
<span id="cb215-26"><a href="#cb215-26" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> arr<span class="op">[</span>pi<span class="op">];</span></span>
<span id="cb215-27"><a href="#cb215-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>pi <span class="op">&gt;</span> k<span class="op">)</span></span>
<span id="cb215-28"><a href="#cb215-28" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> quickselect<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> pi <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> k<span class="op">);</span></span>
<span id="cb215-29"><a href="#cb215-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb215-30"><a href="#cb215-30" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> quickselect<span class="op">(</span>arr<span class="op">,</span> pi <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> high<span class="op">,</span> k<span class="op">);</span></span>
<span id="cb215-31"><a href="#cb215-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb215-32"><a href="#cb215-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb215-33"><a href="#cb215-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb215-34"><a href="#cb215-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-35"><a href="#cb215-35" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb215-36"><a href="#cb215-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">7</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">};</span></span>
<span id="cb215-37"><a href="#cb215-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb215-38"><a href="#cb215-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> k <span class="op">=</span> <span class="dv">3</span><span class="op">;</span>  <span class="co">// 4th smallest (0-based)</span></span>
<span id="cb215-39"><a href="#cb215-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"4th smallest: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> quickselect<span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> k<span class="op">));</span></span>
<span id="cb215-40"><a href="#cb215-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>4th smallest: 4</code></pre>
</section>
</section>
<section id="why-it-matters-70" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-70">Why It Matters</h3>
<ul>
<li>Find median in linear time (expected)</li>
<li>Avoid sorting when you only need one element</li>
<li>Basis for algorithms like Median of Medians, BFPRT</li>
<li>Common in order statistics, quantiles, top-k problems</li>
<li>Used in libraries (e.g.&nbsp;<code>nth_element</code> in C++)</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-70" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-70">A Gentle Proof (Why It Works)</h3>
<p>Each partition reduces problem size by eliminating one side. Average split ≈ half → O(n) expected comparisons. Worst case (bad pivot) → O(n²), but with randomized pivot, very unlikely.</p>
<p>Expected time: <span class="math display">\[
T(n) = T(n/2) + O(n) \Rightarrow O(n)
\]</span></p>
</section>
<section id="try-it-yourself-70" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-70">Try It Yourself</h3>
<ol type="1">
<li>Find 1st smallest (min)</li>
<li>Find last (max)</li>
<li>Find median (<code>k = n/2</code>)</li>
<li>Add random pivoting</li>
<li>Count comparisons per iteration</li>
<li>Modify for k-th largest (<code>n-k</code>)</li>
<li>Compare runtime with full sort</li>
<li>Visualize partition steps</li>
<li>Test on repeated elements</li>
<li>Combine with deterministic pivot</li>
</ol>
</section>
<section id="test-cases-70" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-70">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Array</th>
<th>k (0-based)</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[7,2,1,6,8,5,3,4]</td>
<td>3</td>
<td>4</td>
<td>4th smallest</td>
</tr>
<tr class="even">
<td>[3,1,2]</td>
<td>1</td>
<td>2</td>
<td>median</td>
</tr>
<tr class="odd">
<td>[10,80,30,90,40,50,70]</td>
<td>4</td>
<td>70</td>
<td>middle element</td>
</tr>
<tr class="even">
<td>[5,5,5,5]</td>
<td>2</td>
<td>5</td>
<td>duplicates</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-70" class="level3">
<h3 class="anchored" data-anchor-id="complexity-70">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Average)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="odd">
<td>In-place</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Randomized</td>
<td>Recommended</td>
</tr>
</tbody>
</table>
<p>Quickselect, the surgical strike of sorting: find exactly what you need, and ignore the rest.</p>
</section>
<section id="median-of-medians" class="level3">
<h3 class="anchored" data-anchor-id="median-of-medians">172 Median of Medians</h3>
<p>Median of Medians is a deterministic selection algorithm that guarantees O(n) worst-case time for finding the k-th smallest element. It improves on Quickselect, which can degrade to (O(n^2)) in unlucky cases, by carefully choosing a good pivot every time.</p>
<p>It’s a cornerstone of theoretical computer science, balancing speed and worst-case safety.</p>
</section>
<section id="what-problem-are-we-solving-71" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-71">What Problem Are We Solving?</h3>
<p>In Quickselect, a bad pivot can lead to unbalanced partitions (like always picking smallest/largest). Median of Medians fixes this by ensuring the pivot is “good enough” — always splitting the array so that each side has at least a constant fraction of elements.</p>
<p>Goal: Find the k-th smallest element deterministically in O(n), no randomness, no risk.</p>
<section id="example-70" class="level4">
<h4 class="anchored" data-anchor-id="example-70">Example</h4>
<p>Find 5th smallest in <code>[12, 3, 5, 7, 4, 19, 26, 23, 8, 15]</code></p>
<ol type="1">
<li>Split into groups of 5: <code>[12, 3, 5, 7, 4]</code>, <code>[19, 26, 23, 8, 15]</code></li>
<li>Sort each group: <code>[3,4,5,7,12]</code>, <code>[8,15,19,23,26]</code></li>
<li>Take medians: <code>[5, 19]</code></li>
<li>Find median of medians: <code>19</code></li>
<li>Partition array around <code>19</code></li>
<li>Recurse on appropriate side until k-th found</li>
</ol>
<p>Pivot <code>19</code> ensures balanced split, leading to linear runtime.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-71" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-71">How Does It Work (Plain Language)?</h3>
<ol type="1">
<li>Break array into groups of 5</li>
<li>Sort each small group (cheap)</li>
<li>Collect all medians of groups</li>
<li>Recursively find median of those medians → good pivot</li>
<li>Partition around pivot</li>
<li>Recurse into half that contains the k-th element</li>
</ol>
<p>Each level discards a constant fraction → (O(n)) total work.</p>
<section id="step-by-step-process-70" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-70">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Divide array into chunks of 5</td>
</tr>
<tr class="even">
<td>2</td>
<td>Sort each chunk</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Extract medians</td>
</tr>
<tr class="even">
<td>4</td>
<td>Find median of medians recursively</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Partition using this pivot</td>
</tr>
<tr class="even">
<td>6</td>
<td>Recurse into correct side based on k</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-70" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-70">Tiny Code (Easy Versions)</h3>
<section id="python-56" class="level4">
<h4 class="anchored" data-anchor-id="python-56">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb217"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> partition(arr, pivot):</span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a>    less <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> arr <span class="cf">if</span> x <span class="op">&lt;</span> pivot]</span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true" tabindex="-1"></a>    equal <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> arr <span class="cf">if</span> x <span class="op">==</span> pivot]</span>
<span id="cb217-4"><a href="#cb217-4" aria-hidden="true" tabindex="-1"></a>    greater <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> arr <span class="cf">if</span> x <span class="op">&gt;</span> pivot]</span>
<span id="cb217-5"><a href="#cb217-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> less, equal, greater</span>
<span id="cb217-6"><a href="#cb217-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-7"><a href="#cb217-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> select(arr, k):</span>
<span id="cb217-8"><a href="#cb217-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(arr) <span class="op">&lt;=</span> <span class="dv">5</span>:</span>
<span id="cb217-9"><a href="#cb217-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">sorted</span>(arr)[k]</span>
<span id="cb217-10"><a href="#cb217-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-11"><a href="#cb217-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 1: group in chunks of 5</span></span>
<span id="cb217-12"><a href="#cb217-12" aria-hidden="true" tabindex="-1"></a>    chunks <span class="op">=</span> [arr[i:i<span class="op">+</span><span class="dv">5</span>] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(arr), <span class="dv">5</span>)]</span>
<span id="cb217-13"><a href="#cb217-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-14"><a href="#cb217-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 2: find medians</span></span>
<span id="cb217-15"><a href="#cb217-15" aria-hidden="true" tabindex="-1"></a>    medians <span class="op">=</span> [<span class="bu">sorted</span>(chunk)[<span class="bu">len</span>(chunk)<span class="op">//</span><span class="dv">2</span>] <span class="cf">for</span> chunk <span class="kw">in</span> chunks]</span>
<span id="cb217-16"><a href="#cb217-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-17"><a href="#cb217-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 3: pivot = median of medians</span></span>
<span id="cb217-18"><a href="#cb217-18" aria-hidden="true" tabindex="-1"></a>    pivot <span class="op">=</span> select(medians, <span class="bu">len</span>(medians)<span class="op">//</span><span class="dv">2</span>)</span>
<span id="cb217-19"><a href="#cb217-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-20"><a href="#cb217-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 4: partition</span></span>
<span id="cb217-21"><a href="#cb217-21" aria-hidden="true" tabindex="-1"></a>    less, equal, greater <span class="op">=</span> partition(arr, pivot)</span>
<span id="cb217-22"><a href="#cb217-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-23"><a href="#cb217-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 5: recurse</span></span>
<span id="cb217-24"><a href="#cb217-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> k <span class="op">&lt;</span> <span class="bu">len</span>(less):</span>
<span id="cb217-25"><a href="#cb217-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> select(less, k)</span>
<span id="cb217-26"><a href="#cb217-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> k <span class="op">&lt;</span> <span class="bu">len</span>(less) <span class="op">+</span> <span class="bu">len</span>(equal):</span>
<span id="cb217-27"><a href="#cb217-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> pivot</span>
<span id="cb217-28"><a href="#cb217-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb217-29"><a href="#cb217-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> select(greater, k <span class="op">-</span> <span class="bu">len</span>(less) <span class="op">-</span> <span class="bu">len</span>(equal))</span>
<span id="cb217-30"><a href="#cb217-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-31"><a href="#cb217-31" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">12</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">4</span>, <span class="dv">19</span>, <span class="dv">26</span>, <span class="dv">23</span>, <span class="dv">8</span>, <span class="dv">15</span>]</span>
<span id="cb217-32"><a href="#cb217-32" aria-hidden="true" tabindex="-1"></a>k <span class="op">=</span> <span class="dv">4</span>  <span class="co"># 0-based: 5th smallest</span></span>
<span id="cb217-33"><a href="#cb217-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"5th smallest:"</span>, select(arr, k))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>5th smallest: 8</code></pre>
</section>
<section id="c-simplified-version" class="level4">
<h4 class="anchored" data-anchor-id="c-simplified-version">C (Simplified Version)</h4>
<p><em>(Pseudocode-like clarity for readability)</em></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb219"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb219-3"><a href="#cb219-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-4"><a href="#cb219-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cmp<span class="op">(</span><span class="dt">const</span> <span class="dt">void</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb219-5"><a href="#cb219-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(*(</span><span class="dt">int</span><span class="op">*)</span>a <span class="op">-</span> <span class="op">*(</span><span class="dt">int</span><span class="op">*)</span>b<span class="op">);</span></span>
<span id="cb219-6"><a href="#cb219-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb219-7"><a href="#cb219-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-8"><a href="#cb219-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> median_of_medians<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> k<span class="op">);</span></span>
<span id="cb219-9"><a href="#cb219-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-10"><a href="#cb219-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> select_group_median<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb219-11"><a href="#cb219-11" aria-hidden="true" tabindex="-1"></a>    qsort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">),</span> cmp<span class="op">);</span></span>
<span id="cb219-12"><a href="#cb219-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr<span class="op">[</span>n<span class="op">/</span><span class="dv">2</span><span class="op">];</span></span>
<span id="cb219-13"><a href="#cb219-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb219-14"><a href="#cb219-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-15"><a href="#cb219-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> median_of_medians<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> k<span class="op">)</span> <span class="op">{</span></span>
<span id="cb219-16"><a href="#cb219-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">5</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb219-17"><a href="#cb219-17" aria-hidden="true" tabindex="-1"></a>        qsort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">),</span> cmp<span class="op">);</span></span>
<span id="cb219-18"><a href="#cb219-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> arr<span class="op">[</span>k<span class="op">];</span></span>
<span id="cb219-19"><a href="#cb219-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb219-20"><a href="#cb219-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-21"><a href="#cb219-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> groups <span class="op">=</span> <span class="op">(</span>n <span class="op">+</span> <span class="dv">4</span><span class="op">)</span> <span class="op">/</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb219-22"><a href="#cb219-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> medians<span class="op">[</span>groups<span class="op">];</span></span>
<span id="cb219-23"><a href="#cb219-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> groups<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb219-24"><a href="#cb219-24" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> size <span class="op">=</span> <span class="op">(</span>i<span class="op">*</span><span class="dv">5</span> <span class="op">+</span> <span class="dv">5</span> <span class="op">&lt;=</span> n<span class="op">)</span> <span class="op">?</span> <span class="dv">5</span> <span class="op">:</span> n <span class="op">-</span> i<span class="op">*</span><span class="dv">5</span><span class="op">;</span></span>
<span id="cb219-25"><a href="#cb219-25" aria-hidden="true" tabindex="-1"></a>        medians<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> select_group_median<span class="op">(</span>arr <span class="op">+</span> i<span class="op">*</span><span class="dv">5</span><span class="op">,</span> size<span class="op">);</span></span>
<span id="cb219-26"><a href="#cb219-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb219-27"><a href="#cb219-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-28"><a href="#cb219-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pivot <span class="op">=</span> median_of_medians<span class="op">(</span>medians<span class="op">,</span> groups<span class="op">,</span> groups<span class="op">/</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb219-29"><a href="#cb219-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-30"><a href="#cb219-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Partition</span></span>
<span id="cb219-31"><a href="#cb219-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> less<span class="op">[</span>n<span class="op">],</span> greater<span class="op">[</span>n<span class="op">],</span> l <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> g <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> equal <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb219-32"><a href="#cb219-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb219-33"><a href="#cb219-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> pivot<span class="op">)</span> less<span class="op">[</span>l<span class="op">++]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb219-34"><a href="#cb219-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> pivot<span class="op">)</span> greater<span class="op">[</span>g<span class="op">++]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb219-35"><a href="#cb219-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> equal<span class="op">++;</span></span>
<span id="cb219-36"><a href="#cb219-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb219-37"><a href="#cb219-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-38"><a href="#cb219-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>k <span class="op">&lt;</span> l<span class="op">)</span></span>
<span id="cb219-39"><a href="#cb219-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> median_of_medians<span class="op">(</span>less<span class="op">,</span> l<span class="op">,</span> k<span class="op">);</span></span>
<span id="cb219-40"><a href="#cb219-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>k <span class="op">&lt;</span> l <span class="op">+</span> equal<span class="op">)</span></span>
<span id="cb219-41"><a href="#cb219-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> pivot<span class="op">;</span></span>
<span id="cb219-42"><a href="#cb219-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb219-43"><a href="#cb219-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> median_of_medians<span class="op">(</span>greater<span class="op">,</span> g<span class="op">,</span> k <span class="op">-</span> l <span class="op">-</span> equal<span class="op">);</span></span>
<span id="cb219-44"><a href="#cb219-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb219-45"><a href="#cb219-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-46"><a href="#cb219-46" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb219-47"><a href="#cb219-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">12</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">19</span><span class="op">,</span> <span class="dv">26</span><span class="op">,</span> <span class="dv">23</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">15</span><span class="op">};</span></span>
<span id="cb219-48"><a href="#cb219-48" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb219-49"><a href="#cb219-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"5th smallest: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> median_of_medians<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="dv">4</span><span class="op">));</span></span>
<span id="cb219-50"><a href="#cb219-50" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>5th smallest: 8</code></pre>
</section>
</section>
<section id="why-it-matters-71" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-71">Why It Matters</h3>
<ul>
<li>Guaranteed O(n) even in worst case</li>
<li>No bad pivots → stable performance</li>
<li>Basis for BFPRT algorithm</li>
<li>Used in theoretical guarantees for real systems</li>
<li>Key for deterministic selection, safe quantile computations</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-71" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-71">A Gentle Proof (Why It Works)</h3>
<p>Each pivot ensures at least 30% of elements are discarded each recursion (proof via grouping).</p>
<p>Recurrence: <span class="math display">\[
T(n) = T(n/5) + T(7n/10) + O(n) \Rightarrow O(n)
\]</span></p>
<p>Thus, always linear time, even worst case.</p>
</section>
<section id="try-it-yourself-71" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-71">Try It Yourself</h3>
<ol type="1">
<li>Find median of <code>[5, 2, 1, 3, 4]</code></li>
<li>Test with duplicates</li>
<li>Compare with Quickselect runtime</li>
<li>Count recursive calls</li>
<li>Change group size to 3 or 7</li>
<li>Visualize grouping steps</li>
<li>Print pivot each round</li>
<li>Apply to large random list</li>
<li>Benchmark vs sorting</li>
<li>Implement as pivot strategy for Quickselect</li>
</ol>
</section>
<section id="test-cases-71" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-71">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Array</th>
<th>k</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[12,3,5,7,4,19,26,23,8,15]</td>
<td>4</td>
<td>8</td>
<td>5th smallest</td>
</tr>
<tr class="even">
<td>[5,2,1,3,4]</td>
<td>2</td>
<td>3</td>
<td>Median</td>
</tr>
<tr class="odd">
<td>[7,7,7,7]</td>
<td>2</td>
<td>7</td>
<td>Duplicates</td>
</tr>
<tr class="even">
<td>[10,9,8,7,6,5]</td>
<td>0</td>
<td>5</td>
<td>Min</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-71" class="level3">
<h3 class="anchored" data-anchor-id="complexity-71">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Worst)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Time (Avg)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Deterministic</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Median of Medians, a balanced thinker in the world of selection: slow and steady, but always linear.</p>
</section>
<section id="randomized-select" class="level3">
<h3 class="anchored" data-anchor-id="randomized-select">173 Randomized Select</h3>
<p>Randomized Select is a probabilistic version of Quickselect, where the pivot is chosen randomly to avoid worst-case behavior. This small twist makes the algorithm’s expected time O(n), even though the worst case remains (O(n^2)). In practice, it’s fast, simple, and robust, a true workhorse for order statistics.</p>
</section>
<section id="what-problem-are-we-solving-72" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-72">What Problem Are We Solving?</h3>
<p>You need the k-th smallest element in an unsorted list. Quickselect works well, but choosing the first or last element as pivot can cause bad splits.</p>
<p>Randomized Select improves this by picking a random pivot, making bad luck rare and performance stable.</p>
<section id="example-71" class="level4">
<h4 class="anchored" data-anchor-id="example-71">Example</h4>
<p>Find 4th smallest in <code>[7, 2, 1, 6, 8, 5, 3, 4]</code></p>
<ol type="1">
<li>Pick random pivot (say <code>5</code>)</li>
<li>Partition → <code>[2,1,3,4] [5] [7,6,8]</code></li>
<li>Pivot index = 4 → 4 &gt; 3, so recurse on left <code>[2,1,3,4]</code></li>
<li>Pick random pivot again (say <code>3</code>)</li>
<li>Partition → <code>[2,1] [3] [4]</code></li>
<li>Index 2 = k=3 → found 4th smallest = 4 ✅</li>
</ol>
</section>
</section>
<section id="how-does-it-work-plain-language-72" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-72">How Does It Work (Plain Language)?</h3>
<p>It’s Quickselect with random pivoting. At each step:</p>
<ul>
<li>Pick a random element as pivot.</li>
<li>Partition around pivot.</li>
<li>Only recurse into one side (where k lies).</li>
</ul>
<p>This randomness ensures average-case balance, even on adversarial inputs.</p>
<section id="step-by-step-process-71" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-71">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Pick random pivot index</td>
</tr>
<tr class="even">
<td>2</td>
<td>Partition array around pivot</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Get pivot index <code>p</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>If <code>p == k</code>, return element</td>
</tr>
<tr class="odd">
<td>5</td>
<td>If <code>p &gt; k</code>, recurse left</td>
</tr>
<tr class="even">
<td>6</td>
<td>If <code>p &lt; k</code>, recurse right (adjust k)</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-71" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-71">Tiny Code (Easy Versions)</h3>
<section id="python-57" class="level4">
<h4 class="anchored" data-anchor-id="python-57">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb221"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> partition(arr, low, high):</span>
<span id="cb221-4"><a href="#cb221-4" aria-hidden="true" tabindex="-1"></a>    pivot <span class="op">=</span> arr[high]</span>
<span id="cb221-5"><a href="#cb221-5" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> low</span>
<span id="cb221-6"><a href="#cb221-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(low, high):</span>
<span id="cb221-7"><a href="#cb221-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[j] <span class="op">&lt;</span> pivot:</span>
<span id="cb221-8"><a href="#cb221-8" aria-hidden="true" tabindex="-1"></a>            arr[i], arr[j] <span class="op">=</span> arr[j], arr[i]</span>
<span id="cb221-9"><a href="#cb221-9" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb221-10"><a href="#cb221-10" aria-hidden="true" tabindex="-1"></a>    arr[i], arr[high] <span class="op">=</span> arr[high], arr[i]</span>
<span id="cb221-11"><a href="#cb221-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i</span>
<span id="cb221-12"><a href="#cb221-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-13"><a href="#cb221-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> randomized_select(arr, low, high, k):</span>
<span id="cb221-14"><a href="#cb221-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> low <span class="op">==</span> high:</span>
<span id="cb221-15"><a href="#cb221-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> arr[low]</span>
<span id="cb221-16"><a href="#cb221-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-17"><a href="#cb221-17" aria-hidden="true" tabindex="-1"></a>    pivot_index <span class="op">=</span> random.randint(low, high)</span>
<span id="cb221-18"><a href="#cb221-18" aria-hidden="true" tabindex="-1"></a>    arr[pivot_index], arr[high] <span class="op">=</span> arr[high], arr[pivot_index]</span>
<span id="cb221-19"><a href="#cb221-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-20"><a href="#cb221-20" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> partition(arr, low, high)</span>
<span id="cb221-21"><a href="#cb221-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-22"><a href="#cb221-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> p <span class="op">==</span> k:</span>
<span id="cb221-23"><a href="#cb221-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> arr[p]</span>
<span id="cb221-24"><a href="#cb221-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> p <span class="op">&gt;</span> k:</span>
<span id="cb221-25"><a href="#cb221-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> randomized_select(arr, low, p <span class="op">-</span> <span class="dv">1</span>, k)</span>
<span id="cb221-26"><a href="#cb221-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb221-27"><a href="#cb221-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> randomized_select(arr, p <span class="op">+</span> <span class="dv">1</span>, high, k)</span>
<span id="cb221-28"><a href="#cb221-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-29"><a href="#cb221-29" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>]</span>
<span id="cb221-30"><a href="#cb221-30" aria-hidden="true" tabindex="-1"></a>k <span class="op">=</span> <span class="dv">3</span>  <span class="co"># 4th smallest</span></span>
<span id="cb221-31"><a href="#cb221-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"4th smallest:"</span>, randomized_select(arr, <span class="dv">0</span>, <span class="bu">len</span>(arr)<span class="op">-</span><span class="dv">1</span>, k))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>4th smallest: 4</code></pre>
</section>
<section id="c-53" class="level4">
<h4 class="anchored" data-anchor-id="c-53">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb223"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;time.h&gt;</span></span>
<span id="cb223-4"><a href="#cb223-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-5"><a href="#cb223-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb223-6"><a href="#cb223-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> t <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span> <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span> <span class="op">*</span>b <span class="op">=</span> t<span class="op">;</span></span>
<span id="cb223-7"><a href="#cb223-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb223-8"><a href="#cb223-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-9"><a href="#cb223-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> partition<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb223-10"><a href="#cb223-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pivot <span class="op">=</span> arr<span class="op">[</span>high<span class="op">];</span></span>
<span id="cb223-11"><a href="#cb223-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> low<span class="op">;</span></span>
<span id="cb223-12"><a href="#cb223-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> low<span class="op">;</span> j <span class="op">&lt;</span> high<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb223-13"><a href="#cb223-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&lt;</span> pivot<span class="op">)</span> <span class="op">{</span></span>
<span id="cb223-14"><a href="#cb223-14" aria-hidden="true" tabindex="-1"></a>            swap<span class="op">(&amp;</span>arr<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>arr<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb223-15"><a href="#cb223-15" aria-hidden="true" tabindex="-1"></a>            i<span class="op">++;</span></span>
<span id="cb223-16"><a href="#cb223-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb223-17"><a href="#cb223-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb223-18"><a href="#cb223-18" aria-hidden="true" tabindex="-1"></a>    swap<span class="op">(&amp;</span>arr<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>arr<span class="op">[</span>high<span class="op">]);</span></span>
<span id="cb223-19"><a href="#cb223-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i<span class="op">;</span></span>
<span id="cb223-20"><a href="#cb223-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb223-21"><a href="#cb223-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-22"><a href="#cb223-22" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> randomized_select<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">,</span> <span class="dt">int</span> k<span class="op">)</span> <span class="op">{</span></span>
<span id="cb223-23"><a href="#cb223-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>low <span class="op">==</span> high<span class="op">)</span> <span class="cf">return</span> arr<span class="op">[</span>low<span class="op">];</span></span>
<span id="cb223-24"><a href="#cb223-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-25"><a href="#cb223-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pivot_index <span class="op">=</span> low <span class="op">+</span> rand<span class="op">()</span> <span class="op">%</span> <span class="op">(</span>high <span class="op">-</span> low <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb223-26"><a href="#cb223-26" aria-hidden="true" tabindex="-1"></a>    swap<span class="op">(&amp;</span>arr<span class="op">[</span>pivot_index<span class="op">],</span> <span class="op">&amp;</span>arr<span class="op">[</span>high<span class="op">]);</span></span>
<span id="cb223-27"><a href="#cb223-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> p <span class="op">=</span> partition<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> high<span class="op">);</span></span>
<span id="cb223-28"><a href="#cb223-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-29"><a href="#cb223-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>p <span class="op">==</span> k<span class="op">)</span> <span class="cf">return</span> arr<span class="op">[</span>p<span class="op">];</span></span>
<span id="cb223-30"><a href="#cb223-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>p <span class="op">&gt;</span> k<span class="op">)</span> <span class="cf">return</span> randomized_select<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> p <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> k<span class="op">);</span></span>
<span id="cb223-31"><a href="#cb223-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">return</span> randomized_select<span class="op">(</span>arr<span class="op">,</span> p <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> high<span class="op">,</span> k<span class="op">);</span></span>
<span id="cb223-32"><a href="#cb223-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb223-33"><a href="#cb223-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-34"><a href="#cb223-34" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb223-35"><a href="#cb223-35" aria-hidden="true" tabindex="-1"></a>    srand<span class="op">(</span>time<span class="op">(</span>NULL<span class="op">));</span></span>
<span id="cb223-36"><a href="#cb223-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">7</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">};</span></span>
<span id="cb223-37"><a href="#cb223-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb223-38"><a href="#cb223-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> k <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb223-39"><a href="#cb223-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"4th smallest: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> randomized_select<span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> k<span class="op">));</span></span>
<span id="cb223-40"><a href="#cb223-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>4th smallest: 4</code></pre>
</section>
</section>
<section id="why-it-matters-72" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-72">Why It Matters</h3>
<ul>
<li>Expected O(n) time, simple, and practical</li>
<li>Avoids worst-case trap of fixed-pivot Quickselect</li>
<li>Great for top-k queries, quantiles, median</li>
<li>Combines simplicity + randomness = robust performance</li>
<li>Commonly used in competitive programming and real-world systems</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-72" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-72">A Gentle Proof (Why It Works)</h3>
<p>Expected recurrence: <span class="math display">\[
T(n) = T(\alpha n) + O(n)
\]</span> where <span class="math inline">\(\alpha\)</span> is random, expected <span class="math inline">\(\approx \tfrac{1}{2}\)</span><br>
→ <span class="math inline">\(T(n) = O(n)\)</span></p>
<p>Worst case still <span class="math inline">\(O(n^2)\)</span>, but rare.<br>
Expected comparisons <span class="math inline">\(\approx 2n\)</span>.</p>
</section>
<section id="try-it-yourself-72" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-72">Try It Yourself</h3>
<ol type="1">
<li>Run multiple times and observe pivot randomness</li>
<li>Compare with deterministic Quickselect</li>
<li>Count recursive calls</li>
<li>Test with sorted input (robust)</li>
<li>Test all same elements</li>
<li>Change k (first, median, last)</li>
<li>Modify to find k-th largest (<code>n-k-1</code>)</li>
<li>Compare performance with sort()</li>
<li>Log pivot indices</li>
<li>Measure runtime on 10⁶ elements</li>
</ol>
</section>
<section id="test-cases-72" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-72">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Array</th>
<th>k</th>
<th>Output</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[7,2,1,6,8,5,3,4]</td>
<td>3</td>
<td>4</td>
<td>4th smallest</td>
</tr>
<tr class="even">
<td>[10,80,30,90,40,50,70]</td>
<td>4</td>
<td>70</td>
<td>Works on any order</td>
</tr>
<tr class="odd">
<td>[1,2,3,4,5]</td>
<td>0</td>
<td>1</td>
<td>Sorted input safe</td>
</tr>
<tr class="even">
<td>[5,5,5,5]</td>
<td>2</td>
<td>5</td>
<td>Duplicates fine</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-72" class="level3">
<h3 class="anchored" data-anchor-id="complexity-72">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time (Expected)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Time (Worst)</td>
<td>O(n²)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Randomized</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>In-place</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Randomized Select, a game of chance that almost always wins: fast, fair, and beautifully simple.</p>
</section>
<section id="binary-search-on-answer" class="level3">
<h3 class="anchored" data-anchor-id="binary-search-on-answer">174 Binary Search on Answer</h3>
<p>Binary Search on Answer (also called Parametric Search) is a powerful optimization trick used when the search space is monotonic—meaning once a condition becomes true, it stays true (or vice versa). Instead of searching a sorted array, we’re searching for the smallest or largest value that satisfies a condition.</p>
</section>
<section id="what-problem-are-we-solving-73" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-73">What Problem Are We Solving?</h3>
<p>Sometimes you don’t have an array to search, but you need to minimize or maximize a numeric answer. Examples:</p>
<ul>
<li>Minimum capacity to transport items in <code>k</code> days</li>
<li>Minimum maximum distance between routers</li>
<li>Maximum median satisfying a condition</li>
</ul>
<p>We can’t iterate all possibilities efficiently, but we can binary search the answer space.</p>
<section id="example-72" class="level4">
<h4 class="anchored" data-anchor-id="example-72">Example</h4>
<p>Problem: Given array <code>[1, 2, 3, 4, 5]</code>, split into <code>2</code> parts, minimize the largest sum among parts.</p>
<p>We can’t directly find it, but if we can check whether a candidate value <code>mid</code> is valid (can split with sum ≤ mid), we can binary search on <code>mid</code>.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>mid</th>
<th>canSplit(nums, 2, mid)</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>9</td>
<td>True (splits: [1,2,3,4], [5])</td>
<td>ok → move left</td>
</tr>
<tr class="even">
<td>7</td>
<td>False</td>
<td>move right</td>
</tr>
<tr class="odd">
<td>8</td>
<td>True</td>
<td>ok → final answer = 9</td>
</tr>
</tbody>
</table>
<p>✅ Result = 9</p>
</section>
</section>
<section id="how-does-it-work-plain-language-73" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-73">How Does It Work (Plain Language)?</h3>
<p>You don’t search elements, you search values. You define a function <code>can(mid)</code> that checks if a solution is possible with <code>mid</code>. Then use binary search to narrow down the range until you find the optimal value.</p>
<section id="step-by-step-process-72" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-72">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Define the range of answers (lo, hi)</td>
</tr>
<tr class="even">
<td>2</td>
<td>While lo &lt; hi:</td>
</tr>
<tr class="odd">
<td></td>
<td> mid = (lo + hi) // 2</td>
</tr>
<tr class="even">
<td></td>
<td> If can(mid): hi = mid</td>
</tr>
<tr class="odd">
<td></td>
<td> Else: lo = mid + 1</td>
</tr>
<tr class="even">
<td>3</td>
<td>Return lo as the optimal answer</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-72" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-72">Tiny Code (Easy Versions)</h3>
<section id="python-58" class="level4">
<h4 class="anchored" data-anchor-id="python-58">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb225"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> can_split(nums, k, mid):</span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a>    count, current <span class="op">=</span> <span class="dv">1</span>, <span class="dv">0</span></span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> x <span class="kw">in</span> nums:</span>
<span id="cb225-4"><a href="#cb225-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> current <span class="op">+</span> x <span class="op">&gt;</span> mid:</span>
<span id="cb225-5"><a href="#cb225-5" aria-hidden="true" tabindex="-1"></a>            count <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb225-6"><a href="#cb225-6" aria-hidden="true" tabindex="-1"></a>            current <span class="op">=</span> x</span>
<span id="cb225-7"><a href="#cb225-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb225-8"><a href="#cb225-8" aria-hidden="true" tabindex="-1"></a>            current <span class="op">+=</span> x</span>
<span id="cb225-9"><a href="#cb225-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count <span class="op">&lt;=</span> k</span>
<span id="cb225-10"><a href="#cb225-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-11"><a href="#cb225-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> binary_search_answer(nums, k):</span>
<span id="cb225-12"><a href="#cb225-12" aria-hidden="true" tabindex="-1"></a>    lo, hi <span class="op">=</span> <span class="bu">max</span>(nums), <span class="bu">sum</span>(nums)</span>
<span id="cb225-13"><a href="#cb225-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> lo <span class="op">&lt;</span> hi:</span>
<span id="cb225-14"><a href="#cb225-14" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (lo <span class="op">+</span> hi) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb225-15"><a href="#cb225-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> can_split(nums, k, mid):</span>
<span id="cb225-16"><a href="#cb225-16" aria-hidden="true" tabindex="-1"></a>            hi <span class="op">=</span> mid</span>
<span id="cb225-17"><a href="#cb225-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb225-18"><a href="#cb225-18" aria-hidden="true" tabindex="-1"></a>            lo <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb225-19"><a href="#cb225-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> lo</span>
<span id="cb225-20"><a href="#cb225-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-21"><a href="#cb225-21" aria-hidden="true" tabindex="-1"></a>nums <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb225-22"><a href="#cb225-22" aria-hidden="true" tabindex="-1"></a>k <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb225-23"><a href="#cb225-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Minimum largest sum:"</span>, binary_search_answer(nums, k))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Minimum largest sum: 9</code></pre>
</section>
<section id="c-54" class="level4">
<h4 class="anchored" data-anchor-id="c-54">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb227"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> can_split<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> k<span class="op">,</span> <span class="dt">int</span> mid<span class="op">)</span> <span class="op">{</span></span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb227-5"><a href="#cb227-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb227-6"><a href="#cb227-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> mid<span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb227-7"><a href="#cb227-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sum <span class="op">+</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> mid<span class="op">)</span> <span class="op">{</span></span>
<span id="cb227-8"><a href="#cb227-8" aria-hidden="true" tabindex="-1"></a>            count<span class="op">++;</span></span>
<span id="cb227-9"><a href="#cb227-9" aria-hidden="true" tabindex="-1"></a>            sum <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb227-10"><a href="#cb227-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb227-11"><a href="#cb227-11" aria-hidden="true" tabindex="-1"></a>            sum <span class="op">+=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb227-12"><a href="#cb227-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb227-13"><a href="#cb227-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb227-14"><a href="#cb227-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count <span class="op">&lt;=</span> k<span class="op">;</span></span>
<span id="cb227-15"><a href="#cb227-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb227-16"><a href="#cb227-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-17"><a href="#cb227-17" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> binary_search_answer<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> k<span class="op">)</span> <span class="op">{</span></span>
<span id="cb227-18"><a href="#cb227-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> lo <span class="op">=</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">],</span> hi <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb227-19"><a href="#cb227-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb227-20"><a href="#cb227-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> lo<span class="op">)</span> lo <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb227-21"><a href="#cb227-21" aria-hidden="true" tabindex="-1"></a>        hi <span class="op">+=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb227-22"><a href="#cb227-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb227-23"><a href="#cb227-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>lo <span class="op">&lt;</span> hi<span class="op">)</span> <span class="op">{</span></span>
<span id="cb227-24"><a href="#cb227-24" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> <span class="op">(</span>lo <span class="op">+</span> hi<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb227-25"><a href="#cb227-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>can_split<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> k<span class="op">,</span> mid<span class="op">))</span></span>
<span id="cb227-26"><a href="#cb227-26" aria-hidden="true" tabindex="-1"></a>            hi <span class="op">=</span> mid<span class="op">;</span></span>
<span id="cb227-27"><a href="#cb227-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb227-28"><a href="#cb227-28" aria-hidden="true" tabindex="-1"></a>            lo <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb227-29"><a href="#cb227-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb227-30"><a href="#cb227-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> lo<span class="op">;</span></span>
<span id="cb227-31"><a href="#cb227-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb227-32"><a href="#cb227-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-33"><a href="#cb227-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb227-34"><a href="#cb227-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb227-35"><a href="#cb227-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb227-36"><a href="#cb227-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> k <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb227-37"><a href="#cb227-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Minimum largest sum: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> binary_search_answer<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> k<span class="op">));</span></span>
<span id="cb227-38"><a href="#cb227-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Minimum largest sum: 9</code></pre>
</section>
</section>
<section id="why-it-matters-73" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-73">Why It Matters</h3>
<ul>
<li>Solves optimization problems without brute force</li>
<li>Turns decision problems into search problems</li>
<li>A universal pattern: works for capacity, distance, time, etc.</li>
<li>Common in LeetCode, interviews, and competitive programming</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-73" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-73">A Gentle Proof (Why It Works)</h3>
<p>If a function <code>f(x)</code> is monotonic (true after a point or false after a point), binary search can find the threshold. Formally:</p>
<p>If <code>f(lo) = false</code>, <code>f(hi) = true</code>, and <code>f(x)</code> is monotonic, then binary search converges to smallest x such that f(x) = true.</p>
</section>
<section id="try-it-yourself-73" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-73">Try It Yourself</h3>
<ol type="1">
<li>Find smallest capacity to ship packages in <code>d</code> days</li>
<li>Find smallest max page load per student (book allocation)</li>
<li>Find largest minimum distance between routers</li>
<li>Find smallest time to paint all boards</li>
<li>Find minimum speed to reach on time</li>
<li>Define a monotonic function <code>can(x)</code> and apply search</li>
<li>Experiment with <code>float</code> range and tolerance</li>
<li>Try max instead of min (reverse condition)</li>
<li>Count binary search steps for each case</li>
<li>Compare with brute force</li>
</ol>
</section>
<section id="test-cases-73" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-73">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Problem</th>
<th>Input</th>
<th>Output</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Split array</td>
<td>[1,2,3,4,5], k=2</td>
<td>9</td>
<td>[1,2,3,4],[5]</td>
</tr>
<tr class="even">
<td>Book allocation</td>
<td>[10,20,30,40], k=2</td>
<td>60</td>
<td>[10,20,30],[40]</td>
</tr>
<tr class="odd">
<td>Router placement</td>
<td>[1,2,8,12], k=3</td>
<td>5</td>
<td>Place at 1,6,12</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-73" class="level3">
<h3 class="anchored" data-anchor-id="complexity-73">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(n log(max - min))</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Monotonicity Required</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Type</td>
<td>Decision-based binary search</td>
</tr>
</tbody>
</table>
<p>Binary Search on Answer, when you can’t sort the data, sort the solution space.</p>
</section>
<section id="order-statistics-tree" class="level3">
<h3 class="anchored" data-anchor-id="order-statistics-tree">175 Order Statistics Tree</h3>
<p>An Order Statistics Tree is a special kind of augmented binary search tree (BST) that supports two powerful operations efficiently:</p>
<ol type="1">
<li>Select(k): find the k-th smallest element.</li>
<li>Rank(x): find the position (rank) of element <code>x</code>.</li>
</ol>
<p>It’s a classic data structure where each node stores subtree size, allowing order-based queries in O(log n) time.</p>
</section>
<section id="what-problem-are-we-solving-74" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-74">What Problem Are We Solving?</h3>
<p>Sometimes you don’t just want to search by key, you want to search by order. For example:</p>
<ul>
<li>“What’s the 5th smallest element?”</li>
<li>“What rank is 37 in the tree?”</li>
<li>“How many numbers ≤ 50 are there?”</li>
</ul>
<p>An order statistics tree gives you both key-based and rank-based access in one structure.</p>
<section id="example-73" class="level4">
<h4 class="anchored" data-anchor-id="example-73">Example</h4>
<p>Suppose you insert <code>[20, 15, 25, 10, 18, 22, 30]</code>.</p>
<p>Each node stores <code>size</code> (the number of nodes in its subtree).</p>
<pre><code>        20(size=7)
       /          \
  15(3)          25(3)
  /   \          /   \
10(1) 18(1)   22(1) 30(1)</code></pre>
<p>Select(4) → 20 (the 4th smallest) Rank(22) → 6 (22 is the 6th smallest)</p>
</section>
</section>
<section id="how-does-it-work-plain-language-74" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-74">How Does It Work (Plain Language)?</h3>
<p>Every node tracks how many nodes exist in its subtree (left + right + itself). When you traverse:</p>
<ul>
<li>To select k-th smallest, compare <code>k</code> with size of left subtree.</li>
<li>To find rank of x, accumulate sizes while traversing down.</li>
</ul>
<section id="selectk-pseudocode" class="level4">
<h4 class="anchored" data-anchor-id="selectk-pseudocode">Select(k) Pseudocode</h4>
<pre><code>select(node, k):
    left_size = size(node.left)
    if k == left_size + 1: return node.key
    if k &lt;= left_size: return select(node.left, k)
    else: return select(node.right, k - left_size - 1)</code></pre>
</section>
<section id="rankx-pseudocode" class="level4">
<h4 class="anchored" data-anchor-id="rankx-pseudocode">Rank(x) Pseudocode</h4>
<pre><code>rank(node, x):
    if node == NULL: return 0
    if x &lt; node.key: return rank(node.left, x)
    if x == node.key: return size(node.left) + 1
    else: return size(node.left) + 1 + rank(node.right, x)</code></pre>
</section>
</section>
<section id="tiny-code-easy-versions-73" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-73">Tiny Code (Easy Versions)</h3>
<section id="python-59" class="level4">
<h4 class="anchored" data-anchor-id="python-59">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb232"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Node:</span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, key):</span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.key <span class="op">=</span> key</span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.left <span class="op">=</span> <span class="va">None</span></span>
<span id="cb232-5"><a href="#cb232-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.right <span class="op">=</span> <span class="va">None</span></span>
<span id="cb232-6"><a href="#cb232-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.size <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb232-7"><a href="#cb232-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-8"><a href="#cb232-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> update_size(node):</span>
<span id="cb232-9"><a href="#cb232-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> node:</span>
<span id="cb232-10"><a href="#cb232-10" aria-hidden="true" tabindex="-1"></a>        node.size <span class="op">=</span> <span class="dv">1</span> <span class="op">+</span> (node.left.size <span class="cf">if</span> node.left <span class="cf">else</span> <span class="dv">0</span>) <span class="op">+</span> (node.right.size <span class="cf">if</span> node.right <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb232-11"><a href="#cb232-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-12"><a href="#cb232-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> insert(node, key):</span>
<span id="cb232-13"><a href="#cb232-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> node <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb232-14"><a href="#cb232-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> Node(key)</span>
<span id="cb232-15"><a href="#cb232-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> key <span class="op">&lt;</span> node.key:</span>
<span id="cb232-16"><a href="#cb232-16" aria-hidden="true" tabindex="-1"></a>        node.left <span class="op">=</span> insert(node.left, key)</span>
<span id="cb232-17"><a href="#cb232-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb232-18"><a href="#cb232-18" aria-hidden="true" tabindex="-1"></a>        node.right <span class="op">=</span> insert(node.right, key)</span>
<span id="cb232-19"><a href="#cb232-19" aria-hidden="true" tabindex="-1"></a>    update_size(node)</span>
<span id="cb232-20"><a href="#cb232-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> node</span>
<span id="cb232-21"><a href="#cb232-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-22"><a href="#cb232-22" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> select(node, k):</span>
<span id="cb232-23"><a href="#cb232-23" aria-hidden="true" tabindex="-1"></a>    left_size <span class="op">=</span> node.left.size <span class="cf">if</span> node.left <span class="cf">else</span> <span class="dv">0</span></span>
<span id="cb232-24"><a href="#cb232-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> k <span class="op">==</span> left_size <span class="op">+</span> <span class="dv">1</span>:</span>
<span id="cb232-25"><a href="#cb232-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> node.key</span>
<span id="cb232-26"><a href="#cb232-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> k <span class="op">&lt;=</span> left_size:</span>
<span id="cb232-27"><a href="#cb232-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> select(node.left, k)</span>
<span id="cb232-28"><a href="#cb232-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb232-29"><a href="#cb232-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> select(node.right, k <span class="op">-</span> left_size <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb232-30"><a href="#cb232-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-31"><a href="#cb232-31" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rank(node, key):</span>
<span id="cb232-32"><a href="#cb232-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> node <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb232-33"><a href="#cb232-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb232-34"><a href="#cb232-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> key <span class="op">&lt;</span> node.key:</span>
<span id="cb232-35"><a href="#cb232-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> rank(node.left, key)</span>
<span id="cb232-36"><a href="#cb232-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> key <span class="op">==</span> node.key:</span>
<span id="cb232-37"><a href="#cb232-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (node.left.size <span class="cf">if</span> node.left <span class="cf">else</span> <span class="dv">0</span>) <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb232-38"><a href="#cb232-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb232-39"><a href="#cb232-39" aria-hidden="true" tabindex="-1"></a>        left_size <span class="op">=</span> node.left.size <span class="cf">if</span> node.left <span class="cf">else</span> <span class="dv">0</span></span>
<span id="cb232-40"><a href="#cb232-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> left_size <span class="op">+</span> <span class="dv">1</span> <span class="op">+</span> rank(node.right, key)</span>
<span id="cb232-41"><a href="#cb232-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-42"><a href="#cb232-42" aria-hidden="true" tabindex="-1"></a>root <span class="op">=</span> <span class="va">None</span></span>
<span id="cb232-43"><a href="#cb232-43" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> x <span class="kw">in</span> [<span class="dv">20</span>, <span class="dv">15</span>, <span class="dv">25</span>, <span class="dv">10</span>, <span class="dv">18</span>, <span class="dv">22</span>, <span class="dv">30</span>]:</span>
<span id="cb232-44"><a href="#cb232-44" aria-hidden="true" tabindex="-1"></a>    root <span class="op">=</span> insert(root, x)</span>
<span id="cb232-45"><a href="#cb232-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-46"><a href="#cb232-46" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Select(4):"</span>, select(root, <span class="dv">4</span>))  <span class="co"># 20</span></span>
<span id="cb232-47"><a href="#cb232-47" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Rank(22):"</span>, rank(root, <span class="dv">22</span>))    <span class="co"># 6</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="c-conceptual-skeleton" class="level4">
<h4 class="anchored" data-anchor-id="c-conceptual-skeleton">C (Conceptual Skeleton)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb233"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> Node <span class="op">{</span></span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span></span>
<span id="cb233-3"><a href="#cb233-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size<span class="op">;</span></span>
<span id="cb233-4"><a href="#cb233-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Node <span class="op">*</span>left<span class="op">,</span> <span class="op">*</span>right<span class="op">;</span></span>
<span id="cb233-5"><a href="#cb233-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Node<span class="op">;</span></span>
<span id="cb233-6"><a href="#cb233-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-7"><a href="#cb233-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> size<span class="op">(</span>Node<span class="op">*</span> n<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> n <span class="op">?</span> n<span class="op">-&gt;</span>size <span class="op">:</span> <span class="dv">0</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb233-8"><a href="#cb233-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-9"><a href="#cb233-9" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> update_size<span class="op">(</span>Node<span class="op">*</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb233-10"><a href="#cb233-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n<span class="op">)</span> n<span class="op">-&gt;</span>size <span class="op">=</span> <span class="dv">1</span> <span class="op">+</span> size<span class="op">(</span>n<span class="op">-&gt;</span>left<span class="op">)</span> <span class="op">+</span> size<span class="op">(</span>n<span class="op">-&gt;</span>right<span class="op">);</span></span>
<span id="cb233-11"><a href="#cb233-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb233-12"><a href="#cb233-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-13"><a href="#cb233-13" aria-hidden="true" tabindex="-1"></a>Node<span class="op">*</span> new_node<span class="op">(</span><span class="dt">int</span> key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb233-14"><a href="#cb233-14" aria-hidden="true" tabindex="-1"></a>    Node<span class="op">*</span> n <span class="op">=</span> malloc<span class="op">(</span><span class="kw">sizeof</span><span class="op">(</span>Node<span class="op">));</span></span>
<span id="cb233-15"><a href="#cb233-15" aria-hidden="true" tabindex="-1"></a>    n<span class="op">-&gt;</span>key <span class="op">=</span> key<span class="op">;</span> n<span class="op">-&gt;</span>size <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb233-16"><a href="#cb233-16" aria-hidden="true" tabindex="-1"></a>    n<span class="op">-&gt;</span>left <span class="op">=</span> n<span class="op">-&gt;</span>right <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb233-17"><a href="#cb233-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> n<span class="op">;</span></span>
<span id="cb233-18"><a href="#cb233-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb233-19"><a href="#cb233-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-20"><a href="#cb233-20" aria-hidden="true" tabindex="-1"></a>Node<span class="op">*</span> insert<span class="op">(</span>Node<span class="op">*</span> root<span class="op">,</span> <span class="dt">int</span> key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb233-21"><a href="#cb233-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>root<span class="op">)</span> <span class="cf">return</span> new_node<span class="op">(</span>key<span class="op">);</span></span>
<span id="cb233-22"><a href="#cb233-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>key <span class="op">&lt;</span> root<span class="op">-&gt;</span>key<span class="op">)</span> root<span class="op">-&gt;</span>left <span class="op">=</span> insert<span class="op">(</span>root<span class="op">-&gt;</span>left<span class="op">,</span> key<span class="op">);</span></span>
<span id="cb233-23"><a href="#cb233-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> root<span class="op">-&gt;</span>right <span class="op">=</span> insert<span class="op">(</span>root<span class="op">-&gt;</span>right<span class="op">,</span> key<span class="op">);</span></span>
<span id="cb233-24"><a href="#cb233-24" aria-hidden="true" tabindex="-1"></a>    update_size<span class="op">(</span>root<span class="op">);</span></span>
<span id="cb233-25"><a href="#cb233-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> root<span class="op">;</span></span>
<span id="cb233-26"><a href="#cb233-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb233-27"><a href="#cb233-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-28"><a href="#cb233-28" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> select_k<span class="op">(</span>Node<span class="op">*</span> root<span class="op">,</span> <span class="dt">int</span> k<span class="op">)</span> <span class="op">{</span></span>
<span id="cb233-29"><a href="#cb233-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left_size <span class="op">=</span> size<span class="op">(</span>root<span class="op">-&gt;</span>left<span class="op">);</span></span>
<span id="cb233-30"><a href="#cb233-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>k <span class="op">==</span> left_size <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="cf">return</span> root<span class="op">-&gt;</span>key<span class="op">;</span></span>
<span id="cb233-31"><a href="#cb233-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>k <span class="op">&lt;=</span> left_size<span class="op">)</span> <span class="cf">return</span> select_k<span class="op">(</span>root<span class="op">-&gt;</span>left<span class="op">,</span> k<span class="op">);</span></span>
<span id="cb233-32"><a href="#cb233-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">return</span> select_k<span class="op">(</span>root<span class="op">-&gt;</span>right<span class="op">,</span> k <span class="op">-</span> left_size <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb233-33"><a href="#cb233-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-74" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-74">Why It Matters</h3>
<ul>
<li>Useful in rank-based queries, median finding, and order-statistics problems</li>
<li>Core to balanced trees (AVL, Red-Black, Treaps) with order augmentation</li>
<li>Enables dynamic median queries and range counting</li>
</ul>
<p>You can imagine it as a self-updating leaderboard, always knowing who’s in position <code>k</code>.</p>
</section>
<section id="a-gentle-proof-why-it-works-74" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-74">A Gentle Proof (Why It Works)</h3>
<p>Because subtree sizes are updated correctly on insertions/deletions, each traversal can compute ranks or k-th values in O(log n) time (in balanced trees). If balanced (like in an AVL or RB-tree), operations remain logarithmic.</p>
</section>
<section id="try-it-yourself-74" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-74">Try It Yourself</h3>
<ol type="1">
<li>Build an Order Statistics Tree for <code>[10,20,30,40,50]</code>.</li>
<li>Find <code>Select(3)</code> and <code>Rank(40)</code>.</li>
<li>Insert new elements and recheck ranks.</li>
<li>Extend to find median dynamically.</li>
<li>Modify to support deletions.</li>
<li>Compare with sorting then indexing (O(n log n) vs O(log n)).</li>
<li>Try building on top of Red-Black Tree.</li>
<li>Use for running percentiles.</li>
<li>Explore dynamic segment trees for same queries.</li>
<li>Implement <code>countLessThan(x)</code> using rank.</li>
</ol>
</section>
<section id="test-cases-74" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-74">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Query</th>
<th>Expected Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Select(1)</td>
<td>10</td>
</tr>
<tr class="even">
<td>Select(4)</td>
<td>20</td>
</tr>
<tr class="odd">
<td>Rank(10)</td>
<td>1</td>
</tr>
<tr class="even">
<td>Rank(22)</td>
<td>6</td>
</tr>
<tr class="odd">
<td>Rank(30)</td>
<td>7</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-74" class="level3">
<h3 class="anchored" data-anchor-id="complexity-74">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Insert / Delete</td>
<td>O(log n)</td>
</tr>
<tr class="even">
<td>Select(k)</td>
<td>O(log n)</td>
</tr>
<tr class="odd">
<td>Rank(x)</td>
<td>O(log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n)</td>
</tr>
</tbody>
</table>
<p>An Order Statistics Tree blends search and ranking, perfect for problems that need to know <em>what</em> and <em>where</em> at the same time.</p>
</section>
<section id="tournament-tree-selection" class="level3">
<h3 class="anchored" data-anchor-id="tournament-tree-selection">176 Tournament Tree Selection</h3>
<p>A Tournament Tree is a binary tree structure that simulates a knockout tournament among elements. Each match compares two elements, and the winner moves up. It’s an elegant way to find minimum, maximum, or even k-th smallest elements with structured comparisons.</p>
</section>
<section id="what-problem-are-we-solving-75" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-75">What Problem Are We Solving?</h3>
<p>Finding the minimum or maximum in a list takes O(n). But if you also want the second smallest, third smallest, or k-th, you’d like to reuse earlier comparisons. A tournament tree keeps track of all matches, so you don’t need to start over.</p>
<section id="example-74" class="level4">
<h4 class="anchored" data-anchor-id="example-74">Example</h4>
<p>Suppose we have elements: <code>[4, 7, 2, 9, 5, 1, 8, 6]</code>.</p>
<ol type="1">
<li>Pair them up: compare (4,7), (2,9), (5,1), (8,6)</li>
<li>Winners move up: [4, 2, 1, 6]</li>
<li>Next round: (4,2), (1,6) → winners [2, 1]</li>
<li>Final match: (2,1) → winner 1</li>
</ol>
<p>The root of the tree = minimum element (1).</p>
<p>If you store the losing element from each match, you can trace back the second smallest, it must have lost directly to 1.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-75" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-75">How Does It Work (Plain Language)?</h3>
<p>Imagine a sports tournament:</p>
<ul>
<li>Every player plays one match.</li>
<li>The winner moves on, loser is eliminated.</li>
<li>The champion (root) is the smallest element.</li>
<li>The second smallest is the best among those who lost to the champion.</li>
</ul>
<p>Each match is one comparison, so total comparisons = n - 1 for the min. To find second min, check log n losers.</p>
<section id="steps" class="level4">
<h4 class="anchored" data-anchor-id="steps">Steps</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 94%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Build a complete binary tree where each leaf is an element.</td>
</tr>
<tr class="even">
<td>2</td>
<td>Compare each pair and move winner up.</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Store “losers” in each node.</td>
</tr>
<tr class="even">
<td>4</td>
<td>The root = min. The second min = min(losers along winner’s path).</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-74" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-74">Tiny Code (Easy Versions)</h3>
<section id="python-60" class="level4">
<h4 class="anchored" data-anchor-id="python-60">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb234"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> tournament_min(arr):</span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a>    matches <span class="op">=</span> []</span>
<span id="cb234-3"><a href="#cb234-3" aria-hidden="true" tabindex="-1"></a>    tree <span class="op">=</span> [[x] <span class="cf">for</span> x <span class="kw">in</span> arr]</span>
<span id="cb234-4"><a href="#cb234-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="bu">len</span>(tree) <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb234-5"><a href="#cb234-5" aria-hidden="true" tabindex="-1"></a>        next_round <span class="op">=</span> []</span>
<span id="cb234-6"><a href="#cb234-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(tree), <span class="dv">2</span>):</span>
<span id="cb234-7"><a href="#cb234-7" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> i <span class="op">+</span> <span class="dv">1</span> <span class="op">==</span> <span class="bu">len</span>(tree):</span>
<span id="cb234-8"><a href="#cb234-8" aria-hidden="true" tabindex="-1"></a>                next_round.append(tree[i])</span>
<span id="cb234-9"><a href="#cb234-9" aria-hidden="true" tabindex="-1"></a>                <span class="cf">continue</span></span>
<span id="cb234-10"><a href="#cb234-10" aria-hidden="true" tabindex="-1"></a>            a, b <span class="op">=</span> tree[i][<span class="dv">0</span>], tree[i<span class="op">+</span><span class="dv">1</span>][<span class="dv">0</span>]</span>
<span id="cb234-11"><a href="#cb234-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> a <span class="op">&lt;</span> b:</span>
<span id="cb234-12"><a href="#cb234-12" aria-hidden="true" tabindex="-1"></a>                next_round.append([a, b])</span>
<span id="cb234-13"><a href="#cb234-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb234-14"><a href="#cb234-14" aria-hidden="true" tabindex="-1"></a>                next_round.append([b, a])</span>
<span id="cb234-15"><a href="#cb234-15" aria-hidden="true" tabindex="-1"></a>        matches <span class="op">=</span> next_round</span>
<span id="cb234-16"><a href="#cb234-16" aria-hidden="true" tabindex="-1"></a>        tree <span class="op">=</span> next_round</span>
<span id="cb234-17"><a href="#cb234-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> tree[<span class="dv">0</span>][<span class="dv">0</span>]</span>
<span id="cb234-18"><a href="#cb234-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb234-19"><a href="#cb234-19" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_second_min(arr):</span>
<span id="cb234-20"><a href="#cb234-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Build tournament, keep track of losers</span></span>
<span id="cb234-21"><a href="#cb234-21" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb234-22"><a href="#cb234-22" aria-hidden="true" tabindex="-1"></a>    tree <span class="op">=</span> [[x, []] <span class="cf">for</span> x <span class="kw">in</span> arr]</span>
<span id="cb234-23"><a href="#cb234-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="bu">len</span>(tree) <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb234-24"><a href="#cb234-24" aria-hidden="true" tabindex="-1"></a>        next_round <span class="op">=</span> []</span>
<span id="cb234-25"><a href="#cb234-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(tree), <span class="dv">2</span>):</span>
<span id="cb234-26"><a href="#cb234-26" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> i <span class="op">+</span> <span class="dv">1</span> <span class="op">==</span> <span class="bu">len</span>(tree):</span>
<span id="cb234-27"><a href="#cb234-27" aria-hidden="true" tabindex="-1"></a>                next_round.append(tree[i])</span>
<span id="cb234-28"><a href="#cb234-28" aria-hidden="true" tabindex="-1"></a>                <span class="cf">continue</span></span>
<span id="cb234-29"><a href="#cb234-29" aria-hidden="true" tabindex="-1"></a>            a, a_losers <span class="op">=</span> tree[i]</span>
<span id="cb234-30"><a href="#cb234-30" aria-hidden="true" tabindex="-1"></a>            b, b_losers <span class="op">=</span> tree[i<span class="op">+</span><span class="dv">1</span>]</span>
<span id="cb234-31"><a href="#cb234-31" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> a <span class="op">&lt;</span> b:</span>
<span id="cb234-32"><a href="#cb234-32" aria-hidden="true" tabindex="-1"></a>                next_round.append([a, a_losers <span class="op">+</span> [b]])</span>
<span id="cb234-33"><a href="#cb234-33" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb234-34"><a href="#cb234-34" aria-hidden="true" tabindex="-1"></a>                next_round.append([b, b_losers <span class="op">+</span> [a]])</span>
<span id="cb234-35"><a href="#cb234-35" aria-hidden="true" tabindex="-1"></a>        tree <span class="op">=</span> next_round</span>
<span id="cb234-36"><a href="#cb234-36" aria-hidden="true" tabindex="-1"></a>    winner, losers <span class="op">=</span> tree[<span class="dv">0</span>]</span>
<span id="cb234-37"><a href="#cb234-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> winner, <span class="bu">min</span>(losers)</span>
<span id="cb234-38"><a href="#cb234-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb234-39"><a href="#cb234-39" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">9</span>, <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">6</span>]</span>
<span id="cb234-40"><a href="#cb234-40" aria-hidden="true" tabindex="-1"></a>min_val, second_min <span class="op">=</span> find_second_min(arr)</span>
<span id="cb234-41"><a href="#cb234-41" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Min:"</span>, min_val)</span>
<span id="cb234-42"><a href="#cb234-42" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Second Min:"</span>, second_min)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Min: 1
Second Min: 2</code></pre>
</section>
<section id="c-55" class="level4">
<h4 class="anchored" data-anchor-id="c-55">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb236"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;limits.h&gt;</span></span>
<span id="cb236-3"><a href="#cb236-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-4"><a href="#cb236-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> tournament_min<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb236-5"><a href="#cb236-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> n<span class="op">;</span></span>
<span id="cb236-6"><a href="#cb236-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>size <span class="op">&gt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb236-7"><a href="#cb236-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size <span class="op">/</span> <span class="dv">2</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb236-8"><a href="#cb236-8" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="op">(</span>arr<span class="op">[</span><span class="dv">2</span><span class="op">*</span>i<span class="op">]</span> <span class="op">&lt;</span> arr<span class="op">[</span><span class="dv">2</span><span class="op">*</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="op">?</span> arr<span class="op">[</span><span class="dv">2</span><span class="op">*</span>i<span class="op">]</span> <span class="op">:</span> arr<span class="op">[</span><span class="dv">2</span><span class="op">*</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb236-9"><a href="#cb236-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb236-10"><a href="#cb236-10" aria-hidden="true" tabindex="-1"></a>        size <span class="op">=</span> <span class="op">(</span>size <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb236-11"><a href="#cb236-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb236-12"><a href="#cb236-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb236-13"><a href="#cb236-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb236-14"><a href="#cb236-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-15"><a href="#cb236-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb236-16"><a href="#cb236-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">4</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">6</span><span class="op">};</span></span>
<span id="cb236-17"><a href="#cb236-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb236-18"><a href="#cb236-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Minimum: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> tournament_min<span class="op">(</span>arr<span class="op">,</span> n<span class="op">));</span></span>
<span id="cb236-19"><a href="#cb236-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-75" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-75">Why It Matters</h3>
<ul>
<li>Finds minimum in O(n), second minimum in O(n + log n) comparisons</li>
<li>Reusable for k-th selection if you store all match info</li>
<li>Forms the backbone of selection networks, parallel sorting, and merge tournaments</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-75" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-75">A Gentle Proof (Why It Works)</h3>
<p>Each element except the minimum loses exactly once. The minimum element competes in log₂n matches (height of tree). So second minimum must be the smallest of log₂n losers, requiring log₂n extra comparisons.</p>
<p>Total = n - 1 + log₂n comparisons, asymptotically optimal.</p>
</section>
<section id="try-it-yourself-75" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-75">Try It Yourself</h3>
<ol type="1">
<li>Build a tournament for <code>[5,3,8,2,9,4]</code>.</li>
<li>Find minimum and second minimum manually.</li>
<li>Modify code to find maximum and second maximum.</li>
<li>Print tree rounds to visualize matches.</li>
<li>Experiment with uneven sizes (non-power-of-2).</li>
<li>Try to extend it to third smallest (hint: store paths).</li>
<li>Compare with sorting-based approach.</li>
<li>Use tournament structure for pairwise elimination problems.</li>
<li>Simulate sports bracket winner path.</li>
<li>Count comparisons for each step.</li>
</ol>
</section>
<section id="test-cases-75" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-75">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Min</th>
<th>Second Min</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[4,7,2,9,5,1,8,6]</td>
<td>1</td>
<td>2</td>
</tr>
<tr class="even">
<td>[10,3,6,2]</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="odd">
<td>[5,4,3,2,1]</td>
<td>1</td>
<td>2</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-75" class="level3">
<h3 class="anchored" data-anchor-id="complexity-75">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Build Tournament</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Find Minimum</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Find Second Minimum</td>
<td>O(log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n)</td>
</tr>
</tbody>
</table>
<p>A Tournament Tree turns comparisons into matches, where every element plays once, and the champion reveals not just victory, but the story of every defeat.</p>
</section>
<section id="heap-select-min-heap" class="level3">
<h3 class="anchored" data-anchor-id="heap-select-min-heap">177 Heap Select (Min-Heap)</h3>
<p>Heap Select is a simple, powerful technique for finding the k smallest (or largest) elements in a collection using a heap. It’s one of the most practical selection algorithms, trading minimal code for strong efficiency.</p>
</section>
<section id="what-problem-are-we-solving-76" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-76">What Problem Are We Solving?</h3>
<p>You often don’t need a full sort, just the k smallest or k largest items. Examples:</p>
<ul>
<li>Find top 10 scores</li>
<li>Get smallest 5 distances</li>
<li>Maintain top-k trending topics</li>
</ul>
<p>A heap (priority queue) makes this easy, keep a running set of size <code>k</code>, pop or push as needed.</p>
<section id="example-75" class="level4">
<h4 class="anchored" data-anchor-id="example-75">Example</h4>
<p>Find 3 smallest elements in <code>[7, 2, 9, 1, 5, 4]</code>.</p>
<ol type="1">
<li><p>Create max-heap of first <code>k=3</code> elements → <code>[7, 2, 9]</code> → heap = [9, 2, 7]</p></li>
<li><p>For each next element:</p>
<ul>
<li>1 &lt; 9 → pop 9, push 1 → heap = [7, 2, 1]</li>
<li>5 &lt; 7 → pop 7, push 5 → heap = [5, 2, 1]</li>
<li>4 &lt; 5 → pop 5, push 4 → heap = [4, 2, 1]</li>
</ul></li>
</ol>
<p>Result → <code>[1, 2, 4]</code> (the 3 smallest)</p>
</section>
</section>
<section id="how-does-it-work-plain-language-76" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-76">How Does It Work (Plain Language)?</h3>
<p>You keep a heap of size k:</p>
<ul>
<li>For smallest elements → use a max-heap (remove largest if new smaller appears).</li>
<li>For largest elements → use a min-heap (remove smallest if new larger appears).</li>
</ul>
<p>This keeps only the top-k interesting values at all times.</p>
<section id="step-by-step-process-73" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-73">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Initialize heap with first k elements</td>
</tr>
<tr class="even">
<td>2</td>
<td>Convert to max-heap (if looking for smallest k)</td>
</tr>
<tr class="odd">
<td>3</td>
<td>For each remaining element x:</td>
</tr>
<tr class="even">
<td></td>
<td>If x &lt; heap[0] → replace top</td>
</tr>
<tr class="odd">
<td>4</td>
<td>Result is heap contents (unsorted)</td>
</tr>
<tr class="even">
<td>5</td>
<td>Sort heap if needed for final output</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-75" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-75">Tiny Code (Easy Versions)</h3>
<section id="python-61" class="level4">
<h4 class="anchored" data-anchor-id="python-61">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb237"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> heapq</span>
<span id="cb237-2"><a href="#cb237-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-3"><a href="#cb237-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> k_smallest(nums, k):</span>
<span id="cb237-4"><a href="#cb237-4" aria-hidden="true" tabindex="-1"></a>    heap <span class="op">=</span> [<span class="op">-</span>x <span class="cf">for</span> x <span class="kw">in</span> nums[:k]]</span>
<span id="cb237-5"><a href="#cb237-5" aria-hidden="true" tabindex="-1"></a>    heapq.heapify(heap)</span>
<span id="cb237-6"><a href="#cb237-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> x <span class="kw">in</span> nums[k:]:</span>
<span id="cb237-7"><a href="#cb237-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">-</span>x <span class="op">&gt;</span> heap[<span class="dv">0</span>]:</span>
<span id="cb237-8"><a href="#cb237-8" aria-hidden="true" tabindex="-1"></a>            heapq.heappop(heap)</span>
<span id="cb237-9"><a href="#cb237-9" aria-hidden="true" tabindex="-1"></a>            heapq.heappush(heap, <span class="op">-</span>x)</span>
<span id="cb237-10"><a href="#cb237-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sorted</span>([<span class="op">-</span>h <span class="cf">for</span> h <span class="kw">in</span> heap])</span>
<span id="cb237-11"><a href="#cb237-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-12"><a href="#cb237-12" aria-hidden="true" tabindex="-1"></a>nums <span class="op">=</span> [<span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">4</span>]</span>
<span id="cb237-13"><a href="#cb237-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"3 smallest:"</span>, k_smallest(nums, <span class="dv">3</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>3 smallest: [1, 2, 4]</code></pre>
</section>
<section id="c-56" class="level4">
<h4 class="anchored" data-anchor-id="c-56">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb239"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb239-3"><a href="#cb239-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-4"><a href="#cb239-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> t <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span> <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span> <span class="op">*</span>b <span class="op">=</span> t<span class="op">;</span> <span class="op">}</span></span>
<span id="cb239-5"><a href="#cb239-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-6"><a href="#cb239-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> heapify<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb239-7"><a href="#cb239-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> largest <span class="op">=</span> i<span class="op">,</span> l <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>i<span class="op">+</span><span class="dv">1</span><span class="op">,</span> r <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>i<span class="op">+</span><span class="dv">2</span><span class="op">;</span></span>
<span id="cb239-8"><a href="#cb239-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>l <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[</span>l<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>largest<span class="op">])</span> largest <span class="op">=</span> l<span class="op">;</span></span>
<span id="cb239-9"><a href="#cb239-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>r <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[</span>r<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>largest<span class="op">])</span> largest <span class="op">=</span> r<span class="op">;</span></span>
<span id="cb239-10"><a href="#cb239-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>largest <span class="op">!=</span> i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb239-11"><a href="#cb239-11" aria-hidden="true" tabindex="-1"></a>        swap<span class="op">(&amp;</span>arr<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>arr<span class="op">[</span>largest<span class="op">]);</span></span>
<span id="cb239-12"><a href="#cb239-12" aria-hidden="true" tabindex="-1"></a>        heapify<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> largest<span class="op">);</span></span>
<span id="cb239-13"><a href="#cb239-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb239-14"><a href="#cb239-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb239-15"><a href="#cb239-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-16"><a href="#cb239-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> build_heap<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb239-17"><a href="#cb239-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> n<span class="op">/</span><span class="dv">2</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--)</span> heapify<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> i<span class="op">);</span></span>
<span id="cb239-18"><a href="#cb239-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb239-19"><a href="#cb239-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-20"><a href="#cb239-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> heap_select<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> k<span class="op">)</span> <span class="op">{</span></span>
<span id="cb239-21"><a href="#cb239-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> heap<span class="op">[</span>k<span class="op">];</span></span>
<span id="cb239-22"><a href="#cb239-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> k<span class="op">;</span> i<span class="op">++)</span> heap<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb239-23"><a href="#cb239-23" aria-hidden="true" tabindex="-1"></a>    build_heap<span class="op">(</span>heap<span class="op">,</span> k<span class="op">);</span></span>
<span id="cb239-24"><a href="#cb239-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> k<span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb239-25"><a href="#cb239-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> heap<span class="op">[</span><span class="dv">0</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb239-26"><a href="#cb239-26" aria-hidden="true" tabindex="-1"></a>            heap<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb239-27"><a href="#cb239-27" aria-hidden="true" tabindex="-1"></a>            heapify<span class="op">(</span>heap<span class="op">,</span> k<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb239-28"><a href="#cb239-28" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb239-29"><a href="#cb239-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb239-30"><a href="#cb239-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> smallest elements:</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> k<span class="op">);</span></span>
<span id="cb239-31"><a href="#cb239-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> k<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> heap<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb239-32"><a href="#cb239-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb239-33"><a href="#cb239-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-34"><a href="#cb239-34" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb239-35"><a href="#cb239-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">7</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">4</span><span class="op">};</span></span>
<span id="cb239-36"><a href="#cb239-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="dv">6</span><span class="op">;</span></span>
<span id="cb239-37"><a href="#cb239-37" aria-hidden="true" tabindex="-1"></a>    heap_select<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb239-38"><a href="#cb239-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>3 smallest elements:
1 2 4</code></pre>
</section>
</section>
<section id="why-it-matters-76" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-76">Why It Matters</h3>
<ul>
<li>Avoids full sorting (O(n log n))</li>
<li>Great for streaming data, sliding windows, top-k problems</li>
<li>Scales well for large <code>n</code> and small <code>k</code></li>
<li>Used in leaderboards, analytics, data pipelines</li>
</ul>
<p>If you only need <em>some</em> order, don’t sort it all.</p>
</section>
<section id="a-gentle-proof-why-it-works-76" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-76">A Gentle Proof (Why It Works)</h3>
<ul>
<li>Building heap: O(k)</li>
<li>For each new element: compare + heapify = O(log k)</li>
<li>Total: O(k + (n-k) log k) ≈ O(n log k)</li>
</ul>
<p>For small <code>k</code>, this is much faster than sorting.</p>
</section>
<section id="try-it-yourself-76" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-76">Try It Yourself</h3>
<ol type="1">
<li>Find 3 largest elements using min-heap</li>
<li>Stream numbers from input, maintain smallest 5</li>
<li>Track top 10 scores dynamically</li>
<li>Compare runtime vs <code>sorted(nums)[:k]</code></li>
<li>Try <code>k = 1</code> (minimum), <code>k = n</code> (full sort)</li>
<li>Modify for objects with custom keys (e.g.&nbsp;score, id)</li>
<li>Handle duplicates, keep all or unique only</li>
<li>Experiment with random arrays of size 1e6</li>
<li>Visualize heap evolution per step</li>
<li>Combine with binary search to tune thresholds</li>
</ol>
</section>
<section id="test-cases-76" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-76">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>k</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[7,2,9,1,5,4]</td>
<td>3</td>
<td>[1,2,4]</td>
</tr>
<tr class="even">
<td>[10,8,6,4,2]</td>
<td>2</td>
<td>[2,4]</td>
</tr>
<tr class="odd">
<td>[1,1,1,1]</td>
<td>2</td>
<td>[1,1]</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-76" class="level3">
<h3 class="anchored" data-anchor-id="complexity-76">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Build Heap</td>
<td>O(k)</td>
</tr>
<tr class="even">
<td>Iterate Array</td>
<td>O((n-k) log k)</td>
</tr>
<tr class="odd">
<td>Total Time</td>
<td>O(n log k)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(k)</td>
</tr>
</tbody>
</table>
<p>Heap Select is your practical shortcut, sort only what you need, ignore the rest.</p>
</section>
<section id="partial-quicksort" class="level3">
<h3 class="anchored" data-anchor-id="partial-quicksort">178 Partial QuickSort</h3>
<p>Partial QuickSort is a twist on classic QuickSort, it stops sorting once it has placed the first k elements (or top k) in their correct positions. It’s perfect when you need top-k smallest/largest elements but don’t need the rest sorted.</p>
<p>Think of it as QuickSort with early stopping, a hybrid between QuickSort and Quickselect.</p>
</section>
<section id="what-problem-are-we-solving-77" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-77">What Problem Are We Solving?</h3>
<p>Sometimes you need only part of the sorted order:</p>
<ul>
<li>“Get top 10 scores”</li>
<li>“Find smallest k elements”</li>
<li>“Sort first half”</li>
</ul>
<p>Fully sorting wastes work. Partial QuickSort skips unnecessary partitions.</p>
<section id="example-76" class="level4">
<h4 class="anchored" data-anchor-id="example-76">Example</h4>
<p>Array: <code>[9, 4, 6, 2, 8, 1]</code>, k = 3</p>
<p>We want smallest 3 elements. QuickSort picks a pivot, partitions array:</p>
<pre><code>Pivot = 6
→ [4, 2, 1] | 6 | [9, 8]</code></pre>
<p>Now we know all elements left of pivot (4, 2, 1) are smaller. Since <code>left_size == k</code>, we can stop, <code>[1,2,4]</code> are our smallest 3.</p>
</section>
</section>
<section id="how-does-it-work-plain-language-77" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-77">How Does It Work (Plain Language)?</h3>
<p>Just like QuickSort, but after partition:</p>
<ul>
<li>If pivot index == k → done.</li>
<li>If pivot index &gt; k → recurse only left.</li>
<li>If pivot index &lt; k → recurse right partially.</li>
</ul>
<p>You never sort beyond what’s needed.</p>
<section id="step-by-step-process-74" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-process-74">Step-by-Step Process</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Choose pivot</td>
</tr>
<tr class="even">
<td>2</td>
<td>Partition array</td>
</tr>
<tr class="odd">
<td>3</td>
<td>If pivot index == k → done</td>
</tr>
<tr class="even">
<td>4</td>
<td>If pivot index &gt; k → recurse left</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Else recurse right on remaining portion</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-76" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-76">Tiny Code (Easy Versions)</h3>
<section id="python-62" class="level4">
<h4 class="anchored" data-anchor-id="python-62">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb242"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> partial_quicksort(arr, low, high, k):</span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> low <span class="op">&lt;</span> high:</span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a>        p <span class="op">=</span> partition(arr, low, high)</span>
<span id="cb242-4"><a href="#cb242-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> p <span class="op">&gt;</span> k:</span>
<span id="cb242-5"><a href="#cb242-5" aria-hidden="true" tabindex="-1"></a>            partial_quicksort(arr, low, p <span class="op">-</span> <span class="dv">1</span>, k)</span>
<span id="cb242-6"><a href="#cb242-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> p <span class="op">&lt;</span> k:</span>
<span id="cb242-7"><a href="#cb242-7" aria-hidden="true" tabindex="-1"></a>            partial_quicksort(arr, low, p <span class="op">-</span> <span class="dv">1</span>, k)</span>
<span id="cb242-8"><a href="#cb242-8" aria-hidden="true" tabindex="-1"></a>            partial_quicksort(arr, p <span class="op">+</span> <span class="dv">1</span>, high, k)</span>
<span id="cb242-9"><a href="#cb242-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-10"><a href="#cb242-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> partition(arr, low, high):</span>
<span id="cb242-11"><a href="#cb242-11" aria-hidden="true" tabindex="-1"></a>    pivot <span class="op">=</span> arr[high]</span>
<span id="cb242-12"><a href="#cb242-12" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> low <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb242-13"><a href="#cb242-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(low, high):</span>
<span id="cb242-14"><a href="#cb242-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[j] <span class="op">&lt;</span> pivot:</span>
<span id="cb242-15"><a href="#cb242-15" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb242-16"><a href="#cb242-16" aria-hidden="true" tabindex="-1"></a>            arr[i], arr[j] <span class="op">=</span> arr[j], arr[i]</span>
<span id="cb242-17"><a href="#cb242-17" aria-hidden="true" tabindex="-1"></a>    arr[i <span class="op">+</span> <span class="dv">1</span>], arr[high] <span class="op">=</span> arr[high], arr[i <span class="op">+</span> <span class="dv">1</span>]</span>
<span id="cb242-18"><a href="#cb242-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb242-19"><a href="#cb242-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-20"><a href="#cb242-20" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">9</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">2</span>, <span class="dv">8</span>, <span class="dv">1</span>]</span>
<span id="cb242-21"><a href="#cb242-21" aria-hidden="true" tabindex="-1"></a>k <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb242-22"><a href="#cb242-22" aria-hidden="true" tabindex="-1"></a>partial_quicksort(arr, <span class="dv">0</span>, <span class="bu">len</span>(arr) <span class="op">-</span> <span class="dv">1</span>, k <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb242-23"><a href="#cb242-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Smallest 3 elements:"</span>, <span class="bu">sorted</span>(arr[:k]))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Smallest 3 elements: [1, 2, 4]</code></pre>
</section>
<section id="c-57" class="level4">
<h4 class="anchored" data-anchor-id="c-57">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb244"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> t <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span> <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span> <span class="op">*</span>b <span class="op">=</span> t<span class="op">;</span> <span class="op">}</span></span>
<span id="cb244-4"><a href="#cb244-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-5"><a href="#cb244-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> partition<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb244-6"><a href="#cb244-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pivot <span class="op">=</span> arr<span class="op">[</span>high<span class="op">];</span></span>
<span id="cb244-7"><a href="#cb244-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> low <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb244-8"><a href="#cb244-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> low<span class="op">;</span> j <span class="op">&lt;</span> high<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb244-9"><a href="#cb244-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&lt;</span> pivot<span class="op">)</span> <span class="op">{</span></span>
<span id="cb244-10"><a href="#cb244-10" aria-hidden="true" tabindex="-1"></a>            i<span class="op">++;</span></span>
<span id="cb244-11"><a href="#cb244-11" aria-hidden="true" tabindex="-1"></a>            swap<span class="op">(&amp;</span>arr<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>arr<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb244-12"><a href="#cb244-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb244-13"><a href="#cb244-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb244-14"><a href="#cb244-14" aria-hidden="true" tabindex="-1"></a>    swap<span class="op">(&amp;</span>arr<span class="op">[</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">],</span> <span class="op">&amp;</span>arr<span class="op">[</span>high<span class="op">]);</span></span>
<span id="cb244-15"><a href="#cb244-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb244-16"><a href="#cb244-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb244-17"><a href="#cb244-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-18"><a href="#cb244-18" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> partial_quicksort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">,</span> <span class="dt">int</span> k<span class="op">)</span> <span class="op">{</span></span>
<span id="cb244-19"><a href="#cb244-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>low <span class="op">&lt;</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb244-20"><a href="#cb244-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> p <span class="op">=</span> partition<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> high<span class="op">);</span></span>
<span id="cb244-21"><a href="#cb244-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>p <span class="op">&gt;</span> k<span class="op">)</span></span>
<span id="cb244-22"><a href="#cb244-22" aria-hidden="true" tabindex="-1"></a>            partial_quicksort<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> p <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> k<span class="op">);</span></span>
<span id="cb244-23"><a href="#cb244-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>p <span class="op">&lt;</span> k<span class="op">)</span></span>
<span id="cb244-24"><a href="#cb244-24" aria-hidden="true" tabindex="-1"></a>            partial_quicksort<span class="op">(</span>arr<span class="op">,</span> p <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> high<span class="op">,</span> k<span class="op">);</span></span>
<span id="cb244-25"><a href="#cb244-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb244-26"><a href="#cb244-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb244-27"><a href="#cb244-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-28"><a href="#cb244-28" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb244-29"><a href="#cb244-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">9</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">1</span><span class="op">};</span></span>
<span id="cb244-30"><a href="#cb244-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="dv">6</span><span class="op">,</span> k <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb244-31"><a href="#cb244-31" aria-hidden="true" tabindex="-1"></a>    partial_quicksort<span class="op">(</span>arr<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> k <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb244-32"><a href="#cb244-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Smallest </span><span class="sc">%d</span><span class="st"> elements:</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> k<span class="op">);</span></span>
<span id="cb244-33"><a href="#cb244-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> k<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb244-34"><a href="#cb244-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Smallest 3 elements:
1 2 4</code></pre>
</section>
</section>
<section id="why-it-matters-77" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-77">Why It Matters</h3>
<ul>
<li>Efficient top-k selection when order matters</li>
<li>Avoids sorting unnecessary portions</li>
<li>Combines strengths of Quickselect and QuickSort</li>
<li>Works in-place (no extra memory)</li>
</ul>
<p>Great for partial sorting like “leaderboards”, “top results”, or “bounded priority lists”.</p>
</section>
<section id="a-gentle-proof-why-it-works-77" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-77">A Gentle Proof (Why It Works)</h3>
<p>QuickSort partitions data into two halves; Only parts that could contain the first <code>k</code> elements are explored. Average time complexity becomes O(n) for selection, O(n log k) for partial order.</p>
</section>
<section id="try-it-yourself-77" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-77">Try It Yourself</h3>
<ol type="1">
<li>Find smallest 5 numbers in <code>[10,9,8,7,6,5,4,3,2,1]</code></li>
<li>Modify to find largest k instead</li>
<li>Compare runtime vs full <code>sort()</code></li>
<li>Visualize recursion path</li>
<li>Track how many elements actually get sorted</li>
<li>Try random pivot vs median pivot</li>
<li>Test k = 1 (min) and k = n (full sort)</li>
<li>Measure comparisons count</li>
<li>Try with duplicates</li>
<li>Combine with heap for hybrid version</li>
</ol>
</section>
<section id="test-cases-77" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-77">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>k</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[9,4,6,2,8,1]</td>
<td>3</td>
<td>[1,2,4]</td>
</tr>
<tr class="even">
<td>[5,4,3,2,1]</td>
<td>2</td>
<td>[1,2]</td>
</tr>
<tr class="odd">
<td>[7,7,7,7]</td>
<td>2</td>
<td>[7,7]</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-77" class="level3">
<h3 class="anchored" data-anchor-id="complexity-77">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Average Time</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Worst Time</td>
<td>O(n²)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Partial QuickSort, fast, focused, and frugal, because sometimes, you only need <em>a slice</em> of order, not the whole loaf.</p>
</section>
<section id="bfprt-algorithm-median-of-medians-selection" class="level3">
<h3 class="anchored" data-anchor-id="bfprt-algorithm-median-of-medians-selection">179 BFPRT Algorithm (Median of Medians Selection)</h3>
<p>The BFPRT algorithm (named after Blum, Floyd, Pratt, Rivest, and Tarjan) is a deterministic linear-time selection algorithm. It finds the k-th smallest element in an unsorted array, guaranteeing O(n) worst-case time, a mathematically elegant and exact alternative to randomized quickselect.</p>
</section>
<section id="what-problem-are-we-solving-78" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-78">What Problem Are We Solving?</h3>
<p>You want to find the k-th smallest element, like the median, but you don’t want to gamble on random pivots (which could hit worst-case O(n²)). BFPRT chooses pivots so well that it always guarantees O(n).</p>
<p>This makes it ideal for systems where deterministic behavior matters, like embedded systems, compilers, and real-time applications.</p>
<section id="example-77" class="level4">
<h4 class="anchored" data-anchor-id="example-77">Example</h4>
<p>Find the median (k=5) of <code>[9, 4, 7, 3, 6, 1, 8, 2, 5, 10]</code></p>
<ol type="1">
<li>Divide into groups of 5: <code>[9,4,7,3,6]</code>, <code>[1,8,2,5,10]</code></li>
<li>Find median of each group: → <code>[6, 5]</code></li>
<li>Find median of medians: → median of <code>[6,5]</code> is 5.5 ≈ 5</li>
<li>Partition around pivot 5 → <code>[4,3,1,2,5] | 5 | [9,7,8,6,10]</code></li>
<li>Position of 5 = 5 → done.</li>
</ol>
<p>✅ The 5th smallest = 5</p>
</section>
</section>
<section id="how-does-it-work-plain-language-78" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-78">How Does It Work (Plain Language)?</h3>
<p>It’s Quickselect with a smarter pivot:</p>
<ul>
<li>Divide the array into groups of 5.</li>
<li>Find median of each group.</li>
<li>Recursively find median of these medians.</li>
<li>Use that as pivot → partition → recurse on the correct side.</li>
</ul>
<p>This ensures the pivot is <em>always good enough</em> to split the array reasonably, keeping recursion balanced.</p>
<section id="step-by-step-summary" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-summary">Step-by-Step Summary</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Split array into groups of 5</td>
</tr>
<tr class="even">
<td>2</td>
<td>Sort each group and take its median</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Recursively find median of medians</td>
</tr>
<tr class="even">
<td>4</td>
<td>Partition around pivot</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Recurse on side containing k-th smallest</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-77" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-77">Tiny Code (Easy Versions)</h3>
<section id="python-63" class="level4">
<h4 class="anchored" data-anchor-id="python-63">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb246"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> partition(arr, pivot):</span>
<span id="cb246-2"><a href="#cb246-2" aria-hidden="true" tabindex="-1"></a>    less, equal, greater <span class="op">=</span> [], [], []</span>
<span id="cb246-3"><a href="#cb246-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> x <span class="kw">in</span> arr:</span>
<span id="cb246-4"><a href="#cb246-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> x <span class="op">&lt;</span> pivot: less.append(x)</span>
<span id="cb246-5"><a href="#cb246-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> x <span class="op">&gt;</span> pivot: greater.append(x)</span>
<span id="cb246-6"><a href="#cb246-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>: equal.append(x)</span>
<span id="cb246-7"><a href="#cb246-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> less, equal, greater</span>
<span id="cb246-8"><a href="#cb246-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb246-9"><a href="#cb246-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> select(arr, k):</span>
<span id="cb246-10"><a href="#cb246-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(arr) <span class="op">&lt;=</span> <span class="dv">5</span>:</span>
<span id="cb246-11"><a href="#cb246-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">sorted</span>(arr)[k]</span>
<span id="cb246-12"><a href="#cb246-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb246-13"><a href="#cb246-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 1: Divide into groups of 5</span></span>
<span id="cb246-14"><a href="#cb246-14" aria-hidden="true" tabindex="-1"></a>    groups <span class="op">=</span> [arr[i:i<span class="op">+</span><span class="dv">5</span>] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(arr), <span class="dv">5</span>)]</span>
<span id="cb246-15"><a href="#cb246-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb246-16"><a href="#cb246-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 2: Find medians</span></span>
<span id="cb246-17"><a href="#cb246-17" aria-hidden="true" tabindex="-1"></a>    medians <span class="op">=</span> [<span class="bu">sorted</span>(g)[<span class="bu">len</span>(g)<span class="op">//</span><span class="dv">2</span>] <span class="cf">for</span> g <span class="kw">in</span> groups]</span>
<span id="cb246-18"><a href="#cb246-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb246-19"><a href="#cb246-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 3: Median of medians as pivot</span></span>
<span id="cb246-20"><a href="#cb246-20" aria-hidden="true" tabindex="-1"></a>    pivot <span class="op">=</span> select(medians, <span class="bu">len</span>(medians)<span class="op">//</span><span class="dv">2</span>)</span>
<span id="cb246-21"><a href="#cb246-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb246-22"><a href="#cb246-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 4: Partition</span></span>
<span id="cb246-23"><a href="#cb246-23" aria-hidden="true" tabindex="-1"></a>    less, equal, greater <span class="op">=</span> partition(arr, pivot)</span>
<span id="cb246-24"><a href="#cb246-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb246-25"><a href="#cb246-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Step 5: Recurse</span></span>
<span id="cb246-26"><a href="#cb246-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> k <span class="op">&lt;</span> <span class="bu">len</span>(less):</span>
<span id="cb246-27"><a href="#cb246-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> select(less, k)</span>
<span id="cb246-28"><a href="#cb246-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> k <span class="op">&lt;</span> <span class="bu">len</span>(less) <span class="op">+</span> <span class="bu">len</span>(equal):</span>
<span id="cb246-29"><a href="#cb246-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> pivot</span>
<span id="cb246-30"><a href="#cb246-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb246-31"><a href="#cb246-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> select(greater, k <span class="op">-</span> <span class="bu">len</span>(less) <span class="op">-</span> <span class="bu">len</span>(equal))</span>
<span id="cb246-32"><a href="#cb246-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb246-33"><a href="#cb246-33" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">9</span>,<span class="dv">4</span>,<span class="dv">7</span>,<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">1</span>,<span class="dv">8</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">10</span>]</span>
<span id="cb246-34"><a href="#cb246-34" aria-hidden="true" tabindex="-1"></a>k <span class="op">=</span> <span class="dv">4</span>  <span class="co"># 0-based index → 5th smallest</span></span>
<span id="cb246-35"><a href="#cb246-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"5th smallest:"</span>, select(arr, k))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>5th smallest: 5</code></pre>
</section>
<section id="c-conceptual-skeleton-1" class="level4">
<h4 class="anchored" data-anchor-id="c-conceptual-skeleton-1">C (Conceptual Skeleton)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb248"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb248-2"><a href="#cb248-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb248-3"><a href="#cb248-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-4"><a href="#cb248-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cmp<span class="op">(</span><span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> <span class="op">(*(</span><span class="dt">int</span><span class="op">*)</span>a <span class="op">-</span> <span class="op">*(</span><span class="dt">int</span><span class="op">*)</span>b<span class="op">);</span> <span class="op">}</span></span>
<span id="cb248-5"><a href="#cb248-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-6"><a href="#cb248-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> median_of_medians<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">);</span></span>
<span id="cb248-7"><a href="#cb248-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-8"><a href="#cb248-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> select_kth<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> k<span class="op">)</span> <span class="op">{</span></span>
<span id="cb248-9"><a href="#cb248-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">5</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb248-10"><a href="#cb248-10" aria-hidden="true" tabindex="-1"></a>        qsort<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">),</span> cmp<span class="op">);</span></span>
<span id="cb248-11"><a href="#cb248-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> arr<span class="op">[</span>k<span class="op">];</span></span>
<span id="cb248-12"><a href="#cb248-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb248-13"><a href="#cb248-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-14"><a href="#cb248-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> groups <span class="op">=</span> <span class="op">(</span>n <span class="op">+</span> <span class="dv">4</span><span class="op">)</span> <span class="op">/</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb248-15"><a href="#cb248-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>medians <span class="op">=</span> malloc<span class="op">(</span>groups <span class="op">*</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb248-16"><a href="#cb248-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> groups<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb248-17"><a href="#cb248-17" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> start <span class="op">=</span> i <span class="op">*</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb248-18"><a href="#cb248-18" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> end <span class="op">=</span> <span class="op">(</span>start <span class="op">+</span> <span class="dv">5</span> <span class="op">&lt;</span> n<span class="op">)</span> <span class="op">?</span> start <span class="op">+</span> <span class="dv">5</span> <span class="op">:</span> n<span class="op">;</span></span>
<span id="cb248-19"><a href="#cb248-19" aria-hidden="true" tabindex="-1"></a>        qsort<span class="op">(</span>arr <span class="op">+</span> start<span class="op">,</span> end <span class="op">-</span> start<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">),</span> cmp<span class="op">);</span></span>
<span id="cb248-20"><a href="#cb248-20" aria-hidden="true" tabindex="-1"></a>        medians<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>start <span class="op">+</span> <span class="op">(</span>end <span class="op">-</span> start<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">];</span></span>
<span id="cb248-21"><a href="#cb248-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb248-22"><a href="#cb248-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-23"><a href="#cb248-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pivot <span class="op">=</span> median_of_medians<span class="op">(</span>medians<span class="op">,</span> groups<span class="op">);</span></span>
<span id="cb248-24"><a href="#cb248-24" aria-hidden="true" tabindex="-1"></a>    free<span class="op">(</span>medians<span class="op">);</span></span>
<span id="cb248-25"><a href="#cb248-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-26"><a href="#cb248-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>left <span class="op">=</span> malloc<span class="op">(</span>n <span class="op">*</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb248-27"><a href="#cb248-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>right <span class="op">=</span> malloc<span class="op">(</span>n <span class="op">*</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb248-28"><a href="#cb248-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> l <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> r <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> equal <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb248-29"><a href="#cb248-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb248-30"><a href="#cb248-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> pivot<span class="op">)</span> left<span class="op">[</span>l<span class="op">++]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb248-31"><a href="#cb248-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> pivot<span class="op">)</span> right<span class="op">[</span>r<span class="op">++]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb248-32"><a href="#cb248-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> equal<span class="op">++;</span></span>
<span id="cb248-33"><a href="#cb248-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb248-34"><a href="#cb248-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-35"><a href="#cb248-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>k <span class="op">&lt;</span> l<span class="op">)</span> <span class="cf">return</span> select_kth<span class="op">(</span>left<span class="op">,</span> l<span class="op">,</span> k<span class="op">);</span></span>
<span id="cb248-36"><a href="#cb248-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>k <span class="op">&lt;</span> l <span class="op">+</span> equal<span class="op">)</span> <span class="cf">return</span> pivot<span class="op">;</span></span>
<span id="cb248-37"><a href="#cb248-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">return</span> select_kth<span class="op">(</span>right<span class="op">,</span> r<span class="op">,</span> k <span class="op">-</span> l <span class="op">-</span> equal<span class="op">);</span></span>
<span id="cb248-38"><a href="#cb248-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb248-39"><a href="#cb248-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-40"><a href="#cb248-40" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> median_of_medians<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb248-41"><a href="#cb248-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> select_kth<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> n <span class="op">/</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb248-42"><a href="#cb248-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-78" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-78">Why It Matters</h3>
<ul>
<li>Deterministic O(n), no randomness or bad pivots</li>
<li>Used in theoretical CS, worst-case analysis, exact solvers</li>
<li>Foundation for deterministic selection, median-finding, linear-time sorting bounds</li>
<li>Core to intro algorithms theory (CLRS Chapter 9)</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-78" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-78">A Gentle Proof (Why It Works)</h3>
<ul>
<li>Each group of 5 → median is ≥ 3 elements in group (2 below, 2 above)</li>
<li>At least half of medians ≥ pivot → pivot ≥ 30% of elements</li>
<li>At least half ≤ pivot → pivot ≤ 70% of elements</li>
<li>So pivot always splits array 30–70, guaranteeing T(n) = T(n/5) + T(7n/10) + O(n) = O(n)</li>
</ul>
<p>No chance of quadratic blowup.</p>
</section>
<section id="try-it-yourself-78" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-78">Try It Yourself</h3>
<ol type="1">
<li>Find median of <code>[5,3,2,8,1,9,7,6,4]</code></li>
<li>Trace pivot selection tree</li>
<li>Compare with random quickselect pivots</li>
<li>Measure time for n = 1e6</li>
<li>Try with duplicates</li>
<li>Try k = 0, k = n-1 (min/max)</li>
<li>Modify group size (e.g.&nbsp;3 or 7), compare performance</li>
<li>Verify recursion depth</li>
<li>Use for percentile queries</li>
<li>Implement streaming median with repeated selection</li>
</ol>
</section>
<section id="test-cases-78" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-78">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>k</th>
<th>Output</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[9,4,7,3,6,1,8,2,5,10]</td>
<td>4</td>
<td>5</td>
<td>5th smallest</td>
</tr>
<tr class="even">
<td>[1,2,3,4,5]</td>
<td>2</td>
<td>3</td>
<td>middle</td>
</tr>
<tr class="odd">
<td>[10,9,8,7,6]</td>
<td>0</td>
<td>6</td>
<td>smallest</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-78" class="level3">
<h3 class="anchored" data-anchor-id="complexity-78">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Aspect</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(n) deterministic</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n) (can be optimized to O(1))</td>
</tr>
<tr class="odd">
<td>Stable</td>
<td>No</td>
</tr>
<tr class="even">
<td>Pivot Quality</td>
<td>Guaranteed 30–70 split</td>
</tr>
</tbody>
</table>
<p>The BFPRT Algorithm, proof that with clever pivots and math, even chaos can be conquered in linear time.</p>
</section>
<section id="kth-largest-stream" class="level3">
<h3 class="anchored" data-anchor-id="kth-largest-stream">180 Kth Largest Stream</h3>
<p>The Kth Largest Stream problem focuses on maintaining the kth largest element in a sequence that grows over time, a stream. Instead of sorting everything every time, we can use a min-heap of size k to always keep track of the top <code>k</code> elements efficiently.</p>
<p>This is the foundation for real-time leaderboards, streaming analytics, and online ranking systems.</p>
</section>
<section id="what-problem-are-we-solving-79" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-79">What Problem Are We Solving?</h3>
<p>Given a stream of numbers (arriving one by one), we want to:</p>
<ul>
<li>Always know the kth largest element so far.</li>
<li>Update quickly when a new number comes in.</li>
</ul>
<p>You don’t know the final list, you process as it flows.</p>
<section id="example-78" class="level4">
<h4 class="anchored" data-anchor-id="example-78">Example</h4>
<p>Say <code>k = 3</code>, stream = <code>[4, 5, 8, 2]</code></p>
<ol type="1">
<li>Start empty heap</li>
<li>Add 4 → heap = [4] → kth largest = 4</li>
<li>Add 5 → heap = [4, 5] → kth largest = 4</li>
<li>Add 8 → heap = [4, 5, 8] → kth largest = 4</li>
<li>Add 2 → ignore (2 &lt; 4) → kth largest = 4</li>
</ol>
<p>Add new number <code>10</code>:</p>
<ul>
<li>10 &gt; 4 → pop 4, push 10 → heap = [5,8,10]</li>
<li>kth largest = 5</li>
</ul>
<p>✅ Each new element processed in O(log k)</p>
</section>
</section>
<section id="how-does-it-work-plain-language-79" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-79">How Does It Work (Plain Language)?</h3>
<p>Keep a min-heap of size <code>k</code>:</p>
<ul>
<li><p>It holds the k largest elements seen so far.</p></li>
<li><p>The smallest among them (heap root) is the kth largest.</p></li>
<li><p>When a new value arrives:</p>
<ul>
<li>If heap size &lt; k → push it</li>
<li>Else if value &gt; heap[0] → pop smallest, push new</li>
</ul></li>
</ul>
<section id="step-by-step-summary-1" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-summary-1">Step-by-Step Summary</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Initialize empty min-heap</td>
</tr>
<tr class="even">
<td>2</td>
<td>For each new element <code>x</code>:</td>
</tr>
<tr class="odd">
<td></td>
<td>If heap size &lt; k → push <code>x</code></td>
</tr>
<tr class="even">
<td></td>
<td>Else if <code>x</code> &gt; heap[0] → pop, push <code>x</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>kth largest = heap[0]</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-78" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-78">Tiny Code (Easy Versions)</h3>
<section id="python-64" class="level4">
<h4 class="anchored" data-anchor-id="python-64">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb249"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> heapq</span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-3"><a href="#cb249-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> KthLargest:</span>
<span id="cb249-4"><a href="#cb249-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, k, nums):</span>
<span id="cb249-5"><a href="#cb249-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.k <span class="op">=</span> k</span>
<span id="cb249-6"><a href="#cb249-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.heap <span class="op">=</span> nums</span>
<span id="cb249-7"><a href="#cb249-7" aria-hidden="true" tabindex="-1"></a>        heapq.heapify(<span class="va">self</span>.heap)</span>
<span id="cb249-8"><a href="#cb249-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="bu">len</span>(<span class="va">self</span>.heap) <span class="op">&gt;</span> k:</span>
<span id="cb249-9"><a href="#cb249-9" aria-hidden="true" tabindex="-1"></a>            heapq.heappop(<span class="va">self</span>.heap)</span>
<span id="cb249-10"><a href="#cb249-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-11"><a href="#cb249-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> add(<span class="va">self</span>, val):</span>
<span id="cb249-12"><a href="#cb249-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(<span class="va">self</span>.heap) <span class="op">&lt;</span> <span class="va">self</span>.k:</span>
<span id="cb249-13"><a href="#cb249-13" aria-hidden="true" tabindex="-1"></a>            heapq.heappush(<span class="va">self</span>.heap, val)</span>
<span id="cb249-14"><a href="#cb249-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> val <span class="op">&gt;</span> <span class="va">self</span>.heap[<span class="dv">0</span>]:</span>
<span id="cb249-15"><a href="#cb249-15" aria-hidden="true" tabindex="-1"></a>            heapq.heapreplace(<span class="va">self</span>.heap, val)</span>
<span id="cb249-16"><a href="#cb249-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.heap[<span class="dv">0</span>]</span>
<span id="cb249-17"><a href="#cb249-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-18"><a href="#cb249-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Example</span></span>
<span id="cb249-19"><a href="#cb249-19" aria-hidden="true" tabindex="-1"></a>stream <span class="op">=</span> KthLargest(<span class="dv">3</span>, [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">2</span>])</span>
<span id="cb249-20"><a href="#cb249-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stream.add(<span class="dv">3</span>))  <span class="co"># 4</span></span>
<span id="cb249-21"><a href="#cb249-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stream.add(<span class="dv">5</span>))  <span class="co"># 5</span></span>
<span id="cb249-22"><a href="#cb249-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stream.add(<span class="dv">10</span>)) <span class="co"># 5</span></span>
<span id="cb249-23"><a href="#cb249-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stream.add(<span class="dv">9</span>))  <span class="co"># 8</span></span>
<span id="cb249-24"><a href="#cb249-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stream.add(<span class="dv">4</span>))  <span class="co"># 8</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>4
5
5
8
8</code></pre>
</section>
<section id="c-58" class="level4">
<h4 class="anchored" data-anchor-id="c-58">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb251"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb251-3"><a href="#cb251-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-4"><a href="#cb251-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> t <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span> <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span> <span class="op">*</span>b <span class="op">=</span> t<span class="op">;</span> <span class="op">}</span></span>
<span id="cb251-5"><a href="#cb251-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-6"><a href="#cb251-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> heapify<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-7"><a href="#cb251-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> smallest <span class="op">=</span> i<span class="op">,</span> l <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>i<span class="op">+</span><span class="dv">1</span><span class="op">,</span> r <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>i<span class="op">+</span><span class="dv">2</span><span class="op">;</span></span>
<span id="cb251-8"><a href="#cb251-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>l <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[</span>l<span class="op">]</span> <span class="op">&lt;</span> arr<span class="op">[</span>smallest<span class="op">])</span> smallest <span class="op">=</span> l<span class="op">;</span></span>
<span id="cb251-9"><a href="#cb251-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>r <span class="op">&lt;</span> n <span class="op">&amp;&amp;</span> arr<span class="op">[</span>r<span class="op">]</span> <span class="op">&lt;</span> arr<span class="op">[</span>smallest<span class="op">])</span> smallest <span class="op">=</span> r<span class="op">;</span></span>
<span id="cb251-10"><a href="#cb251-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>smallest <span class="op">!=</span> i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-11"><a href="#cb251-11" aria-hidden="true" tabindex="-1"></a>        swap<span class="op">(&amp;</span>arr<span class="op">[</span>i<span class="op">],</span> <span class="op">&amp;</span>arr<span class="op">[</span>smallest<span class="op">]);</span></span>
<span id="cb251-12"><a href="#cb251-12" aria-hidden="true" tabindex="-1"></a>        heapify<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> smallest<span class="op">);</span></span>
<span id="cb251-13"><a href="#cb251-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb251-14"><a href="#cb251-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-15"><a href="#cb251-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-16"><a href="#cb251-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> push_heap<span class="op">(</span><span class="dt">int</span> heap<span class="op">[],</span> <span class="dt">int</span> <span class="op">*</span>n<span class="op">,</span> <span class="dt">int</span> val<span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-17"><a href="#cb251-17" aria-hidden="true" tabindex="-1"></a>    heap<span class="op">[(*</span>n<span class="op">)++]</span> <span class="op">=</span> val<span class="op">;</span></span>
<span id="cb251-18"><a href="#cb251-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="op">(*</span>n<span class="op">)/</span><span class="dv">2</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--)</span> heapify<span class="op">(</span>heap<span class="op">,</span> <span class="op">*</span>n<span class="op">,</span> i<span class="op">);</span></span>
<span id="cb251-19"><a href="#cb251-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-20"><a href="#cb251-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-21"><a href="#cb251-21" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> pop_min<span class="op">(</span><span class="dt">int</span> heap<span class="op">[],</span> <span class="dt">int</span> <span class="op">*</span>n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-22"><a href="#cb251-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> root <span class="op">=</span> heap<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb251-23"><a href="#cb251-23" aria-hidden="true" tabindex="-1"></a>    heap<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> heap<span class="op">[--(*</span>n<span class="op">)];</span></span>
<span id="cb251-24"><a href="#cb251-24" aria-hidden="true" tabindex="-1"></a>    heapify<span class="op">(</span>heap<span class="op">,</span> <span class="op">*</span>n<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb251-25"><a href="#cb251-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> root<span class="op">;</span></span>
<span id="cb251-26"><a href="#cb251-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-27"><a href="#cb251-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-28"><a href="#cb251-28" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> heap<span class="op">[],</span> <span class="dt">int</span> <span class="op">*</span>n<span class="op">,</span> <span class="dt">int</span> k<span class="op">,</span> <span class="dt">int</span> val<span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-29"><a href="#cb251-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(*</span>n <span class="op">&lt;</span> k<span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-30"><a href="#cb251-30" aria-hidden="true" tabindex="-1"></a>        push_heap<span class="op">(</span>heap<span class="op">,</span> n<span class="op">,</span> val<span class="op">);</span></span>
<span id="cb251-31"><a href="#cb251-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>val <span class="op">&gt;</span> heap<span class="op">[</span><span class="dv">0</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb251-32"><a href="#cb251-32" aria-hidden="true" tabindex="-1"></a>        heap<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> val<span class="op">;</span></span>
<span id="cb251-33"><a href="#cb251-33" aria-hidden="true" tabindex="-1"></a>        heapify<span class="op">(</span>heap<span class="op">,</span> <span class="op">*</span>n<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb251-34"><a href="#cb251-34" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb251-35"><a href="#cb251-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> heap<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb251-36"><a href="#cb251-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-37"><a href="#cb251-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-38"><a href="#cb251-38" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-39"><a href="#cb251-39" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> heap<span class="op">[</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">4</span><span class="op">,</span><span class="dv">5</span><span class="op">,</span><span class="dv">8</span><span class="op">,</span><span class="dv">2</span><span class="op">};</span></span>
<span id="cb251-40"><a href="#cb251-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="dv">4</span><span class="op">,</span> k <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb251-41"><a href="#cb251-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> n<span class="op">/</span><span class="dv">2</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--)</span> heapify<span class="op">(</span>heap<span class="op">,</span> n<span class="op">,</span> i<span class="op">);</span></span>
<span id="cb251-42"><a href="#cb251-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> k<span class="op">)</span> pop_min<span class="op">(</span>heap<span class="op">,</span> <span class="op">&amp;</span>n<span class="op">);</span></span>
<span id="cb251-43"><a href="#cb251-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-44"><a href="#cb251-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> add<span class="op">(</span>heap<span class="op">,</span> <span class="op">&amp;</span>n<span class="op">,</span> k<span class="op">,</span> <span class="dv">3</span><span class="op">));</span>  <span class="co">// 4</span></span>
<span id="cb251-45"><a href="#cb251-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> add<span class="op">(</span>heap<span class="op">,</span> <span class="op">&amp;</span>n<span class="op">,</span> k<span class="op">,</span> <span class="dv">5</span><span class="op">));</span>  <span class="co">// 5</span></span>
<span id="cb251-46"><a href="#cb251-46" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> add<span class="op">(</span>heap<span class="op">,</span> <span class="op">&amp;</span>n<span class="op">,</span> k<span class="op">,</span> <span class="dv">10</span><span class="op">));</span> <span class="co">// 5</span></span>
<span id="cb251-47"><a href="#cb251-47" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> add<span class="op">(</span>heap<span class="op">,</span> <span class="op">&amp;</span>n<span class="op">,</span> k<span class="op">,</span> <span class="dv">9</span><span class="op">));</span>  <span class="co">// 8</span></span>
<span id="cb251-48"><a href="#cb251-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> add<span class="op">(</span>heap<span class="op">,</span> <span class="op">&amp;</span>n<span class="op">,</span> k<span class="op">,</span> <span class="dv">4</span><span class="op">));</span>  <span class="co">// 8</span></span>
<span id="cb251-49"><a href="#cb251-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-79" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-79">Why It Matters</h3>
<ul>
<li><p>Real-time streaming top-k tracking</p></li>
<li><p>Constant-time query (O(1)), fast update (O(log k))</p></li>
<li><p>Core building block for:</p>
<ul>
<li>Leaderboards</li>
<li>Monitoring systems</li>
<li>Continuous analytics</li>
<li>Online medians &amp; percentiles</li>
</ul></li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-79" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-79">A Gentle Proof (Why It Works)</h3>
<p>Min-heap stores only top <code>k</code> values. Whenever new value &gt; heap[0], it must belong in top <code>k</code>. So invariant holds: heap = top-k largest elements seen so far. kth largest = heap[0].</p>
<p>Each update → O(log k). Total after n elements → O(n log k).</p>
</section>
<section id="try-it-yourself-79" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-79">Try It Yourself</h3>
<ol type="1">
<li>Initialize with <code>[4,5,8,2]</code>, k=3, stream = [3,5,10,9,4]</li>
<li>Try decreasing sequence</li>
<li>Try duplicates</li>
<li>Test <code>k = 1</code> (maximum tracker)</li>
<li>Add 1000 elements randomly, measure performance</li>
<li>Compare with full sort each time</li>
<li>Visualize heap evolution per step</li>
<li>Modify for k smallest</li>
<li>Build real-time median tracker using two heaps</li>
<li>Extend to stream of objects (track by score field)</li>
</ol>
</section>
<section id="test-cases-79" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-79">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Initial</th>
<th>k</th>
<th>Stream</th>
<th>Output Sequence</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[4,5,8,2]</td>
<td>3</td>
<td>[3,5,10,9,4]</td>
<td>[4,5,5,8,8]</td>
</tr>
<tr class="even">
<td>[10,7,11,5]</td>
<td>2</td>
<td>[8,12,4]</td>
<td>[10,11,11]</td>
</tr>
<tr class="odd">
<td>[1]</td>
<td>1</td>
<td>[2,3]</td>
<td>[2,3]</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-79" class="level3">
<h3 class="anchored" data-anchor-id="complexity-79">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Add</td>
<td>O(log k)</td>
</tr>
<tr class="even">
<td>Query kth Largest</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(k)</td>
</tr>
</tbody>
</table>
<p>Kth Largest Stream, stay calm in the flow; the heap remembers what matters most.</p>
</section>
</section>
<section id="section-19.-range-search-and-nearest-neighbor" class="level1">
<h1>Section 19. Range Search and Nearest Neighbor</h1>
<section id="binary-search-range" class="level3">
<h3 class="anchored" data-anchor-id="binary-search-range">181 Binary Search Range</h3>
<p>Binary Search Range extends the basic binary search to find not just one occurrence, but the range of positions where a given value appears, specifically, the first (lower bound) and last (upper bound) indices of a target in a sorted array.</p>
<p>It’s the backbone for problems that require counting occurrences, range queries, and insertion positions in ordered data.</p>
</section>
<section id="what-problem-are-we-solving-80" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-80">What Problem Are We Solving?</h3>
<p>Standard binary search returns <em>one</em> match. But what if the target appears multiple times, or we want where it <em>should</em> go?</p>
<p>Examples:</p>
<ul>
<li>Count occurrences of <code>x</code> in sorted array</li>
<li>Find the first element ≥ <code>x</code></li>
<li>Find the last element ≤ <code>x</code></li>
</ul>
<p>With two binary searches, we can find the full [start, end] range efficiently.</p>
<section id="example-79" class="level4">
<h4 class="anchored" data-anchor-id="example-79">Example</h4>
<p>Array: <code>[1, 2, 2, 2, 3, 4, 5]</code>, target = <code>2</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Function</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Lower Bound (≥ 2)</td>
<td>1</td>
</tr>
<tr class="even">
<td>Upper Bound (&gt; 2)</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Range</td>
<td>[1, 3]</td>
</tr>
</tbody>
</table>
<p>Occurrences = <code>upper - lower = 3</code></p>
</section>
</section>
<section id="how-does-it-work-plain-language-80" class="level3">
<h3 class="anchored" data-anchor-id="how-does-it-work-plain-language-80">How Does It Work (Plain Language)?</h3>
<p>We use binary search twice:</p>
<ul>
<li>One to find the first index ≥ target (lower bound)</li>
<li>One to find the first index &gt; target (upper bound)</li>
</ul>
<p>Subtract them to get the count, or slice the range.</p>
<section id="step-by-step-summary-2" class="level4">
<h4 class="anchored" data-anchor-id="step-by-step-summary-2">Step-by-Step Summary</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Binary search for first index <code>i</code> where <code>arr[i] &gt;= target</code></td>
</tr>
<tr class="even">
<td>2</td>
<td>Binary search for first index <code>j</code> where <code>arr[j] &gt; target</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Range = <code>[i, j - 1]</code> if <code>i &lt; j</code> and <code>arr[i] == target</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>Count = <code>j - i</code></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-easy-versions-79" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-easy-versions-79">Tiny Code (Easy Versions)</h3>
<section id="python-65" class="level4">
<h4 class="anchored" data-anchor-id="python-65">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb252"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> lower_bound(arr, target):</span>
<span id="cb252-2"><a href="#cb252-2" aria-hidden="true" tabindex="-1"></a>    lo, hi <span class="op">=</span> <span class="dv">0</span>, <span class="bu">len</span>(arr)</span>
<span id="cb252-3"><a href="#cb252-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> lo <span class="op">&lt;</span> hi:</span>
<span id="cb252-4"><a href="#cb252-4" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (lo <span class="op">+</span> hi) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb252-5"><a href="#cb252-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[mid] <span class="op">&lt;</span> target:</span>
<span id="cb252-6"><a href="#cb252-6" aria-hidden="true" tabindex="-1"></a>            lo <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb252-7"><a href="#cb252-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb252-8"><a href="#cb252-8" aria-hidden="true" tabindex="-1"></a>            hi <span class="op">=</span> mid</span>
<span id="cb252-9"><a href="#cb252-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> lo</span>
<span id="cb252-10"><a href="#cb252-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-11"><a href="#cb252-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> upper_bound(arr, target):</span>
<span id="cb252-12"><a href="#cb252-12" aria-hidden="true" tabindex="-1"></a>    lo, hi <span class="op">=</span> <span class="dv">0</span>, <span class="bu">len</span>(arr)</span>
<span id="cb252-13"><a href="#cb252-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> lo <span class="op">&lt;</span> hi:</span>
<span id="cb252-14"><a href="#cb252-14" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (lo <span class="op">+</span> hi) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb252-15"><a href="#cb252-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> arr[mid] <span class="op">&lt;=</span> target:</span>
<span id="cb252-16"><a href="#cb252-16" aria-hidden="true" tabindex="-1"></a>            lo <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb252-17"><a href="#cb252-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb252-18"><a href="#cb252-18" aria-hidden="true" tabindex="-1"></a>            hi <span class="op">=</span> mid</span>
<span id="cb252-19"><a href="#cb252-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> lo</span>
<span id="cb252-20"><a href="#cb252-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-21"><a href="#cb252-21" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> binary_search_range(arr, target):</span>
<span id="cb252-22"><a href="#cb252-22" aria-hidden="true" tabindex="-1"></a>    l <span class="op">=</span> lower_bound(arr, target)</span>
<span id="cb252-23"><a href="#cb252-23" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> upper_bound(arr, target)</span>
<span id="cb252-24"><a href="#cb252-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> l <span class="op">==</span> r:</span>
<span id="cb252-25"><a href="#cb252-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (<span class="op">-</span><span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>)  <span class="co"># Not found</span></span>
<span id="cb252-26"><a href="#cb252-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (l, r <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb252-27"><a href="#cb252-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-28"><a href="#cb252-28" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb252-29"><a href="#cb252-29" aria-hidden="true" tabindex="-1"></a>target <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb252-30"><a href="#cb252-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Range:"</span>, binary_search_range(arr, target))</span>
<span id="cb252-31"><a href="#cb252-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Count:"</span>, upper_bound(arr, target) <span class="op">-</span> lower_bound(arr, target))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Range: (1, 3)
Count: 3</code></pre>
</section>
<section id="c-59" class="level4">
<h4 class="anchored" data-anchor-id="c-59">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb254"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb254-2"><a href="#cb254-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb254-3"><a href="#cb254-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> lower_bound<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb254-4"><a href="#cb254-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> lo <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> hi <span class="op">=</span> n<span class="op">;</span></span>
<span id="cb254-5"><a href="#cb254-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>lo <span class="op">&lt;</span> hi<span class="op">)</span> <span class="op">{</span></span>
<span id="cb254-6"><a href="#cb254-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> <span class="op">(</span>lo <span class="op">+</span> hi<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb254-7"><a href="#cb254-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span> lo <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb254-8"><a href="#cb254-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> hi <span class="op">=</span> mid<span class="op">;</span></span>
<span id="cb254-9"><a href="#cb254-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb254-10"><a href="#cb254-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> lo<span class="op">;</span></span>
<span id="cb254-11"><a href="#cb254-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb254-12"><a href="#cb254-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb254-13"><a href="#cb254-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> upper_bound<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb254-14"><a href="#cb254-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> lo <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> hi <span class="op">=</span> n<span class="op">;</span></span>
<span id="cb254-15"><a href="#cb254-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>lo <span class="op">&lt;</span> hi<span class="op">)</span> <span class="op">{</span></span>
<span id="cb254-16"><a href="#cb254-16" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> <span class="op">(</span>lo <span class="op">+</span> hi<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb254-17"><a href="#cb254-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">&lt;=</span> target<span class="op">)</span> lo <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb254-18"><a href="#cb254-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> hi <span class="op">=</span> mid<span class="op">;</span></span>
<span id="cb254-19"><a href="#cb254-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb254-20"><a href="#cb254-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> lo<span class="op">;</span></span>
<span id="cb254-21"><a href="#cb254-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb254-22"><a href="#cb254-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb254-23"><a href="#cb254-23" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb254-24"><a href="#cb254-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb254-25"><a href="#cb254-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="dv">7</span><span class="op">,</span> target <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb254-26"><a href="#cb254-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> l <span class="op">=</span> lower_bound<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> target<span class="op">);</span></span>
<span id="cb254-27"><a href="#cb254-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> r <span class="op">=</span> upper_bound<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> target<span class="op">);</span></span>
<span id="cb254-28"><a href="#cb254-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>l <span class="op">==</span> r<span class="op">)</span> printf<span class="op">(</span><span class="st">"Not found</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb254-29"><a href="#cb254-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> printf<span class="op">(</span><span class="st">"Range: [</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">], Count: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> l<span class="op">,</span> r <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> r <span class="op">-</span> l<span class="op">);</span></span>
<span id="cb254-30"><a href="#cb254-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Range: [1, 3], Count: 3</code></pre>
</section>
</section>
<section id="why-it-matters-80" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-80">Why It Matters</h3>
<ul>
<li>Extends binary search beyond “found or not”</li>
<li>Essential in frequency counting, range queries, histograms</li>
<li>Powers data structures like Segment Trees, Fenwick Trees, and Range Indexes</li>
<li>Used in competitive programming and database indexing</li>
</ul>
</section>
<section id="a-gentle-proof-why-it-works-80" class="level3">
<h3 class="anchored" data-anchor-id="a-gentle-proof-why-it-works-80">A Gentle Proof (Why It Works)</h3>
<p>Because binary search maintains sorted invariants (<code>lo &lt; hi</code> and mid conditions),</p>
<ul>
<li>Lower bound finds first index where condition flips (<code>&lt; target</code> → <code>≥ target</code>)</li>
<li>Upper bound finds first index beyond target</li>
</ul>
<p>Both run in O(log n), giving exact range boundaries.</p>
</section>
<section id="try-it-yourself-80" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-80">Try It Yourself</h3>
<ol type="1">
<li>Test with no occurrences (e.g.&nbsp;<code>[1,3,5]</code>, target=2)</li>
<li>Test with all equal (e.g.&nbsp;<code>[2,2,2,2]</code>, target=2)</li>
<li>Test with first element = target</li>
<li>Test with last element = target</li>
<li>Try to count elements ≤ <code>x</code> or &lt; <code>x</code></li>
<li>Extend for floating point or custom comparator</li>
<li>Use on strings or tuples</li>
<li>Combine with bisect in Python</li>
<li>Compare iterative vs recursive</li>
<li>Use as primitive for frequency table</li>
</ol>
</section>
<section id="test-cases-80" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-80">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Array</th>
<th>Target</th>
<th>Range</th>
<th>Count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[1,2,2,2,3,4,5]</td>
<td>2</td>
<td>[1,3]</td>
<td>3</td>
</tr>
<tr class="even">
<td>[1,3,5,7]</td>
<td>2</td>
<td>[-1,-1]</td>
<td>0</td>
</tr>
<tr class="odd">
<td>[2,2,2,2]</td>
<td>2</td>
<td>[0,3]</td>
<td>4</td>
</tr>
<tr class="even">
<td>[1,2,3,4]</td>
<td>4</td>
<td>[3,3]</td>
<td>1</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-80" class="level3">
<h3 class="anchored" data-anchor-id="complexity-80">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Lower Bound</td>
<td>O(log n)</td>
</tr>
<tr class="even">
<td>Upper Bound</td>
<td>O(log n)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Stable</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Binary Search Range, when one answer isn’t enough, and precision is everything.</p>
</section>
<section id="segment-tree-query" class="level3">
<h3 class="anchored" data-anchor-id="segment-tree-query">182 Segment Tree Query</h3>
<p>Segment Tree Query is a powerful data structure technique that allows you to efficiently compute range queries like sum, minimum, maximum, or even custom associative operations over subarrays.</p>
<p>It preprocesses the array into a binary tree structure, where each node stores a summary (aggregate) of a segment.</p>
<p>Once built, you can answer queries and updates in O(log n) time.</p>
</section>
<section id="what-problem-are-we-solving-81" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-81">What Problem Are We Solving?</h3>
<p>Given an array, we often want to query over ranges:</p>
<ul>
<li>Sum over <code>[L, R]</code></li>
<li>Minimum or Maximum in <code>[L, R]</code></li>
<li>GCD, product, XOR, or any associative function</li>
</ul>
<p>A naive approach would loop each query: O(n) per query. Segment Trees reduce this to O(log n) with a one-time O(n) build.</p>
<section id="example-80" class="level4">
<h4 class="anchored" data-anchor-id="example-80">Example</h4>
<p>Array: <code>[2, 4, 5, 7, 8, 9]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Query</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Sum(1,3)</td>
<td>4+5+7 = 16</td>
</tr>
<tr class="even">
<td>Min(2,5)</td>
<td>min(5,7,8,9) = 5</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-it-works-intuitive-view" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-intuitive-view">How It Works (Intuitive View)</h3>
<p>A Segment Tree is like a binary hierarchy:</p>
<ul>
<li>The root covers the full range <code>[0, n-1]</code></li>
<li>Each node covers a subrange</li>
<li>The leaf nodes are individual elements</li>
<li>Each internal node stores a merge (sum, min, max…) of its children</li>
</ul>
<p>To query a range, you traverse only relevant branches.</p>
<section id="build-query-update" class="level4">
<h4 class="anchored" data-anchor-id="build-query-update">Build, Query, Update</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Description</th>
<th>Time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Build</td>
<td>Recursively combine child segments</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Query</td>
<td>Traverse overlapping nodes</td>
<td>O(log n)</td>
</tr>
<tr class="odd">
<td>Update</td>
<td>Recompute along path</td>
<td>O(log n)</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-sum-query-example" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-sum-query-example">Tiny Code (Sum Query Example)</h3>
<section id="python-66" class="level4">
<h4 class="anchored" data-anchor-id="python-66">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb256"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> SegmentTree:</span>
<span id="cb256-2"><a href="#cb256-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, arr):</span>
<span id="cb256-3"><a href="#cb256-3" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb256-4"><a href="#cb256-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.tree <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> (<span class="dv">4</span> <span class="op">*</span> <span class="va">self</span>.n)</span>
<span id="cb256-5"><a href="#cb256-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>._build(arr, <span class="dv">1</span>, <span class="dv">0</span>, <span class="va">self</span>.n <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb256-6"><a href="#cb256-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-7"><a href="#cb256-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> _build(<span class="va">self</span>, arr, node, l, r):</span>
<span id="cb256-8"><a href="#cb256-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> l <span class="op">==</span> r:</span>
<span id="cb256-9"><a href="#cb256-9" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.tree[node] <span class="op">=</span> arr[l]</span>
<span id="cb256-10"><a href="#cb256-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb256-11"><a href="#cb256-11" aria-hidden="true" tabindex="-1"></a>            mid <span class="op">=</span> (l <span class="op">+</span> r) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb256-12"><a href="#cb256-12" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>._build(arr, <span class="dv">2</span> <span class="op">*</span> node, l, mid)</span>
<span id="cb256-13"><a href="#cb256-13" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>._build(arr, <span class="dv">2</span> <span class="op">*</span> node <span class="op">+</span> <span class="dv">1</span>, mid <span class="op">+</span> <span class="dv">1</span>, r)</span>
<span id="cb256-14"><a href="#cb256-14" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.tree[node] <span class="op">=</span> <span class="va">self</span>.tree[<span class="dv">2</span> <span class="op">*</span> node] <span class="op">+</span> <span class="va">self</span>.tree[<span class="dv">2</span> <span class="op">*</span> node <span class="op">+</span> <span class="dv">1</span>]</span>
<span id="cb256-15"><a href="#cb256-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-16"><a href="#cb256-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> query(<span class="va">self</span>, node, l, r, ql, qr):</span>
<span id="cb256-17"><a href="#cb256-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> qr <span class="op">&lt;</span> l <span class="kw">or</span> ql <span class="op">&gt;</span> r:  <span class="co"># no overlap</span></span>
<span id="cb256-18"><a href="#cb256-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb256-19"><a href="#cb256-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> ql <span class="op">&lt;=</span> l <span class="kw">and</span> r <span class="op">&lt;=</span> qr:  <span class="co"># total overlap</span></span>
<span id="cb256-20"><a href="#cb256-20" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="va">self</span>.tree[node]</span>
<span id="cb256-21"><a href="#cb256-21" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (l <span class="op">+</span> r) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb256-22"><a href="#cb256-22" aria-hidden="true" tabindex="-1"></a>        left <span class="op">=</span> <span class="va">self</span>.query(<span class="dv">2</span> <span class="op">*</span> node, l, mid, ql, qr)</span>
<span id="cb256-23"><a href="#cb256-23" aria-hidden="true" tabindex="-1"></a>        right <span class="op">=</span> <span class="va">self</span>.query(<span class="dv">2</span> <span class="op">*</span> node <span class="op">+</span> <span class="dv">1</span>, mid <span class="op">+</span> <span class="dv">1</span>, r, ql, qr)</span>
<span id="cb256-24"><a href="#cb256-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> left <span class="op">+</span> right</span>
<span id="cb256-25"><a href="#cb256-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-26"><a href="#cb256-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Example</span></span>
<span id="cb256-27"><a href="#cb256-27" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]</span>
<span id="cb256-28"><a href="#cb256-28" aria-hidden="true" tabindex="-1"></a>st <span class="op">=</span> SegmentTree(arr)</span>
<span id="cb256-29"><a href="#cb256-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(st.query(<span class="dv">1</span>, <span class="dv">0</span>, <span class="bu">len</span>(arr) <span class="op">-</span> <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">3</span>))  <span class="co"># Sum from index 1 to 3</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>16</code></pre>
</section>
<section id="c-60" class="level4">
<h4 class="anchored" data-anchor-id="c-60">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb258"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-3"><a href="#cb258-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAXN </span><span class="dv">100</span></span>
<span id="cb258-4"><a href="#cb258-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> tree<span class="op">[</span><span class="dv">4</span> <span class="op">*</span> MAXN<span class="op">];</span></span>
<span id="cb258-5"><a href="#cb258-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arr<span class="op">[</span>MAXN<span class="op">];</span></span>
<span id="cb258-6"><a href="#cb258-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-7"><a href="#cb258-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> build<span class="op">(</span><span class="dt">int</span> node<span class="op">,</span> <span class="dt">int</span> l<span class="op">,</span> <span class="dt">int</span> r<span class="op">)</span> <span class="op">{</span></span>
<span id="cb258-8"><a href="#cb258-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>l <span class="op">==</span> r<span class="op">)</span> <span class="cf">return</span> tree<span class="op">[</span>node<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>l<span class="op">];</span></span>
<span id="cb258-9"><a href="#cb258-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> mid <span class="op">=</span> <span class="op">(</span>l <span class="op">+</span> r<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb258-10"><a href="#cb258-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> build<span class="op">(</span><span class="dv">2</span> <span class="op">*</span> node<span class="op">,</span> l<span class="op">,</span> mid<span class="op">);</span></span>
<span id="cb258-11"><a href="#cb258-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> right <span class="op">=</span> build<span class="op">(</span><span class="dv">2</span> <span class="op">*</span> node <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> r<span class="op">);</span></span>
<span id="cb258-12"><a href="#cb258-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> tree<span class="op">[</span>node<span class="op">]</span> <span class="op">=</span> left <span class="op">+</span> right<span class="op">;</span></span>
<span id="cb258-13"><a href="#cb258-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb258-14"><a href="#cb258-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-15"><a href="#cb258-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> query<span class="op">(</span><span class="dt">int</span> node<span class="op">,</span> <span class="dt">int</span> l<span class="op">,</span> <span class="dt">int</span> r<span class="op">,</span> <span class="dt">int</span> ql<span class="op">,</span> <span class="dt">int</span> qr<span class="op">)</span> <span class="op">{</span></span>
<span id="cb258-16"><a href="#cb258-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>qr <span class="op">&lt;</span> l <span class="op">||</span> ql <span class="op">&gt;</span> r<span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb258-17"><a href="#cb258-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>ql <span class="op">&lt;=</span> l <span class="op">&amp;&amp;</span> r <span class="op">&lt;=</span> qr<span class="op">)</span> <span class="cf">return</span> tree<span class="op">[</span>node<span class="op">];</span></span>
<span id="cb258-18"><a href="#cb258-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> mid <span class="op">=</span> <span class="op">(</span>l <span class="op">+</span> r<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb258-19"><a href="#cb258-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> query<span class="op">(</span><span class="dv">2</span> <span class="op">*</span> node<span class="op">,</span> l<span class="op">,</span> mid<span class="op">,</span> ql<span class="op">,</span> qr<span class="op">)</span> <span class="op">+</span> query<span class="op">(</span><span class="dv">2</span> <span class="op">*</span> node <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> r<span class="op">,</span> ql<span class="op">,</span> qr<span class="op">);</span></span>
<span id="cb258-20"><a href="#cb258-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb258-21"><a href="#cb258-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-22"><a href="#cb258-22" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb258-23"><a href="#cb258-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="dv">6</span><span class="op">;</span></span>
<span id="cb258-24"><a href="#cb258-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> data<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">2</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">9</span><span class="op">};</span></span>
<span id="cb258-25"><a href="#cb258-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> data<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb258-26"><a href="#cb258-26" aria-hidden="true" tabindex="-1"></a>    build<span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb258-27"><a href="#cb258-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Sum [1,3] = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> query<span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">3</span><span class="op">));</span></span>
<span id="cb258-28"><a href="#cb258-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Sum [1,3] = 16</code></pre>
</section>
</section>
<section id="why-it-matters-81" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-81">Why It Matters</h3>
<ul>
<li>Handles dynamic range queries and updates efficiently</li>
<li>Core of competitive programming and data analytics</li>
<li>Forms base for Range Minimum Query, 2D queries, and lazy propagation</li>
<li>Useful in databases, financial systems, and game engines</li>
</ul>
</section>
<section id="intuition-associativity-rule" class="level3">
<h3 class="anchored" data-anchor-id="intuition-associativity-rule">Intuition (Associativity Rule)</h3>
<p>Segment Trees only work when the operation is associative:</p>
<pre><code>merge(a, merge(b, c)) = merge(merge(a, b), c)</code></pre>
<p>Examples:</p>
<ul>
<li>Sum, Min, Max, GCD, XOR</li>
<li>Not Median, Not Mode (non-associative)</li>
</ul>
</section>
<section id="try-it-yourself-81" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-81">Try It Yourself</h3>
<ol type="1">
<li>Implement for min or max instead of sum</li>
<li>Add update() for point changes</li>
<li>Implement lazy propagation for range updates</li>
<li>Extend to 2D segment tree</li>
<li>Compare with Fenwick Tree (BIT)</li>
<li>Test on non-trivial ranges</li>
<li>Visualize the tree layout</li>
<li>Build iterative segment tree</li>
<li>Handle custom operations (GCD, XOR)</li>
<li>Benchmark O(n log n) vs naive O(nq)</li>
</ol>
</section>
<section id="test-cases-81" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-81">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Array</th>
<th>Query</th>
<th>Expected</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[2,4,5,7,8,9]</td>
<td>Sum(1,3)</td>
<td>16</td>
</tr>
<tr class="even">
<td>[1,2,3,4]</td>
<td>Sum(0,3)</td>
<td>10</td>
</tr>
<tr class="odd">
<td>[5,5,5,5]</td>
<td>Sum(1,2)</td>
<td>10</td>
</tr>
<tr class="even">
<td>[3,2,1,4]</td>
<td>Min(1,3)</td>
<td>1</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-81" class="level3">
<h3 class="anchored" data-anchor-id="complexity-81">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Build</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Query</td>
<td>O(log n)</td>
</tr>
<tr class="odd">
<td>Update</td>
<td>O(log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(4n)</td>
</tr>
</tbody>
</table>
<p>Segment Tree Query, build once, query many, fast forever.</p>
</section>
<section id="fenwick-tree-query" class="level3">
<h3 class="anchored" data-anchor-id="fenwick-tree-query">183 Fenwick Tree Query</h3>
<p>A Fenwick Tree (or Binary Indexed Tree) is a data structure designed for prefix queries and point updates in O(log n) time. It’s a more space-efficient, iterative cousin of the Segment Tree, perfect when operations are cumulative (sum, XOR, etc.) and updates are frequent.</p>
</section>
<section id="what-problem-are-we-solving-82" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-82">What Problem Are We Solving?</h3>
<p>We want to:</p>
<ul>
<li>Compute prefix sums efficiently</li>
<li>Support updates dynamically</li>
</ul>
<p>A naive approach takes O(n) per query or update. A Fenwick Tree does both in O(log n).</p>
<section id="example-81" class="level4">
<h4 class="anchored" data-anchor-id="example-81">Example</h4>
<p>Array: <code>[2, 4, 5, 7, 8]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Query</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>PrefixSum(3)</td>
<td>2 + 4 + 5 + 7 = 18</td>
</tr>
<tr class="even">
<td>RangeSum(1, 3)</td>
<td>Prefix(3) - Prefix(0) = 18 - 2 = 16</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-it-works-plain-language" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-plain-language">How It Works (Plain Language)</h3>
<p>A Fenwick Tree stores cumulative information in indexed chunks. Each index covers a range determined by its least significant bit (LSB).</p>
<pre><code>index i covers range (i - LSB(i) + 1) ... i</code></pre>
<p>We can update or query by moving through indices using bit operations:</p>
<ul>
<li>Update: move forward by adding LSB</li>
<li>Query: move backward by subtracting LSB</li>
</ul>
<p>This clever bit trick keeps operations O(log n).</p>
<section id="example-walkthrough" class="level4">
<h4 class="anchored" data-anchor-id="example-walkthrough">Example Walkthrough</h4>
<p>For array <code>[2, 4, 5, 7, 8]</code> (1-based index):</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Index</th>
<th>Binary</th>
<th>LSB</th>
<th>Range</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>001</td>
<td>1</td>
<td>[1]</td>
<td>2</td>
</tr>
<tr class="even">
<td>2</td>
<td>010</td>
<td>2</td>
<td>[1–2]</td>
<td>6</td>
</tr>
<tr class="odd">
<td>3</td>
<td>011</td>
<td>1</td>
<td>[3]</td>
<td>5</td>
</tr>
<tr class="even">
<td>4</td>
<td>100</td>
<td>4</td>
<td>[1–4]</td>
<td>18</td>
</tr>
<tr class="odd">
<td>5</td>
<td>101</td>
<td>1</td>
<td>[5]</td>
<td>8</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code-sum-example" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-sum-example">Tiny Code (Sum Example)</h3>
<section id="python-67" class="level4">
<h4 class="anchored" data-anchor-id="python-67">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb262"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> FenwickTree:</span>
<span id="cb262-2"><a href="#cb262-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, n):</span>
<span id="cb262-3"><a href="#cb262-3" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.n <span class="op">=</span> n</span>
<span id="cb262-4"><a href="#cb262-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.bit <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> (n <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb262-5"><a href="#cb262-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-6"><a href="#cb262-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> update(<span class="va">self</span>, i, delta):</span>
<span id="cb262-7"><a href="#cb262-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> i <span class="op">&lt;=</span> <span class="va">self</span>.n:</span>
<span id="cb262-8"><a href="#cb262-8" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.bit[i] <span class="op">+=</span> delta</span>
<span id="cb262-9"><a href="#cb262-9" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> i <span class="op">&amp;</span> <span class="op">-</span>i</span>
<span id="cb262-10"><a href="#cb262-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-11"><a href="#cb262-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> query(<span class="va">self</span>, i):</span>
<span id="cb262-12"><a href="#cb262-12" aria-hidden="true" tabindex="-1"></a>        s <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb262-13"><a href="#cb262-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> i <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb262-14"><a href="#cb262-14" aria-hidden="true" tabindex="-1"></a>            s <span class="op">+=</span> <span class="va">self</span>.bit[i]</span>
<span id="cb262-15"><a href="#cb262-15" aria-hidden="true" tabindex="-1"></a>            i <span class="op">-=</span> i <span class="op">&amp;</span> <span class="op">-</span>i</span>
<span id="cb262-16"><a href="#cb262-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> s</span>
<span id="cb262-17"><a href="#cb262-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-18"><a href="#cb262-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> range_sum(<span class="va">self</span>, l, r):</span>
<span id="cb262-19"><a href="#cb262-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.query(r) <span class="op">-</span> <span class="va">self</span>.query(l <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb262-20"><a href="#cb262-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-21"><a href="#cb262-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Example</span></span>
<span id="cb262-22"><a href="#cb262-22" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">8</span>]</span>
<span id="cb262-23"><a href="#cb262-23" aria-hidden="true" tabindex="-1"></a>ft <span class="op">=</span> FenwickTree(<span class="bu">len</span>(arr))</span>
<span id="cb262-24"><a href="#cb262-24" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, val <span class="kw">in</span> <span class="bu">enumerate</span>(arr, <span class="dv">1</span>):</span>
<span id="cb262-25"><a href="#cb262-25" aria-hidden="true" tabindex="-1"></a>    ft.update(i, val)</span>
<span id="cb262-26"><a href="#cb262-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-27"><a href="#cb262-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ft.range_sum(<span class="dv">2</span>, <span class="dv">4</span>))  <span class="co"># 4 + 5 + 7 = 16</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>16</code></pre>
</section>
<section id="c-61" class="level4">
<h4 class="anchored" data-anchor-id="c-61">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb264"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb264-2"><a href="#cb264-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb264-3"><a href="#cb264-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAXN </span><span class="dv">100</span></span>
<span id="cb264-4"><a href="#cb264-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> bit<span class="op">[</span>MAXN <span class="op">+</span> <span class="dv">1</span><span class="op">],</span> n<span class="op">;</span></span>
<span id="cb264-5"><a href="#cb264-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb264-6"><a href="#cb264-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> update<span class="op">(</span><span class="dt">int</span> i<span class="op">,</span> <span class="dt">int</span> delta<span class="op">)</span> <span class="op">{</span></span>
<span id="cb264-7"><a href="#cb264-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;=</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb264-8"><a href="#cb264-8" aria-hidden="true" tabindex="-1"></a>        bit<span class="op">[</span>i<span class="op">]</span> <span class="op">+=</span> delta<span class="op">;</span></span>
<span id="cb264-9"><a href="#cb264-9" aria-hidden="true" tabindex="-1"></a>        i <span class="op">+=</span> i <span class="op">&amp;</span> <span class="op">-</span>i<span class="op">;</span></span>
<span id="cb264-10"><a href="#cb264-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb264-11"><a href="#cb264-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb264-12"><a href="#cb264-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb264-13"><a href="#cb264-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> query<span class="op">(</span><span class="dt">int</span> i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb264-14"><a href="#cb264-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> s <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb264-15"><a href="#cb264-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb264-16"><a href="#cb264-16" aria-hidden="true" tabindex="-1"></a>        s <span class="op">+=</span> bit<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb264-17"><a href="#cb264-17" aria-hidden="true" tabindex="-1"></a>        i <span class="op">-=</span> i <span class="op">&amp;</span> <span class="op">-</span>i<span class="op">;</span></span>
<span id="cb264-18"><a href="#cb264-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb264-19"><a href="#cb264-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> s<span class="op">;</span></span>
<span id="cb264-20"><a href="#cb264-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb264-21"><a href="#cb264-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb264-22"><a href="#cb264-22" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> range_sum<span class="op">(</span><span class="dt">int</span> l<span class="op">,</span> <span class="dt">int</span> r<span class="op">)</span> <span class="op">{</span></span>
<span id="cb264-23"><a href="#cb264-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> query<span class="op">(</span>r<span class="op">)</span> <span class="op">-</span> query<span class="op">(</span>l <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb264-24"><a href="#cb264-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb264-25"><a href="#cb264-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb264-26"><a href="#cb264-26" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb264-27"><a href="#cb264-27" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb264-28"><a href="#cb264-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">0</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">};</span> <span class="co">// 1-based</span></span>
<span id="cb264-29"><a href="#cb264-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> n<span class="op">;</span> i<span class="op">++)</span> update<span class="op">(</span>i<span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb264-30"><a href="#cb264-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Sum [2,4] = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> range_sum<span class="op">(</span><span class="dv">2</span><span class="op">,</span><span class="dv">4</span><span class="op">));</span> <span class="co">// 16</span></span>
<span id="cb264-31"><a href="#cb264-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Sum [2,4] = 16</code></pre>
</section>
</section>
<section id="why-it-matters-82" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-82">Why It Matters</h3>
<ul>
<li>Elegant bit manipulation for efficient queries</li>
<li>Simpler and smaller than Segment Trees</li>
<li>Perfect for prefix sums, inversions, frequency tables</li>
<li>Extends to 2D Fenwick Trees for grid-based data</li>
<li>Core in competitive programming, streaming, finance</li>
</ul>
</section>
<section id="intuition-least-significant-bit" class="level3">
<h3 class="anchored" data-anchor-id="intuition-least-significant-bit">Intuition (Least Significant Bit)</h3>
<p>The LSB trick (i &amp; -i) finds the rightmost set bit, controlling how far we jump. This ensures logarithmic traversal through relevant nodes.</p>
</section>
<section id="try-it-yourself-82" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-82">Try It Yourself</h3>
<ol type="1">
<li>Implement a prefix XOR version</li>
<li>Add range updates with two trees</li>
<li>Extend to 2D BIT for matrix sums</li>
<li>Visualize tree structure for array [1..8]</li>
<li>Compare speed with naive O(n) approach</li>
<li>Track frequency counts for elements</li>
<li>Use it for inversion counting</li>
<li>Create a Fenwick Tree class in C++</li>
<li>Handle point updates interactively</li>
<li>Practice bit math: draw index cover ranges</li>
</ol>
</section>
<section id="test-cases-82" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-82">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Array</th>
<th>Query</th>
<th>Expected</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[2,4,5,7,8]</td>
<td>Sum(2,4)</td>
<td>16</td>
</tr>
<tr class="even">
<td>[1,2,3,4]</td>
<td>Prefix(3)</td>
<td>6</td>
</tr>
<tr class="odd">
<td>[5,5,5,5]</td>
<td>Sum(1,3)</td>
<td>15</td>
</tr>
<tr class="even">
<td>[3,1,4,2]</td>
<td>Update(2,+3), Sum(1,2)</td>
<td>7</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-82" class="level3">
<h3 class="anchored" data-anchor-id="complexity-82">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Build</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Query</td>
<td>O(log n)</td>
</tr>
<tr class="odd">
<td>Update</td>
<td>O(log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n)</td>
</tr>
</tbody>
</table>
<p>A Fenwick Tree turns prefix operations into lightning-fast bit magic, simple, small, and powerful.</p>
</section>
<section id="interval-tree-search" class="level3">
<h3 class="anchored" data-anchor-id="interval-tree-search">184 Interval Tree Search</h3>
<p>An Interval Tree is a data structure built to efficiently store intervals (ranges like [l, r]) and query all intervals that overlap with a given interval or point. It’s like a BST with range-awareness, enabling fast queries such as “which tasks overlap with time t?” or “which rectangles overlap this region?”</p>
</section>
<section id="what-problem-are-we-solving-83" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-83">What Problem Are We Solving?</h3>
<p>We want to efficiently find overlapping intervals. A naive search checks all intervals, O(n) per query. An Interval Tree speeds this up to O(log n + k), where <em>k</em> is the number of overlapping intervals.</p>
<section id="example-82" class="level4">
<h4 class="anchored" data-anchor-id="example-82">Example</h4>
<p>Stored intervals:</p>
<pre><code>$$5, 20], [10, 30], [12, 15], [17, 19], [30, 40]</code></pre>
<p>Query: <code>[14, 16]</code></p>
<p>Overlaps: <code>[10, 30]</code>, <code>[12, 15]</code></p>
</section>
</section>
<section id="how-it-works-plain-language-1" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-plain-language-1">How It Works (Plain Language)</h3>
<ol type="1">
<li><p>Build a BST using the midpoint or start of intervals as keys.</p></li>
<li><p>Each node stores:</p>
<ul>
<li>interval [low, high]</li>
<li>max endpoint of its subtree</li>
</ul></li>
<li><p>For queries:</p>
<ul>
<li>Traverse tree, skip branches where <code>low &gt; query_high</code> or <code>max &lt; query_low</code>.</li>
<li>Collect overlapping intervals efficiently.</li>
</ul></li>
</ol>
<p>This pruning makes it logarithmic for most cases.</p>
<section id="example-tree-sorted-by-low" class="level4">
<h4 class="anchored" data-anchor-id="example-tree-sorted-by-low">Example Tree (Sorted by low)</h4>
<pre><code>            [10, 30]
           /        \
     [5, 20]       [17, 19]
                     \
                    [30, 40]</code></pre>
<p>Each node stores <code>max</code> endpoint of its subtree.</p>
</section>
</section>
<section id="tiny-code-query-example" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-query-example">Tiny Code (Query Example)</h3>
<section id="python-68" class="level4">
<h4 class="anchored" data-anchor-id="python-68">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb268"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> IntervalNode:</span>
<span id="cb268-2"><a href="#cb268-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, low, high):</span>
<span id="cb268-3"><a href="#cb268-3" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.low <span class="op">=</span> low</span>
<span id="cb268-4"><a href="#cb268-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.high <span class="op">=</span> high</span>
<span id="cb268-5"><a href="#cb268-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.<span class="bu">max</span> <span class="op">=</span> high</span>
<span id="cb268-6"><a href="#cb268-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.left <span class="op">=</span> <span class="va">None</span></span>
<span id="cb268-7"><a href="#cb268-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.right <span class="op">=</span> <span class="va">None</span></span>
<span id="cb268-8"><a href="#cb268-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-9"><a href="#cb268-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> insert(root, low, high):</span>
<span id="cb268-10"><a href="#cb268-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> root <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb268-11"><a href="#cb268-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> IntervalNode(low, high)</span>
<span id="cb268-12"><a href="#cb268-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> low <span class="op">&lt;</span> root.low:</span>
<span id="cb268-13"><a href="#cb268-13" aria-hidden="true" tabindex="-1"></a>        root.left <span class="op">=</span> insert(root.left, low, high)</span>
<span id="cb268-14"><a href="#cb268-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb268-15"><a href="#cb268-15" aria-hidden="true" tabindex="-1"></a>        root.right <span class="op">=</span> insert(root.right, low, high)</span>
<span id="cb268-16"><a href="#cb268-16" aria-hidden="true" tabindex="-1"></a>    root.<span class="bu">max</span> <span class="op">=</span> <span class="bu">max</span>(root.<span class="bu">max</span>, high)</span>
<span id="cb268-17"><a href="#cb268-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> root</span>
<span id="cb268-18"><a href="#cb268-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-19"><a href="#cb268-19" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> overlap(i1, i2):</span>
<span id="cb268-20"><a href="#cb268-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i1[<span class="dv">0</span>] <span class="op">&lt;=</span> i2[<span class="dv">1</span>] <span class="kw">and</span> i2[<span class="dv">0</span>] <span class="op">&lt;=</span> i1[<span class="dv">1</span>]</span>
<span id="cb268-21"><a href="#cb268-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-22"><a href="#cb268-22" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> search(root, query):</span>
<span id="cb268-23"><a href="#cb268-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> root <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb268-24"><a href="#cb268-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> []</span>
<span id="cb268-25"><a href="#cb268-25" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []</span>
<span id="cb268-26"><a href="#cb268-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> overlap((root.low, root.high), query):</span>
<span id="cb268-27"><a href="#cb268-27" aria-hidden="true" tabindex="-1"></a>        result.append((root.low, root.high))</span>
<span id="cb268-28"><a href="#cb268-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> root.left <span class="kw">and</span> root.left.<span class="bu">max</span> <span class="op">&gt;=</span> query[<span class="dv">0</span>]:</span>
<span id="cb268-29"><a href="#cb268-29" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> search(root.left, query)</span>
<span id="cb268-30"><a href="#cb268-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> root.right <span class="kw">and</span> root.low <span class="op">&lt;=</span> query[<span class="dv">1</span>]:</span>
<span id="cb268-31"><a href="#cb268-31" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> search(root.right, query)</span>
<span id="cb268-32"><a href="#cb268-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span>
<span id="cb268-33"><a href="#cb268-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-34"><a href="#cb268-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Example</span></span>
<span id="cb268-35"><a href="#cb268-35" aria-hidden="true" tabindex="-1"></a>intervals <span class="op">=</span> [(<span class="dv">5</span>,<span class="dv">20</span>), (<span class="dv">10</span>,<span class="dv">30</span>), (<span class="dv">12</span>,<span class="dv">15</span>), (<span class="dv">17</span>,<span class="dv">19</span>), (<span class="dv">30</span>,<span class="dv">40</span>)]</span>
<span id="cb268-36"><a href="#cb268-36" aria-hidden="true" tabindex="-1"></a>root <span class="op">=</span> <span class="va">None</span></span>
<span id="cb268-37"><a href="#cb268-37" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> l, h <span class="kw">in</span> intervals:</span>
<span id="cb268-38"><a href="#cb268-38" aria-hidden="true" tabindex="-1"></a>    root <span class="op">=</span> insert(root, l, h)</span>
<span id="cb268-39"><a href="#cb268-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-40"><a href="#cb268-40" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(search(root, (<span class="dv">14</span>,<span class="dv">16</span>)))  <span class="co"># [(10,30), (12,15)]</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$(10, 30), (12, 15)]</code></pre>
</section>
<section id="c-62" class="level4">
<h4 class="anchored" data-anchor-id="c-62">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb270"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb270-2"><a href="#cb270-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb270-3"><a href="#cb270-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-4"><a href="#cb270-4" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> Node <span class="op">{</span></span>
<span id="cb270-5"><a href="#cb270-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> low<span class="op">,</span> high<span class="op">,</span> max<span class="op">;</span></span>
<span id="cb270-6"><a href="#cb270-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Node <span class="op">*</span>left<span class="op">,</span> <span class="op">*</span>right<span class="op">;</span></span>
<span id="cb270-7"><a href="#cb270-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Node<span class="op">;</span></span>
<span id="cb270-8"><a href="#cb270-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-9"><a href="#cb270-9" aria-hidden="true" tabindex="-1"></a>Node<span class="op">*</span> newNode<span class="op">(</span><span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb270-10"><a href="#cb270-10" aria-hidden="true" tabindex="-1"></a>    Node<span class="op">*</span> n <span class="op">=</span> malloc<span class="op">(</span><span class="kw">sizeof</span><span class="op">(</span>Node<span class="op">));</span></span>
<span id="cb270-11"><a href="#cb270-11" aria-hidden="true" tabindex="-1"></a>    n<span class="op">-&gt;</span>low <span class="op">=</span> low<span class="op">;</span></span>
<span id="cb270-12"><a href="#cb270-12" aria-hidden="true" tabindex="-1"></a>    n<span class="op">-&gt;</span>high <span class="op">=</span> high<span class="op">;</span></span>
<span id="cb270-13"><a href="#cb270-13" aria-hidden="true" tabindex="-1"></a>    n<span class="op">-&gt;</span>max <span class="op">=</span> high<span class="op">;</span></span>
<span id="cb270-14"><a href="#cb270-14" aria-hidden="true" tabindex="-1"></a>    n<span class="op">-&gt;</span>left <span class="op">=</span> n<span class="op">-&gt;</span>right <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb270-15"><a href="#cb270-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> n<span class="op">;</span></span>
<span id="cb270-16"><a href="#cb270-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb270-17"><a href="#cb270-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-18"><a href="#cb270-18" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> max<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">&gt;</span> b <span class="op">?</span> a <span class="op">:</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb270-19"><a href="#cb270-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-20"><a href="#cb270-20" aria-hidden="true" tabindex="-1"></a>Node<span class="op">*</span> insert<span class="op">(</span>Node<span class="op">*</span> root<span class="op">,</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb270-21"><a href="#cb270-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>root<span class="op">)</span> <span class="cf">return</span> newNode<span class="op">(</span>low<span class="op">,</span> high<span class="op">);</span></span>
<span id="cb270-22"><a href="#cb270-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>low <span class="op">&lt;</span> root<span class="op">-&gt;</span>low<span class="op">)</span></span>
<span id="cb270-23"><a href="#cb270-23" aria-hidden="true" tabindex="-1"></a>        root<span class="op">-&gt;</span>left <span class="op">=</span> insert<span class="op">(</span>root<span class="op">-&gt;</span>left<span class="op">,</span> low<span class="op">,</span> high<span class="op">);</span></span>
<span id="cb270-24"><a href="#cb270-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb270-25"><a href="#cb270-25" aria-hidden="true" tabindex="-1"></a>        root<span class="op">-&gt;</span>right <span class="op">=</span> insert<span class="op">(</span>root<span class="op">-&gt;</span>right<span class="op">,</span> low<span class="op">,</span> high<span class="op">);</span></span>
<span id="cb270-26"><a href="#cb270-26" aria-hidden="true" tabindex="-1"></a>    root<span class="op">-&gt;</span>max <span class="op">=</span> max<span class="op">(</span>root<span class="op">-&gt;</span>max<span class="op">,</span> high<span class="op">);</span></span>
<span id="cb270-27"><a href="#cb270-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> root<span class="op">;</span></span>
<span id="cb270-28"><a href="#cb270-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb270-29"><a href="#cb270-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-30"><a href="#cb270-30" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> overlap<span class="op">(</span><span class="dt">int</span> l1<span class="op">,</span> <span class="dt">int</span> h1<span class="op">,</span> <span class="dt">int</span> l2<span class="op">,</span> <span class="dt">int</span> h2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb270-31"><a href="#cb270-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> l1 <span class="op">&lt;=</span> h2 <span class="op">&amp;&amp;</span> l2 <span class="op">&lt;=</span> h1<span class="op">;</span></span>
<span id="cb270-32"><a href="#cb270-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb270-33"><a href="#cb270-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-34"><a href="#cb270-34" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> search<span class="op">(</span>Node<span class="op">*</span> root<span class="op">,</span> <span class="dt">int</span> ql<span class="op">,</span> <span class="dt">int</span> qh<span class="op">)</span> <span class="op">{</span></span>
<span id="cb270-35"><a href="#cb270-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>root<span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb270-36"><a href="#cb270-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>overlap<span class="op">(</span>root<span class="op">-&gt;</span>low<span class="op">,</span> root<span class="op">-&gt;</span>high<span class="op">,</span> ql<span class="op">,</span> qh<span class="op">))</span></span>
<span id="cb270-37"><a href="#cb270-37" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"[</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">] overlaps</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> root<span class="op">-&gt;</span>low<span class="op">,</span> root<span class="op">-&gt;</span>high<span class="op">);</span></span>
<span id="cb270-38"><a href="#cb270-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>root<span class="op">-&gt;</span>left <span class="op">&amp;&amp;</span> root<span class="op">-&gt;</span>left<span class="op">-&gt;</span>max <span class="op">&gt;=</span> ql<span class="op">)</span></span>
<span id="cb270-39"><a href="#cb270-39" aria-hidden="true" tabindex="-1"></a>        search<span class="op">(</span>root<span class="op">-&gt;</span>left<span class="op">,</span> ql<span class="op">,</span> qh<span class="op">);</span></span>
<span id="cb270-40"><a href="#cb270-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>root<span class="op">-&gt;</span>right <span class="op">&amp;&amp;</span> root<span class="op">-&gt;</span>low <span class="op">&lt;=</span> qh<span class="op">)</span></span>
<span id="cb270-41"><a href="#cb270-41" aria-hidden="true" tabindex="-1"></a>        search<span class="op">(</span>root<span class="op">-&gt;</span>right<span class="op">,</span> ql<span class="op">,</span> qh<span class="op">);</span></span>
<span id="cb270-42"><a href="#cb270-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb270-43"><a href="#cb270-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-44"><a href="#cb270-44" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb270-45"><a href="#cb270-45" aria-hidden="true" tabindex="-1"></a>    Node<span class="op">*</span> root <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb270-46"><a href="#cb270-46" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> intervals<span class="op">[][</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="op">{{</span><span class="dv">5</span><span class="op">,</span><span class="dv">20</span><span class="op">},{</span><span class="dv">10</span><span class="op">,</span><span class="dv">30</span><span class="op">},{</span><span class="dv">12</span><span class="op">,</span><span class="dv">15</span><span class="op">},{</span><span class="dv">17</span><span class="op">,</span><span class="dv">19</span><span class="op">},{</span><span class="dv">30</span><span class="op">,</span><span class="dv">40</span><span class="op">}};</span></span>
<span id="cb270-47"><a href="#cb270-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb270-48"><a href="#cb270-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb270-49"><a href="#cb270-49" aria-hidden="true" tabindex="-1"></a>        root <span class="op">=</span> insert<span class="op">(</span>root<span class="op">,</span> intervals<span class="op">[</span>i<span class="op">][</span><span class="dv">0</span><span class="op">],</span> intervals<span class="op">[</span>i<span class="op">][</span><span class="dv">1</span><span class="op">]);</span></span>
<span id="cb270-50"><a href="#cb270-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Overlaps with [14,16]:</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb270-51"><a href="#cb270-51" aria-hidden="true" tabindex="-1"></a>    search<span class="op">(</span>root<span class="op">,</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">16</span><span class="op">);</span></span>
<span id="cb270-52"><a href="#cb270-52" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Overlaps with [14,16]:
$$10, 30] overlaps
$$12, 15] overlaps</code></pre>
</section>
</section>
<section id="why-it-matters-83" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-83">Why It Matters</h3>
<ul>
<li><p>Efficient for overlap queries (e.g.&nbsp;events, tasks, ranges)</p></li>
<li><p>Used in:</p>
<ul>
<li>Scheduling (detecting conflicts)</li>
<li>Computational geometry</li>
<li>Memory allocation checks</li>
<li>Genomic range matching</li>
</ul></li>
<li><p>Foundation for Segment Tree with intervals</p></li>
</ul>
</section>
<section id="key-intuition" class="level3">
<h3 class="anchored" data-anchor-id="key-intuition">Key Intuition</h3>
<p>Each node stores the max endpoint of its subtree. This helps prune non-overlapping branches early.</p>
<p>Think of it as a “range-aware BST”.</p>
</section>
<section id="try-it-yourself-83" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-83">Try It Yourself</h3>
<ol type="1">
<li>Build tree for intervals: [1,5], [2,6], [7,9], [10,15]</li>
<li>Query [4,8], which overlap?</li>
<li>Visualize pruning path</li>
<li>Extend to delete intervals</li>
<li>Add count of overlapping intervals</li>
<li>Implement iterative search</li>
<li>Compare with brute-force O(n) approach</li>
<li>Adapt for point queries only</li>
<li>Try dynamic updates</li>
<li>Use to detect meeting conflicts</li>
</ol>
</section>
<section id="test-cases-83" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-83">Test Cases</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 63%">
<col style="width: 10%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Intervals</th>
<th>Query</th>
<th>Expected Overlaps</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[5,20], [10,30], [12,15], [17,19], [30,40]</td>
<td>[14,16]</td>
<td>[10,30], [12,15]</td>
</tr>
<tr class="even">
<td>[1,3], [5,8], [6,10]</td>
<td>[7,9]</td>
<td>[5,8], [6,10]</td>
</tr>
<tr class="odd">
<td>[2,5], [6,8]</td>
<td>[1,1]</td>
<td>none</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-83" class="level3">
<h3 class="anchored" data-anchor-id="complexity-83">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Build</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Query</td>
<td>O(log n + k)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(n)</td>
</tr>
</tbody>
</table>
<p>An Interval Tree is your go-to for range overlap queries, BST elegance meets interval intelligence.</p>
</section>
<section id="kd-tree-search" class="level3">
<h3 class="anchored" data-anchor-id="kd-tree-search">185 KD-Tree Search</h3>
<p>A KD-Tree (k-dimensional tree) is a space-partitioning data structure that organizes points in <em>k</em>-dimensional space for efficient nearest neighbor, range, and radius searches. It’s like a binary search tree, but it splits space along alternating dimensions.</p>
</section>
<section id="what-problem-are-we-solving-84" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-84">What Problem Are We Solving?</h3>
<p>We want to:</p>
<ul>
<li>Find points near a given location</li>
<li>Query points within a region or radius</li>
<li>Do this faster than checking all points (O(n))</li>
</ul>
<p>A KD-Tree answers such queries in O(log n) (average), versus O(n) for brute-force.</p>
<section id="example-83" class="level4">
<h4 class="anchored" data-anchor-id="example-83">Example</h4>
<p>Points in 2D:</p>
<pre><code>(2,3), (5,4), (9,6), (4,7), (8,1), (7,2)</code></pre>
<p>Query: Nearest neighbor of (9,2) Result: (8,1)</p>
</section>
</section>
<section id="how-it-works-plain-language-2" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-plain-language-2">How It Works (Plain Language)</h3>
<ol type="1">
<li><p>Build Tree</p>
<ul>
<li>Choose a splitting dimension (x, y, …)</li>
<li>Pick median point along that axis</li>
<li>Recursively build left/right subtrees</li>
</ul></li>
<li><p>Search</p>
<ul>
<li>Compare query coordinate along current axis</li>
<li>Recurse into the nearer subtree</li>
<li>Backtrack to check the other side if necessary (only if the hypersphere crosses boundary)</li>
</ul></li>
</ol>
<p>This pruning makes nearest-neighbor search efficient.</p>
<section id="example-2d-split" class="level4">
<h4 class="anchored" data-anchor-id="example-2d-split">Example (2D Split)</h4>
<pre><code>           (7,2)  [split x]
          /           \
    (5,4) [y]         (9,6) [y]
    /     \             /
 (2,3)  (4,7)       (8,1)</code></pre>
</section>
</section>
<section id="tiny-code-2d-example" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-2d-example">Tiny Code (2D Example)</h3>
<section id="python-69" class="level4">
<h4 class="anchored" data-anchor-id="python-69">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb274"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> math <span class="im">import</span> sqrt</span>
<span id="cb274-2"><a href="#cb274-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-3"><a href="#cb274-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Node:</span>
<span id="cb274-4"><a href="#cb274-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, point, axis):</span>
<span id="cb274-5"><a href="#cb274-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.point <span class="op">=</span> point</span>
<span id="cb274-6"><a href="#cb274-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.axis <span class="op">=</span> axis</span>
<span id="cb274-7"><a href="#cb274-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.left <span class="op">=</span> <span class="va">None</span></span>
<span id="cb274-8"><a href="#cb274-8" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.right <span class="op">=</span> <span class="va">None</span></span>
<span id="cb274-9"><a href="#cb274-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-10"><a href="#cb274-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> build_kdtree(points, depth<span class="op">=</span><span class="dv">0</span>):</span>
<span id="cb274-11"><a href="#cb274-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> points:</span>
<span id="cb274-12"><a href="#cb274-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb274-13"><a href="#cb274-13" aria-hidden="true" tabindex="-1"></a>    k <span class="op">=</span> <span class="bu">len</span>(points[<span class="dv">0</span>])</span>
<span id="cb274-14"><a href="#cb274-14" aria-hidden="true" tabindex="-1"></a>    axis <span class="op">=</span> depth <span class="op">%</span> k</span>
<span id="cb274-15"><a href="#cb274-15" aria-hidden="true" tabindex="-1"></a>    points.sort(key<span class="op">=</span><span class="kw">lambda</span> p: p[axis])</span>
<span id="cb274-16"><a href="#cb274-16" aria-hidden="true" tabindex="-1"></a>    mid <span class="op">=</span> <span class="bu">len</span>(points) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb274-17"><a href="#cb274-17" aria-hidden="true" tabindex="-1"></a>    node <span class="op">=</span> Node(points[mid], axis)</span>
<span id="cb274-18"><a href="#cb274-18" aria-hidden="true" tabindex="-1"></a>    node.left <span class="op">=</span> build_kdtree(points[:mid], depth <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb274-19"><a href="#cb274-19" aria-hidden="true" tabindex="-1"></a>    node.right <span class="op">=</span> build_kdtree(points[mid<span class="op">+</span><span class="dv">1</span>:], depth <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb274-20"><a href="#cb274-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> node</span>
<span id="cb274-21"><a href="#cb274-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-22"><a href="#cb274-22" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> distance2(a, b):</span>
<span id="cb274-23"><a href="#cb274-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span>((x <span class="op">-</span> y)  <span class="dv">2</span> <span class="cf">for</span> x, y <span class="kw">in</span> <span class="bu">zip</span>(a, b))</span>
<span id="cb274-24"><a href="#cb274-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-25"><a href="#cb274-25" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> nearest(root, target, best<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb274-26"><a href="#cb274-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> root <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb274-27"><a href="#cb274-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> best</span>
<span id="cb274-28"><a href="#cb274-28" aria-hidden="true" tabindex="-1"></a>    point <span class="op">=</span> root.point</span>
<span id="cb274-29"><a href="#cb274-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> best <span class="kw">is</span> <span class="va">None</span> <span class="kw">or</span> distance2(point, target) <span class="op">&lt;</span> distance2(best, target):</span>
<span id="cb274-30"><a href="#cb274-30" aria-hidden="true" tabindex="-1"></a>        best <span class="op">=</span> point</span>
<span id="cb274-31"><a href="#cb274-31" aria-hidden="true" tabindex="-1"></a>    axis <span class="op">=</span> root.axis</span>
<span id="cb274-32"><a href="#cb274-32" aria-hidden="true" tabindex="-1"></a>    next_branch <span class="op">=</span> root.left <span class="cf">if</span> target[axis] <span class="op">&lt;</span> point[axis] <span class="cf">else</span> root.right</span>
<span id="cb274-33"><a href="#cb274-33" aria-hidden="true" tabindex="-1"></a>    best <span class="op">=</span> nearest(next_branch, target, best)</span>
<span id="cb274-34"><a href="#cb274-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (target[axis] <span class="op">-</span> point[axis])  <span class="dv">2</span> <span class="op">&lt;</span> distance2(best, target):</span>
<span id="cb274-35"><a href="#cb274-35" aria-hidden="true" tabindex="-1"></a>        other <span class="op">=</span> root.right <span class="cf">if</span> next_branch <span class="op">==</span> root.left <span class="cf">else</span> root.left</span>
<span id="cb274-36"><a href="#cb274-36" aria-hidden="true" tabindex="-1"></a>        best <span class="op">=</span> nearest(other, target, best)</span>
<span id="cb274-37"><a href="#cb274-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> best</span>
<span id="cb274-38"><a href="#cb274-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-39"><a href="#cb274-39" aria-hidden="true" tabindex="-1"></a>points <span class="op">=</span> [(<span class="dv">2</span>,<span class="dv">3</span>),(<span class="dv">5</span>,<span class="dv">4</span>),(<span class="dv">9</span>,<span class="dv">6</span>),(<span class="dv">4</span>,<span class="dv">7</span>),(<span class="dv">8</span>,<span class="dv">1</span>),(<span class="dv">7</span>,<span class="dv">2</span>)]</span>
<span id="cb274-40"><a href="#cb274-40" aria-hidden="true" tabindex="-1"></a>tree <span class="op">=</span> build_kdtree(points)</span>
<span id="cb274-41"><a href="#cb274-41" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nearest(tree, (<span class="dv">9</span>,<span class="dv">2</span>)))  <span class="co"># (8,1)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>(8, 1)</code></pre>
</section>
<section id="c-2d-simplified" class="level4">
<h4 class="anchored" data-anchor-id="c-2d-simplified">C (2D Simplified)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb276"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb276-2"><a href="#cb276-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb276-3"><a href="#cb276-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb276-4"><a href="#cb276-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb276-5"><a href="#cb276-5" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> Node <span class="op">{</span></span>
<span id="cb276-6"><a href="#cb276-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> point<span class="op">[</span><span class="dv">2</span><span class="op">];</span></span>
<span id="cb276-7"><a href="#cb276-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> axis<span class="op">;</span></span>
<span id="cb276-8"><a href="#cb276-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Node <span class="op">*</span>left<span class="op">,</span> <span class="op">*</span>right<span class="op">;</span></span>
<span id="cb276-9"><a href="#cb276-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Node<span class="op">;</span></span>
<span id="cb276-10"><a href="#cb276-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb276-11"><a href="#cb276-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cmpx<span class="op">(</span><span class="dt">const</span> <span class="dt">void</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb276-12"><a href="#cb276-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span><span class="op">*</span> pa <span class="op">=</span> <span class="op">(</span><span class="dt">double</span><span class="op">*)</span>a<span class="op">;</span></span>
<span id="cb276-13"><a href="#cb276-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span><span class="op">*</span> pb <span class="op">=</span> <span class="op">(</span><span class="dt">double</span><span class="op">*)</span>b<span class="op">;</span></span>
<span id="cb276-14"><a href="#cb276-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>pa<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">&gt;</span> pb<span class="op">[</span><span class="dv">0</span><span class="op">])</span> <span class="op">-</span> <span class="op">(</span>pa<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">&lt;</span> pb<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb276-15"><a href="#cb276-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb276-16"><a href="#cb276-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb276-17"><a href="#cb276-17" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cmpy<span class="op">(</span><span class="dt">const</span> <span class="dt">void</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb276-18"><a href="#cb276-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span><span class="op">*</span> pa <span class="op">=</span> <span class="op">(</span><span class="dt">double</span><span class="op">*)</span>a<span class="op">;</span></span>
<span id="cb276-19"><a href="#cb276-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span><span class="op">*</span> pb <span class="op">=</span> <span class="op">(</span><span class="dt">double</span><span class="op">*)</span>b<span class="op">;</span></span>
<span id="cb276-20"><a href="#cb276-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>pa<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">&gt;</span> pb<span class="op">[</span><span class="dv">1</span><span class="op">])</span> <span class="op">-</span> <span class="op">(</span>pa<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">&lt;</span> pb<span class="op">[</span><span class="dv">1</span><span class="op">]);</span></span>
<span id="cb276-21"><a href="#cb276-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb276-22"><a href="#cb276-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb276-23"><a href="#cb276-23" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> dist2<span class="op">(</span><span class="dt">double</span> a<span class="op">[</span><span class="dv">2</span><span class="op">],</span> <span class="dt">double</span> b<span class="op">[</span><span class="dv">2</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb276-24"><a href="#cb276-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]-</span>b<span class="op">[</span><span class="dv">0</span><span class="op">])*(</span>a<span class="op">[</span><span class="dv">0</span><span class="op">]-</span>b<span class="op">[</span><span class="dv">0</span><span class="op">])</span> <span class="op">+</span> <span class="op">(</span>a<span class="op">[</span><span class="dv">1</span><span class="op">]-</span>b<span class="op">[</span><span class="dv">1</span><span class="op">])*(</span>a<span class="op">[</span><span class="dv">1</span><span class="op">]-</span>b<span class="op">[</span><span class="dv">1</span><span class="op">]);</span></span>
<span id="cb276-25"><a href="#cb276-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb276-26"><a href="#cb276-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb276-27"><a href="#cb276-27" aria-hidden="true" tabindex="-1"></a><span class="co">// Simplified build &amp; search omitted for brevity (tree construction similar to Python)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-84" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-84">Why It Matters</h3>
<ul>
<li><p>Efficient for spatial queries in 2D, 3D, etc.</p></li>
<li><p>Used in:</p>
<ul>
<li>Machine Learning (KNN classification)</li>
<li>Graphics (ray tracing, collision detection)</li>
<li>Robotics (path planning, SLAM)</li>
<li>Databases (multi-dimensional indexing)</li>
</ul></li>
</ul>
</section>
<section id="intuition" class="level3">
<h3 class="anchored" data-anchor-id="intuition">Intuition</h3>
<p>A KD-Tree is like playing “binary search” in multiple dimensions. Each split narrows down the search region.</p>
</section>
<section id="try-it-yourself-84" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-84">Try It Yourself</h3>
<ol type="1">
<li>Build a KD-Tree for points in 2D</li>
<li>Search nearest neighbor of (3,5)</li>
<li>Add 3D points, use modulo axis split</li>
<li>Visualize splits as alternating vertical/horizontal lines</li>
<li>Extend to k-NN (top-k closest)</li>
<li>Add radius query (points within r)</li>
<li>Compare speed to brute-force</li>
<li>Track backtrack count for pruning visualization</li>
<li>Try non-uniform data</li>
<li>Implement deletion (bonus)</li>
</ol>
</section>
<section id="test-cases-84" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-84">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Points</th>
<th>Query</th>
<th>Expected Nearest</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>(2,3),(5,4),(9,6),(4,7),(8,1),(7,2)</td>
<td>(9,2)</td>
<td>(8,1)</td>
</tr>
<tr class="even">
<td>(1,1),(3,3),(5,5)</td>
<td>(4,4)</td>
<td>(3,3)</td>
</tr>
<tr class="odd">
<td>(0,0),(10,10)</td>
<td>(7,8)</td>
<td>(10,10)</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-84" class="level3">
<h3 class="anchored" data-anchor-id="complexity-84">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Build</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Nearest Query</td>
<td>O(log n) average</td>
</tr>
<tr class="odd">
<td>Worst Case</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n)</td>
</tr>
</tbody>
</table>
<p>A KD-Tree slices space along dimensions, your go-to for fast nearest neighbor searches in multidimensional worlds.</p>
</section>
<section id="r-tree-query" class="level3">
<h3 class="anchored" data-anchor-id="r-tree-query">186 R-Tree Query</h3>
<p>An R-Tree is a hierarchical spatial index built for efficiently querying geometric objects (rectangles, polygons, circles) in 2D or higher dimensions. It’s like a B-Tree for rectangles, grouping nearby objects into bounding boxes and organizing them in a tree for fast spatial lookups.</p>
</section>
<section id="what-problem-are-we-solving-85" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-85">What Problem Are We Solving?</h3>
<p>We need to query spatial data efficiently:</p>
<ul>
<li>“Which rectangles overlap this area?”</li>
<li>“What points fall inside this region?”</li>
<li>“Which shapes intersect this polygon?”</li>
</ul>
<p>A naive approach checks every object (O(n)). An R-Tree reduces this to O(log n + k) using bounding-box hierarchy.</p>
<section id="example-84" class="level4">
<h4 class="anchored" data-anchor-id="example-84">Example</h4>
<p>Rectangles:</p>
<pre><code>A: [1,1,3,3]
B: [2,2,5,4]
C: [4,1,6,3]</code></pre>
<p>Query: <code>[2.5,2.5,4,4]</code> Overlaps: A, B</p>
</section>
</section>
<section id="how-it-works-plain-language-3" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-plain-language-3">How It Works (Plain Language)</h3>
<ol type="1">
<li>Store rectangles (or bounding boxes) as leaves.</li>
<li>Group nearby rectangles into Minimum Bounding Rectangles (MBRs).</li>
<li>Build hierarchy so each node’s box covers its children.</li>
<li>Query by recursively checking nodes whose boxes overlap the query.</li>
</ol>
<p>This spatial grouping allows skipping entire regions quickly.</p>
<section id="example-tree" class="level4">
<h4 class="anchored" data-anchor-id="example-tree">Example Tree</h4>
<pre><code>             [1,1,6,4]
            /         \
     [1,1,3,3]       [4,1,6,4]
       (A,B)            (C)</code></pre>
<p>Query <code>[2.5,2.5,4,4]</code>:</p>
<ul>
<li>Intersects left node → check A, B</li>
<li>Intersects right node partially → check C (no overlap)</li>
</ul>
</section>
</section>
<section id="tiny-code-2d-rectangles" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-2d-rectangles">Tiny Code (2D Rectangles)</h3>
<section id="python-70" class="level4">
<h4 class="anchored" data-anchor-id="python-70">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb279"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> overlap(a, b):</span>
<span id="cb279-2"><a href="#cb279-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">not</span> (a[<span class="dv">2</span>] <span class="op">&lt;</span> b[<span class="dv">0</span>] <span class="kw">or</span> a[<span class="dv">0</span>] <span class="op">&gt;</span> b[<span class="dv">2</span>] <span class="kw">or</span> a[<span class="dv">3</span>] <span class="op">&lt;</span> b[<span class="dv">1</span>] <span class="kw">or</span> a[<span class="dv">1</span>] <span class="op">&gt;</span> b[<span class="dv">3</span>])</span>
<span id="cb279-3"><a href="#cb279-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb279-4"><a href="#cb279-4" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> RTreeNode:</span>
<span id="cb279-5"><a href="#cb279-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, box, children<span class="op">=</span><span class="va">None</span>, is_leaf<span class="op">=</span><span class="va">False</span>):</span>
<span id="cb279-6"><a href="#cb279-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.box <span class="op">=</span> box  <span class="co"># [x1, y1, x2, y2]</span></span>
<span id="cb279-7"><a href="#cb279-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.children <span class="op">=</span> children <span class="kw">or</span> []</span>
<span id="cb279-8"><a href="#cb279-8" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.is_leaf <span class="op">=</span> is_leaf</span>
<span id="cb279-9"><a href="#cb279-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb279-10"><a href="#cb279-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> search_rtree(node, query):</span>
<span id="cb279-11"><a href="#cb279-11" aria-hidden="true" tabindex="-1"></a>    results <span class="op">=</span> []</span>
<span id="cb279-12"><a href="#cb279-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> overlap(node.box, query):</span>
<span id="cb279-13"><a href="#cb279-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> results</span>
<span id="cb279-14"><a href="#cb279-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> node.is_leaf:</span>
<span id="cb279-15"><a href="#cb279-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> child <span class="kw">in</span> node.children:</span>
<span id="cb279-16"><a href="#cb279-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> overlap(child.box, query):</span>
<span id="cb279-17"><a href="#cb279-17" aria-hidden="true" tabindex="-1"></a>                results.append(child.box)</span>
<span id="cb279-18"><a href="#cb279-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb279-19"><a href="#cb279-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> child <span class="kw">in</span> node.children:</span>
<span id="cb279-20"><a href="#cb279-20" aria-hidden="true" tabindex="-1"></a>            results.extend(search_rtree(child, query))</span>
<span id="cb279-21"><a href="#cb279-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> results</span>
<span id="cb279-22"><a href="#cb279-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb279-23"><a href="#cb279-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Example</span></span>
<span id="cb279-24"><a href="#cb279-24" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> RTreeNode([<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">3</span>], is_leaf<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb279-25"><a href="#cb279-25" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> RTreeNode([<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">4</span>], is_leaf<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb279-26"><a href="#cb279-26" aria-hidden="true" tabindex="-1"></a>C <span class="op">=</span> RTreeNode([<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">6</span>,<span class="dv">3</span>], is_leaf<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb279-27"><a href="#cb279-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb279-28"><a href="#cb279-28" aria-hidden="true" tabindex="-1"></a>left <span class="op">=</span> RTreeNode([<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">4</span>], [A,B], is_leaf<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb279-29"><a href="#cb279-29" aria-hidden="true" tabindex="-1"></a>right <span class="op">=</span> RTreeNode([<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">6</span>,<span class="dv">3</span>], [C], is_leaf<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb279-30"><a href="#cb279-30" aria-hidden="true" tabindex="-1"></a>root <span class="op">=</span> RTreeNode([<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">6</span>,<span class="dv">4</span>], [left, right])</span>
<span id="cb279-31"><a href="#cb279-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb279-32"><a href="#cb279-32" aria-hidden="true" tabindex="-1"></a>query <span class="op">=</span> [<span class="fl">2.5</span>,<span class="fl">2.5</span>,<span class="dv">4</span>,<span class="dv">4</span>]</span>
<span id="cb279-33"><a href="#cb279-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(search_rtree(root, query))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$[1, 1, 3, 3], [2, 2, 5, 4]]</code></pre>
</section>
<section id="c-simplified-query" class="level4">
<h4 class="anchored" data-anchor-id="c-simplified-query">C (Simplified Query)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb281"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb281-2"><a href="#cb281-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb281-3"><a href="#cb281-3" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> Box <span class="op">{</span></span>
<span id="cb281-4"><a href="#cb281-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> x1<span class="op">,</span> y1<span class="op">,</span> x2<span class="op">,</span> y2<span class="op">;</span></span>
<span id="cb281-5"><a href="#cb281-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Box<span class="op">;</span></span>
<span id="cb281-6"><a href="#cb281-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb281-7"><a href="#cb281-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> overlap<span class="op">(</span>Box a<span class="op">,</span> Box b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb281-8"><a href="#cb281-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">!(</span>a<span class="op">.</span>x2 <span class="op">&lt;</span> b<span class="op">.</span>x1 <span class="op">||</span> a<span class="op">.</span>x1 <span class="op">&gt;</span> b<span class="op">.</span>x2 <span class="op">||</span> a<span class="op">.</span>y2 <span class="op">&lt;</span> b<span class="op">.</span>y1 <span class="op">||</span> a<span class="op">.</span>y1 <span class="op">&gt;</span> b<span class="op">.</span>y2<span class="op">);</span></span>
<span id="cb281-9"><a href="#cb281-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb281-10"><a href="#cb281-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb281-11"><a href="#cb281-11" aria-hidden="true" tabindex="-1"></a><span class="co">// Example: Manual tree simulation omitted for brevity</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-85" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-85">Why It Matters</h3>
<ul>
<li>Ideal for geospatial databases, mapping, collision detection, and GIS.</li>
<li>Powers PostGIS, SQLite R*Tree module, spatial indexes.</li>
<li>Handles overlaps, containment, and range queries.</li>
</ul>
</section>
<section id="intuition-1" class="level3">
<h3 class="anchored" data-anchor-id="intuition-1">Intuition</h3>
<p>R-Trees work by bounding and grouping. Each node is a “container box”, if it doesn’t overlap the query, skip it entirely. This saves massive time in spatial datasets.</p>
</section>
<section id="try-it-yourself-85" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-85">Try It Yourself</h3>
<ol type="1">
<li>Represent 2D rectangles with <code>[x1,y1,x2,y2]</code>.</li>
<li>Build a 2-level tree (group nearby).</li>
<li>Query overlap region.</li>
<li>Extend to 3D bounding boxes.</li>
<li>Implement insertion using least expansion rule.</li>
<li>Add R*-Tree optimization (reinsert on overflow).</li>
<li>Compare with QuadTree (grid-based).</li>
<li>Visualize bounding boxes per level.</li>
<li>Implement nearest neighbor search.</li>
<li>Try dataset with 10k rectangles, measure speedup.</li>
</ol>
</section>
<section id="test-cases-85" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-85">Test Cases</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 53%">
<col style="width: 20%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th>Rectangles</th>
<th>Query</th>
<th>Expected Overlaps</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A[1,1,3,3], B[2,2,5,4], C[4,1,6,3]</td>
<td>[2.5,2.5,4,4]</td>
<td>A, B</td>
</tr>
<tr class="even">
<td>A[0,0,2,2], B[3,3,4,4]</td>
<td>[1,1,3,3]</td>
<td>A</td>
</tr>
<tr class="odd">
<td>A[1,1,5,5], B[6,6,8,8]</td>
<td>[7,7,9,9]</td>
<td>B</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-85" class="level3">
<h3 class="anchored" data-anchor-id="complexity-85">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Build</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Query</td>
<td>O(log n + k)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(n)</td>
</tr>
</tbody>
</table>
<p>An R-Tree is your geometric librarian, organizing space into nested rectangles so you can query complex regions fast and clean.</p>
</section>
<section id="range-minimum-query-rmq-sparse-table-approach" class="level3">
<h3 class="anchored" data-anchor-id="range-minimum-query-rmq-sparse-table-approach">187 Range Minimum Query (RMQ), Sparse Table Approach</h3>
<p>A Range Minimum Query (RMQ) answers questions like:</p>
<blockquote class="blockquote">
<p>“What’s the smallest element between indices <em>L</em> and <em>R</em>?”</p>
</blockquote>
<p>It’s a core subroutine in many algorithms, from LCA (Lowest Common Ancestor) to scheduling, histograms, and segment analysis. The Sparse Table method precomputes answers so each query is O(1) after O(n log n) preprocessing.</p>
</section>
<section id="what-problem-are-we-solving-86" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-86">What Problem Are We Solving?</h3>
<p>Given an array <code>arr[0..n-1]</code>, we want to answer:</p>
<pre><code>RMQ(L, R) = min(arr[L], arr[L+1], …, arr[R])</code></pre>
<p>Efficiently, for multiple static queries (no updates).</p>
<p>Naive approach: O(R-L) per query Sparse Table: O(1) per query after preprocessing.</p>
<section id="example-85" class="level4">
<h4 class="anchored" data-anchor-id="example-85">Example</h4>
<p>Array: <code>[2, 5, 1, 4, 9, 3]</code></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Query</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>RMQ(1, 3)</td>
<td>min(5,1,4) = 1</td>
</tr>
<tr class="even">
<td>RMQ(2, 5)</td>
<td>min(1,4,9,3) = 1</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="how-it-works-plain-language-4" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-plain-language-4">How It Works (Plain Language)</h3>
<ol type="1">
<li><p>Precompute answers for all intervals of length 2^k.</p></li>
<li><p>To answer RMQ(L,R):</p>
<ul>
<li><p>Let <code>len = R-L+1</code></p></li>
<li><p>Let <code>k = floor(log2(len))</code></p></li>
<li><p>Combine two overlapping intervals of size <code>2^k</code>:</p>
<pre><code>RMQ(L,R) = min(st[L][k], st[R - 2^k + 1][k])</code></pre></li>
</ul></li>
</ol>
<p>No updates, so data stays static and queries stay O(1).</p>
<section id="sparse-table-example" class="level4">
<h4 class="anchored" data-anchor-id="sparse-table-example">Sparse Table Example</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>i</th>
<th>arr[i]</th>
<th>st[i][0]</th>
<th>st[i][1]</th>
<th>st[i][2]</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>2</td>
<td>2</td>
<td>min(2,5)=2</td>
<td>min(2,1)=1</td>
</tr>
<tr class="even">
<td>1</td>
<td>5</td>
<td>5</td>
<td>min(5,1)=1</td>
<td>min(5,4)=1</td>
</tr>
<tr class="odd">
<td>2</td>
<td>1</td>
<td>1</td>
<td>min(1,4)=1</td>
<td>min(1,9)=1</td>
</tr>
<tr class="even">
<td>3</td>
<td>4</td>
<td>4</td>
<td>min(4,9)=4</td>
<td>min(4,3)=3</td>
</tr>
<tr class="odd">
<td>4</td>
<td>9</td>
<td>9</td>
<td>min(9,3)=3</td>
<td>,</td>
</tr>
<tr class="even">
<td>5</td>
<td>3</td>
<td>3</td>
<td>,</td>
<td>,</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tiny-code" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code">Tiny Code</h3>
<section id="python-71" class="level4">
<h4 class="anchored" data-anchor-id="python-71">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb284"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb284-1"><a href="#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb284-2"><a href="#cb284-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-3"><a href="#cb284-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> build_sparse_table(arr):</span>
<span id="cb284-4"><a href="#cb284-4" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb284-5"><a href="#cb284-5" aria-hidden="true" tabindex="-1"></a>    K <span class="op">=</span> math.floor(math.log2(n)) <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb284-6"><a href="#cb284-6" aria-hidden="true" tabindex="-1"></a>    st <span class="op">=</span> [[<span class="dv">0</span>]<span class="op">*</span>K <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(n)]</span>
<span id="cb284-7"><a href="#cb284-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-8"><a href="#cb284-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb284-9"><a href="#cb284-9" aria-hidden="true" tabindex="-1"></a>        st[i][<span class="dv">0</span>] <span class="op">=</span> arr[i]</span>
<span id="cb284-10"><a href="#cb284-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-11"><a href="#cb284-11" aria-hidden="true" tabindex="-1"></a>    j <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb284-12"><a href="#cb284-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> (<span class="dv">1</span> <span class="op">&lt;&lt;</span> j) <span class="op">&lt;=</span> n:</span>
<span id="cb284-13"><a href="#cb284-13" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb284-14"><a href="#cb284-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> i <span class="op">+</span> (<span class="dv">1</span> <span class="op">&lt;&lt;</span> j) <span class="op">&lt;=</span> n:</span>
<span id="cb284-15"><a href="#cb284-15" aria-hidden="true" tabindex="-1"></a>            st[i][j] <span class="op">=</span> <span class="bu">min</span>(st[i][j<span class="op">-</span><span class="dv">1</span>], st[i <span class="op">+</span> (<span class="dv">1</span> <span class="op">&lt;&lt;</span> (j<span class="op">-</span><span class="dv">1</span>))][j<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb284-16"><a href="#cb284-16" aria-hidden="true" tabindex="-1"></a>            i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb284-17"><a href="#cb284-17" aria-hidden="true" tabindex="-1"></a>        j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb284-18"><a href="#cb284-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> st</span>
<span id="cb284-19"><a href="#cb284-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-20"><a href="#cb284-20" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> query(st, L, R):</span>
<span id="cb284-21"><a href="#cb284-21" aria-hidden="true" tabindex="-1"></a>    j <span class="op">=</span> <span class="bu">int</span>(math.log2(R <span class="op">-</span> L <span class="op">+</span> <span class="dv">1</span>))</span>
<span id="cb284-22"><a href="#cb284-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">min</span>(st[L][j], st[R <span class="op">-</span> (<span class="dv">1</span> <span class="op">&lt;&lt;</span> j) <span class="op">+</span> <span class="dv">1</span>][j])</span>
<span id="cb284-23"><a href="#cb284-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-24"><a href="#cb284-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Example</span></span>
<span id="cb284-25"><a href="#cb284-25" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">9</span>, <span class="dv">3</span>]</span>
<span id="cb284-26"><a href="#cb284-26" aria-hidden="true" tabindex="-1"></a>st <span class="op">=</span> build_sparse_table(arr)</span>
<span id="cb284-27"><a href="#cb284-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(query(st, <span class="dv">1</span>, <span class="dv">3</span>))  <span class="co"># 1</span></span>
<span id="cb284-28"><a href="#cb284-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(query(st, <span class="dv">2</span>, <span class="dv">5</span>))  <span class="co"># 1</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>1
1</code></pre>
</section>
<section id="c-63" class="level4">
<h4 class="anchored" data-anchor-id="c-63">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb286"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb286-2"><a href="#cb286-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb286-3"><a href="#cb286-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb286-4"><a href="#cb286-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAXN </span><span class="dv">100</span></span>
<span id="cb286-5"><a href="#cb286-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define LOG </span><span class="dv">17</span></span>
<span id="cb286-6"><a href="#cb286-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb286-7"><a href="#cb286-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> st<span class="op">[</span>MAXN<span class="op">][</span>LOG<span class="op">];</span></span>
<span id="cb286-8"><a href="#cb286-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arr<span class="op">[</span>MAXN<span class="op">];</span></span>
<span id="cb286-9"><a href="#cb286-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> n<span class="op">;</span></span>
<span id="cb286-10"><a href="#cb286-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb286-11"><a href="#cb286-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> build<span class="op">()</span> <span class="op">{</span></span>
<span id="cb286-12"><a href="#cb286-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb286-13"><a href="#cb286-13" aria-hidden="true" tabindex="-1"></a>        st<span class="op">[</span>i<span class="op">][</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb286-14"><a href="#cb286-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> j<span class="op">)</span> <span class="op">&lt;=</span> n<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb286-15"><a href="#cb286-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">+</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> j<span class="op">)</span> <span class="op">&lt;=</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb286-16"><a href="#cb286-16" aria-hidden="true" tabindex="-1"></a>            st<span class="op">[</span>i<span class="op">][</span>j<span class="op">]</span> <span class="op">=</span> <span class="op">(</span>st<span class="op">[</span>i<span class="op">][</span>j<span class="op">-</span><span class="dv">1</span><span class="op">]</span> <span class="op">&lt;</span> st<span class="op">[</span>i <span class="op">+</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> <span class="op">(</span>j<span class="op">-</span><span class="dv">1</span><span class="op">))][</span>j<span class="op">-</span><span class="dv">1</span><span class="op">])</span> </span>
<span id="cb286-17"><a href="#cb286-17" aria-hidden="true" tabindex="-1"></a>                       <span class="op">?</span> st<span class="op">[</span>i<span class="op">][</span>j<span class="op">-</span><span class="dv">1</span><span class="op">]</span> </span>
<span id="cb286-18"><a href="#cb286-18" aria-hidden="true" tabindex="-1"></a>                       <span class="op">:</span> st<span class="op">[</span>i <span class="op">+</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> <span class="op">(</span>j<span class="op">-</span><span class="dv">1</span><span class="op">))][</span>j<span class="op">-</span><span class="dv">1</span><span class="op">];</span></span>
<span id="cb286-19"><a href="#cb286-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb286-20"><a href="#cb286-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb286-21"><a href="#cb286-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb286-22"><a href="#cb286-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb286-23"><a href="#cb286-23" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> query<span class="op">(</span><span class="dt">int</span> L<span class="op">,</span> <span class="dt">int</span> R<span class="op">)</span> <span class="op">{</span></span>
<span id="cb286-24"><a href="#cb286-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> j <span class="op">=</span> log2<span class="op">(</span>R <span class="op">-</span> L <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb286-25"><a href="#cb286-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> st<span class="op">[</span>L<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb286-26"><a href="#cb286-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> right <span class="op">=</span> st<span class="op">[</span>R <span class="op">-</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> j<span class="op">)</span> <span class="op">+</span> <span class="dv">1</span><span class="op">][</span>j<span class="op">];</span></span>
<span id="cb286-27"><a href="#cb286-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> left <span class="op">&lt;</span> right <span class="op">?</span> left <span class="op">:</span> right<span class="op">;</span></span>
<span id="cb286-28"><a href="#cb286-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb286-29"><a href="#cb286-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb286-30"><a href="#cb286-30" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb286-31"><a href="#cb286-31" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="dv">6</span><span class="op">;</span></span>
<span id="cb286-32"><a href="#cb286-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr_temp<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">2</span><span class="op">,</span><span class="dv">5</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">9</span><span class="op">,</span><span class="dv">3</span><span class="op">};</span></span>
<span id="cb286-33"><a href="#cb286-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr_temp<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb286-34"><a href="#cb286-34" aria-hidden="true" tabindex="-1"></a>    build<span class="op">();</span></span>
<span id="cb286-35"><a href="#cb286-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"RMQ(1,3) = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> query<span class="op">(</span><span class="dv">1</span><span class="op">,</span><span class="dv">3</span><span class="op">));</span> <span class="co">// 1</span></span>
<span id="cb286-36"><a href="#cb286-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"RMQ(2,5) = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> query<span class="op">(</span><span class="dv">2</span><span class="op">,</span><span class="dv">5</span><span class="op">));</span> <span class="co">// 1</span></span>
<span id="cb286-37"><a href="#cb286-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>RMQ(1,3) = 1  
RMQ(2,5) = 1</code></pre>
</section>
</section>
<section id="why-it-matters-86" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-86">Why It Matters</h3>
<ul>
<li><p>Instant queries after precomputation</p></li>
<li><p>Crucial for:</p>
<ul>
<li>Segment analysis (min, max)</li>
<li>LCA in trees</li>
<li>Sparse range data</li>
<li>Static arrays (no updates)</li>
</ul></li>
<li><p>Perfect when array does not change frequently.</p></li>
</ul>
</section>
<section id="intuition-2" class="level3">
<h3 class="anchored" data-anchor-id="intuition-2">Intuition</h3>
<p>Each table entry <code>st[i][k]</code> stores the minimum of range <code>[i, i + 2^k - 1]</code>. Queries merge two overlapping intervals that cover <code>[L,R]</code>.</p>
</section>
<section id="try-it-yourself-86" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-86">Try It Yourself</h3>
<ol type="1">
<li>Build table for <code>[1,3,2,7,9,11,3,5,6]</code></li>
<li>Query RMQ(2,6) and RMQ(4,8)</li>
<li>Modify code to compute Range Max Query</li>
<li>Visualize overlapping intervals for query</li>
<li>Compare with Segment Tree version</li>
<li>Add precomputed log[] for faster lookup</li>
<li>Handle 1-based vs 0-based indices carefully</li>
<li>Practice on random arrays</li>
<li>Compare preprocessing time with naive</li>
<li>Use to solve LCA using Euler Tour</li>
</ol>
</section>
<section id="test-cases-86" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-86">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Array</th>
<th>Query</th>
<th>Expected</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[2,5,1,4,9,3]</td>
<td>RMQ(1,3)</td>
<td>1</td>
</tr>
<tr class="even">
<td>[2,5,1,4,9,3]</td>
<td>RMQ(2,5)</td>
<td>1</td>
</tr>
<tr class="odd">
<td>[1,2,3,4]</td>
<td>RMQ(0,3)</td>
<td>1</td>
</tr>
<tr class="even">
<td>[7,6,5,4,3]</td>
<td>RMQ(1,4)</td>
<td>3</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-86" class="level3">
<h3 class="anchored" data-anchor-id="complexity-86">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Preprocess</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Query</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(n log n)</td>
</tr>
</tbody>
</table>
<p>A Sparse Table turns repeated queries into instant lookups, your go-to tool when arrays are static and speed is king.</p>
</section>
<section id="mos-algorithm" class="level3">
<h3 class="anchored" data-anchor-id="mos-algorithm">188 Mo’s Algorithm</h3>
<p>Mo’s Algorithm is a clever offline technique for answering range queries on static arrays in approximately O((n + q)√n) time. It’s ideal when you have many queries like sum, distinct count, frequency, etc., but no updates. Instead of recomputing each query, Mo’s algorithm reuses results smartly by moving the range endpoints efficiently.</p>
</section>
<section id="what-problem-are-we-solving-87" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-87">What Problem Are We Solving?</h3>
<p>We want to answer multiple range queries efficiently:</p>
<blockquote class="blockquote">
<p>Given an array <code>arr[0..n-1]</code> and <code>q</code> queries <code>[L, R]</code>, compute something like sum, count distinct, etc., for each range.</p>
</blockquote>
<p>A naive approach is O(n) per query → O(nq) total. Mo’s algorithm cleverly orders queries to achieve O((n + q)√n) total time.</p>
<section id="example-86" class="level4">
<h4 class="anchored" data-anchor-id="example-86">Example</h4>
<p>Array: <code>[1, 2, 1, 3, 4, 2, 3]</code> Queries:</p>
<ol type="1">
<li><code>[0, 4]</code> → distinct = 4</li>
<li><code>[1, 3]</code> → distinct = 3</li>
<li><code>[2, 4]</code> → distinct = 3</li>
</ol>
</section>
</section>
<section id="how-it-works-plain-language-5" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-plain-language-5">How It Works (Plain Language)</h3>
<ol type="1">
<li><p>Divide array into blocks of size <code>√n</code>.</p></li>
<li><p>Sort queries by:</p>
<ul>
<li>Block of L</li>
<li>R (within block)</li>
</ul></li>
<li><p>Maintain a sliding window <code>[currL, currR)</code>:</p>
<ul>
<li>Move endpoints left/right step-by-step</li>
<li>Update the answer incrementally</li>
</ul></li>
<li><p>Store results per query index.</p></li>
</ol>
<p>The sorting ensures minimal movement between consecutive queries.</p>
<section id="example-87" class="level4">
<h4 class="anchored" data-anchor-id="example-87">Example</h4>
<p>If √n = 3, queries sorted by block:</p>
<pre><code>Block 0: [0,4], [1,3]
Block 1: [2,4]</code></pre>
<p>You move pointers minimally:</p>
<ul>
<li>From [0,4] → [1,3] → [2,4]</li>
<li>Reusing much of previous computation.</li>
</ul>
</section>
</section>
<section id="tiny-code-distinct-count-example" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-distinct-count-example">Tiny Code (Distinct Count Example)</h3>
<section id="python-72" class="level4">
<h4 class="anchored" data-anchor-id="python-72">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb289"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb289-2"><a href="#cb289-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-3"><a href="#cb289-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mos_algorithm(arr, queries):</span>
<span id="cb289-4"><a href="#cb289-4" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb289-5"><a href="#cb289-5" aria-hidden="true" tabindex="-1"></a>    q <span class="op">=</span> <span class="bu">len</span>(queries)</span>
<span id="cb289-6"><a href="#cb289-6" aria-hidden="true" tabindex="-1"></a>    block_size <span class="op">=</span> <span class="bu">int</span>(math.sqrt(n))</span>
<span id="cb289-7"><a href="#cb289-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-8"><a href="#cb289-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sort queries</span></span>
<span id="cb289-9"><a href="#cb289-9" aria-hidden="true" tabindex="-1"></a>    queries <span class="op">=</span> <span class="bu">sorted</span>(<span class="bu">enumerate</span>(queries), key<span class="op">=</span><span class="kw">lambda</span> x: (x[<span class="dv">1</span>][<span class="dv">0</span>] <span class="op">//</span> block_size, x[<span class="dv">1</span>][<span class="dv">1</span>]))</span>
<span id="cb289-10"><a href="#cb289-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-11"><a href="#cb289-11" aria-hidden="true" tabindex="-1"></a>    freq <span class="op">=</span> {}</span>
<span id="cb289-12"><a href="#cb289-12" aria-hidden="true" tabindex="-1"></a>    currL, currR <span class="op">=</span> <span class="dv">0</span>, <span class="dv">0</span></span>
<span id="cb289-13"><a href="#cb289-13" aria-hidden="true" tabindex="-1"></a>    curr_ans <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb289-14"><a href="#cb289-14" aria-hidden="true" tabindex="-1"></a>    answers <span class="op">=</span> [<span class="dv">0</span>]<span class="op">*</span>q</span>
<span id="cb289-15"><a href="#cb289-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-16"><a href="#cb289-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> add(x):</span>
<span id="cb289-17"><a href="#cb289-17" aria-hidden="true" tabindex="-1"></a>        <span class="kw">nonlocal</span> curr_ans</span>
<span id="cb289-18"><a href="#cb289-18" aria-hidden="true" tabindex="-1"></a>        freq[x] <span class="op">=</span> freq.get(x, <span class="dv">0</span>) <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb289-19"><a href="#cb289-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> freq[x] <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb289-20"><a href="#cb289-20" aria-hidden="true" tabindex="-1"></a>            curr_ans <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb289-21"><a href="#cb289-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-22"><a href="#cb289-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> remove(x):</span>
<span id="cb289-23"><a href="#cb289-23" aria-hidden="true" tabindex="-1"></a>        <span class="kw">nonlocal</span> curr_ans</span>
<span id="cb289-24"><a href="#cb289-24" aria-hidden="true" tabindex="-1"></a>        freq[x] <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb289-25"><a href="#cb289-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> freq[x] <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb289-26"><a href="#cb289-26" aria-hidden="true" tabindex="-1"></a>            curr_ans <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb289-27"><a href="#cb289-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-28"><a href="#cb289-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> idx, (L, R) <span class="kw">in</span> queries:</span>
<span id="cb289-29"><a href="#cb289-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> currL <span class="op">&gt;</span> L:</span>
<span id="cb289-30"><a href="#cb289-30" aria-hidden="true" tabindex="-1"></a>            currL <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb289-31"><a href="#cb289-31" aria-hidden="true" tabindex="-1"></a>            add(arr[currL])</span>
<span id="cb289-32"><a href="#cb289-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> currR <span class="op">&lt;=</span> R:</span>
<span id="cb289-33"><a href="#cb289-33" aria-hidden="true" tabindex="-1"></a>            add(arr[currR])</span>
<span id="cb289-34"><a href="#cb289-34" aria-hidden="true" tabindex="-1"></a>            currR <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb289-35"><a href="#cb289-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> currL <span class="op">&lt;</span> L:</span>
<span id="cb289-36"><a href="#cb289-36" aria-hidden="true" tabindex="-1"></a>            remove(arr[currL])</span>
<span id="cb289-37"><a href="#cb289-37" aria-hidden="true" tabindex="-1"></a>            currL <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb289-38"><a href="#cb289-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> currR <span class="op">&gt;</span> R <span class="op">+</span> <span class="dv">1</span>:</span>
<span id="cb289-39"><a href="#cb289-39" aria-hidden="true" tabindex="-1"></a>            currR <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb289-40"><a href="#cb289-40" aria-hidden="true" tabindex="-1"></a>            remove(arr[currR])</span>
<span id="cb289-41"><a href="#cb289-41" aria-hidden="true" tabindex="-1"></a>        answers[idx] <span class="op">=</span> curr_ans</span>
<span id="cb289-42"><a href="#cb289-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-43"><a href="#cb289-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> answers</span>
<span id="cb289-44"><a href="#cb289-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-45"><a href="#cb289-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Example</span></span>
<span id="cb289-46"><a href="#cb289-46" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb289-47"><a href="#cb289-47" aria-hidden="true" tabindex="-1"></a>queries <span class="op">=</span> [(<span class="dv">0</span>,<span class="dv">4</span>), (<span class="dv">1</span>,<span class="dv">3</span>), (<span class="dv">2</span>,<span class="dv">4</span>)]</span>
<span id="cb289-48"><a href="#cb289-48" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mos_algorithm(arr, queries))  <span class="co"># [4,3,3]</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>$$4, 3, 3]</code></pre>
</section>
<section id="c-structure-and-idea" class="level4">
<h4 class="anchored" data-anchor-id="c-structure-and-idea">C (Structure and Idea)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb291"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb291-2"><a href="#cb291-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb291-3"><a href="#cb291-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb291-4"><a href="#cb291-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-5"><a href="#cb291-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAXN </span><span class="dv">100000</span></span>
<span id="cb291-6"><a href="#cb291-6" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAXQ </span><span class="dv">100000</span></span>
<span id="cb291-7"><a href="#cb291-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-8"><a href="#cb291-8" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span> <span class="dt">int</span> L<span class="op">,</span> R<span class="op">,</span> idx<span class="op">;</span> <span class="op">}</span> Query<span class="op">;</span></span>
<span id="cb291-9"><a href="#cb291-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-10"><a href="#cb291-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arr<span class="op">[</span>MAXN<span class="op">],</span> ans<span class="op">[</span>MAXQ<span class="op">],</span> freq<span class="op">[</span><span class="dv">1000001</span><span class="op">];</span></span>
<span id="cb291-11"><a href="#cb291-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> curr_ans <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> block<span class="op">;</span></span>
<span id="cb291-12"><a href="#cb291-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-13"><a href="#cb291-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cmp<span class="op">(</span><span class="dt">const</span> <span class="dt">void</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb291-14"><a href="#cb291-14" aria-hidden="true" tabindex="-1"></a>    Query <span class="op">*</span>x <span class="op">=</span> <span class="op">(</span>Query<span class="op">*)</span>a<span class="op">,</span> <span class="op">*</span>y <span class="op">=</span> <span class="op">(</span>Query<span class="op">*)</span>b<span class="op">;</span></span>
<span id="cb291-15"><a href="#cb291-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>x<span class="op">-&gt;</span>L <span class="op">/</span> block <span class="op">!=</span> y<span class="op">-&gt;</span>L <span class="op">/</span> block<span class="op">)</span> <span class="cf">return</span> x<span class="op">-&gt;</span>L <span class="op">/</span> block <span class="op">-</span> y<span class="op">-&gt;</span>L <span class="op">/</span> block<span class="op">;</span></span>
<span id="cb291-16"><a href="#cb291-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x<span class="op">-&gt;</span>R <span class="op">-</span> y<span class="op">-&gt;</span>R<span class="op">;</span></span>
<span id="cb291-17"><a href="#cb291-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb291-18"><a href="#cb291-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-19"><a href="#cb291-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> add<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">if</span> <span class="op">(++</span>freq<span class="op">[</span>x<span class="op">]</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> curr_ans<span class="op">++;</span> <span class="op">}</span></span>
<span id="cb291-20"><a href="#cb291-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> remove_<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">if</span> <span class="op">(--</span>freq<span class="op">[</span>x<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> curr_ans<span class="op">--;</span> <span class="op">}</span></span>
<span id="cb291-21"><a href="#cb291-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-22"><a href="#cb291-22" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb291-23"><a href="#cb291-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="dv">7</span><span class="op">,</span> q <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb291-24"><a href="#cb291-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr_<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">};</span></span>
<span id="cb291-25"><a href="#cb291-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> arr_<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb291-26"><a href="#cb291-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-27"><a href="#cb291-27" aria-hidden="true" tabindex="-1"></a>    Query queries<span class="op">[]</span> <span class="op">=</span> <span class="op">{{</span><span class="dv">0</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">0</span><span class="op">},{</span><span class="dv">1</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">1</span><span class="op">},{</span><span class="dv">2</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">2</span><span class="op">}};</span></span>
<span id="cb291-28"><a href="#cb291-28" aria-hidden="true" tabindex="-1"></a>    block <span class="op">=</span> sqrt<span class="op">(</span>n<span class="op">);</span></span>
<span id="cb291-29"><a href="#cb291-29" aria-hidden="true" tabindex="-1"></a>    qsort<span class="op">(</span>queries<span class="op">,</span> q<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>Query<span class="op">),</span> cmp<span class="op">);</span></span>
<span id="cb291-30"><a href="#cb291-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-31"><a href="#cb291-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> currL <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> currR <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb291-32"><a href="#cb291-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> q<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb291-33"><a href="#cb291-33" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> L <span class="op">=</span> queries<span class="op">[</span>i<span class="op">].</span>L<span class="op">,</span> R <span class="op">=</span> queries<span class="op">[</span>i<span class="op">].</span>R<span class="op">;</span></span>
<span id="cb291-34"><a href="#cb291-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>currL <span class="op">&gt;</span> L<span class="op">)</span> add<span class="op">(</span>arr<span class="op">[--</span>currL<span class="op">]);</span></span>
<span id="cb291-35"><a href="#cb291-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>currR <span class="op">&lt;=</span> R<span class="op">)</span> add<span class="op">(</span>arr<span class="op">[</span>currR<span class="op">++]);</span></span>
<span id="cb291-36"><a href="#cb291-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>currL <span class="op">&lt;</span> L<span class="op">)</span> remove_<span class="op">(</span>arr<span class="op">[</span>currL<span class="op">++]);</span></span>
<span id="cb291-37"><a href="#cb291-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>currR <span class="op">&gt;</span> R<span class="op">+</span><span class="dv">1</span><span class="op">)</span> remove_<span class="op">(</span>arr<span class="op">[--</span>currR<span class="op">]);</span></span>
<span id="cb291-38"><a href="#cb291-38" aria-hidden="true" tabindex="-1"></a>        ans<span class="op">[</span>queries<span class="op">[</span>i<span class="op">].</span>idx<span class="op">]</span> <span class="op">=</span> curr_ans<span class="op">;</span></span>
<span id="cb291-39"><a href="#cb291-39" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb291-40"><a href="#cb291-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-41"><a href="#cb291-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> q<span class="op">;</span> i<span class="op">++)</span> printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> "</span><span class="op">,</span> ans<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb291-42"><a href="#cb291-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>4 3 3</code></pre>
</section>
</section>
<section id="why-it-matters-87" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-87">Why It Matters</h3>
<ul>
<li><p>Converts many range queries into near-linear total time</p></li>
<li><p>Ideal for:</p>
<ul>
<li>Sum / Count / Frequency queries</li>
<li>Distinct elements</li>
<li>GCD, XOR, etc. with associative properties</li>
</ul></li>
<li><p>Works on static arrays (no updates)</p></li>
</ul>
</section>
<section id="intuition-3" class="level3">
<h3 class="anchored" data-anchor-id="intuition-3">Intuition</h3>
<p>Mo’s Algorithm is like sorting your errands by location. By visiting nearby “blocks” first, you minimize travel time. Here, “travel” = pointer movement.</p>
</section>
<section id="try-it-yourself-87" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-87">Try It Yourself</h3>
<ol type="1">
<li>Run on <code>[1,2,3,4,5]</code> with queries <code>(0,2),(1,4),(2,4)</code></li>
<li>Change to sum instead of distinct count</li>
<li>Visualize pointer movement</li>
<li>Experiment with block size variations</li>
<li>Add offline query index tracking</li>
<li>Try sqrt decomposition vs Mo’s</li>
<li>Count frequency of max element per range</li>
<li>Mix different query types (still offline)</li>
<li>Add precomputed sqrt(n) block grouping</li>
<li>Use in competitive programming problems</li>
</ol>
</section>
<section id="test-cases-87" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-87">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Array</th>
<th>Queries</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[1,2,1,3,4,2,3]</td>
<td>(0,4),(1,3),(2,4)</td>
<td>[4,3,3]</td>
</tr>
<tr class="even">
<td>[1,1,1,1]</td>
<td>(0,3),(1,2)</td>
<td>[1,1]</td>
</tr>
<tr class="odd">
<td>[1,2,3,4,5]</td>
<td>(0,2),(2,4)</td>
<td>[3,3]</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-87" class="level3">
<h3 class="anchored" data-anchor-id="complexity-87">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Pre-sort Queries</td>
<td>O(q log q)</td>
</tr>
<tr class="even">
<td>Processing</td>
<td>O((n + q)√n)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(n)</td>
</tr>
</tbody>
</table>
<p>Mo’s Algorithm is your range-query workhorse, smartly ordered, block-based, and blazingly efficient for static datasets.</p>
</section>
<section id="sweep-line-range-search" class="level3">
<h3 class="anchored" data-anchor-id="sweep-line-range-search">189 Sweep Line Range Search</h3>
<p>A Sweep Line Algorithm is a geometric technique that processes events in a sorted order along one dimension, typically the x-axis, to solve range, interval, and overlap problems efficiently. Think of it like dragging a vertical line across a 2D plane and updating active intervals as you go.</p>
</section>
<section id="what-problem-are-we-solving-88" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-88">What Problem Are We Solving?</h3>
<p>We want to efficiently find:</p>
<ul>
<li>Which intervals overlap a point</li>
<li>Which rectangles intersect</li>
<li>How many shapes cover a region</li>
</ul>
<p>A brute-force check for all pairs is O(n²). A Sweep Line reduces it to O(n log n) by sorting and processing events incrementally.</p>
<section id="example-88" class="level4">
<h4 class="anchored" data-anchor-id="example-88">Example</h4>
<p>Rectangles:</p>
<pre><code>R1: [1, 3], R2: [2, 5], R3: [4, 6]</code></pre>
<p>Events (sorted by x):</p>
<pre><code>x = 1: R1 starts  
x = 2: R2 starts  
x = 3: R1 ends  
x = 4: R3 starts  
x = 5: R2 ends  
x = 6: R3 ends</code></pre>
<p>The active set changes as the line sweeps → track overlaps dynamically.</p>
</section>
</section>
<section id="how-it-works-plain-language-6" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-plain-language-6">How It Works (Plain Language)</h3>
<ol type="1">
<li><p>Convert objects into events</p>
<ul>
<li>Each interval/rectangle generates start and end events.</li>
</ul></li>
<li><p>Sort all events by coordinate (x or y).</p></li>
<li><p>Sweep through events:</p>
<ul>
<li>On start, add object to active set.</li>
<li>On end, remove object.</li>
<li>At each step, query active set for intersections, counts, etc.</li>
</ul></li>
<li><p>Use balanced tree / set for active range maintenance.</p></li>
</ol>
<section id="example-walkthrough-1" class="level4">
<h4 class="anchored" data-anchor-id="example-walkthrough-1">Example Walkthrough</h4>
<p>Intervals: <code>[1,3], [2,5], [4,6]</code> Events:</p>
<pre><code>(1, start), (2, start), (3, end), (4, start), (5, end), (6, end)</code></pre>
<p>Step-by-step:</p>
<ul>
<li>At 1: add [1,3]</li>
<li>At 2: add [2,5], overlap detected (1,3) ∩ (2,5)</li>
<li>At 3: remove [1,3]</li>
<li>At 4: add [4,6], overlap detected (2,5) ∩ (4,6)</li>
<li>At 5: remove [2,5]</li>
<li>At 6: remove [4,6]</li>
</ul>
<p>Result: 2 overlapping pairs</p>
</section>
</section>
<section id="tiny-code-interval-overlaps" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-interval-overlaps">Tiny Code (Interval Overlaps)</h3>
<section id="python-73" class="level4">
<h4 class="anchored" data-anchor-id="python-73">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb296"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb296-1"><a href="#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sweep_line_intervals(intervals):</span>
<span id="cb296-2"><a href="#cb296-2" aria-hidden="true" tabindex="-1"></a>    events <span class="op">=</span> []</span>
<span id="cb296-3"><a href="#cb296-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> l, r <span class="kw">in</span> intervals:</span>
<span id="cb296-4"><a href="#cb296-4" aria-hidden="true" tabindex="-1"></a>        events.append((l, <span class="st">'start'</span>))</span>
<span id="cb296-5"><a href="#cb296-5" aria-hidden="true" tabindex="-1"></a>        events.append((r, <span class="st">'end'</span>))</span>
<span id="cb296-6"><a href="#cb296-6" aria-hidden="true" tabindex="-1"></a>    events.sort()</span>
<span id="cb296-7"><a href="#cb296-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb296-8"><a href="#cb296-8" aria-hidden="true" tabindex="-1"></a>    active <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb296-9"><a href="#cb296-9" aria-hidden="true" tabindex="-1"></a>    overlaps <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb296-10"><a href="#cb296-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> pos, typ <span class="kw">in</span> events:</span>
<span id="cb296-11"><a href="#cb296-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> typ <span class="op">==</span> <span class="st">'start'</span>:</span>
<span id="cb296-12"><a href="#cb296-12" aria-hidden="true" tabindex="-1"></a>            overlaps <span class="op">+=</span> active  <span class="co"># count overlaps</span></span>
<span id="cb296-13"><a href="#cb296-13" aria-hidden="true" tabindex="-1"></a>            active <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb296-14"><a href="#cb296-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb296-15"><a href="#cb296-15" aria-hidden="true" tabindex="-1"></a>            active <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb296-16"><a href="#cb296-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> overlaps</span>
<span id="cb296-17"><a href="#cb296-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb296-18"><a href="#cb296-18" aria-hidden="true" tabindex="-1"></a>intervals <span class="op">=</span> [(<span class="dv">1</span>,<span class="dv">3</span>), (<span class="dv">2</span>,<span class="dv">5</span>), (<span class="dv">4</span>,<span class="dv">6</span>)]</span>
<span id="cb296-19"><a href="#cb296-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sweep_line_intervals(intervals))  <span class="co"># 2 overlaps</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>2</code></pre>
</section>
<section id="c-64" class="level4">
<h4 class="anchored" data-anchor-id="c-64">C</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb298"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb298-1"><a href="#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb298-2"><a href="#cb298-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb298-3"><a href="#cb298-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-4"><a href="#cb298-4" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb298-5"><a href="#cb298-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">;</span></span>
<span id="cb298-6"><a href="#cb298-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> type<span class="op">;</span> <span class="co">// 1 = start, -1 = end</span></span>
<span id="cb298-7"><a href="#cb298-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Event<span class="op">;</span></span>
<span id="cb298-8"><a href="#cb298-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-9"><a href="#cb298-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cmp<span class="op">(</span><span class="dt">const</span> <span class="dt">void</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb298-10"><a href="#cb298-10" aria-hidden="true" tabindex="-1"></a>    Event <span class="op">*</span>e1 <span class="op">=</span> <span class="op">(</span>Event<span class="op">*)</span>a<span class="op">,</span> <span class="op">*</span>e2 <span class="op">=</span> <span class="op">(</span>Event<span class="op">*)</span>b<span class="op">;</span></span>
<span id="cb298-11"><a href="#cb298-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>e1<span class="op">-&gt;</span>x <span class="op">==</span> e2<span class="op">-&gt;</span>x<span class="op">)</span> <span class="cf">return</span> e1<span class="op">-&gt;</span>type <span class="op">-</span> e2<span class="op">-&gt;</span>type<span class="op">;</span></span>
<span id="cb298-12"><a href="#cb298-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> e1<span class="op">-&gt;</span>x <span class="op">-</span> e2<span class="op">-&gt;</span>x<span class="op">;</span></span>
<span id="cb298-13"><a href="#cb298-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb298-14"><a href="#cb298-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-15"><a href="#cb298-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb298-16"><a href="#cb298-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> intervals<span class="op">[][</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="op">{{</span><span class="dv">1</span><span class="op">,</span><span class="dv">3</span><span class="op">},{</span><span class="dv">2</span><span class="op">,</span><span class="dv">5</span><span class="op">},{</span><span class="dv">4</span><span class="op">,</span><span class="dv">6</span><span class="op">}};</span></span>
<span id="cb298-17"><a href="#cb298-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb298-18"><a href="#cb298-18" aria-hidden="true" tabindex="-1"></a>    Event events<span class="op">[</span><span class="dv">2</span><span class="op">*</span>n<span class="op">];</span></span>
<span id="cb298-19"><a href="#cb298-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb298-20"><a href="#cb298-20" aria-hidden="true" tabindex="-1"></a>        events<span class="op">[</span><span class="dv">2</span><span class="op">*</span>i<span class="op">]</span> <span class="op">=</span> <span class="op">(</span>Event<span class="op">){</span>intervals<span class="op">[</span>i<span class="op">][</span><span class="dv">0</span><span class="op">],</span> <span class="dv">1</span><span class="op">};</span></span>
<span id="cb298-21"><a href="#cb298-21" aria-hidden="true" tabindex="-1"></a>        events<span class="op">[</span><span class="dv">2</span><span class="op">*</span>i<span class="op">+</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="op">(</span>Event<span class="op">){</span>intervals<span class="op">[</span>i<span class="op">][</span><span class="dv">1</span><span class="op">],</span> <span class="op">-</span><span class="dv">1</span><span class="op">};</span></span>
<span id="cb298-22"><a href="#cb298-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb298-23"><a href="#cb298-23" aria-hidden="true" tabindex="-1"></a>    qsort<span class="op">(</span>events<span class="op">,</span> <span class="dv">2</span><span class="op">*</span>n<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>Event<span class="op">),</span> cmp<span class="op">);</span></span>
<span id="cb298-24"><a href="#cb298-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-25"><a href="#cb298-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> active <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> overlaps <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb298-26"><a href="#cb298-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">2</span><span class="op">*</span>n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb298-27"><a href="#cb298-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>events<span class="op">[</span>i<span class="op">].</span>type <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb298-28"><a href="#cb298-28" aria-hidden="true" tabindex="-1"></a>            overlaps <span class="op">+=</span> active<span class="op">;</span></span>
<span id="cb298-29"><a href="#cb298-29" aria-hidden="true" tabindex="-1"></a>            active<span class="op">++;</span></span>
<span id="cb298-30"><a href="#cb298-30" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb298-31"><a href="#cb298-31" aria-hidden="true" tabindex="-1"></a>            active<span class="op">--;</span></span>
<span id="cb298-32"><a href="#cb298-32" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb298-33"><a href="#cb298-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb298-34"><a href="#cb298-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Total overlaps: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> overlaps<span class="op">);</span></span>
<span id="cb298-35"><a href="#cb298-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Total overlaps: 2</code></pre>
</section>
</section>
<section id="why-it-matters-88" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-88">Why It Matters</h3>
<ul>
<li><p>Universal pattern in computational geometry:</p>
<ul>
<li>Interval intersection counting</li>
<li>Rectangle overlap</li>
<li>Segment union length</li>
<li>Plane sweep algorithms (Voronoi, Convex Hull)</li>
</ul></li>
<li><p>Optimizes from O(n²) to O(n log n)</p></li>
</ul>
<p>Used in:</p>
<ul>
<li>GIS (geographic data)</li>
<li>Scheduling (conflict detection)</li>
<li>Event simulation</li>
</ul>
</section>
<section id="intuition-4" class="level3">
<h3 class="anchored" data-anchor-id="intuition-4">Intuition</h3>
<p>Imagine sliding a vertical line across your data: You only “see” the intervals currently active. No need to look back, everything behind is already resolved.</p>
</section>
<section id="try-it-yourself-88" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-88">Try It Yourself</h3>
<ol type="1">
<li>Count overlaps in <code>[1,4],[2,3],[5,6]</code></li>
<li>Modify to compute max active intervals (peak concurrency)</li>
<li>Extend to rectangle intersections (sweep + segment tree)</li>
<li>Track total covered length</li>
<li>Combine with priority queue for dynamic ranges</li>
<li>Visualize on a timeline (scheduling conflicts)</li>
<li>Apply to meeting room allocation</li>
<li>Extend to 2D sweep (events sorted by x, active y-ranges)</li>
<li>Count overlaps per interval</li>
<li>Compare runtime to brute force</li>
</ol>
</section>
<section id="test-cases-88" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-88">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Intervals</th>
<th>Overlaps</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[1,3],[2,5],[4,6]</td>
<td>2</td>
</tr>
<tr class="even">
<td>[1,2],[3,4]</td>
<td>0</td>
</tr>
<tr class="odd">
<td>[1,4],[2,3],[3,5]</td>
<td>3</td>
</tr>
<tr class="even">
<td>[1,5],[2,4],[3,6]</td>
<td>3</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-88" class="level3">
<h3 class="anchored" data-anchor-id="complexity-88">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Sort Events</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Sweep</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Total</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n)</td>
</tr>
</tbody>
</table>
<p>A Sweep Line algorithm is your moving scanner, it sweeps across time or space, managing active elements, and revealing hidden overlaps in elegant, ordered fashion.</p>
</section>
<section id="ball-tree-nearest-neighbor" class="level3">
<h3 class="anchored" data-anchor-id="ball-tree-nearest-neighbor">190 Ball Tree Nearest Neighbor</h3>
<p>A Ball Tree is a hierarchical spatial data structure built from nested hyperspheres (“balls”). It organizes points into clusters based on distance, enabling efficient nearest neighbor and range queries in high-dimensional or non-Euclidean spaces.</p>
<p>While KD-Trees split by axis, Ball Trees split by distance, making them robust when dimensions increase or when the distance metric isn’t axis-aligned.</p>
</section>
<section id="what-problem-are-we-solving-89" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-89">What Problem Are We Solving?</h3>
<p>We want to efficiently:</p>
<ul>
<li>Find nearest neighbors for a query point</li>
<li>Perform radius searches (all points within distance <code>r</code>)</li>
<li>Handle high-dimensional data where KD-Trees degrade</li>
</ul>
<p>Naive search is O(n) per query. A Ball Tree improves to roughly O(log n) average.</p>
<section id="example-89" class="level4">
<h4 class="anchored" data-anchor-id="example-89">Example</h4>
<p>Points in 2D:</p>
<pre><code>(2,3), (5,4), (9,6), (4,7), (8,1), (7,2)</code></pre>
<p>Query: <code>(9,2)</code> → Nearest: <code>(8,1)</code></p>
<p>Instead of splitting by x/y axis, the Ball Tree groups nearby points by distance from a center point (centroid or median).</p>
</section>
</section>
<section id="how-it-works-plain-language-7" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-plain-language-7">How It Works (Plain Language)</h3>
<ol type="1">
<li><p>Build Tree recursively:</p>
<ul>
<li>Choose a pivot (center) (often centroid or median).</li>
<li>Compute radius (max distance to any point in cluster).</li>
<li>Partition points into two subsets (inner vs outer ball).</li>
<li>Recursively build sub-balls.</li>
</ul></li>
<li><p>Query:</p>
<ul>
<li>Start at root ball.</li>
<li>Check if child balls could contain closer points.</li>
<li>Prune branches where <code>distance(center, query) - radius &gt; best_dist</code>.</li>
</ul></li>
</ol>
<p>This yields logarithmic average behavior.</p>
<section id="example-tree-simplified" class="level4">
<h4 class="anchored" data-anchor-id="example-tree-simplified">Example Tree (Simplified)</h4>
<pre><code>Ball(center=(6,4), radius=5)
├── Ball(center=(3,5), radius=2) → [(2,3),(4,7),(5,4)]
└── Ball(center=(8,3), radius=3) → [(7,2),(8,1),(9,6)]</code></pre>
<p>Query <code>(9,2)</code>:</p>
<ul>
<li>Check root</li>
<li>Compare both children</li>
<li>Prune <code>(3,5)</code> (too far)</li>
<li>Search <code>(8,3)</code> cluster → nearest <code>(8,1)</code></li>
</ul>
</section>
</section>
<section id="tiny-code-2d-example-1" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-2d-example-1">Tiny Code (2D Example)</h3>
<section id="python-74" class="level4">
<h4 class="anchored" data-anchor-id="python-74">Python</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb302"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb302-1"><a href="#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> math <span class="im">import</span> sqrt</span>
<span id="cb302-2"><a href="#cb302-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-3"><a href="#cb302-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> BallNode:</span>
<span id="cb302-4"><a href="#cb302-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, points):</span>
<span id="cb302-5"><a href="#cb302-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.center <span class="op">=</span> <span class="bu">tuple</span>(<span class="bu">sum</span>(x)<span class="op">/</span><span class="bu">len</span>(x) <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">zip</span>(<span class="op">*</span>points))</span>
<span id="cb302-6"><a href="#cb302-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.radius <span class="op">=</span> <span class="bu">max</span>(sqrt(<span class="bu">sum</span>((p[i]<span class="op">-</span><span class="va">self</span>.center[i])<span class="dv">2</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(p)))) <span class="cf">for</span> p <span class="kw">in</span> points)</span>
<span id="cb302-7"><a href="#cb302-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.points <span class="op">=</span> points <span class="cf">if</span> <span class="bu">len</span>(points) <span class="op">&lt;=</span> <span class="dv">2</span> <span class="cf">else</span> <span class="va">None</span></span>
<span id="cb302-8"><a href="#cb302-8" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.left <span class="op">=</span> <span class="va">None</span></span>
<span id="cb302-9"><a href="#cb302-9" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.right <span class="op">=</span> <span class="va">None</span></span>
<span id="cb302-10"><a href="#cb302-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(points) <span class="op">&gt;</span> <span class="dv">2</span>:</span>
<span id="cb302-11"><a href="#cb302-11" aria-hidden="true" tabindex="-1"></a>            points.sort(key<span class="op">=</span><span class="kw">lambda</span> p: sqrt(<span class="bu">sum</span>((p[i]<span class="op">-</span><span class="va">self</span>.center[i])<span class="dv">2</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(p)))))</span>
<span id="cb302-12"><a href="#cb302-12" aria-hidden="true" tabindex="-1"></a>            mid <span class="op">=</span> <span class="bu">len</span>(points)<span class="op">//</span><span class="dv">2</span></span>
<span id="cb302-13"><a href="#cb302-13" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.left <span class="op">=</span> BallNode(points[:mid])</span>
<span id="cb302-14"><a href="#cb302-14" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.right <span class="op">=</span> BallNode(points[mid:])</span>
<span id="cb302-15"><a href="#cb302-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-16"><a href="#cb302-16" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> dist(a, b):</span>
<span id="cb302-17"><a href="#cb302-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sqrt(<span class="bu">sum</span>((x <span class="op">-</span> y)<span class="dv">2</span> <span class="cf">for</span> x, y <span class="kw">in</span> <span class="bu">zip</span>(a, b)))</span>
<span id="cb302-18"><a href="#cb302-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-19"><a href="#cb302-19" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> nearest(node, target, best<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb302-20"><a href="#cb302-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> node <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb302-21"><a href="#cb302-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> best</span>
<span id="cb302-22"><a href="#cb302-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> node.points <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb302-23"><a href="#cb302-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> p <span class="kw">in</span> node.points:</span>
<span id="cb302-24"><a href="#cb302-24" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> best <span class="kw">is</span> <span class="va">None</span> <span class="kw">or</span> dist(p, target) <span class="op">&lt;</span> dist(best, target):</span>
<span id="cb302-25"><a href="#cb302-25" aria-hidden="true" tabindex="-1"></a>                best <span class="op">=</span> p</span>
<span id="cb302-26"><a href="#cb302-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> best</span>
<span id="cb302-27"><a href="#cb302-27" aria-hidden="true" tabindex="-1"></a>    d_center <span class="op">=</span> dist(node.center, target)</span>
<span id="cb302-28"><a href="#cb302-28" aria-hidden="true" tabindex="-1"></a>    candidates <span class="op">=</span> []</span>
<span id="cb302-29"><a href="#cb302-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> d_center <span class="op">-</span> node.radius <span class="op">&lt;=</span> dist(best, target) <span class="cf">if</span> best <span class="cf">else</span> <span class="va">True</span>:</span>
<span id="cb302-30"><a href="#cb302-30" aria-hidden="true" tabindex="-1"></a>        candidates.append(node.left)</span>
<span id="cb302-31"><a href="#cb302-31" aria-hidden="true" tabindex="-1"></a>        candidates.append(node.right)</span>
<span id="cb302-32"><a href="#cb302-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> child <span class="kw">in</span> candidates:</span>
<span id="cb302-33"><a href="#cb302-33" aria-hidden="true" tabindex="-1"></a>        best <span class="op">=</span> nearest(child, target, best)</span>
<span id="cb302-34"><a href="#cb302-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> best</span>
<span id="cb302-35"><a href="#cb302-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-36"><a href="#cb302-36" aria-hidden="true" tabindex="-1"></a>points <span class="op">=</span> [(<span class="dv">2</span>,<span class="dv">3</span>),(<span class="dv">5</span>,<span class="dv">4</span>),(<span class="dv">9</span>,<span class="dv">6</span>),(<span class="dv">4</span>,<span class="dv">7</span>),(<span class="dv">8</span>,<span class="dv">1</span>),(<span class="dv">7</span>,<span class="dv">2</span>)]</span>
<span id="cb302-37"><a href="#cb302-37" aria-hidden="true" tabindex="-1"></a>tree <span class="op">=</span> BallNode(points)</span>
<span id="cb302-38"><a href="#cb302-38" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nearest(tree, (<span class="dv">9</span>,<span class="dv">2</span>)))  <span class="co"># (8,1)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>(8, 1)</code></pre>
</section>
<section id="c-structure-idea" class="level4">
<h4 class="anchored" data-anchor-id="c-structure-idea">C (Structure Idea)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb304"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb304-1"><a href="#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb304-2"><a href="#cb304-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb304-3"><a href="#cb304-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb304-4"><a href="#cb304-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb304-5"><a href="#cb304-5" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> Node <span class="op">{</span></span>
<span id="cb304-6"><a href="#cb304-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> cx<span class="op">,</span> cy<span class="op">,</span> radius<span class="op">;</span></span>
<span id="cb304-7"><a href="#cb304-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Node <span class="op">*</span>left<span class="op">,</span> <span class="op">*</span>right<span class="op">;</span></span>
<span id="cb304-8"><a href="#cb304-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> <span class="op">(*</span>points<span class="op">)[</span><span class="dv">2</span><span class="op">];</span></span>
<span id="cb304-9"><a href="#cb304-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count<span class="op">;</span></span>
<span id="cb304-10"><a href="#cb304-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Node<span class="op">;</span></span>
<span id="cb304-11"><a href="#cb304-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb304-12"><a href="#cb304-12" aria-hidden="true" tabindex="-1"></a><span class="co">// Building logic: compute centroid, radius, split by distance.</span></span>
<span id="cb304-13"><a href="#cb304-13" aria-hidden="true" tabindex="-1"></a><span class="co">// Query logic: prune if (dist(center, query) - radius) &gt; best.</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Ball Trees are rarely implemented manually in C due to complexity; usually built into libraries (like scikit-learn).</p>
</section>
</section>
<section id="why-it-matters-89" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-89">Why It Matters</h3>
<ul>
<li><p>Works well for non-axis-aligned data</p></li>
<li><p>Handles high-dimensional and non-Euclidean metrics (e.g.&nbsp;cosine)</p></li>
<li><p>Used in:</p>
<ul>
<li>KNN search</li>
<li>Clustering (Ball Tree K-Means)</li>
<li>Spatial databases</li>
<li>Machine learning (scikit-learn NearestNeighbors)</li>
</ul></li>
</ul>
</section>
<section id="intuition-5" class="level3">
<h3 class="anchored" data-anchor-id="intuition-5">Intuition</h3>
<p>Imagine wrapping your dataset in nested bubbles. Each bubble encloses a cluster. To find the nearest neighbor, you only open bubbles that could possibly contain closer points.</p>
</section>
<section id="try-it-yourself-89" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-89">Try It Yourself</h3>
<ol type="1">
<li>Build a Ball Tree for <code>(1,1),(2,2),(3,3),(10,10)</code></li>
<li>Query <code>(2.5,2.5)</code></li>
<li>Visualize nested “balls”</li>
<li>Change to 3D points</li>
<li>Use Manhattan distance instead of Euclidean</li>
<li>Compare performance vs KD-Tree</li>
<li>Track pruned branches count</li>
<li>Implement k-nearest neighbors</li>
<li>Add radius search (within distance <code>r</code>)</li>
<li>Handle duplicate points</li>
</ol>
</section>
<section id="test-cases-89" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-89">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Points</th>
<th>Query</th>
<th>Nearest</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>(2,3),(5,4),(9,6),(4,7),(8,1),(7,2)</td>
<td>(9,2)</td>
<td>(8,1)</td>
</tr>
<tr class="even">
<td>(1,1),(2,2),(3,3)</td>
<td>(2.5,2.5)</td>
<td>(3,3)</td>
</tr>
<tr class="odd">
<td>(0,0),(10,10)</td>
<td>(7,8)</td>
<td>(10,10)</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-89" class="level3">
<h3 class="anchored" data-anchor-id="complexity-89">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Build</td>
<td>O(n log n)</td>
</tr>
<tr class="even">
<td>Query (avg)</td>
<td>O(log n)</td>
</tr>
<tr class="odd">
<td>Query (worst)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(n)</td>
</tr>
</tbody>
</table>
<p>A Ball Tree is your spherical guide in high-dimensional space, splitting by proximity, not axes, to find neighbors fast and flexibly.</p>
</section>
</section>
<section id="section-20.-search-optimizations-and-variants" class="level1">
<h1>Section 20. Search Optimizations and variants</h1>
<section id="binary-search-with-tolerance" class="level3">
<h3 class="anchored" data-anchor-id="binary-search-with-tolerance">191 Binary Search with Tolerance</h3>
<p>A Binary Search with Tolerance is a variant of binary search designed for real numbers or floating-point values where exact matches may not exist due to rounding or measurement error.</p>
<p>Instead of checking for strict equality (<code>==</code>), we accept a range of closeness, defined by a tolerance <code>ε</code> (epsilon).</p>
</section>
<section id="what-problem-are-we-solving-90" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-90">What Problem Are We Solving?</h3>
<p>For integers, equality is exact. For floating-point numbers, tiny rounding errors make equality unreliable:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb305"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">==</span> x<span class="op">)</span> <span class="co">// ❌ unreliable for floats</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>We instead test:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb306"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb306-1"><a href="#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>fabs<span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">-</span> x<span class="op">)</span> <span class="op">&lt;</span> epsilon<span class="op">)</span> <span class="co">// ✅ tolerance-based match</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This approach is essential for:</p>
<ul>
<li>Scientific computation</li>
<li>Numerical analysis</li>
<li>Approximations</li>
<li>Root-finding</li>
<li>Simulation and measurement data</li>
</ul>
</section>
<section id="example-90" class="level3">
<h3 class="anchored" data-anchor-id="example-90">Example</h3>
<p>Given sorted real values:</p>
<pre><code>$$0.1, 0.2, 0.3000000001, 0.4, 0.5]</code></pre>
<p>Searching for <code>0.3</code> with <code>epsilon = 1e-6</code>:</p>
<ul>
<li><code>fabs(0.3000000001 - 0.3) &lt; 1e-6</code> → found!</li>
</ul>
</section>
<section id="tiny-code-1" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-1">Tiny Code</h3>
<section id="c-implementation" class="level4">
<h4 class="anchored" data-anchor-id="c-implementation">C Implementation</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb308"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb308-1"><a href="#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb308-2"><a href="#cb308-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb308-3"><a href="#cb308-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb308-4"><a href="#cb308-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> binary_search_tolerance<span class="op">(</span><span class="dt">double</span> arr<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">double</span> target<span class="op">,</span> <span class="dt">double</span> eps<span class="op">)</span> <span class="op">{</span></span>
<span id="cb308-5"><a href="#cb308-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> low <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> high <span class="op">=</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb308-6"><a href="#cb308-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>low <span class="op">&lt;=</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb308-7"><a href="#cb308-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> <span class="op">(</span>low <span class="op">+</span> high<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb308-8"><a href="#cb308-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">double</span> diff <span class="op">=</span> arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">-</span> target<span class="op">;</span></span>
<span id="cb308-9"><a href="#cb308-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>fabs<span class="op">(</span>diff<span class="op">)</span> <span class="op">&lt;</span> eps<span class="op">)</span></span>
<span id="cb308-10"><a href="#cb308-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid<span class="op">;</span>  <span class="co">// found within tolerance</span></span>
<span id="cb308-11"><a href="#cb308-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>diff <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb308-12"><a href="#cb308-12" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb308-13"><a href="#cb308-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb308-14"><a href="#cb308-14" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb308-15"><a href="#cb308-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb308-16"><a href="#cb308-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span> <span class="co">// not found</span></span>
<span id="cb308-17"><a href="#cb308-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb308-18"><a href="#cb308-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb308-19"><a href="#cb308-19" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb308-20"><a href="#cb308-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="fl">0.1</span><span class="op">,</span> <span class="fl">0.2</span><span class="op">,</span> <span class="fl">0.3000000001</span><span class="op">,</span> <span class="fl">0.4</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">};</span></span>
<span id="cb308-21"><a href="#cb308-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb308-22"><a href="#cb308-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> x <span class="op">=</span> <span class="fl">0.3</span><span class="op">;</span></span>
<span id="cb308-23"><a href="#cb308-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> binary_search_tolerance<span class="op">(</span>arr<span class="op">,</span> n<span class="op">,</span> x<span class="op">,</span> <span class="fl">1e-6</span><span class="op">);</span></span>
<span id="cb308-24"><a href="#cb308-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span></span>
<span id="cb308-25"><a href="#cb308-25" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"Found </span><span class="sc">%.6f</span><span class="st"> at index </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb308-26"><a href="#cb308-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb308-27"><a href="#cb308-27" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"Not found</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb308-28"><a href="#cb308-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found 0.300000 at index 2</code></pre>
</section>
<section id="python-implementation" class="level4">
<h4 class="anchored" data-anchor-id="python-implementation">Python Implementation</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb310"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb310-1"><a href="#cb310-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> binary_search_tolerance(arr, x, eps<span class="op">=</span><span class="fl">1e-6</span>):</span>
<span id="cb310-2"><a href="#cb310-2" aria-hidden="true" tabindex="-1"></a>    lo, hi <span class="op">=</span> <span class="dv">0</span>, <span class="bu">len</span>(arr) <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb310-3"><a href="#cb310-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> lo <span class="op">&lt;=</span> hi:</span>
<span id="cb310-4"><a href="#cb310-4" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (lo <span class="op">+</span> hi) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb310-5"><a href="#cb310-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">abs</span>(arr[mid] <span class="op">-</span> x) <span class="op">&lt;</span> eps:</span>
<span id="cb310-6"><a href="#cb310-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid</span>
<span id="cb310-7"><a href="#cb310-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> arr[mid] <span class="op">&lt;</span> x:</span>
<span id="cb310-8"><a href="#cb310-8" aria-hidden="true" tabindex="-1"></a>            lo <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb310-9"><a href="#cb310-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb310-10"><a href="#cb310-10" aria-hidden="true" tabindex="-1"></a>            hi <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb310-11"><a href="#cb310-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb310-12"><a href="#cb310-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb310-13"><a href="#cb310-13" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3000000001</span>, <span class="fl">0.4</span>, <span class="fl">0.5</span>]</span>
<span id="cb310-14"><a href="#cb310-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(binary_search_tolerance(arr, <span class="fl">0.3</span>))  <span class="co"># 2</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-90" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-90">Why It Matters</h3>
<ul>
<li><p>Avoids false negatives when comparing floats</p></li>
<li><p>Handles round-off errors gracefully</p></li>
<li><p>Useful in:</p>
<ul>
<li>Root-finding</li>
<li>Floating-point datasets</li>
<li>Physics simulations</li>
<li>Numerical optimization</li>
</ul></li>
</ul>
</section>
<section id="intuition-6" class="level3">
<h3 class="anchored" data-anchor-id="intuition-6">Intuition</h3>
<p>Binary search assumes exact comparison. With floating-point numbers, “equal” often means “close enough.” <code>ε</code> defines your acceptable margin of error.</p>
<p>Think of it as:</p>
<blockquote class="blockquote">
<p>“If the difference is less than ε, consider it found.”</p>
</blockquote>
</section>
<section id="try-it-yourself-90" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-90">Try It Yourself</h3>
<ol type="1">
<li>Use an array <code>[0.1, 0.2, 0.3, 0.4, 0.5]</code> Search for <code>0.3000001</code> with <code>ε = 1e-5</code></li>
<li>Reduce <code>ε</code> → observe when search fails</li>
<li>Try negative numbers or decimals</li>
<li>Compare with integer binary search</li>
<li>Experiment with non-uniform spacing</li>
<li>Modify to find nearest value if not within ε</li>
<li>Visualize tolerance as a small band around target</li>
<li>Apply in root finding (<code>f(x) ≈ 0</code>)</li>
<li>Adjust ε dynamically based on scale</li>
<li>Measure precision loss with large floats</li>
</ol>
</section>
<section id="test-cases-90" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-90">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Array</th>
<th>Target</th>
<th>Epsilon</th>
<th>Expected</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[0.1, 0.2, 0.3000000001]</td>
<td>0.3</td>
<td>1e-6</td>
<td>Found</td>
</tr>
<tr class="even">
<td>[1.0, 2.0, 3.0]</td>
<td>2.000001</td>
<td>1e-5</td>
<td>Found</td>
</tr>
<tr class="odd">
<td>[1.0, 2.0, 3.0]</td>
<td>2.1</td>
<td>1e-5</td>
<td>Not found</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-90" class="level3">
<h3 class="anchored" data-anchor-id="complexity-90">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Search</td>
<td>O(log n)</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
</tbody>
</table>
<p>A Binary Search with Tolerance is a small but essential upgrade when dealing with real numbers—because in floating-point land, “close enough” is often the truth.</p>
</section>
<section id="ternary-search" class="level3">
<h3 class="anchored" data-anchor-id="ternary-search">192 Ternary Search</h3>
<p>A Ternary Search is an algorithm for finding the maximum or minimum of a unimodal function—a function that increases up to a point and then decreases (or vice versa). It is a divide-and-conquer method similar to binary search but splits the range into three parts each time.</p>
</section>
<section id="what-problem-are-we-solving-91" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-91">What Problem Are We Solving?</h3>
<p>You have a function <code>f(x)</code> defined on an interval <code>[l, r]</code>, and you know it has one peak (or valley). You want to find the x where <code>f(x)</code> is maximized (or minimized).</p>
<p>Unlike binary search (which searches for equality), ternary search searches for extremes.</p>
</section>
<section id="example-unimodal-function" class="level3">
<h3 class="anchored" data-anchor-id="example-unimodal-function">Example (Unimodal Function)</h3>
<p>Let</p>
<pre><code>f(x) = - (x - 2)^2 + 4</code></pre>
<p>This is a parabola with a maximum at <code>x = 2</code>.</p>
<p>Ternary search gradually narrows the interval around the maximum:</p>
<ol type="1">
<li>Divide <code>[l, r]</code> into three parts</li>
<li>Evaluate <code>f(m1)</code> and <code>f(m2)</code></li>
<li>Keep the side that contains the peak</li>
<li>Repeat until small enough</li>
</ol>
</section>
<section id="how-it-works-step-by-step" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-step-by-step">How It Works (Step-by-Step)</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 94%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Pick two midpoints: <code>m1 = l + (r - l) / 3</code>, <code>m2 = r - (r - l) / 3</code></td>
</tr>
<tr class="even">
<td>2</td>
<td>Compare <code>f(m1)</code> and <code>f(m2)</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>If <code>f(m1) &lt; f(m2)</code> → maximum is in <code>[m1, r]</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>Else → maximum is in <code>[l, m2]</code></td>
</tr>
<tr class="odd">
<td>5</td>
<td>Repeat until <code>r - l</code> &lt; ε</td>
</tr>
</tbody>
</table>
</section>
<section id="tiny-code-2" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-2">Tiny Code</h3>
<section id="c-implementation-maximization" class="level4">
<h4 class="anchored" data-anchor-id="c-implementation-maximization">C Implementation (Maximization)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb312"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb312-1"><a href="#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb312-2"><a href="#cb312-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb312-3"><a href="#cb312-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb312-4"><a href="#cb312-4" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> f<span class="op">(</span><span class="dt">double</span> x<span class="op">)</span> <span class="op">{</span></span>
<span id="cb312-5"><a href="#cb312-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span>pow<span class="op">(</span>x <span class="op">-</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">)</span> <span class="op">+</span> <span class="dv">4</span><span class="op">;</span> <span class="co">// peak at x=2</span></span>
<span id="cb312-6"><a href="#cb312-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb312-7"><a href="#cb312-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb312-8"><a href="#cb312-8" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> ternary_search<span class="op">(</span><span class="dt">double</span> l<span class="op">,</span> <span class="dt">double</span> r<span class="op">,</span> <span class="dt">double</span> eps<span class="op">)</span> <span class="op">{</span></span>
<span id="cb312-9"><a href="#cb312-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>r <span class="op">-</span> l <span class="op">&gt;</span> eps<span class="op">)</span> <span class="op">{</span></span>
<span id="cb312-10"><a href="#cb312-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">double</span> m1 <span class="op">=</span> l <span class="op">+</span> <span class="op">(</span>r <span class="op">-</span> l<span class="op">)</span> <span class="op">/</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb312-11"><a href="#cb312-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">double</span> m2 <span class="op">=</span> r <span class="op">-</span> <span class="op">(</span>r <span class="op">-</span> l<span class="op">)</span> <span class="op">/</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb312-12"><a href="#cb312-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>f<span class="op">(</span>m1<span class="op">)</span> <span class="op">&lt;</span> f<span class="op">(</span>m2<span class="op">))</span></span>
<span id="cb312-13"><a href="#cb312-13" aria-hidden="true" tabindex="-1"></a>            l <span class="op">=</span> m1<span class="op">;</span></span>
<span id="cb312-14"><a href="#cb312-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb312-15"><a href="#cb312-15" aria-hidden="true" tabindex="-1"></a>            r <span class="op">=</span> m2<span class="op">;</span></span>
<span id="cb312-16"><a href="#cb312-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb312-17"><a href="#cb312-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>l <span class="op">+</span> r<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// approx peak</span></span>
<span id="cb312-18"><a href="#cb312-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb312-19"><a href="#cb312-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb312-20"><a href="#cb312-20" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb312-21"><a href="#cb312-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> l <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> r <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb312-22"><a href="#cb312-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> res <span class="op">=</span> ternary_search<span class="op">(</span>l<span class="op">,</span> r<span class="op">,</span> <span class="fl">1e-6</span><span class="op">);</span></span>
<span id="cb312-23"><a href="#cb312-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Approx max at x = </span><span class="sc">%.6f</span><span class="st">, f(x) = </span><span class="sc">%.6f\n</span><span class="st">"</span><span class="op">,</span> res<span class="op">,</span> f<span class="op">(</span>res<span class="op">));</span></span>
<span id="cb312-24"><a href="#cb312-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Approx max at x = 2.000000, f(x) = 4.000000</code></pre>
</section>
<section id="python-implementation-1" class="level4">
<h4 class="anchored" data-anchor-id="python-implementation-1">Python Implementation</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb314"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb314-1"><a href="#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f(x):</span>
<span id="cb314-2"><a href="#cb314-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span>(x <span class="op">-</span> <span class="dv">2</span>)<span class="dv">2</span> <span class="op">+</span> <span class="dv">4</span>  <span class="co"># Peak at x=2</span></span>
<span id="cb314-3"><a href="#cb314-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-4"><a href="#cb314-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> ternary_search(l, r, eps<span class="op">=</span><span class="fl">1e-6</span>):</span>
<span id="cb314-5"><a href="#cb314-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> r <span class="op">-</span> l <span class="op">&gt;</span> eps:</span>
<span id="cb314-6"><a href="#cb314-6" aria-hidden="true" tabindex="-1"></a>        m1 <span class="op">=</span> l <span class="op">+</span> (r <span class="op">-</span> l) <span class="op">/</span> <span class="dv">3</span></span>
<span id="cb314-7"><a href="#cb314-7" aria-hidden="true" tabindex="-1"></a>        m2 <span class="op">=</span> r <span class="op">-</span> (r <span class="op">-</span> l) <span class="op">/</span> <span class="dv">3</span></span>
<span id="cb314-8"><a href="#cb314-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> f(m1) <span class="op">&lt;</span> f(m2):</span>
<span id="cb314-9"><a href="#cb314-9" aria-hidden="true" tabindex="-1"></a>            l <span class="op">=</span> m1</span>
<span id="cb314-10"><a href="#cb314-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb314-11"><a href="#cb314-11" aria-hidden="true" tabindex="-1"></a>            r <span class="op">=</span> m2</span>
<span id="cb314-12"><a href="#cb314-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (l <span class="op">+</span> r) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb314-13"><a href="#cb314-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-14"><a href="#cb314-14" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> ternary_search(<span class="dv">0</span>, <span class="dv">4</span>)</span>
<span id="cb314-15"><a href="#cb314-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Max at x = </span><span class="sc">{</span>res<span class="sc">:.6f}</span><span class="ss">, f(x) = </span><span class="sc">{</span>f(res)<span class="sc">:.6f}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-91" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-91">Why It Matters</h3>
<ul>
<li><p>Finds extrema (max/min) in continuous functions</p></li>
<li><p>No derivative required (unlike calculus-based optimization)</p></li>
<li><p>Works when:</p>
<ul>
<li><code>f(x)</code> is unimodal</li>
<li>Domain is continuous</li>
<li>You can evaluate <code>f(x)</code> cheaply</li>
</ul></li>
</ul>
<p>Used in:</p>
<ul>
<li>Mathematical optimization</li>
<li>Machine learning hyperparameter tuning</li>
<li>Geometry problems (e.g., closest distance)</li>
<li>Physics simulations</li>
</ul>
</section>
<section id="try-it-yourself-91" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-91">Try It Yourself</h3>
<ol type="1">
<li>Try <code>f(x) = (x - 5)^2 + 1</code> (minimization)</li>
<li>Use interval <code>[0, 10]</code> and <code>eps = 1e-6</code></li>
<li>Change <code>eps</code> to <code>1e-3</code> → observe faster but rougher result</li>
<li>Apply to distance between two moving points</li>
<li>Compare with binary search on derivative</li>
<li>Plot f(x) to visualize narrowing intervals</li>
<li>Switch condition to find minimum</li>
<li>Test with <code>f(x) = sin(x)</code> on <code>[0, π]</code></li>
<li>Use integer search version for discrete arrays</li>
<li>Combine with golden section search for efficiency</li>
</ol>
</section>
<section id="test-cases-91" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-91">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Function</th>
<th>Interval</th>
<th>Expected</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>f(x) = -(x-2)^2 + 4</td>
<td>[0, 4]</td>
<td>x ≈ 2</td>
<td>Maximum</td>
</tr>
<tr class="even">
<td>f(x) = (x-5)^2 + 1</td>
<td>[0, 10]</td>
<td>x ≈ 5</td>
<td>Minimum</td>
</tr>
<tr class="odd">
<td>f(x) = sin(x)</td>
<td>[0, 3.14]</td>
<td>x ≈ 1.57</td>
<td>Maximum</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-91" class="level3">
<h3 class="anchored" data-anchor-id="complexity-91">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Metric</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Time</td>
<td>O(log((r - l)/ε))</td>
</tr>
<tr class="even">
<td>Space</td>
<td>O(1)</td>
</tr>
</tbody>
</table>
<p>A Ternary Search slices the search space into thirds—zooming in on the peak or valley with mathematical precision, no derivatives required.</p>
</section>
<section id="hash-based-search" class="level3">
<h3 class="anchored" data-anchor-id="hash-based-search">193 Hash-Based Search</h3>
<p>A Hash-Based Search uses a hash function to map keys directly to indices in a table, giving constant-time expected lookups. Instead of scanning or comparing elements, it jumps straight to the bucket where the data should be.</p>
</section>
<section id="what-problem-are-we-solving-92" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-92">What Problem Are We Solving?</h3>
<p>When searching in a large dataset, linear search is too slow (O(n)) and binary search needs sorted data (O(log n)). Hash-based search lets you find, insert, or delete an item in O(1) average time, regardless of ordering.</p>
<p>It’s the foundation of hash tables, hash maps, and dictionaries.</p>
</section>
<section id="example-simple-lookup" class="level3">
<h3 class="anchored" data-anchor-id="example-simple-lookup">Example (Simple Lookup)</h3>
<p>Suppose you want to store and search for names quickly:</p>
<pre><code>$$"Alice", "Bob", "Carol", "Dave"]</code></pre>
<p>A hash function maps each name to an index:</p>
<pre><code>hash("Alice") → 2
hash("Bob")   → 5
hash("Carol") → 1</code></pre>
<p>You place each name in its corresponding slot. Searching becomes instant:</p>
<pre><code>hash("Bob") = 5 → found!</code></pre>
</section>
<section id="how-it-works-plain-language-8" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-plain-language-8">How It Works (Plain Language)</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 3%">
<col style="width: 96%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Compute hash(key) to get an index</td>
</tr>
<tr class="even">
<td>2</td>
<td>Look up the bucket at that index</td>
</tr>
<tr class="odd">
<td>3</td>
<td>If multiple items hash to same bucket (collision), handle with a strategy (chaining, open addressing)</td>
</tr>
<tr class="even">
<td>4</td>
<td>Compare keys if necessary</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Return result</td>
</tr>
</tbody>
</table>
</section>
<section id="tiny-code-3" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-3">Tiny Code</h3>
<section id="c-implementation-with-linear-probing" class="level4">
<h4 class="anchored" data-anchor-id="c-implementation-with-linear-probing">C Implementation (with Linear Probing)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb318"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb318-1"><a href="#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb318-2"><a href="#cb318-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb318-3"><a href="#cb318-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb318-4"><a href="#cb318-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SIZE </span><span class="dv">10</span></span>
<span id="cb318-5"><a href="#cb318-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb318-6"><a href="#cb318-6" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb318-7"><a href="#cb318-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> key<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb318-8"><a href="#cb318-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> value<span class="op">;</span></span>
<span id="cb318-9"><a href="#cb318-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> used<span class="op">;</span></span>
<span id="cb318-10"><a href="#cb318-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Entry<span class="op">;</span></span>
<span id="cb318-11"><a href="#cb318-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb318-12"><a href="#cb318-12" aria-hidden="true" tabindex="-1"></a>Entry table<span class="op">[</span>SIZE<span class="op">];</span></span>
<span id="cb318-13"><a href="#cb318-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb318-14"><a href="#cb318-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> hash<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb318-15"><a href="#cb318-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> h <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb318-16"><a href="#cb318-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> key<span class="op">[</span>i<span class="op">];</span> i<span class="op">++)</span></span>
<span id="cb318-17"><a href="#cb318-17" aria-hidden="true" tabindex="-1"></a>        h <span class="op">=</span> <span class="op">(</span>h <span class="op">*</span> <span class="dv">31</span> <span class="op">+</span> key<span class="op">[</span>i<span class="op">])</span> <span class="op">%</span> SIZE<span class="op">;</span></span>
<span id="cb318-18"><a href="#cb318-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> h<span class="op">;</span></span>
<span id="cb318-19"><a href="#cb318-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb318-20"><a href="#cb318-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb318-21"><a href="#cb318-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> insert<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb318-22"><a href="#cb318-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> h <span class="op">=</span> hash<span class="op">(</span>key<span class="op">);</span></span>
<span id="cb318-23"><a href="#cb318-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>table<span class="op">[</span>h<span class="op">].</span>used<span class="op">)</span> <span class="op">{</span></span>
<span id="cb318-24"><a href="#cb318-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>table<span class="op">[</span>h<span class="op">].</span>key<span class="op">,</span> key<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb318-25"><a href="#cb318-25" aria-hidden="true" tabindex="-1"></a>        h <span class="op">=</span> <span class="op">(</span>h <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">%</span> SIZE<span class="op">;</span></span>
<span id="cb318-26"><a href="#cb318-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb318-27"><a href="#cb318-27" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>table<span class="op">[</span>h<span class="op">].</span>key<span class="op">,</span> key<span class="op">);</span></span>
<span id="cb318-28"><a href="#cb318-28" aria-hidden="true" tabindex="-1"></a>    table<span class="op">[</span>h<span class="op">].</span>value <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb318-29"><a href="#cb318-29" aria-hidden="true" tabindex="-1"></a>    table<span class="op">[</span>h<span class="op">].</span>used <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb318-30"><a href="#cb318-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb318-31"><a href="#cb318-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb318-32"><a href="#cb318-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> search<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb318-33"><a href="#cb318-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> h <span class="op">=</span> hash<span class="op">(</span>key<span class="op">),</span> start <span class="op">=</span> h<span class="op">;</span></span>
<span id="cb318-34"><a href="#cb318-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>table<span class="op">[</span>h<span class="op">].</span>used<span class="op">)</span> <span class="op">{</span></span>
<span id="cb318-35"><a href="#cb318-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>table<span class="op">[</span>h<span class="op">].</span>key<span class="op">,</span> key<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb318-36"><a href="#cb318-36" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> table<span class="op">[</span>h<span class="op">].</span>value<span class="op">;</span></span>
<span id="cb318-37"><a href="#cb318-37" aria-hidden="true" tabindex="-1"></a>        h <span class="op">=</span> <span class="op">(</span>h <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">%</span> SIZE<span class="op">;</span></span>
<span id="cb318-38"><a href="#cb318-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>h <span class="op">==</span> start<span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb318-39"><a href="#cb318-39" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb318-40"><a href="#cb318-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span> <span class="co">// not found</span></span>
<span id="cb318-41"><a href="#cb318-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb318-42"><a href="#cb318-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb318-43"><a href="#cb318-43" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb318-44"><a href="#cb318-44" aria-hidden="true" tabindex="-1"></a>    insert<span class="op">(</span><span class="st">"Alice"</span><span class="op">,</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb318-45"><a href="#cb318-45" aria-hidden="true" tabindex="-1"></a>    insert<span class="op">(</span><span class="st">"Bob"</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb318-46"><a href="#cb318-46" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Value for Bob: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> search<span class="op">(</span><span class="st">"Bob"</span><span class="op">));</span></span>
<span id="cb318-47"><a href="#cb318-47" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Value for Bob: 20</code></pre>
</section>
<section id="python-implementation-built-in-dict" class="level4">
<h4 class="anchored" data-anchor-id="python-implementation-built-in-dict">Python Implementation (Built-in Dict)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb320"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb320-1"><a href="#cb320-1" aria-hidden="true" tabindex="-1"></a>people <span class="op">=</span> {<span class="st">"Alice"</span>: <span class="dv">10</span>, <span class="st">"Bob"</span>: <span class="dv">20</span>, <span class="st">"Carol"</span>: <span class="dv">30</span>}</span>
<span id="cb320-2"><a href="#cb320-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb320-3"><a href="#cb320-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Bob"</span> <span class="kw">in</span> people)       <span class="co"># True</span></span>
<span id="cb320-4"><a href="#cb320-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(people[<span class="st">"Carol"</span>])       <span class="co"># 30</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Python’s <code>dict</code> uses an optimized open addressing hash table.</p>
</section>
</section>
<section id="why-it-matters-92" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-92">Why It Matters</h3>
<ul>
<li>O(1) average lookup, insertion, and deletion</li>
<li>No need for sorting</li>
<li>Core to symbol tables, caches, dictionaries, compilers, and databases</li>
<li>Can scale with resizing (rehashing)</li>
</ul>
</section>
<section id="try-it-yourself-92" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-92">Try It Yourself</h3>
<ol type="1">
<li>Implement hash table with chaining using linked lists</li>
<li>Replace linear probing with quadratic probing</li>
<li>Measure lookup time vs.&nbsp;linear search on same dataset</li>
<li>Insert keys with collisions, ensure correctness</li>
<li>Create custom hash for integers: <code>h(x) = x % m</code></li>
<li>Observe performance as table fills up (load factor &gt; 0.7)</li>
<li>Implement delete operation carefully</li>
<li>Resize table when load factor high</li>
<li>Try a poor hash function (like <code>h=1</code>) and measure slowdown</li>
<li>Compare with Python’s built-in dict</li>
</ol>
</section>
<section id="test-cases-92" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-92">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Input</th>
<th>Expected Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Insert</td>
<td>(“Alice”, 10)</td>
<td>Stored</td>
</tr>
<tr class="even">
<td>Insert</td>
<td>(“Bob”, 20)</td>
<td>Stored</td>
</tr>
<tr class="odd">
<td>Search</td>
<td>“Alice”</td>
<td>10</td>
</tr>
<tr class="even">
<td>Search</td>
<td>“Eve”</td>
<td>Not found</td>
</tr>
<tr class="odd">
<td>Delete</td>
<td>“Bob”</td>
<td>Removed</td>
</tr>
<tr class="even">
<td>Search</td>
<td>“Bob”</td>
<td>Not found</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-92" class="level3">
<h3 class="anchored" data-anchor-id="complexity-92">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Metric</th>
<th>Average</th>
<th>Worst Case</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Search</td>
<td>O(1)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Insert</td>
<td>O(1)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Space</td>
<td>O(n)</td>
<td>O(n)</td>
</tr>
</tbody>
</table>
<p>A Hash-Based Search is like a magic index, it jumps straight to the data you need, turning search into instant lookup.</p>
</section>
<section id="bloom-filter-lookup" class="level3">
<h3 class="anchored" data-anchor-id="bloom-filter-lookup">194 Bloom Filter Lookup</h3>
<p>A Bloom Filter is a probabilistic data structure that tells you if an element is definitely not in a set or possibly is. It’s super fast and memory efficient, but allows false positives (never false negatives).</p>
</section>
<section id="what-problem-are-we-solving-93" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-93">What Problem Are We Solving?</h3>
<p>When working with huge datasets (like URLs, cache keys, or IDs), you may not want to store every element just to check membership. Bloom Filters give you a fast O(1) check:</p>
<ul>
<li>“Is this element in my set?” → Maybe</li>
<li>“Is it definitely not in my set?” → Yes</li>
</ul>
<p>They’re widely used in databases, network systems, and search engines (e.g., to skip disk lookups).</p>
</section>
<section id="example-cache-lookup" class="level3">
<h3 class="anchored" data-anchor-id="example-cache-lookup">Example (Cache Lookup)</h3>
<p>You have a cache of 1 million items. Before hitting the database, you want to know:</p>
<blockquote class="blockquote">
<p>Should I even bother checking cache for this key?</p>
</blockquote>
<p>Use a Bloom Filter to quickly tell if the key <em>could be</em> in cache. If filter says “no,” skip lookup entirely.</p>
</section>
<section id="how-it-works-plain-language-9" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-plain-language-9">How It Works (Plain Language)</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 94%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Create a bit array of size <code>m</code> (all zeros)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Choose <code>k</code> independent hash functions</td>
</tr>
<tr class="odd">
<td>3</td>
<td>To insert an element: compute k hashes, set corresponding bits to 1</td>
</tr>
<tr class="even">
<td>4</td>
<td>To query an element: compute k hashes, check if all bits are 1</td>
</tr>
<tr class="odd">
<td>5</td>
<td>If any bit = 0 → definitely not in set</td>
</tr>
<tr class="even">
<td>6</td>
<td>If all bits = 1 → possibly in set (false positive possible)</td>
</tr>
</tbody>
</table>
</section>
<section id="tiny-code-4" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-4">Tiny Code</h3>
<section id="python-simple-bloom-filter" class="level4">
<h4 class="anchored" data-anchor-id="python-simple-bloom-filter">Python (Simple Bloom Filter)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb321"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> hashlib <span class="im">import</span> sha256</span>
<span id="cb321-2"><a href="#cb321-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-3"><a href="#cb321-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> BloomFilter:</span>
<span id="cb321-4"><a href="#cb321-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, size<span class="op">=</span><span class="dv">1000</span>, hash_count<span class="op">=</span><span class="dv">3</span>):</span>
<span id="cb321-5"><a href="#cb321-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.size <span class="op">=</span> size</span>
<span id="cb321-6"><a href="#cb321-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.hash_count <span class="op">=</span> hash_count</span>
<span id="cb321-7"><a href="#cb321-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.bits <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> size</span>
<span id="cb321-8"><a href="#cb321-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-9"><a href="#cb321-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> _hashes(<span class="va">self</span>, item):</span>
<span id="cb321-10"><a href="#cb321-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="va">self</span>.hash_count):</span>
<span id="cb321-11"><a href="#cb321-11" aria-hidden="true" tabindex="-1"></a>            h <span class="op">=</span> <span class="bu">int</span>(sha256((item <span class="op">+</span> <span class="bu">str</span>(i)).encode()).hexdigest(), <span class="dv">16</span>)</span>
<span id="cb321-12"><a href="#cb321-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">yield</span> h <span class="op">%</span> <span class="va">self</span>.size</span>
<span id="cb321-13"><a href="#cb321-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-14"><a href="#cb321-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> add(<span class="va">self</span>, item):</span>
<span id="cb321-15"><a href="#cb321-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> h <span class="kw">in</span> <span class="va">self</span>._hashes(item):</span>
<span id="cb321-16"><a href="#cb321-16" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.bits[h] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb321-17"><a href="#cb321-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-18"><a href="#cb321-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> contains(<span class="va">self</span>, item):</span>
<span id="cb321-19"><a href="#cb321-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">all</span>(<span class="va">self</span>.bits[h] <span class="cf">for</span> h <span class="kw">in</span> <span class="va">self</span>._hashes(item))</span>
<span id="cb321-20"><a href="#cb321-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-21"><a href="#cb321-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb321-22"><a href="#cb321-22" aria-hidden="true" tabindex="-1"></a>bf <span class="op">=</span> BloomFilter()</span>
<span id="cb321-23"><a href="#cb321-23" aria-hidden="true" tabindex="-1"></a>bf.add(<span class="st">"Alice"</span>)</span>
<span id="cb321-24"><a href="#cb321-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bf.contains(<span class="st">"Alice"</span>))  <span class="co"># True (probably)</span></span>
<span id="cb321-25"><a href="#cb321-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bf.contains(<span class="st">"Bob"</span>))    <span class="co"># False (definitely not)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>True
False</code></pre>
</section>
</section>
<section id="why-it-matters-93" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-93">Why It Matters</h3>
<ul>
<li>Memory efficient for large sets</li>
<li>No false negatives, if it says “no,” you can trust it</li>
<li>Used in caches, databases, distributed systems</li>
<li>Reduces I/O by skipping non-existent entries</li>
</ul>
</section>
<section id="try-it-yourself-93" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-93">Try It Yourself</h3>
<ol type="1">
<li>Build a Bloom Filter with 1000 bits and 3 hash functions</li>
<li>Insert 100 random elements</li>
<li>Query 10 existing and 10 non-existing elements</li>
<li>Measure false positive rate</li>
<li>Experiment with different <code>m</code> and <code>k</code> values</li>
<li>Integrate into a simple cache simulation</li>
<li>Implement double hashing to reduce hash cost</li>
<li>Compare memory use vs.&nbsp;Python <code>set</code></li>
<li>Add support for merging filters (bitwise OR)</li>
<li>Try a Counting Bloom Filter (to support deletions)</li>
</ol>
</section>
<section id="test-cases-93" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-93">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Expected Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>add(“Alice”)</td>
<td>Bits set</td>
</tr>
<tr class="even">
<td>contains(“Alice”)</td>
<td>True (maybe)</td>
</tr>
<tr class="odd">
<td>contains(“Bob”)</td>
<td>False (definitely not)</td>
</tr>
<tr class="even">
<td>add(“Bob”)</td>
<td>Bits updated</td>
</tr>
<tr class="odd">
<td>contains(“Bob”)</td>
<td>True (maybe)</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-93" class="level3">
<h3 class="anchored" data-anchor-id="complexity-93">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Time</th>
<th>Space</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Insert</td>
<td>O(k)</td>
<td>O(m)</td>
</tr>
<tr class="even">
<td>Lookup</td>
<td>O(k)</td>
<td>O(m)</td>
</tr>
</tbody>
</table>
<p>k: number of hash functions m: size of bit array</p>
<p>A Bloom Filter is like a polite doorman, it’ll never wrongly turn you away, but it might let in a stranger once in a while.</p>
</section>
<section id="cuckoo-hash-search" class="level3">
<h3 class="anchored" data-anchor-id="cuckoo-hash-search">195 Cuckoo Hash Search</h3>
<p>A Cuckoo Hash Table is a clever hash-based structure that guarantees O(1) lookup while avoiding long probe chains. It uses two hash functions and relocates existing keys when a collision occurs, just like a cuckoo bird kicking eggs out of a nest.</p>
</section>
<section id="what-problem-are-we-solving-94" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-94">What Problem Are We Solving?</h3>
<p>Traditional hash tables can degrade to O(n) when collisions pile up. Cuckoo hashing ensures constant-time lookups by guaranteeing every key has at most two possible positions. If both are taken, it kicks out an existing key and re-inserts it elsewhere.</p>
<p>It’s widely used in network routers, high-performance caches, and hash-based indexes.</p>
</section>
<section id="example-small-table" class="level3">
<h3 class="anchored" data-anchor-id="example-small-table">Example (Small Table)</h3>
<p>Suppose you have 2 hash functions:</p>
<pre><code>h1(x) = x % 3  
h2(x) = (x / 3) % 3</code></pre>
<p>Insert keys: 5, 8, 11</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Key</th>
<th>h1</th>
<th>h2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>5</td>
<td>2</td>
<td>1</td>
</tr>
<tr class="even">
<td>8</td>
<td>2</td>
<td>2</td>
</tr>
<tr class="odd">
<td>11</td>
<td>2</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>When inserting 11, slot <code>2</code> is full, so we kick out 5 to its alternate position. This continues until every key finds a home.</p>
</section>
<section id="how-it-works-plain-language-10" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-plain-language-10">How It Works (Plain Language)</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Compute two hash indices: <code>h1(key)</code>, <code>h2(key)</code></td>
</tr>
<tr class="even">
<td>2</td>
<td>Try placing the key in <code>h1</code> slot</td>
</tr>
<tr class="odd">
<td>3</td>
<td>If occupied, evict existing key to its alternate slot</td>
</tr>
<tr class="even">
<td>4</td>
<td>Repeat up to a threshold (to prevent infinite loops)</td>
</tr>
<tr class="odd">
<td>5</td>
<td>If full cycle detected → rehash with new functions</td>
</tr>
</tbody>
</table>
<p>Each key lives in either position <code>h1(key)</code> or <code>h2(key)</code>.</p>
</section>
<section id="tiny-code-5" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-5">Tiny Code</h3>
<section id="c-implementation-simplified" class="level4">
<h4 class="anchored" data-anchor-id="c-implementation-simplified">C Implementation (Simplified)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb324"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb324-1"><a href="#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb324-2"><a href="#cb324-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-3"><a href="#cb324-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SIZE </span><span class="dv">7</span></span>
<span id="cb324-4"><a href="#cb324-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-5"><a href="#cb324-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> table1<span class="op">[</span>SIZE<span class="op">],</span> table2<span class="op">[</span>SIZE<span class="op">];</span></span>
<span id="cb324-6"><a href="#cb324-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-7"><a href="#cb324-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> h1<span class="op">(</span><span class="dt">int</span> key<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> key <span class="op">%</span> SIZE<span class="op">;</span> <span class="op">}</span></span>
<span id="cb324-8"><a href="#cb324-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> h2<span class="op">(</span><span class="dt">int</span> key<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> <span class="op">(</span>key <span class="op">/</span> SIZE<span class="op">)</span> <span class="op">%</span> SIZE<span class="op">;</span> <span class="op">}</span></span>
<span id="cb324-9"><a href="#cb324-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-10"><a href="#cb324-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> insert<span class="op">(</span><span class="dt">int</span> key<span class="op">,</span> <span class="dt">int</span> depth<span class="op">)</span> <span class="op">{</span></span>
<span id="cb324-11"><a href="#cb324-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>depth <span class="op">&gt;</span> SIZE<span class="op">)</span> <span class="cf">return</span><span class="op">;</span> <span class="co">// avoid infinite loop</span></span>
<span id="cb324-12"><a href="#cb324-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pos1 <span class="op">=</span> h1<span class="op">(</span>key<span class="op">);</span></span>
<span id="cb324-13"><a href="#cb324-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>table1<span class="op">[</span>pos1<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb324-14"><a href="#cb324-14" aria-hidden="true" tabindex="-1"></a>        table1<span class="op">[</span>pos1<span class="op">]</span> <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb324-15"><a href="#cb324-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb324-16"><a href="#cb324-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb324-17"><a href="#cb324-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> displaced <span class="op">=</span> table1<span class="op">[</span>pos1<span class="op">];</span></span>
<span id="cb324-18"><a href="#cb324-18" aria-hidden="true" tabindex="-1"></a>    table1<span class="op">[</span>pos1<span class="op">]</span> <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb324-19"><a href="#cb324-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pos2 <span class="op">=</span> h2<span class="op">(</span>displaced<span class="op">);</span></span>
<span id="cb324-20"><a href="#cb324-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>table2<span class="op">[</span>pos2<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb324-21"><a href="#cb324-21" aria-hidden="true" tabindex="-1"></a>        table2<span class="op">[</span>pos2<span class="op">]</span> <span class="op">=</span> displaced<span class="op">;</span></span>
<span id="cb324-22"><a href="#cb324-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb324-23"><a href="#cb324-23" aria-hidden="true" tabindex="-1"></a>        insert<span class="op">(</span>displaced<span class="op">,</span> depth <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb324-24"><a href="#cb324-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb324-25"><a href="#cb324-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-26"><a href="#cb324-26" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> search<span class="op">(</span><span class="dt">int</span> key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb324-27"><a href="#cb324-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> table1<span class="op">[</span>h1<span class="op">(</span>key<span class="op">)]</span> <span class="op">==</span> key <span class="op">||</span> table2<span class="op">[</span>h2<span class="op">(</span>key<span class="op">)]</span> <span class="op">==</span> key<span class="op">;</span></span>
<span id="cb324-28"><a href="#cb324-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb324-29"><a href="#cb324-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-30"><a href="#cb324-30" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb324-31"><a href="#cb324-31" aria-hidden="true" tabindex="-1"></a>    insert<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb324-32"><a href="#cb324-32" aria-hidden="true" tabindex="-1"></a>    insert<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb324-33"><a href="#cb324-33" aria-hidden="true" tabindex="-1"></a>    insert<span class="op">(</span><span class="dv">30</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb324-34"><a href="#cb324-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Search 20: </span><span class="sc">%s\n</span><span class="st">"</span><span class="op">,</span> search<span class="op">(</span><span class="dv">20</span><span class="op">)</span> <span class="op">?</span> <span class="st">"Found"</span> <span class="op">:</span> <span class="st">"Not Found"</span><span class="op">);</span></span>
<span id="cb324-35"><a href="#cb324-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Search 20: Found</code></pre>
</section>
<section id="python-implementation-2" class="level4">
<h4 class="anchored" data-anchor-id="python-implementation-2">Python Implementation</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb326"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a>SIZE <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb326-2"><a href="#cb326-2" aria-hidden="true" tabindex="-1"></a>table1 <span class="op">=</span> [<span class="va">None</span>] <span class="op">*</span> SIZE</span>
<span id="cb326-3"><a href="#cb326-3" aria-hidden="true" tabindex="-1"></a>table2 <span class="op">=</span> [<span class="va">None</span>] <span class="op">*</span> SIZE</span>
<span id="cb326-4"><a href="#cb326-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-5"><a href="#cb326-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> h1(x): <span class="cf">return</span> x <span class="op">%</span> SIZE</span>
<span id="cb326-6"><a href="#cb326-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> h2(x): <span class="cf">return</span> (x <span class="op">//</span> SIZE) <span class="op">%</span> SIZE</span>
<span id="cb326-7"><a href="#cb326-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-8"><a href="#cb326-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> insert(key, depth<span class="op">=</span><span class="dv">0</span>):</span>
<span id="cb326-9"><a href="#cb326-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> depth <span class="op">&gt;</span> SIZE:</span>
<span id="cb326-10"><a href="#cb326-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">False</span>  <span class="co"># cycle detected</span></span>
<span id="cb326-11"><a href="#cb326-11" aria-hidden="true" tabindex="-1"></a>    pos1 <span class="op">=</span> h1(key)</span>
<span id="cb326-12"><a href="#cb326-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> table1[pos1] <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb326-13"><a href="#cb326-13" aria-hidden="true" tabindex="-1"></a>        table1[pos1] <span class="op">=</span> key</span>
<span id="cb326-14"><a href="#cb326-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">True</span></span>
<span id="cb326-15"><a href="#cb326-15" aria-hidden="true" tabindex="-1"></a>    key, table1[pos1] <span class="op">=</span> table1[pos1], key</span>
<span id="cb326-16"><a href="#cb326-16" aria-hidden="true" tabindex="-1"></a>    pos2 <span class="op">=</span> h2(key)</span>
<span id="cb326-17"><a href="#cb326-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> table2[pos2] <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb326-18"><a href="#cb326-18" aria-hidden="true" tabindex="-1"></a>        table2[pos2] <span class="op">=</span> key</span>
<span id="cb326-19"><a href="#cb326-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">True</span></span>
<span id="cb326-20"><a href="#cb326-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> insert(key, depth <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb326-21"><a href="#cb326-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-22"><a href="#cb326-22" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> search(key):</span>
<span id="cb326-23"><a href="#cb326-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> table1[h1(key)] <span class="op">==</span> key <span class="kw">or</span> table2[h2(key)] <span class="op">==</span> key</span>
<span id="cb326-24"><a href="#cb326-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-25"><a href="#cb326-25" aria-hidden="true" tabindex="-1"></a>insert(<span class="dv">10</span>)<span class="op">;</span> insert(<span class="dv">20</span>)<span class="op">;</span> insert(<span class="dv">30</span>)</span>
<span id="cb326-26"><a href="#cb326-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Search 20:"</span>, search(<span class="dv">20</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-94" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-94">Why It Matters</h3>
<ul>
<li>O(1) worst-case lookup (always two probes)</li>
<li>Eliminates long collision chains</li>
<li>Great for high-performance systems</li>
<li>Deterministic position = easy debugging</li>
</ul>
</section>
<section id="try-it-yourself-94" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-94">Try It Yourself</h3>
<ol type="1">
<li>Insert numbers 1–10 and trace movements</li>
<li>Add detection for cycles → trigger rehash</li>
<li>Compare average probe count vs.&nbsp;linear probing</li>
<li>Implement delete(key) (mark slot empty)</li>
<li>Try resizing table dynamically</li>
<li>Use different hash functions for variety</li>
<li>Track load factor before rehashing</li>
<li>Store <code>(key, value)</code> pairs</li>
<li>Benchmark against chaining</li>
<li>Visualize movement paths during insertion</li>
</ol>
</section>
<section id="test-cases-94" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-94">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Input</th>
<th>Expected</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Insert</td>
<td>5</td>
<td>Placed</td>
</tr>
<tr class="even">
<td>Insert</td>
<td>8</td>
<td>Kicked 5, placed both</td>
</tr>
<tr class="odd">
<td>Search</td>
<td>5</td>
<td>Found</td>
</tr>
<tr class="even">
<td>Search</td>
<td>11</td>
<td>Not Found</td>
</tr>
<tr class="odd">
<td>Delete</td>
<td>8</td>
<td>Removed</td>
</tr>
<tr class="even">
<td>Search</td>
<td>8</td>
<td>Not Found</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-94" class="level3">
<h3 class="anchored" data-anchor-id="complexity-94">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Time</th>
<th>Space</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Search</td>
<td>O(1)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Insert</td>
<td>O(1) average</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Delete</td>
<td>O(1)</td>
<td>O(n)</td>
</tr>
</tbody>
</table>
<p>Cuckoo hashing is like musical chairs for keys, when one can’t sit, it makes another stand up and move, but everyone eventually finds a seat.</p>
</section>
<section id="robin-hood-hashing" class="level3">
<h3 class="anchored" data-anchor-id="robin-hood-hashing">196 Robin Hood Hashing</h3>
<p>Robin Hood Hashing is an open addressing strategy that balances fairness in hash table lookups. When two keys collide, the one that’s traveled farther from its “home” index gets to stay, stealing the slot like Robin Hood, who took from the rich and gave to the poor.</p>
</section>
<section id="what-problem-are-we-solving-95" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-95">What Problem Are We Solving?</h3>
<p>Standard linear probing can cause clusters, long runs of occupied slots that slow searches. Robin Hood Hashing reduces variance in probe lengths, so every key has roughly equal access time. This leads to more predictable performance, even at high load factors.</p>
</section>
<section id="example-collision-handling" class="level3">
<h3 class="anchored" data-anchor-id="example-collision-handling">Example (Collision Handling)</h3>
<p>Suppose <code>hash(x) = x % 10</code>. Insert <code>[10, 20, 30, 21]</code>.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Key</th>
<th>Hash</th>
<th>Position</th>
<th>Probe Distance</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>10</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>20</td>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td>30</td>
<td>0</td>
<td>2</td>
<td>2</td>
</tr>
<tr class="even">
<td>21</td>
<td>1</td>
<td>2 (collision)</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>At position 2, <code>21</code> meets <code>30</code> (whose distance = 2). Since <code>21</code>’s distance (1) is less, it keeps probing. Robin Hood rule: if newcomer has greater or equal distance → swap. This keeps distribution even.</p>
</section>
<section id="how-it-works-plain-language-11" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-plain-language-11">How It Works (Plain Language)</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 95%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Compute hash = <code>key % table_size</code></td>
</tr>
<tr class="even">
<td>2</td>
<td>If slot empty → place item</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Else, compare probe distance with occupant’s</td>
</tr>
<tr class="even">
<td>4</td>
<td>If new item’s distance ≥ current’s → swap and continue probing displaced item</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Repeat until inserted</td>
</tr>
</tbody>
</table>
</section>
<section id="tiny-code-6" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-6">Tiny Code</h3>
<section id="c-implementation-simplified-1" class="level4">
<h4 class="anchored" data-anchor-id="c-implementation-simplified-1">C Implementation (Simplified)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb327"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb327-1"><a href="#cb327-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb327-2"><a href="#cb327-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb327-3"><a href="#cb327-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SIZE </span><span class="dv">10</span></span>
<span id="cb327-4"><a href="#cb327-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb327-5"><a href="#cb327-5" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb327-6"><a href="#cb327-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span></span>
<span id="cb327-7"><a href="#cb327-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> used<span class="op">;</span></span>
<span id="cb327-8"><a href="#cb327-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> distance<span class="op">;</span></span>
<span id="cb327-9"><a href="#cb327-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Entry<span class="op">;</span></span>
<span id="cb327-10"><a href="#cb327-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb327-11"><a href="#cb327-11" aria-hidden="true" tabindex="-1"></a>Entry table<span class="op">[</span>SIZE<span class="op">];</span></span>
<span id="cb327-12"><a href="#cb327-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb327-13"><a href="#cb327-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> hash<span class="op">(</span><span class="dt">int</span> key<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> key <span class="op">%</span> SIZE<span class="op">;</span> <span class="op">}</span></span>
<span id="cb327-14"><a href="#cb327-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb327-15"><a href="#cb327-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> insert<span class="op">(</span><span class="dt">int</span> key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb327-16"><a href="#cb327-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> index <span class="op">=</span> hash<span class="op">(</span>key<span class="op">);</span></span>
<span id="cb327-17"><a href="#cb327-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> dist <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb327-18"><a href="#cb327-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>table<span class="op">[</span>index<span class="op">].</span>used<span class="op">)</span> <span class="op">{</span></span>
<span id="cb327-19"><a href="#cb327-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>table<span class="op">[</span>index<span class="op">].</span>distance <span class="op">&lt;</span> dist<span class="op">)</span> <span class="op">{</span></span>
<span id="cb327-20"><a href="#cb327-20" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> temp_key <span class="op">=</span> table<span class="op">[</span>index<span class="op">].</span>key<span class="op">;</span></span>
<span id="cb327-21"><a href="#cb327-21" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> temp_dist <span class="op">=</span> table<span class="op">[</span>index<span class="op">].</span>distance<span class="op">;</span></span>
<span id="cb327-22"><a href="#cb327-22" aria-hidden="true" tabindex="-1"></a>            table<span class="op">[</span>index<span class="op">].</span>key <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb327-23"><a href="#cb327-23" aria-hidden="true" tabindex="-1"></a>            table<span class="op">[</span>index<span class="op">].</span>distance <span class="op">=</span> dist<span class="op">;</span></span>
<span id="cb327-24"><a href="#cb327-24" aria-hidden="true" tabindex="-1"></a>            key <span class="op">=</span> temp_key<span class="op">;</span></span>
<span id="cb327-25"><a href="#cb327-25" aria-hidden="true" tabindex="-1"></a>            dist <span class="op">=</span> temp_dist<span class="op">;</span></span>
<span id="cb327-26"><a href="#cb327-26" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb327-27"><a href="#cb327-27" aria-hidden="true" tabindex="-1"></a>        index <span class="op">=</span> <span class="op">(</span>index <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">%</span> SIZE<span class="op">;</span></span>
<span id="cb327-28"><a href="#cb327-28" aria-hidden="true" tabindex="-1"></a>        dist<span class="op">++;</span></span>
<span id="cb327-29"><a href="#cb327-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb327-30"><a href="#cb327-30" aria-hidden="true" tabindex="-1"></a>    table<span class="op">[</span>index<span class="op">].</span>key <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb327-31"><a href="#cb327-31" aria-hidden="true" tabindex="-1"></a>    table<span class="op">[</span>index<span class="op">].</span>distance <span class="op">=</span> dist<span class="op">;</span></span>
<span id="cb327-32"><a href="#cb327-32" aria-hidden="true" tabindex="-1"></a>    table<span class="op">[</span>index<span class="op">].</span>used <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb327-33"><a href="#cb327-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb327-34"><a href="#cb327-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb327-35"><a href="#cb327-35" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> search<span class="op">(</span><span class="dt">int</span> key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb327-36"><a href="#cb327-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> index <span class="op">=</span> hash<span class="op">(</span>key<span class="op">);</span></span>
<span id="cb327-37"><a href="#cb327-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> dist <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb327-38"><a href="#cb327-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>table<span class="op">[</span>index<span class="op">].</span>used<span class="op">)</span> <span class="op">{</span></span>
<span id="cb327-39"><a href="#cb327-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>table<span class="op">[</span>index<span class="op">].</span>key <span class="op">==</span> key<span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb327-40"><a href="#cb327-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>table<span class="op">[</span>index<span class="op">].</span>distance <span class="op">&lt;</span> dist<span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb327-41"><a href="#cb327-41" aria-hidden="true" tabindex="-1"></a>        index <span class="op">=</span> <span class="op">(</span>index <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">%</span> SIZE<span class="op">;</span></span>
<span id="cb327-42"><a href="#cb327-42" aria-hidden="true" tabindex="-1"></a>        dist<span class="op">++;</span></span>
<span id="cb327-43"><a href="#cb327-43" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb327-44"><a href="#cb327-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb327-45"><a href="#cb327-45" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb327-46"><a href="#cb327-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb327-47"><a href="#cb327-47" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb327-48"><a href="#cb327-48" aria-hidden="true" tabindex="-1"></a>    insert<span class="op">(</span><span class="dv">10</span><span class="op">);</span></span>
<span id="cb327-49"><a href="#cb327-49" aria-hidden="true" tabindex="-1"></a>    insert<span class="op">(</span><span class="dv">20</span><span class="op">);</span></span>
<span id="cb327-50"><a href="#cb327-50" aria-hidden="true" tabindex="-1"></a>    insert<span class="op">(</span><span class="dv">30</span><span class="op">);</span></span>
<span id="cb327-51"><a href="#cb327-51" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Search 20: </span><span class="sc">%s\n</span><span class="st">"</span><span class="op">,</span> search<span class="op">(</span><span class="dv">20</span><span class="op">)</span> <span class="op">?</span> <span class="st">"Found"</span> <span class="op">:</span> <span class="st">"Not Found"</span><span class="op">);</span></span>
<span id="cb327-52"><a href="#cb327-52" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Search 20: Found</code></pre>
</section>
<section id="python-implementation-3" class="level4">
<h4 class="anchored" data-anchor-id="python-implementation-3">Python Implementation</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb329"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb329-1"><a href="#cb329-1" aria-hidden="true" tabindex="-1"></a>SIZE <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb329-2"><a href="#cb329-2" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> [<span class="va">None</span>] <span class="op">*</span> SIZE</span>
<span id="cb329-3"><a href="#cb329-3" aria-hidden="true" tabindex="-1"></a>distances <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> SIZE</span>
<span id="cb329-4"><a href="#cb329-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb329-5"><a href="#cb329-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> h(k): <span class="cf">return</span> k <span class="op">%</span> SIZE</span>
<span id="cb329-6"><a href="#cb329-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb329-7"><a href="#cb329-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> insert(key):</span>
<span id="cb329-8"><a href="#cb329-8" aria-hidden="true" tabindex="-1"></a>    index <span class="op">=</span> h(key)</span>
<span id="cb329-9"><a href="#cb329-9" aria-hidden="true" tabindex="-1"></a>    dist <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb329-10"><a href="#cb329-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> table[index] <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb329-11"><a href="#cb329-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> distances[index] <span class="op">&lt;</span> dist:</span>
<span id="cb329-12"><a href="#cb329-12" aria-hidden="true" tabindex="-1"></a>            table[index], key <span class="op">=</span> key, table[index]</span>
<span id="cb329-13"><a href="#cb329-13" aria-hidden="true" tabindex="-1"></a>            distances[index], dist <span class="op">=</span> dist, distances[index]</span>
<span id="cb329-14"><a href="#cb329-14" aria-hidden="true" tabindex="-1"></a>        index <span class="op">=</span> (index <span class="op">+</span> <span class="dv">1</span>) <span class="op">%</span> SIZE</span>
<span id="cb329-15"><a href="#cb329-15" aria-hidden="true" tabindex="-1"></a>        dist <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb329-16"><a href="#cb329-16" aria-hidden="true" tabindex="-1"></a>    table[index], distances[index] <span class="op">=</span> key, dist</span>
<span id="cb329-17"><a href="#cb329-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb329-18"><a href="#cb329-18" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> search(key):</span>
<span id="cb329-19"><a href="#cb329-19" aria-hidden="true" tabindex="-1"></a>    index <span class="op">=</span> h(key)</span>
<span id="cb329-20"><a href="#cb329-20" aria-hidden="true" tabindex="-1"></a>    dist <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb329-21"><a href="#cb329-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> table[index] <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb329-22"><a href="#cb329-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> table[index] <span class="op">==</span> key:</span>
<span id="cb329-23"><a href="#cb329-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="va">True</span></span>
<span id="cb329-24"><a href="#cb329-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> distances[index] <span class="op">&lt;</span> dist:</span>
<span id="cb329-25"><a href="#cb329-25" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb329-26"><a href="#cb329-26" aria-hidden="true" tabindex="-1"></a>        index <span class="op">=</span> (index <span class="op">+</span> <span class="dv">1</span>) <span class="op">%</span> SIZE</span>
<span id="cb329-27"><a href="#cb329-27" aria-hidden="true" tabindex="-1"></a>        dist <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb329-28"><a href="#cb329-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb329-29"><a href="#cb329-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb329-30"><a href="#cb329-30" aria-hidden="true" tabindex="-1"></a>insert(<span class="dv">10</span>)<span class="op">;</span> insert(<span class="dv">20</span>)<span class="op">;</span> insert(<span class="dv">30</span>)</span>
<span id="cb329-31"><a href="#cb329-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Search 20:"</span>, search(<span class="dv">20</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-95" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-95">Why It Matters</h3>
<ul>
<li>Predictable lookup times, probe lengths nearly uniform</li>
<li>Outperforms linear probing at high load</li>
<li>Fewer long clusters, more stable table behavior</li>
<li>Great for performance-critical systems</li>
</ul>
</section>
<section id="try-it-yourself-95" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-95">Try It Yourself</h3>
<ol type="1">
<li>Insert <code>[10, 20, 30, 21]</code> and trace swaps</li>
<li>Measure probe length variance vs.&nbsp;linear probing</li>
<li>Implement delete() with tombstone handling</li>
<li>Add resizing when load factor &gt; 0.8</li>
<li>Compare performance with quadratic probing</li>
<li>Visualize table after 20 inserts</li>
<li>Experiment with different table sizes</li>
<li>Create histogram of probe lengths</li>
<li>Add key-value pair storage</li>
<li>Benchmark search time at 70%, 80%, 90% load</li>
</ol>
</section>
<section id="test-cases-95" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-95">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Input</th>
<th>Expected</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Insert</td>
<td>10, 20, 30, 21</td>
<td>Evenly distributed</td>
</tr>
<tr class="even">
<td>Search</td>
<td>20</td>
<td>Found</td>
</tr>
<tr class="odd">
<td>Search</td>
<td>40</td>
<td>Not Found</td>
</tr>
<tr class="even">
<td>Delete</td>
<td>10</td>
<td>Removed</td>
</tr>
<tr class="odd">
<td>Insert</td>
<td>50</td>
<td>Placed at optimal position</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-95" class="level3">
<h3 class="anchored" data-anchor-id="complexity-95">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Time</th>
<th>Space</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Search</td>
<td>O(1) avg</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Insert</td>
<td>O(1) avg</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Delete</td>
<td>O(1) avg</td>
<td>O(n)</td>
</tr>
</tbody>
</table>
<p>Robin Hood Hashing keeps everyone honest, no key hoards fast access, and none are left wandering too far.</p>
</section>
<section id="jump-consistent-hashing" class="level3">
<h3 class="anchored" data-anchor-id="jump-consistent-hashing">197 Jump Consistent Hashing</h3>
<p>Jump Consistent Hashing is a lightweight, fast, and deterministic way to assign keys to buckets (servers, shards, or partitions) that minimizes remapping when the number of buckets changes.</p>
<p>It’s designed for load balancing in distributed systems, like database shards or cache clusters.</p>
</section>
<section id="what-problem-are-we-solving-96" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-96">What Problem Are We Solving?</h3>
<p>When scaling systems horizontally, you often need to assign keys (like user IDs) to buckets (like servers). Naive methods (e.g.&nbsp;<code>key % N</code>) cause massive remapping when <code>N</code> changes. Jump Consistent Hashing avoids that, only a small fraction of keys move when a bucket is added or removed.</p>
<p>This ensures stability and predictable redistribution, ideal for distributed caches (Memcached, Redis) and databases (Bigtable, Ceph).</p>
</section>
<section id="example-adding-buckets" class="level3">
<h3 class="anchored" data-anchor-id="example-adding-buckets">Example (Adding Buckets)</h3>
<p>Suppose we have keys 1 to 6 and 3 buckets:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Key</th>
<th>Bucket (3)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2</td>
</tr>
<tr class="even">
<td>2</td>
<td>0</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2</td>
</tr>
<tr class="even">
<td>4</td>
<td>1</td>
</tr>
<tr class="odd">
<td>5</td>
<td>0</td>
</tr>
<tr class="even">
<td>6</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>When we add a new bucket (4 total), only a few keys change buckets, most stay where they are. That’s the magic of <em>consistency</em>.</p>
</section>
<section id="how-it-works-plain-language-12" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-plain-language-12">How It Works (Plain Language)</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Treat key as a 64-bit integer</td>
</tr>
<tr class="even">
<td>2</td>
<td>Initialize <code>b = -1</code> and <code>j = 0</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>While <code>j &lt; num_buckets</code>, update:</td>
</tr>
<tr class="even">
<td></td>
<td><code>b = j</code>, <code>key = key * 2862933555777941757ULL + 1</code></td>
</tr>
<tr class="odd">
<td></td>
<td><code>j = floor((b + 1) * (1LL &lt;&lt; 31) / ((key &gt;&gt; 33) + 1))</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>Return <code>b</code> as bucket index</td>
</tr>
</tbody>
</table>
<p>It uses integer arithmetic only, no tables, no storage, just math.</p>
</section>
<section id="tiny-code-7" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-7">Tiny Code</h3>
<section id="c-implementation-1" class="level4">
<h4 class="anchored" data-anchor-id="c-implementation-1">C Implementation</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb330"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb330-1"><a href="#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdint.h&gt;</span></span>
<span id="cb330-2"><a href="#cb330-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb330-3"><a href="#cb330-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb330-4"><a href="#cb330-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> jump_consistent_hash<span class="op">(</span><span class="dt">uint64_t</span> key<span class="op">,</span> <span class="dt">int</span> num_buckets<span class="op">)</span> <span class="op">{</span></span>
<span id="cb330-5"><a href="#cb330-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int64_t</span> b <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb330-6"><a href="#cb330-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>j <span class="op">&lt;</span> num_buckets<span class="op">)</span> <span class="op">{</span></span>
<span id="cb330-7"><a href="#cb330-7" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> j<span class="op">;</span></span>
<span id="cb330-8"><a href="#cb330-8" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> key <span class="op">*</span> <span class="dv">2862933555777941757</span><span class="bu">ULL</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb330-9"><a href="#cb330-9" aria-hidden="true" tabindex="-1"></a>        j <span class="op">=</span> <span class="op">(</span>b <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">*</span> <span class="op">((</span><span class="dt">double</span><span class="op">)(</span><span class="dv">1</span><span class="bu">LL</span> <span class="op">&lt;&lt;</span> <span class="dv">31</span><span class="op">)</span> <span class="op">/</span> <span class="op">((</span>key <span class="op">&gt;&gt;</span> <span class="dv">33</span><span class="op">)</span> <span class="op">+</span> <span class="dv">1</span><span class="op">));</span></span>
<span id="cb330-10"><a href="#cb330-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb330-11"><a href="#cb330-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span>b<span class="op">;</span></span>
<span id="cb330-12"><a href="#cb330-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb330-13"><a href="#cb330-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb330-14"><a href="#cb330-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb330-15"><a href="#cb330-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">uint64_t</span> k <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> k <span class="op">&lt;=</span> <span class="dv">6</span><span class="op">;</span> k<span class="op">++)</span></span>
<span id="cb330-16"><a href="#cb330-16" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">"Key </span><span class="sc">%llu</span><span class="st"> → Bucket </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> k<span class="op">,</span> jump_consistent_hash<span class="op">(</span>k<span class="op">,</span> <span class="dv">3</span><span class="op">));</span></span>
<span id="cb330-17"><a href="#cb330-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Key 1 → Bucket 2  
Key 2 → Bucket 0  
Key 3 → Bucket 2  
Key 4 → Bucket 1  
Key 5 → Bucket 0  
Key 6 → Bucket 2</code></pre>
</section>
<section id="python-implementation-4" class="level4">
<h4 class="anchored" data-anchor-id="python-implementation-4">Python Implementation</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb332"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb332-1"><a href="#cb332-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> jump_hash(key, num_buckets):</span>
<span id="cb332-2"><a href="#cb332-2" aria-hidden="true" tabindex="-1"></a>    b, j <span class="op">=</span> <span class="op">-</span><span class="dv">1</span>, <span class="dv">0</span></span>
<span id="cb332-3"><a href="#cb332-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> j <span class="op">&lt;</span> num_buckets:</span>
<span id="cb332-4"><a href="#cb332-4" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> j</span>
<span id="cb332-5"><a href="#cb332-5" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> key <span class="op">*</span> <span class="dv">2862933555777941757</span> <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb332-6"><a href="#cb332-6" aria-hidden="true" tabindex="-1"></a>        j <span class="op">=</span> <span class="bu">int</span>((b <span class="op">+</span> <span class="dv">1</span>) <span class="op">*</span> (<span class="dv">1</span> <span class="op">&lt;&lt;</span> <span class="dv">31</span>) <span class="op">/</span> ((key <span class="op">&gt;&gt;</span> <span class="dv">33</span>) <span class="op">+</span> <span class="dv">1</span>))</span>
<span id="cb332-7"><a href="#cb332-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> b</span>
<span id="cb332-8"><a href="#cb332-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb332-9"><a href="#cb332-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> k <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">7</span>):</span>
<span id="cb332-10"><a href="#cb332-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Key </span><span class="sc">{</span>k<span class="sc">}</span><span class="ss"> → Bucket </span><span class="sc">{</span>jump_hash(k, <span class="dv">3</span>)<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-96" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-96">Why It Matters</h3>
<ul>
<li>Stable distribution: minimal remapping on resize</li>
<li>O(1) time, O(1) space</li>
<li>Works great for sharding, load balancing, partitioning</li>
<li>No need for external storage or ring structures (unlike consistent hashing rings)</li>
</ul>
</section>
<section id="try-it-yourself-96" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-96">Try It Yourself</h3>
<ol type="1">
<li>Assign 10 keys across 3 buckets</li>
<li>Add a 4th bucket and see which keys move</li>
<li>Compare with <code>key % N</code> approach</li>
<li>Try very large bucket counts (10k+)</li>
<li>Benchmark speed, notice it’s almost constant</li>
<li>Integrate with a distributed cache simulation</li>
<li>Test uniformity (distribution of keys)</li>
<li>Add random seeds for per-service variation</li>
<li>Visualize redistribution pattern</li>
<li>Compare with Rendezvous Hashing</li>
</ol>
</section>
<section id="test-cases-96" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-96">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input</th>
<th>Buckets</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Key=1, N=3</td>
<td>3</td>
<td>2</td>
</tr>
<tr class="even">
<td>Key=2, N=3</td>
<td>3</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Key=3, N=3</td>
<td>3</td>
<td>2</td>
</tr>
<tr class="even">
<td>Key=1, N=4</td>
<td>4</td>
<td>3 or 2 (depends on math)</td>
</tr>
</tbody>
</table>
<p>Only a fraction of keys remap when N changes.</p>
</section>
<section id="complexity-96" class="level3">
<h3 class="anchored" data-anchor-id="complexity-96">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Time</th>
<th>Space</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Lookup</td>
<td>O(1)</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Insert</td>
<td>O(1)</td>
<td>O(1)</td>
</tr>
</tbody>
</table>
<p>Jump Consistent Hashing is like a steady hand, even as your system grows, it keeps most keys right where they belong.</p>
</section>
<section id="prefix-search-in-trie" class="level3">
<h3 class="anchored" data-anchor-id="prefix-search-in-trie">198 Prefix Search in Trie</h3>
<p>A Trie (prefix tree) is a specialized tree structure that stores strings by their prefixes, enabling fast prefix-based lookups, ideal for autocomplete, dictionaries, and word search engines.</p>
<p>With a trie, searching for “app” instantly finds “apple”, “apply”, “appetite”, etc.</p>
</section>
<section id="what-problem-are-we-solving-97" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-97">What Problem Are We Solving?</h3>
<p>Traditional data structures like arrays or hash tables can’t efficiently answer questions like:</p>
<ul>
<li>“List all words starting with <code>pre</code>”</li>
<li>“Does any word start with <code>tri</code>?”</li>
</ul>
<p>A trie organizes data by prefix paths, making such queries fast and natural, often O(k) where <em>k</em> is the prefix length.</p>
</section>
<section id="example-words-app-apple-bat" class="level3">
<h3 class="anchored" data-anchor-id="example-words-app-apple-bat">Example (Words: <code>app</code>, <code>apple</code>, <code>bat</code>)</h3>
<p>The trie looks like this:</p>
<pre><code>(root)
 ├─ a
 │  └─ p
 │     └─ p *
 │        └─ l
 │           └─ e *
 └─ b
    └─ a
       └─ t *</code></pre>
<p>Stars (*) mark word endings. Search “app” → found; list all completions → “app”, “apple”.</p>
</section>
<section id="how-it-works-plain-language-13" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-plain-language-13">How It Works (Plain Language)</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Each node represents a character</td>
</tr>
<tr class="even">
<td>2</td>
<td>A path from root to node represents a prefix</td>
</tr>
<tr class="odd">
<td>3</td>
<td>When inserting, follow characters and create nodes as needed</td>
</tr>
<tr class="even">
<td>4</td>
<td>Mark end of word when reaching last character</td>
</tr>
<tr class="odd">
<td>5</td>
<td>To search prefix: traverse nodes character by character</td>
</tr>
<tr class="even">
<td>6</td>
<td>If all exist → prefix found; else → not found</td>
</tr>
</tbody>
</table>
</section>
<section id="tiny-code-8" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-8">Tiny Code</h3>
<section id="c-implementation-simplified-2" class="level4">
<h4 class="anchored" data-anchor-id="c-implementation-simplified-2">C Implementation (Simplified)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb334"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb334-1"><a href="#cb334-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb334-2"><a href="#cb334-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb334-3"><a href="#cb334-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdbool.h&gt;</span></span>
<span id="cb334-4"><a href="#cb334-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb334-5"><a href="#cb334-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define ALPHABET </span><span class="dv">26</span></span>
<span id="cb334-6"><a href="#cb334-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb334-7"><a href="#cb334-7" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> TrieNode <span class="op">{</span></span>
<span id="cb334-8"><a href="#cb334-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> TrieNode <span class="op">*</span>child<span class="op">[</span>ALPHABET<span class="op">];</span></span>
<span id="cb334-9"><a href="#cb334-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">bool</span> isEnd<span class="op">;</span></span>
<span id="cb334-10"><a href="#cb334-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> TrieNode<span class="op">;</span></span>
<span id="cb334-11"><a href="#cb334-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb334-12"><a href="#cb334-12" aria-hidden="true" tabindex="-1"></a>TrieNode<span class="op">*</span> newNode<span class="op">()</span> <span class="op">{</span></span>
<span id="cb334-13"><a href="#cb334-13" aria-hidden="true" tabindex="-1"></a>    TrieNode<span class="op">*</span> node <span class="op">=</span> calloc<span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>TrieNode<span class="op">));</span></span>
<span id="cb334-14"><a href="#cb334-14" aria-hidden="true" tabindex="-1"></a>    node<span class="op">-&gt;</span>isEnd <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb334-15"><a href="#cb334-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> node<span class="op">;</span></span>
<span id="cb334-16"><a href="#cb334-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb334-17"><a href="#cb334-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb334-18"><a href="#cb334-18" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> insert<span class="op">(</span>TrieNode <span class="op">*</span>root<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>word<span class="op">)</span> <span class="op">{</span></span>
<span id="cb334-19"><a href="#cb334-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> word<span class="op">[</span>i<span class="op">];</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb334-20"><a href="#cb334-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> idx <span class="op">=</span> word<span class="op">[</span>i<span class="op">]</span> <span class="op">-</span> <span class="ch">'a'</span><span class="op">;</span></span>
<span id="cb334-21"><a href="#cb334-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(!</span>root<span class="op">-&gt;</span>child<span class="op">[</span>idx<span class="op">])</span> root<span class="op">-&gt;</span>child<span class="op">[</span>idx<span class="op">]</span> <span class="op">=</span> newNode<span class="op">();</span></span>
<span id="cb334-22"><a href="#cb334-22" aria-hidden="true" tabindex="-1"></a>        root <span class="op">=</span> root<span class="op">-&gt;</span>child<span class="op">[</span>idx<span class="op">];</span></span>
<span id="cb334-23"><a href="#cb334-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb334-24"><a href="#cb334-24" aria-hidden="true" tabindex="-1"></a>    root<span class="op">-&gt;</span>isEnd <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb334-25"><a href="#cb334-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb334-26"><a href="#cb334-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb334-27"><a href="#cb334-27" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> startsWith<span class="op">(</span>TrieNode <span class="op">*</span>root<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>prefix<span class="op">)</span> <span class="op">{</span></span>
<span id="cb334-28"><a href="#cb334-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> prefix<span class="op">[</span>i<span class="op">];</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb334-29"><a href="#cb334-29" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> idx <span class="op">=</span> prefix<span class="op">[</span>i<span class="op">]</span> <span class="op">-</span> <span class="ch">'a'</span><span class="op">;</span></span>
<span id="cb334-30"><a href="#cb334-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(!</span>root<span class="op">-&gt;</span>child<span class="op">[</span>idx<span class="op">])</span> <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb334-31"><a href="#cb334-31" aria-hidden="true" tabindex="-1"></a>        root <span class="op">=</span> root<span class="op">-&gt;</span>child<span class="op">[</span>idx<span class="op">];</span></span>
<span id="cb334-32"><a href="#cb334-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb334-33"><a href="#cb334-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb334-34"><a href="#cb334-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb334-35"><a href="#cb334-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb334-36"><a href="#cb334-36" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb334-37"><a href="#cb334-37" aria-hidden="true" tabindex="-1"></a>    TrieNode <span class="op">*</span>root <span class="op">=</span> newNode<span class="op">();</span></span>
<span id="cb334-38"><a href="#cb334-38" aria-hidden="true" tabindex="-1"></a>    insert<span class="op">(</span>root<span class="op">,</span> <span class="st">"app"</span><span class="op">);</span></span>
<span id="cb334-39"><a href="#cb334-39" aria-hidden="true" tabindex="-1"></a>    insert<span class="op">(</span>root<span class="op">,</span> <span class="st">"apple"</span><span class="op">);</span></span>
<span id="cb334-40"><a href="#cb334-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Starts with 'ap': </span><span class="sc">%s\n</span><span class="st">"</span><span class="op">,</span> startsWith<span class="op">(</span>root<span class="op">,</span> <span class="st">"ap"</span><span class="op">)</span> <span class="op">?</span> <span class="st">"Yes"</span> <span class="op">:</span> <span class="st">"No"</span><span class="op">);</span></span>
<span id="cb334-41"><a href="#cb334-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Starts with 'ap': Yes</code></pre>
</section>
<section id="python-implementation-5" class="level4">
<h4 class="anchored" data-anchor-id="python-implementation-5">Python Implementation</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb336"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb336-1"><a href="#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> TrieNode:</span>
<span id="cb336-2"><a href="#cb336-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb336-3"><a href="#cb336-3" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.children <span class="op">=</span> {}</span>
<span id="cb336-4"><a href="#cb336-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.is_end <span class="op">=</span> <span class="va">False</span></span>
<span id="cb336-5"><a href="#cb336-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb336-6"><a href="#cb336-6" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Trie:</span>
<span id="cb336-7"><a href="#cb336-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb336-8"><a href="#cb336-8" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.root <span class="op">=</span> TrieNode()</span>
<span id="cb336-9"><a href="#cb336-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb336-10"><a href="#cb336-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> insert(<span class="va">self</span>, word):</span>
<span id="cb336-11"><a href="#cb336-11" aria-hidden="true" tabindex="-1"></a>        node <span class="op">=</span> <span class="va">self</span>.root</span>
<span id="cb336-12"><a href="#cb336-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> ch <span class="kw">in</span> word:</span>
<span id="cb336-13"><a href="#cb336-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> ch <span class="kw">not</span> <span class="kw">in</span> node.children:</span>
<span id="cb336-14"><a href="#cb336-14" aria-hidden="true" tabindex="-1"></a>                node.children[ch] <span class="op">=</span> TrieNode()</span>
<span id="cb336-15"><a href="#cb336-15" aria-hidden="true" tabindex="-1"></a>            node <span class="op">=</span> node.children[ch]</span>
<span id="cb336-16"><a href="#cb336-16" aria-hidden="true" tabindex="-1"></a>        node.is_end <span class="op">=</span> <span class="va">True</span></span>
<span id="cb336-17"><a href="#cb336-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb336-18"><a href="#cb336-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> starts_with(<span class="va">self</span>, prefix):</span>
<span id="cb336-19"><a href="#cb336-19" aria-hidden="true" tabindex="-1"></a>        node <span class="op">=</span> <span class="va">self</span>.root</span>
<span id="cb336-20"><a href="#cb336-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> ch <span class="kw">in</span> prefix:</span>
<span id="cb336-21"><a href="#cb336-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> ch <span class="kw">not</span> <span class="kw">in</span> node.children:</span>
<span id="cb336-22"><a href="#cb336-22" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb336-23"><a href="#cb336-23" aria-hidden="true" tabindex="-1"></a>            node <span class="op">=</span> node.children[ch]</span>
<span id="cb336-24"><a href="#cb336-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">True</span></span>
<span id="cb336-25"><a href="#cb336-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb336-26"><a href="#cb336-26" aria-hidden="true" tabindex="-1"></a>trie <span class="op">=</span> Trie()</span>
<span id="cb336-27"><a href="#cb336-27" aria-hidden="true" tabindex="-1"></a>trie.insert(<span class="st">"apple"</span>)</span>
<span id="cb336-28"><a href="#cb336-28" aria-hidden="true" tabindex="-1"></a>trie.insert(<span class="st">"app"</span>)</span>
<span id="cb336-29"><a href="#cb336-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(trie.starts_with(<span class="st">"ap"</span>))  <span class="co"># True</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="why-it-matters-97" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-97">Why It Matters</h3>
<ul>
<li>O(k) prefix lookup (k = prefix length)</li>
<li>Perfect for autocomplete, spell checkers, search engines</li>
<li>Stores shared prefixes efficiently</li>
<li>Can be extended for frequency, weights, or wildcard matching</li>
</ul>
</section>
<section id="try-it-yourself-97" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-97">Try It Yourself</h3>
<ol type="1">
<li>Insert [“app”, “apple”, “apply”, “apt”]</li>
<li>Search prefix “ap” → expect True</li>
<li>Search prefix “ba” → expect False</li>
<li>Add function to list all words starting with a prefix</li>
<li>Implement delete(word)</li>
<li>Add frequency count at each node</li>
<li>Support uppercase letters</li>
<li>Store end-of-word markers clearly</li>
<li>Compare memory use vs hash table</li>
<li>Extend to autocomplete feature returning top-N completions</li>
</ol>
</section>
<section id="test-cases-97" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-97">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Input</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Insert</td>
<td>“app”</td>
<td>Stored</td>
</tr>
<tr class="even">
<td>Insert</td>
<td>“apple”</td>
<td>Stored</td>
</tr>
<tr class="odd">
<td>startsWith</td>
<td>“ap”</td>
<td>True</td>
</tr>
<tr class="even">
<td>startsWith</td>
<td>“ba”</td>
<td>False</td>
</tr>
<tr class="odd">
<td>startsWith</td>
<td>“app”</td>
<td>True</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-97" class="level3">
<h3 class="anchored" data-anchor-id="complexity-97">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Time</th>
<th>Space</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Insert</td>
<td>O(k)</td>
<td>O(k)</td>
</tr>
<tr class="even">
<td>Search Prefix</td>
<td>O(k)</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>Space (n words)</td>
<td>O(sum of all characters)</td>
<td>,</td>
</tr>
</tbody>
</table>
<p>A Trie turns your data into a map of words, every branch is a path toward meaning, every prefix a shortcut to discovery.</p>
</section>
<section id="pattern-search-in-suffix-array" class="level3">
<h3 class="anchored" data-anchor-id="pattern-search-in-suffix-array">199 Pattern Search in Suffix Array</h3>
<p>A Suffix Array is a sorted list of all suffixes of a string. It enables fast substring searches, perfect for pattern matching in text editors, DNA analysis, and search engines.</p>
<p>By combining it with binary search, you can find whether a pattern appears in a string in O(m log n) time.</p>
</section>
<section id="what-problem-are-we-solving-98" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-98">What Problem Are We Solving?</h3>
<p>Given a large text <code>T</code> (like <code>"banana"</code>) and a pattern <code>P</code> (like <code>"ana"</code>), we want to quickly check if <code>P</code> exists in <code>T</code>. Naive search takes O(nm) (compare every position). A suffix array lets us search more efficiently by working on a pre-sorted list of suffixes.</p>
</section>
<section id="example-text-banana" class="level3">
<h3 class="anchored" data-anchor-id="example-text-banana">Example (Text = “banana”)</h3>
<p>List all suffixes and sort them:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Index</th>
<th>Suffix</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>banana</td>
</tr>
<tr class="even">
<td>1</td>
<td>anana</td>
</tr>
<tr class="odd">
<td>2</td>
<td>nana</td>
</tr>
<tr class="even">
<td>3</td>
<td>ana</td>
</tr>
<tr class="odd">
<td>4</td>
<td>na</td>
</tr>
<tr class="even">
<td>5</td>
<td>a</td>
</tr>
</tbody>
</table>
<p>Sorted suffixes:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>SA Index</th>
<th>Suffix</th>
<th>Original Position</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>5</td>
<td>a</td>
<td>5</td>
</tr>
<tr class="even">
<td>3</td>
<td>ana</td>
<td>3</td>
</tr>
<tr class="odd">
<td>1</td>
<td>anana</td>
<td>1</td>
</tr>
<tr class="even">
<td>0</td>
<td>banana</td>
<td>0</td>
</tr>
<tr class="odd">
<td>4</td>
<td>na</td>
<td>4</td>
</tr>
<tr class="even">
<td>2</td>
<td>nana</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>Now search <code>"ana"</code> using binary search over these sorted suffixes.</p>
</section>
<section id="how-it-works-plain-language-14" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-plain-language-14">How It Works (Plain Language)</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Build suffix array = all suffixes sorted lexicographically</td>
</tr>
<tr class="even">
<td>2</td>
<td>Use binary search to find lower/upper bounds for pattern</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Compare only <code>m</code> characters per comparison</td>
</tr>
<tr class="even">
<td>4</td>
<td>If found → pattern occurs at suffix index</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Otherwise → not in text</td>
</tr>
</tbody>
</table>
</section>
<section id="tiny-code-9" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-9">Tiny Code</h3>
<section id="c-implementation-simplified-3" class="level4">
<h4 class="anchored" data-anchor-id="c-implementation-simplified-3">C Implementation (Simplified)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb337"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb337-1"><a href="#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb337-2"><a href="#cb337-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb337-3"><a href="#cb337-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb337-4"><a href="#cb337-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb337-5"><a href="#cb337-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cmp<span class="op">(</span><span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>b<span class="op">,</span> <span class="dt">void</span> <span class="op">*</span>txt<span class="op">)</span> <span class="op">{</span></span>
<span id="cb337-6"><a href="#cb337-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="op">*(</span><span class="dt">int</span><span class="op">*)</span>a<span class="op">,</span> j <span class="op">=</span> <span class="op">*(</span><span class="dt">int</span><span class="op">*)</span>b<span class="op">;</span></span>
<span id="cb337-7"><a href="#cb337-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> strcmp<span class="op">((</span><span class="dt">char</span><span class="op">*)</span>txt <span class="op">+</span> i<span class="op">,</span> <span class="op">(</span><span class="dt">char</span><span class="op">*)</span>txt <span class="op">+</span> j<span class="op">);</span></span>
<span id="cb337-8"><a href="#cb337-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb337-9"><a href="#cb337-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb337-10"><a href="#cb337-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> build_suffix_array<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>txt<span class="op">,</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span> sa<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb337-11"><a href="#cb337-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> sa<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb337-12"><a href="#cb337-12" aria-hidden="true" tabindex="-1"></a>    qsort_r<span class="op">(</span>sa<span class="op">,</span> n<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">),</span> cmp<span class="op">,</span> txt<span class="op">);</span></span>
<span id="cb337-13"><a href="#cb337-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb337-14"><a href="#cb337-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb337-15"><a href="#cb337-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> binary_search_suffix<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>txt<span class="op">,</span> <span class="dt">int</span> sa<span class="op">[],</span> <span class="dt">int</span> n<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>pat<span class="op">)</span> <span class="op">{</span></span>
<span id="cb337-16"><a href="#cb337-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> l <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> r <span class="op">=</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb337-17"><a href="#cb337-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>l <span class="op">&lt;=</span> r<span class="op">)</span> <span class="op">{</span></span>
<span id="cb337-18"><a href="#cb337-18" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> <span class="op">(</span>l <span class="op">+</span> r<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb337-19"><a href="#cb337-19" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> res <span class="op">=</span> strncmp<span class="op">(</span>pat<span class="op">,</span> txt <span class="op">+</span> sa<span class="op">[</span>mid<span class="op">],</span> strlen<span class="op">(</span>pat<span class="op">));</span></span>
<span id="cb337-20"><a href="#cb337-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>res <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> sa<span class="op">[</span>mid<span class="op">];</span></span>
<span id="cb337-21"><a href="#cb337-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>res <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span> r <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb337-22"><a href="#cb337-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> l <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb337-23"><a href="#cb337-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb337-24"><a href="#cb337-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb337-25"><a href="#cb337-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb337-26"><a href="#cb337-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb337-27"><a href="#cb337-27" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb337-28"><a href="#cb337-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> txt<span class="op">[]</span> <span class="op">=</span> <span class="st">"banana"</span><span class="op">;</span></span>
<span id="cb337-29"><a href="#cb337-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> strlen<span class="op">(</span>txt<span class="op">),</span> sa<span class="op">[</span>n<span class="op">];</span></span>
<span id="cb337-30"><a href="#cb337-30" aria-hidden="true" tabindex="-1"></a>    build_suffix_array<span class="op">(</span>txt<span class="op">,</span> n<span class="op">,</span> sa<span class="op">);</span></span>
<span id="cb337-31"><a href="#cb337-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> pat<span class="op">[]</span> <span class="op">=</span> <span class="st">"ana"</span><span class="op">;</span></span>
<span id="cb337-32"><a href="#cb337-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pos <span class="op">=</span> binary_search_suffix<span class="op">(</span>txt<span class="op">,</span> sa<span class="op">,</span> n<span class="op">,</span> pat<span class="op">);</span></span>
<span id="cb337-33"><a href="#cb337-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>pos <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">)</span> printf<span class="op">(</span><span class="st">"Pattern found at </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> pos<span class="op">);</span></span>
<span id="cb337-34"><a href="#cb337-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> printf<span class="op">(</span><span class="st">"Pattern not found</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb337-35"><a href="#cb337-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Pattern found at 1</code></pre>
</section>
<section id="python-implementation-6" class="level4">
<h4 class="anchored" data-anchor-id="python-implementation-6">Python Implementation</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb339"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb339-1"><a href="#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> build_suffix_array(s):</span>
<span id="cb339-2"><a href="#cb339-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sorted</span>(<span class="bu">range</span>(<span class="bu">len</span>(s)), key<span class="op">=</span><span class="kw">lambda</span> i: s[i:])</span>
<span id="cb339-3"><a href="#cb339-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb339-4"><a href="#cb339-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> search(s, sa, pat):</span>
<span id="cb339-5"><a href="#cb339-5" aria-hidden="true" tabindex="-1"></a>    l, r <span class="op">=</span> <span class="dv">0</span>, <span class="bu">len</span>(sa) <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb339-6"><a href="#cb339-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> l <span class="op">&lt;=</span> r:</span>
<span id="cb339-7"><a href="#cb339-7" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (l <span class="op">+</span> r) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb339-8"><a href="#cb339-8" aria-hidden="true" tabindex="-1"></a>        suffix <span class="op">=</span> s[sa[mid]:]</span>
<span id="cb339-9"><a href="#cb339-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> suffix.startswith(pat):</span>
<span id="cb339-10"><a href="#cb339-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> sa[mid]</span>
<span id="cb339-11"><a href="#cb339-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> suffix <span class="op">&lt;</span> pat:</span>
<span id="cb339-12"><a href="#cb339-12" aria-hidden="true" tabindex="-1"></a>            l <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb339-13"><a href="#cb339-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb339-14"><a href="#cb339-14" aria-hidden="true" tabindex="-1"></a>            r <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb339-15"><a href="#cb339-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb339-16"><a href="#cb339-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb339-17"><a href="#cb339-17" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">"banana"</span></span>
<span id="cb339-18"><a href="#cb339-18" aria-hidden="true" tabindex="-1"></a>sa <span class="op">=</span> build_suffix_array(s)</span>
<span id="cb339-19"><a href="#cb339-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Suffix Array:"</span>, sa)</span>
<span id="cb339-20"><a href="#cb339-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Search 'ana':"</span>, search(s, sa, <span class="st">"ana"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Suffix Array: [5, 3, 1, 0, 4, 2]
Search 'ana': 1</code></pre>
</section>
</section>
<section id="why-it-matters-98" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-98">Why It Matters</h3>
<ul>
<li>Substring search in O(m log n)</li>
<li>Space-efficient alternative to suffix trees</li>
<li>Great for full-text search, DNA sequencing, plagiarism detection</li>
<li>Can be extended with LCP array for longest common prefix queries</li>
</ul>
</section>
<section id="try-it-yourself-98" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-98">Try It Yourself</h3>
<ol type="1">
<li>Build suffix array for <code>"banana"</code></li>
<li>Search <code>"na"</code>, <code>"ban"</code>, <code>"apple"</code></li>
<li>Print all suffixes for visualization</li>
<li>Add LCP array for faster repeated queries</li>
<li>Compare with KMP algorithm speed</li>
<li>Use binary search manually to trace comparisons</li>
<li>Extend to count occurrences of pattern</li>
<li>Try longer text (e.g.&nbsp;“mississippi”)</li>
<li>Implement in-place quicksort for SA</li>
<li>Benchmark vs.&nbsp;naive substring search</li>
</ol>
</section>
<section id="test-cases-98" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-98">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Text</th>
<th>Pattern</th>
<th>Expected Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>“banana”</td>
<td>“ana”</td>
<td>Found at 1</td>
</tr>
<tr class="even">
<td>“banana”</td>
<td>“ban”</td>
<td>Found at 0</td>
</tr>
<tr class="odd">
<td>“banana”</td>
<td>“na”</td>
<td>Found at 2 or 4</td>
</tr>
<tr class="even">
<td>“banana”</td>
<td>“cat”</td>
<td>Not Found</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-98" class="level3">
<h3 class="anchored" data-anchor-id="complexity-98">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Time</th>
<th>Space</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Build SA</td>
<td>O(n log n)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>Search</td>
<td>O(m log n)</td>
<td>O(1)</td>
</tr>
</tbody>
</table>
<p>A Suffix Array is like a library index, once sorted, every search becomes as simple as flipping to the right page.</p>
</section>
<section id="search-in-infinite-array" class="level3">
<h3 class="anchored" data-anchor-id="search-in-infinite-array">200 Search in Infinite Array</h3>
<p>A Search in Infinite Array (or unbounded array) is a technique for finding an element in a sorted list of unknown length. You can’t directly use binary search because you don’t know <code>n</code>, so you must first find a search bound, then perform binary search within it.</p>
<p>This idea is crucial for systems where data is streamed or dynamically sized, like logs, unrolled lists, or file scans.</p>
</section>
<section id="what-problem-are-we-solving-99" class="level3">
<h3 class="anchored" data-anchor-id="what-problem-are-we-solving-99">What Problem Are We Solving?</h3>
<p>If you’re given an array-like interface (like <code>get(i)</code>), but no size <code>n</code>, how do you find <code>target</code> efficiently? You can’t do linear search, it could be infinite. The trick: exponential search, grow bounds exponentially until you pass the target, then apply binary search in that window.</p>
</section>
<section id="example-91" class="level3">
<h3 class="anchored" data-anchor-id="example-91">Example</h3>
<p>Given sorted sequence:</p>
<pre><code>$$3, 5, 9, 12, 17, 23, 31, 45, 67, 88, 100, ...]</code></pre>
<p>Search for <code>31</code>:</p>
<ol type="1">
<li><p>Start with <code>low = 0, high = 1</code></p></li>
<li><p>While <code>arr[high] &lt; 31</code>, double <code>high</code></p>
<pre><code>high = 1 → 2 → 4 → 8</code></pre></li>
<li><p>Now <code>arr[8] = 67 &gt; 31</code>, so search range is <code>[4, 8]</code></p></li>
<li><p>Perform binary search in <code>[4, 8]</code></p></li>
<li><p>Found at index 6</p></li>
</ol>
</section>
<section id="how-it-works-plain-language-15" class="level3">
<h3 class="anchored" data-anchor-id="how-it-works-plain-language-15">How It Works (Plain Language)</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Step</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Start with <code>low = 0</code>, <code>high = 1</code></td>
</tr>
<tr class="even">
<td>2</td>
<td>While <code>arr[high] &lt; target</code>, set <code>low = high</code>, <code>high *= 2</code></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Now the target lies between <code>low</code> and <code>high</code></td>
</tr>
<tr class="even">
<td>4</td>
<td>Perform standard binary search in <code>[low, high]</code></td>
</tr>
<tr class="odd">
<td>5</td>
<td>Return index if found, else -1</td>
</tr>
</tbody>
</table>
</section>
<section id="tiny-code-10" class="level3">
<h3 class="anchored" data-anchor-id="tiny-code-10">Tiny Code</h3>
<section id="c-implementation-simulated-infinite-array" class="level4">
<h4 class="anchored" data-anchor-id="c-implementation-simulated-infinite-array">C Implementation (Simulated Infinite Array)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb343"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb343-1"><a href="#cb343-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb343-2"><a href="#cb343-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb343-3"><a href="#cb343-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> get<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb343-4"><a href="#cb343-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>i <span class="op">&gt;=</span> size<span class="op">)</span> <span class="cf">return</span> <span class="fl">1e9</span><span class="op">;</span> <span class="co">// simulate infinity</span></span>
<span id="cb343-5"><a href="#cb343-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb343-6"><a href="#cb343-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb343-7"><a href="#cb343-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb343-8"><a href="#cb343-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> binary_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> low<span class="op">,</span> <span class="dt">int</span> high<span class="op">,</span> <span class="dt">int</span> target<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb343-9"><a href="#cb343-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>low <span class="op">&lt;=</span> high<span class="op">)</span> <span class="op">{</span></span>
<span id="cb343-10"><a href="#cb343-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> low <span class="op">+</span> <span class="op">(</span>high <span class="op">-</span> low<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb343-11"><a href="#cb343-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> val <span class="op">=</span> get<span class="op">(</span>arr<span class="op">,</span> size<span class="op">,</span> mid<span class="op">);</span></span>
<span id="cb343-12"><a href="#cb343-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>val <span class="op">==</span> target<span class="op">)</span> <span class="cf">return</span> mid<span class="op">;</span></span>
<span id="cb343-13"><a href="#cb343-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>val <span class="op">&lt;</span> target<span class="op">)</span> low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb343-14"><a href="#cb343-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb343-15"><a href="#cb343-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb343-16"><a href="#cb343-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb343-17"><a href="#cb343-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb343-18"><a href="#cb343-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb343-19"><a href="#cb343-19" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> search_infinite<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb343-20"><a href="#cb343-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> low <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> high <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb343-21"><a href="#cb343-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>get<span class="op">(</span>arr<span class="op">,</span> size<span class="op">,</span> high<span class="op">)</span> <span class="op">&lt;</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb343-22"><a href="#cb343-22" aria-hidden="true" tabindex="-1"></a>        low <span class="op">=</span> high<span class="op">;</span></span>
<span id="cb343-23"><a href="#cb343-23" aria-hidden="true" tabindex="-1"></a>        high <span class="op">*=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb343-24"><a href="#cb343-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb343-25"><a href="#cb343-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> binary_search<span class="op">(</span>arr<span class="op">,</span> low<span class="op">,</span> high<span class="op">,</span> target<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb343-26"><a href="#cb343-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb343-27"><a href="#cb343-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb343-28"><a href="#cb343-28" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb343-29"><a href="#cb343-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">17</span><span class="op">,</span> <span class="dv">23</span><span class="op">,</span> <span class="dv">31</span><span class="op">,</span> <span class="dv">45</span><span class="op">,</span> <span class="dv">67</span><span class="op">,</span> <span class="dv">88</span><span class="op">,</span> <span class="dv">100</span><span class="op">};</span></span>
<span id="cb343-30"><a href="#cb343-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb343-31"><a href="#cb343-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx <span class="op">=</span> search_infinite<span class="op">(</span>arr<span class="op">,</span> size<span class="op">,</span> <span class="dv">31</span><span class="op">);</span></span>
<span id="cb343-32"><a href="#cb343-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"Found at index </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb343-33"><a href="#cb343-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index 6</code></pre>
</section>
<section id="python-implementation-7" class="level4">
<h4 class="anchored" data-anchor-id="python-implementation-7">Python Implementation</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb345"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb345-1"><a href="#cb345-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get(arr, i):</span>
<span id="cb345-2"><a href="#cb345-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr[i] <span class="cf">if</span> i <span class="op">&lt;</span> <span class="bu">len</span>(arr) <span class="cf">else</span> <span class="bu">float</span>(<span class="st">'inf'</span>)</span>
<span id="cb345-3"><a href="#cb345-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb345-4"><a href="#cb345-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> binary_search(arr, low, high, target):</span>
<span id="cb345-5"><a href="#cb345-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> low <span class="op">&lt;=</span> high:</span>
<span id="cb345-6"><a href="#cb345-6" aria-hidden="true" tabindex="-1"></a>        mid <span class="op">=</span> (low <span class="op">+</span> high) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb345-7"><a href="#cb345-7" aria-hidden="true" tabindex="-1"></a>        val <span class="op">=</span> get(arr, mid)</span>
<span id="cb345-8"><a href="#cb345-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> val <span class="op">==</span> target:</span>
<span id="cb345-9"><a href="#cb345-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid</span>
<span id="cb345-10"><a href="#cb345-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> val <span class="op">&lt;</span> target:</span>
<span id="cb345-11"><a href="#cb345-11" aria-hidden="true" tabindex="-1"></a>            low <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb345-12"><a href="#cb345-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb345-13"><a href="#cb345-13" aria-hidden="true" tabindex="-1"></a>            high <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb345-14"><a href="#cb345-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb345-15"><a href="#cb345-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb345-16"><a href="#cb345-16" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> search_infinite(arr, target):</span>
<span id="cb345-17"><a href="#cb345-17" aria-hidden="true" tabindex="-1"></a>    low, high <span class="op">=</span> <span class="dv">0</span>, <span class="dv">1</span></span>
<span id="cb345-18"><a href="#cb345-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> get(arr, high) <span class="op">&lt;</span> target:</span>
<span id="cb345-19"><a href="#cb345-19" aria-hidden="true" tabindex="-1"></a>        low <span class="op">=</span> high</span>
<span id="cb345-20"><a href="#cb345-20" aria-hidden="true" tabindex="-1"></a>        high <span class="op">*=</span> <span class="dv">2</span></span>
<span id="cb345-21"><a href="#cb345-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> binary_search(arr, low, high, target)</span>
<span id="cb345-22"><a href="#cb345-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb345-23"><a href="#cb345-23" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">12</span>, <span class="dv">17</span>, <span class="dv">23</span>, <span class="dv">31</span>, <span class="dv">45</span>, <span class="dv">67</span>, <span class="dv">88</span>, <span class="dv">100</span>]</span>
<span id="cb345-24"><a href="#cb345-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Found at index:"</span>, search_infinite(arr, <span class="dv">31</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Output:</p>
<pre><code>Found at index: 6</code></pre>
</section>
</section>
<section id="why-it-matters-99" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters-99">Why It Matters</h3>
<ul>
<li>Works with streams, linked storage, APIs, or infinite generators</li>
<li>Avoids full traversal, logarithmic growth</li>
<li>Combines exploration (finding bounds) with binary search (exact match)</li>
<li>Ideal for search engines, log readers, cloud data paging</li>
</ul>
</section>
<section id="try-it-yourself-99" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself-99">Try It Yourself</h3>
<ol type="1">
<li>Search <code>[1, 3, 5, 9, 12, 20]</code> for <code>9</code></li>
<li>Search <code>[2, 4, 8, 16, 32, 64]</code> for <code>33</code> (not found)</li>
<li>Count number of <code>get()</code> calls, compare to linear search</li>
<li>Try <code>target</code> smaller than first element</li>
<li>Handle edge cases: empty array, target &gt; max</li>
<li>Simulate infinite stream with <code>get()</code></li>
<li>Replace doubling with <code>high = low + step</code> for adaptive growth</li>
<li>Visualize search window expansion</li>
<li>Generalize to descending arrays</li>
<li>Compare performance vs naive scan</li>
</ol>
</section>
<section id="test-cases-99" class="level3">
<h3 class="anchored" data-anchor-id="test-cases-99">Test Cases</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Input Array</th>
<th>Target</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>[3, 5, 9, 12, 17, 23, 31, 45]</td>
<td>31</td>
<td>6</td>
</tr>
<tr class="even">
<td>[3, 5, 9, 12, 17, 23, 31, 45]</td>
<td>4</td>
<td>-1</td>
</tr>
<tr class="odd">
<td>[1, 2, 4, 8, 16]</td>
<td>8</td>
<td>3</td>
</tr>
<tr class="even">
<td>[10, 20, 30]</td>
<td>40</td>
<td>-1</td>
</tr>
</tbody>
</table>
</section>
<section id="complexity-99" class="level3">
<h3 class="anchored" data-anchor-id="complexity-99">Complexity</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Time</th>
<th>Space</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Search</td>
<td>O(log p)</td>
<td>O(1)</td>
</tr>
</tbody>
</table>
<p><em>p</em> = position of target in array</p>
<p>Searching an infinite array feels like navigating a foggy road, first find your headlights (bounds), then drive straight to the target.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../books/en-us/list-1.html" class="pagination-link" aria-label="Chapter 1. Foundatmemtions of Algorithms">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">Chapter 1. Foundatmemtions of Algorithms</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../books/en-us/list-3.html" class="pagination-link" aria-label="Chapter 3. Data Structure in Action">
        <span class="nav-page-text"><span class="chapter-title">Chapter 3. Data Structure in Action</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>